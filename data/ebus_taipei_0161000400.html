
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492597</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0161000400">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0161000400">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0161000400" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0161000400" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0161000400" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0161000400',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="nj108h6nk1dnvWgw_v-4MMNUhbKn2O2e6LC7-6tRm4MuMv0Itc-PzTQMDIAKwYZt0U0g0UB1n_qmrWgEZNNuUT9skPU1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
                                <span class="stationlist-title">松江新生幹線 ( 公車雙向轉乘優惠) </span> 

                        <a href="../EBus/VsSimpleMap?routeid=0161000400" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0161000400" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">青潭 - 復興北村</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0530 - 2230 <br>
                        [假日] 0530 - 2230
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 尖峰:4分至6分<br/>離峰:5分至10分<br>
[假日]<br /> 尖峰:10分至15分<br/>離峰:10分至15分<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">滬江中學-捷運公館站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">兩段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">新店客運新店站:02-2217-1448</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 復興北村</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 青潭</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">青潭停車場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201740" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.951049" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.5450033" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">青潭(新烏)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.951217" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.546789" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">青潭(北宜路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.952626" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5470007" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">青潭一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95305" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5428729" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">新店國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315203100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95347" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5405279" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">文山國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315200800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955388" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.539103" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">碧潭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315203300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956689" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.538524" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">捷運新店站(北新路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958891" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.538126" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">碧潭橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314701600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.963158" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53982" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">檳榔路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314702000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.965001" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5405875" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">捷運新店區公所站(北新)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967638" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5416161" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">七張(北新路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.971513" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542921" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">捷運七張站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9753" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5430453" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">新店郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.978161" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542795" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">大坪林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.981232" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5418387" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">捷運大坪林站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.983344" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5413983" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">滬江中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167400300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.99113" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54025" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">捷運景美站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167000200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.992366" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5407616" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">財政園區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167000000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.995452" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5413365" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">萬隆</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167000400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999316" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5402001" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">捷運萬隆站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167000300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.001386" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5392576" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">武功國小(羅斯福)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1168100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003273" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5387822" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">師大分部</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167700000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00767" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5384703" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">捷運公館站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1009000100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.013993" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.535185" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">臺大</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1067300800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.018029" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53375" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">臺大綜合體育館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066000100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.021405" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5343881" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">龍安國小(公務人力發展學院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066000200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02527" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5349231" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">金華新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065000200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03048" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53384" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">信義新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065000400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.033205" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5329027" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">仁愛新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065100000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037796" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5328703" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">捷運忠孝新生站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065200100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.041989" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5328758" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">光華商場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066600200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53299" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">長安松江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045600000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.048273" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.532997" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">捷運松江南京站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048600100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051799" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.533087" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">長春松江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045900300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054536" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5331386" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 36</span>
                                    <span class="auto-list-stationlist-place">捷運行天宮站(松江路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048300200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.057613" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5331766" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 37</span>
                                    <span class="auto-list-stationlist-place">行天宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047200500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.063292" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.533394" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 38</span>
                                    <span class="auto-list-stationlist-place">新生公園(林安泰)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048200400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.06718" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5333635" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 39</span>
                                    <span class="auto-list-stationlist-place">臺北漁市</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047200421" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.068066" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537162" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 40</span>
                                    <span class="auto-list-stationlist-place">第二果菜市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047300220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.068039" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.538733" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 41</span>
                                    <span class="auto-list-stationlist-place">下埤里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047600021" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.067849" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542007" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 42</span>
                                    <span class="auto-list-stationlist-place">復興北村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047600640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.064978" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5441547" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">五常街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1054200040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.063693" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5440531" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">民權龍江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047600460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062395" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5412752" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">民權建國路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1047700060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062483" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53746" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">民權松江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048300060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062524" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5334388" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">捷運行天宮站(松江路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046800240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.060535" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5331063" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">長春松江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048500040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.055006" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.533011" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">捷運松江南京站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045700440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052281" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5329812" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">長安松江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045500140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.048648" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5329145" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">光華商場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066600240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.044608" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5328606" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">捷運忠孝新生站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040288" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.532693" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">仁愛新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065100040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038512" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5326821" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">信義新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065600340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034036" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5325798" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">金華新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1065000240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03087" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53346" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">和平新生路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1064400040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02639" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53478" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">龍安國小(公務人力發展學院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066000240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024664" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5345198" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">臺大綜合體育館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066000140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02155" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5341136" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">臺大</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1067300840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.018239" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.533435" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">捷運公館站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1009000140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.014321" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.534722" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">師大分部</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167700041" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00814" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.538064" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">武功國小(羅斯福)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167600140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003411" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5384705" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">捷運萬隆站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167800040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.001862" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5387951" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">萬隆</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167000440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999395" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5398039" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">財政園區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167400040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.995846" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54099" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">捷運景美站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167400140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.993448" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5407986" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">滬江中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1167400340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.99098" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53977" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">捷運大坪林站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.983352" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5411399" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">大坪林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.980858" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541691" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">新店郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.978011" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542478" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">捷運七張站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301141" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974123" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54279" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">七張(北新路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97141" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5426501" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">捷運新店區公所站(北新)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967768" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541385" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">檳榔路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314702040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.965168" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5404224" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">碧潭橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314701640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.962441" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.539199" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">捷運新店站(北新路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958291" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537957" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">碧潭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314701540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95681" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5381708" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 36</span>
                                    <span class="auto-list-stationlist-place">文山國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315200840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9555" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.538684" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 37</span>
                                    <span class="auto-list-stationlist-place">新店國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315203140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.953258" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5403861" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 38</span>
                                    <span class="auto-list-stationlist-place">青潭一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95284" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54278" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 39</span>
                                    <span class="auto-list-stationlist-place">南青宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315202320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95269" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54561" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 40</span>
                                    <span class="auto-list-stationlist-place">青潭(新烏)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95129" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54646" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 41</span>
                                    <span class="auto-list-stationlist-place">青潭停車場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315201740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.951049" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5450033" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0161000400";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 42;
        var existBackNum = 41;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0161000400',
                        url: './StopStatusRecent3OfRoute?routeid=0161000400&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0161000400',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0161000400',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0161000400');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0161000400","Name":"松江新生幹線","BeginStop":"青潭","GoDirStops":[{"UniStopId":"2315201740","Name":"青潭停車場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5450033,"Latitude":24.951049,"PublicId":"2315201740"},{"UniStopId":"2315201600","Name":"青潭(新烏)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.546789,"Latitude":24.951217,"PublicId":"2315201600"},{"UniStopId":"2315201500","Name":"青潭(北宜路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5470007,"Latitude":24.952626,"PublicId":"2315201500"},{"UniStopId":"2315201460","Name":"青潭一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5428729,"Latitude":24.95305,"PublicId":"2315201460"},{"UniStopId":"2315203100","Name":"新店國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5405279,"Latitude":24.95347,"PublicId":"2315203100"},{"UniStopId":"2315200800","Name":"文山國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.539103,"Latitude":24.955388,"PublicId":"2315200800"},{"UniStopId":"2315203300","Name":"碧潭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.538524,"Latitude":24.956689,"PublicId":"2315203300"},{"UniStopId":"2314700800","Name":"捷運新店站(北新路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.538126,"Latitude":24.958891,"PublicId":"2314700800"},{"UniStopId":"2314701600","Name":"碧潭橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53982,"Latitude":24.963158,"PublicId":"2314701600"},{"UniStopId":"2314702000","Name":"檳榔路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5405875,"Latitude":24.965001,"PublicId":"2314702000"},{"UniStopId":"2314700900","Name":"捷運新店區公所站(北新)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5416161,"Latitude":24.967638,"PublicId":"2314700900"},{"UniStopId":"2314300000","Name":"七張(北新路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542921,"Latitude":24.971513,"PublicId":"2314300000"},{"UniStopId":"2314301100","Name":"捷運七張站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5430453,"Latitude":24.9753,"PublicId":"2314301100"},{"UniStopId":"2314301700","Name":"新店郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542795,"Latitude":24.978161,"PublicId":"2314301700"},{"UniStopId":"2314300100","Name":"大坪林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5418387,"Latitude":24.981232,"PublicId":"2314300100"},{"UniStopId":"2314301200","Name":"捷運大坪林站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5413983,"Latitude":24.983344,"PublicId":"2314301200"},{"UniStopId":"1167400300","Name":"滬江中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54025,"Latitude":24.99113,"PublicId":"1167400300"},{"UniStopId":"1167000200","Name":"捷運景美站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5407616,"Latitude":24.992366,"PublicId":"1167000200"},{"UniStopId":"1167000000","Name":"財政園區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5413365,"Latitude":24.995452,"PublicId":"1167000000"},{"UniStopId":"1167000400","Name":"萬隆","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5402001,"Latitude":24.999316,"PublicId":"1167000400"},{"UniStopId":"1167000300","Name":"捷運萬隆站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5392576,"Latitude":25.001386,"PublicId":"1167000300"},{"UniStopId":"1168100100","Name":"武功國小(羅斯福)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5387822,"Latitude":25.003273,"PublicId":"1168100100"},{"UniStopId":"1167700000","Name":"師大分部","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5384703,"Latitude":25.00767,"PublicId":"1167700000"},{"UniStopId":"1009000100","Name":"捷運公館站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.535185,"Latitude":25.013993,"PublicId":"1009000100"},{"UniStopId":"1067300800","Name":"臺大","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53375,"Latitude":25.018029,"PublicId":"1067300800"},{"UniStopId":"1066000100","Name":"臺大綜合體育館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5343881,"Latitude":25.021405,"PublicId":"1066000100"},{"UniStopId":"1066000200","Name":"龍安國小(公務人力發展學院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5349231,"Latitude":25.02527,"PublicId":"1066000200"},{"UniStopId":"1065000200","Name":"金華新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53384,"Latitude":25.03048,"PublicId":"1065000200"},{"UniStopId":"1065000400","Name":"信義新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5329027,"Latitude":25.033205,"PublicId":"1065000400"},{"UniStopId":"1065100000","Name":"仁愛新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5328703,"Latitude":25.037796,"PublicId":"1065100000"},{"UniStopId":"1065200100","Name":"捷運忠孝新生站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5328758,"Latitude":25.041989,"PublicId":"1065200100"},{"UniStopId":"1066600200","Name":"光華商場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53299,"Latitude":25.045,"PublicId":"1066600200"},{"UniStopId":"1045600000","Name":"長安松江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.532997,"Latitude":25.048273,"PublicId":"1045600000"},{"UniStopId":"1048600100","Name":"捷運松江南京站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.533087,"Latitude":25.051799,"PublicId":"1048600100"},{"UniStopId":"1045900300","Name":"長春松江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5331386,"Latitude":25.054536,"PublicId":"1045900300"},{"UniStopId":"1048300200","Name":"捷運行天宮站(松江路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5331766,"Latitude":25.057613,"PublicId":"1048300200"},{"UniStopId":"1047200500","Name":"行天宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.533394,"Latitude":25.063292,"PublicId":"1047200500"},{"UniStopId":"1048200400","Name":"新生公園(林安泰)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5333635,"Latitude":25.06718,"PublicId":"1048200400"},{"UniStopId":"1047200421","Name":"臺北漁市","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537162,"Latitude":25.068066,"PublicId":"1047200421"},{"UniStopId":"1047300220","Name":"第二果菜市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.538733,"Latitude":25.068039,"PublicId":"1047300220"},{"UniStopId":"1047600021","Name":"下埤里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542007,"Latitude":25.067849,"PublicId":"1047600021"},{"UniStopId":"1047600640","Name":"復興北村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5441547,"Latitude":25.064978,"PublicId":"1047600640"}],"LastStop":"復興北村","BackDirStops":[{"UniStopId":"1054200040","Name":"五常街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5440531,"Latitude":25.063693,"PublicId":"1054200040"},{"UniStopId":"1047600460","Name":"民權龍江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5412752,"Latitude":25.062395,"PublicId":"1047600460"},{"UniStopId":"1047700060","Name":"民權建國路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53746,"Latitude":25.062483,"PublicId":"1047700060"},{"UniStopId":"1048300060","Name":"民權松江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5334388,"Latitude":25.062524,"PublicId":"1048300060"},{"UniStopId":"1046800240","Name":"捷運行天宮站(松江路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5331063,"Latitude":25.060535,"PublicId":"1046800240"},{"UniStopId":"1048500040","Name":"長春松江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.533011,"Latitude":25.055006,"PublicId":"1048500040"},{"UniStopId":"1045700440","Name":"捷運松江南京站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5329812,"Latitude":25.052281,"PublicId":"1045700440"},{"UniStopId":"1045500140","Name":"長安松江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5329145,"Latitude":25.048648,"PublicId":"1045500140"},{"UniStopId":"1066600240","Name":"光華商場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5328606,"Latitude":25.044608,"PublicId":"1066600240"},{"UniStopId":"1065200140","Name":"捷運忠孝新生站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.532693,"Latitude":25.040288,"PublicId":"1065200140"},{"UniStopId":"1065100040","Name":"仁愛新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5326821,"Latitude":25.038512,"PublicId":"1065100040"},{"UniStopId":"1065600340","Name":"信義新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5325798,"Latitude":25.034036,"PublicId":"1065600340"},{"UniStopId":"1065000240","Name":"金華新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53346,"Latitude":25.03087,"PublicId":"1065000240"},{"UniStopId":"1064400040","Name":"和平新生路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53478,"Latitude":25.02639,"PublicId":"1064400040"},{"UniStopId":"1066000240","Name":"龍安國小(公務人力發展學院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5345198,"Latitude":25.024664,"PublicId":"1066000240"},{"UniStopId":"1066000140","Name":"臺大綜合體育館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5341136,"Latitude":25.02155,"PublicId":"1066000140"},{"UniStopId":"1067300840","Name":"臺大","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.533435,"Latitude":25.018239,"PublicId":"1067300840"},{"UniStopId":"1009000140","Name":"捷運公館站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.534722,"Latitude":25.014321,"PublicId":"1009000140"},{"UniStopId":"1167700041","Name":"師大分部","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.538064,"Latitude":25.00814,"PublicId":"1167700041"},{"UniStopId":"1167600140","Name":"武功國小(羅斯福)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5384705,"Latitude":25.003411,"PublicId":"1167600140"},{"UniStopId":"1167800040","Name":"捷運萬隆站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5387951,"Latitude":25.001862,"PublicId":"1167800040"},{"UniStopId":"1167000440","Name":"萬隆","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5398039,"Latitude":24.999395,"PublicId":"1167000440"},{"UniStopId":"1167400040","Name":"財政園區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54099,"Latitude":24.995846,"PublicId":"1167400040"},{"UniStopId":"1167400140","Name":"捷運景美站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5407986,"Latitude":24.993448,"PublicId":"1167400140"},{"UniStopId":"1167400340","Name":"滬江中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53977,"Latitude":24.99098,"PublicId":"1167400340"},{"UniStopId":"2314301240","Name":"捷運大坪林站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5411399,"Latitude":24.983352,"PublicId":"2314301240"},{"UniStopId":"2314300140","Name":"大坪林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541691,"Latitude":24.980858,"PublicId":"2314300140"},{"UniStopId":"2314301740","Name":"新店郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542478,"Latitude":24.978011,"PublicId":"2314301740"},{"UniStopId":"2314301141","Name":"捷運七張站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54279,"Latitude":24.974123,"PublicId":"2314301141"},{"UniStopId":"2314300040","Name":"七張(北新路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5426501,"Latitude":24.97141,"PublicId":"2314300040"},{"UniStopId":"2314700940","Name":"捷運新店區公所站(北新)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541385,"Latitude":24.967768,"PublicId":"2314700940"},{"UniStopId":"2314702040","Name":"檳榔路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5404224,"Latitude":24.965168,"PublicId":"2314702040"},{"UniStopId":"2314701640","Name":"碧潭橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.539199,"Latitude":24.962441,"PublicId":"2314701640"},{"UniStopId":"2314700840","Name":"捷運新店站(北新路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537957,"Latitude":24.958291,"PublicId":"2314700840"},{"UniStopId":"2314701540","Name":"碧潭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5381708,"Latitude":24.95681,"PublicId":"2314701540"},{"UniStopId":"2315200840","Name":"文山國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.538684,"Latitude":24.9555,"PublicId":"2315200840"},{"UniStopId":"2315203140","Name":"新店國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5403861,"Latitude":24.953258,"PublicId":"2315203140"},{"UniStopId":"2315201420","Name":"青潭一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54278,"Latitude":24.95284,"PublicId":"2315201420"},{"UniStopId":"2315202320","Name":"南青宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54561,"Latitude":24.95269,"PublicId":"2315202320"},{"UniStopId":"2315201640","Name":"青潭(新烏)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54646,"Latitude":24.95129,"PublicId":"2315201640"},{"UniStopId":"2315201740","Name":"青潭停車場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5450033,"Latitude":24.951049,"PublicId":"2315201740"}],"RouteMapUrl":"../MapOverview?nid=0161000400","RouteTracks":null,"StopDirection":null,"TicketPrice":"兩段票","BusTimeDesc":"0530 - 2230","HeadwayDesc":"尖峰:4分至6分;離峰:5分至10分","HolidayBusTimeDesc":"0530 - 2230","HolidayHeadwayDesc":"尖峰:10分至15分;離峰:10分至15分","RouteNote":"","SegmentBuffer":"滬江中學-捷運公館站","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"新店客運新店站:02-2217-1448","aliasName":null,"aliasEname":null,"memo":"公車雙向轉乘優惠","memoEn":"Discount while transferring between from/to another buses","showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.544989932608 24.9510546930835, 121.545101800265 24.951067330729, 121.545182481556 24.9509628180191, 121.545565932608 24.950557596104, 121.545708370658 24.950336749878, 121.545781966304 24.9500825961512, 121.545819157639 24.9499808424856, 121.545855888448 24.9499127570037, 121.545984235873 24.9498906345912, 121.546080067392 24.9499228269138, 121.546155966304 24.9500052115395, 121.546185 24.9500788846937, 121.546269724386 24.9501839801596, 121.546214564608 24.9504871505456, 121.546195 24.950597442508, 121.546279315115 24.9507905098115, 121.546499831519 24.9510083651215, 121.547656471747 24.9520561336025, 121.546984326076 24.9526093646971, 121.546806659439 24.9526976448756, 121.546529090203 24.9527857685819, 121.545529663038 24.9529774977696, 121.544733528253 24.9531881133541, 121.544537751177 24.9532390022555, 121.544040865215 24.9532521133171, 121.542875405394 24.9530262466195, 121.542522852424 24.9529814984962, 121.541151629342 24.9529481134996, 121.540988758062 24.9529504183653, 121.540845989114 24.9529830196689, 121.540709838195 24.9530780313854, 121.540630899073 24.953166534673, 121.540538074475 24.9534772029487, 121.540032057456 24.9546019225774, 121.539894629342 24.9547939800691, 121.539444663038 24.9551515161004, 121.539058921722 24.9554500400609, 121.538760921722 24.9558128682911, 121.538660821614 24.9560315706797, 121.538417191292 24.9568615702669, 121.538365989255 24.9569954312901, 121.538103595646 24.9588099484285, 121.538075292228 24.9589477056801, 121.538596753241 24.9603638808029, 121.53972757853 24.9630442253307, 121.540394298522 24.9645775843241, 121.540507895549 24.9644857022479, 121.540846530944 24.9655706835386, 121.540806700727 24.9656269485197, 121.541090937976 24.9663073795212, 121.54156655652 24.9675966324436, 121.542135290236 24.9693363538316, 121.542746494557 24.9710060223019, 121.542882751569 24.9713446779917, 121.542980764127 24.97178438207, 121.543024014684 24.9722981461311, 121.543007 24.9754854045913, 121.542983427165 24.9767520231413, 121.542933628911 24.9773399754304, 121.54278226957 24.9780740593671, 121.542408528253 24.9791726684666, 121.541762464809 24.981314664014, 121.541488808708 24.9824104248415, 121.541369359772 24.983233530609, 121.541304058193 24.9835832531073, 121.54120145089 24.9840524134489, 121.541029326076 24.9844937854375, 121.540455797823 24.9858460244605, 121.540162 24.986597, 121.53995456195 24.9873587604959, 121.53969829238 24.9885115701719, 121.539632952158 24.9891712903053, 121.539644346865 24.9894690089691, 121.539674191292 24.9898235346113, 121.539838510227 24.9903043609261, 121.540111595646 24.9909070135337, 121.540909528253 24.9928544050988, 121.541075511172 24.9933490367242, 121.541230898911 24.9940924821775, 121.541304226055 24.9947970901212, 121.541300663038 24.9954191724494, 121.541263277848 24.9959737970991, 121.541140235873 24.9964818624672, 121.540983202177 24.9971238104476, 121.54013881813 24.9993759867056, 121.539128268679 25.0019367177802, 121.538799946318 25.0027179947771, 121.538750702872 25.0029915387192, 121.538732090203 25.0032407567816, 121.538808667152 25.0039858606532, 121.53904829238 25.0055034054686, 121.539086563557 25.0057713031253, 121.539123157595 25.0061570305968, 121.5390702172 25.006508728582, 121.538945595646 25.0069344567518, 121.538755808818 25.0073117707896, 121.538205334602 25.0081543492115, 121.537677460861 25.0092507832651, 121.537448560134 25.0099740361327, 121.537281101089 25.0108553413375, 121.537437839269 25.0109688482371, 121.537493408845 25.0111306937497, 121.537440955858 25.0113450974176, 121.53728823535 25.0114424491052, 121.537116393469 25.0114771604969, 121.536645828232 25.012331664844, 121.535939572835 25.0133465088412, 121.534001212447 25.0151681011706, 121.532762606531 25.0163656380152, 121.533320134785 25.0168388116011, 121.533384898393 25.0169795739396, 121.533506507542 25.0174899886792, 121.534048506674 25.0200887943183, 121.534534494557 25.0223009795383, 121.534766573106 25.0243610670134, 121.535008932608 25.0264024668925, 121.535044528253 25.0268707817168, 121.534943220549 25.0274001103416, 121.534405942454 25.0289015162535, 121.533654026754 25.0309628052541, 121.532775629342 25.033495, 121.532827505067 25.0359903925497, 121.532898292236 25.0383442844273, 121.53289814279 25.0406585723258, 121.532943932608 25.0422300887664, 121.532952771089 25.0425519773413, 121.533011485536 25.0446902983298, 121.533002159651 25.0452654087603, 121.532997618968 25.0455454244565, 121.533025893534 25.0482080824166, 121.533026 25.048741, 121.533084620184 25.0508201846361, 121.533100859656 25.0520062291012, 121.53312101219 25.0538531005865, 121.533166171385 25.0561095392987, 121.533234941184 25.0584198081602, 121.533286111325 25.0607623540392, 121.533299427165 25.062761492819, 121.533350751849 25.0647649729634, 121.533388022811 25.0673260070432, 121.533374 25.067542, 121.533383246759 25.0677443253308, 121.533446919835 25.0679453037478, 121.533596033696 25.068167, 121.536278107325 25.0681077022483, 121.539674886827 25.0680379276152, 121.541388067392 25.0680353314275, 121.54179340441 25.0679833961865, 121.542094067392 25.0678678875564, 121.542718168481 25.0675007384318, 121.544214730431 25.0663861813385, 121.544210134785 25.0658271493521, 121.544177711864 25.0642547015635, 121.544127191295 25.062709982184, 121.543938442238 25.0626528822424, 121.54384481836 25.0625331306057, 121.543818100049 25.0624050356931, 121.541055311093 25.0624309311226, 121.537731511807 25.0624558017683, 121.53498277729 25.0625223181971, 121.533090898911 25.062568857202, 121.533132035795 25.0608774200807, 121.533082710361 25.0584378454334, 121.533028747606 25.0561311290792, 121.532972757236 25.0538279678671, 121.532954865215 25.0519796003881, 121.532936552808 25.0508203602556, 121.532912 25.048707, 121.532913035978 25.0484296432403, 121.532860516685 25.0482116592384, 121.53282487223 25.0455885464368, 121.532838531821 25.0453155328931, 121.532833800728 25.0447299152797, 121.532816266209 25.0425594815061, 121.532764 25.04227, 121.532747433012 25.0403063444686, 121.532690214927 25.0401733321581, 121.532680244827 25.0393612460665, 121.532698147535 25.0383442189533, 121.532674301736 25.0359976242193, 121.532637427165 25.0334477811399, 121.533487755999 25.0308379262846, 121.534183467032 25.0288676811878, 121.534735 25.0273057465977, 121.534784539139 25.0268782182848, 121.534790449905 25.0264847004655, 121.53482826957 25.0263765276994, 121.534596445209 25.0243662240031, 121.534382312372 25.0225774058491, 121.534337067392 25.0223135046391, 121.533877536279 25.0200952674121, 121.533331427165 25.0175309254411, 121.533210898911 25.0169241013578, 121.532922632323 25.0166476710197, 121.53254941524 25.0163605512625, 121.533870690207 25.0150802655479, 121.535761977189 25.0132364056957, 121.536416303223 25.0123215121029, 121.536932764127 25.0113773015462, 121.53684293502 25.0112385246921, 121.536855740217 25.0110496539917, 121.536965890438 25.010911437208, 121.537106303266 25.0108289357439, 121.537290404354 25.0099540559948, 121.537517 25.009181, 121.537871891135 25.0084472136616, 121.53808496798 25.008117470485, 121.538777202177 25.0068774843316, 121.538900993116 25.0064990771662, 121.538940831519 25.0061520305748, 121.538903067392 25.0057728109547, 121.538846 25.005487, 121.538584142394 25.0040244259471, 121.538511865215 25.0032307567844, 121.538552411964 25.0029424543227, 121.538613203612 25.0026386159682, 121.538888112781 25.0019052401831, 121.539892715907 24.9993593744574, 121.540812572835 24.997083836561, 121.540947775012 24.9964272416305, 121.541058542427 24.9959054306879, 121.541089101089 24.995438448393, 121.541112964808 24.9949370895314, 121.541033303266 24.994135559276, 121.540869477431 24.9934389181927, 121.54069443805 24.9928907479299, 121.539886134785 24.9909252286044, 121.539664931391 24.9903230366568, 121.539552336962 24.9898704947904, 121.539495065803 24.9895088853601, 121.539494404354 24.9891718349426, 121.539557505443 24.9885138508944, 121.53985256195 24.987310545702, 121.540042814357 24.9865412859895, 121.540292 24.985854, 121.54089656195 24.9844384290947, 121.541053109512 24.9840436715558, 121.541151303266 24.983568428993, 121.541349347847 24.9823396871822, 121.541610987135 24.9812951162401, 121.542243471747 24.9792173839045, 121.542665168481 24.9779761250446, 121.542803841052 24.9773089973716, 121.542847663038 24.9767464740639, 121.542882865215 24.9754885954088, 121.542858938658 24.9748872270225, 121.542824121171 24.972305404491, 121.542762741316 24.9718353372306, 121.542662586413 24.9713440260192, 121.542569235873 24.9710631910763, 121.541988700575 24.969377295638, 121.541449042366 24.967773158148, 121.540944582519 24.9663667722049, 121.540379725946 24.9650336885285, 121.539564925187 24.9630746210505, 121.538468022811 24.9603920932045, 121.537946471002 24.9590829294271, 121.537952373839 24.9589992719649, 121.537979730431 24.9588943561142, 121.53828656195 24.9569694445488, 121.538475405505 24.9563037310019, 121.53861308138 24.9558970170343, 121.538717517368 24.9557159485466, 121.538996090203 24.9553906360392, 121.539415629342 24.9550565560792, 121.539828797823 24.9547217880487, 121.539966547201 24.9545327790295, 121.540512198293 24.9532948114328, 121.540541949962 24.9530690912835, 121.540609539139 24.9529807685369, 121.54070784838 24.9528894406753, 121.540820901261 24.9528385363199, 121.540987079856 24.9528039134907, 121.541139359772 24.9527844039295, 121.542534335475 24.9528220117715, 121.542849641267 24.9528571724941, 121.544076696734 24.953114788188, 121.544501945184 24.9531014721339, 121.544665831519 24.9530615763869, 121.545470797823 24.9528357882144, 121.546496494557 24.9526432510135, 121.546737627527 24.952562737418, 121.546968460861 24.9524219057952, 121.547493078278 24.952025172662, 121.546454033696 24.9510991146899, 121.546204254142 24.9508506307543, 121.546115269569 24.950642, 121.546095271505 24.950525492223, 121.546123067392 24.9503733841632, 121.546087067392 24.9502508459275, 121.546102966304 24.9500557884562, 121.546082791777 24.9499871424949, 121.546026572835 24.9499432499924, 121.545935033696 24.9499385961557, 121.545880966304 24.9499949807717, 121.545854797823 24.9500773653653, 121.545778235873 24.9503617498684, 121.545594966304 24.9506123845436, 121.545131376906 24.9511339004464, 121.545210281495 24.951179615523)","wkt0":"LINESTRING (121.545003329644 24.9510496779972, 121.545151605156 24.950956698937, 121.545517809249 24.9506265662053, 121.545604834937 24.9505350378534, 121.545654265527 24.9504517154325, 121.545725974694 24.9502812830324, 121.545774709079 24.9501159002557, 121.545837367574 24.9499337895748, 121.545948760454 24.9499069621554, 121.546106799103 24.9499650356206, 121.54613673594 24.9500130093322, 121.546110976336 24.9503059010604, 121.546175027242 24.9503409343993, 121.546198698229 24.9504050043538, 121.546180944989 24.9505536591443, 121.546180596886 24.9506120479196, 121.546259964313 24.9508058353319, 121.546471610786 24.9510034098065, 121.546861485866 24.9513524783111, 121.547494336667 24.9518965939707, 121.547538893819 24.9520244166162, 121.547430981966 24.9521841158338, 121.546886549264 24.952591884438, 121.546698573779 24.9526878297957, 121.546391547153 24.9527509517008, 121.545814392793 24.9528633086117, 121.545155782388 24.9530148009137, 121.544538944315 24.9531877543972, 121.544320335787 24.9532117406275, 121.54403210671 24.9532104781945, 121.543656155739 24.9531460940912, 121.542855519413 24.9529756654202, 121.542609062665 24.9529516791438, 121.541052347165 24.952893607087, 121.540940954285 24.9529188558107, 121.54072652299 24.9530274252637, 121.54042019257 24.9537432237961, 121.540021963023 24.9545486499736, 121.539896646033 24.9547405375647, 121.539512340596 24.9550611911615, 121.539094617296 24.9553894183878, 121.538731198024 24.9557391056623, 121.538610058267 24.9559852748086, 121.5383357533 24.9569547977366, 121.538161701924 24.9581805768638, 121.538089296552 24.9588862464383, 121.538087904141 24.9591210479401, 121.539289554836 24.9620232080175, 121.539776898687 24.9631630981961, 121.540056773298 24.9638914610324, 121.540340825143 24.9645794254375, 121.540563610903 24.9651095972176, 121.5407404471 24.9654352730358, 121.540914498476 24.9658859160606, 121.54124032265 24.9667834102779, 121.541702603103 24.9681138608289, 121.542036781743 24.9690744523317, 121.542372352795 24.9700249382507, 121.542673113572 24.9708567651882, 121.542848557358 24.971450022239, 121.542946026128 24.971808499581, 121.542998937746 24.9723462136356, 121.54299058328 24.9731414202535, 121.54297665917 24.9746586097319, 121.542975266759 24.9757605168156, 121.542957165416 24.9765317196817, 121.542932102018 24.9771565040556, 121.542877797989 24.97741777658, 121.542688430093 24.9782571265865, 121.542386276905 24.9792870580159, 121.541787540174 24.9812093211785, 121.541621843265 24.9818050525798, 121.541513235207 24.9823061210366, 121.54141994367 24.9829031092531, 121.541276525336 24.9837714505759, 121.541162347634 24.9841450373979, 121.540952093573 24.9846940565125, 121.54062905422 24.9854046224396, 121.540166773768 24.9864609979412, 121.540069304997 24.9867424441243, 121.539945380418 24.9873091208074, 121.539737911179 24.9882607278914, 121.539633480354 24.9888942871439, 121.539612594189 24.9892855272826, 121.53962791071 24.9895126984047, 121.539698923671 24.9898913160086, 121.539811708962 24.9902244985353, 121.540099938039 24.9908883367867, 121.540719560935 24.9924254998119, 121.540950701162 24.9930035085214, 121.541007790013 24.9932319347947, 121.541172094511 24.9938995428507, 121.541227790951 24.994261740789, 121.541276525336 24.994877601035, 121.541275132925 24.9955502481464, 121.541194373087 24.9962519173824, 121.541130322181 24.9966128464003, 121.540953485984 24.9972047172156, 121.540570572958 24.9982042026111, 121.540127786259 24.9993286139637, 121.539542973638 25.0007546202961, 121.539079300775 25.0019219140459, 121.538838413671 25.0026222849725, 121.538745122134 25.002935242222, 121.538717273914 25.0034273911227, 121.538796641341 25.0040570864565, 121.53885094537 25.0043763495911, 121.538844641936 25.0046588353648, 121.538966930222 25.005359129135, 121.539000603809 25.0056359261069, 121.539015372925 25.0057895829575, 121.539016554455 25.0061225947057, 121.538995877691 25.0063731560047, 121.53894507193 25.0066221106354, 121.538856457229 25.0068924801466, 121.538746575001 25.0071735567302, 121.538559302601 25.0075017462892, 121.538130998216 25.0082453895331, 121.53791123376 25.0086276493189, 121.537721598301 25.0089970589059, 121.53757213484 25.0093750333624, 121.537378364028 25.0099800042216, 121.537300383092 25.0103756428444, 121.537212359157 25.0107825229133, 121.53702804058 25.0114276392069, 121.536981960936 25.0115223987421, 121.536850220415 25.0117718782989, 121.53673443054 25.0119854880746, 121.53653829667 25.012346321789, 121.536399466972 25.0125588598458, 121.535842966655 25.013313714958, 121.53514645511 25.0140043230173, 121.53299016407 25.0160514980229, 121.53286492196 25.0161805160325, 121.532812934669 25.016306857173, 121.532930496838 25.0164096430897, 121.533327490696 25.0167843826823, 121.533446234394 25.0170718607087, 121.533741616728 25.0185558147877, 121.534480072564 25.0221874651203, 121.534624219143 25.0231082084495, 121.534891244773 25.0252258918949, 121.53496922571 25.0258543379392, 121.53496036424 25.026191042375, 121.534965681122 25.0272123913556, 121.534864069599 25.0275796038487, 121.534633671378 25.0282283789206, 121.534057085061 25.029866360127, 121.5338089639 25.0305311815548, 121.53367604185 25.030900525236, 121.533534258329 25.0312939553257, 121.5333458044 25.0318383320224, 121.533113043121 25.0324699558411, 121.532805845493 25.0333724228754, 121.532795211729 25.0342534726626, 121.532863740431 25.0378953634541, 121.532905093957 25.0420841535133, 121.532927543015 25.044835210469, 121.532925179956 25.045218426735, 121.532982188747 25.048309803537, 121.533007000863 25.0491176911892, 121.533004637804 25.049601511388, 121.53299400404 25.0496753687283, 121.533014090039 25.0503406179832, 121.533022360744 25.0505953705634, 121.533008773157 25.0513403582642, 121.533019702303 25.0518089168157, 121.533040674449 25.0529192944212, 121.533071689594 25.053542112979, 121.53307877877 25.0540232398207, 121.533076415711 25.0546681287876, 121.533106544709 25.0550325832093, 121.533124267649 25.056042988626, 121.533145091888 25.0577099292363, 121.533162667353 25.0581643847579, 121.533178027234 25.0589184241331, 121.533196931704 25.0602177798917, 121.533218199232 25.0614925051421, 121.533181571822 25.0618205494191, 121.533189251763 25.0622615080423, 121.533201953203 25.0623813800151, 121.533328376842 25.0627270815653, 121.533334284489 25.0641773049939, 121.533394542485 25.0674801114033, 121.533499698596 25.0679499460395, 121.533535144477 25.0681211837275, 121.533584768709 25.0681597121744, 121.540867715544 25.0680569696226, 121.541668792434 25.0680248625575, 121.542096506054 25.0679114175267, 121.54278179307 25.0675518174894, 121.543748284068 25.0667919448908, 121.544213806627 25.0664002340763, 121.54424452639 25.0662503990073, 121.544209961224 25.0649781774605)","wkt1":"LINESTRING (121.544209961224 25.0649781774605, 121.544193124369 25.0643504647285, 121.54417421983 25.0633989895107, 121.544157678359 25.0625374110881, 121.5441467208 25.0624051116506, 121.544092891335 25.0623468223188, 121.544006269207 25.0623098309977, 121.543758158685 25.062363636552, 121.543412907634 25.062370922719, 121.541736769469 25.0623798903085, 121.541549294436 25.0623641970264, 121.541049979744 25.0623658784496, 121.540623056402 25.0623804507828, 121.53817845622 25.0624023092795, 121.53801139926 25.0623838136287, 121.53740256945 25.0623910997945, 121.53665143186 25.0624258491946, 121.535052634879 25.0624639614285, 121.534255092578 25.0624846989626, 121.533916647551 25.0624807756456, 121.533450744252 25.0624942270176, 121.533224907991 25.0624970293866, 121.533170459796 25.0623955835886, 121.533158085207 25.0618138099319, 121.533161797584 25.0613172263787, 121.533182834386 25.0611580501863, 121.533172934714 25.0604473595933, 121.533129623651 25.0587692615049, 121.533123436356 25.0582278261561, 121.533116011602 25.0580249274072, 121.53310611193 25.0577239416276, 121.533088787505 25.0576365042794, 121.533073937997 25.0573074926727, 121.533066513243 25.0556517717937, 121.53308260021 25.0554432637194, 121.533072700538 25.0549886924675, 121.533041764064 25.0546451005011, 121.533019180438 25.0543228069406, 121.533000618554 25.0523167210954, 121.532988243964 25.0517074339443, 121.532964732244 25.0513851327171, 121.532970300809 25.0511586805653, 121.532966897797 25.0509748280156, 121.532966897797 25.0492573628302, 121.532979272387 25.0490858392024, 121.53296318542 25.0485948094508, 121.532892650259 25.045174362716, 121.532872850916 25.044499455039, 121.532776329117 25.0407739426638, 121.532768904363 25.0402940911333, 121.532720643463 25.0384329669686, 121.532619171828 25.0338175935444, 121.532686613342 25.0333080026202, 121.533503336257 25.0309623995001, 121.533622132318 25.0306372406529, 121.534545276704 25.0279327826473, 121.534864541117 25.0267240545315, 121.534844741773 25.026277786411, 121.534466079331 25.0227479502294, 121.534285410322 25.0217118545185, 121.533374640525 25.0173700250044, 121.533300392987 25.0171278109847, 121.533050426277 25.0167734599838, 121.532665576539 25.0164359284908, 121.532665576539 25.0163327625337, 121.533215008319 25.0157866543386, 121.534836079561 25.0142565292206, 121.535560611784 25.0135584628752, 121.535746849358 25.0133594151179, 121.536116849588 25.0128772135796, 121.536438588918 25.0124409877659, 121.536762803166 25.0118455202079, 121.536970696272 25.0114676042713, 121.537145177986 25.0109203530198, 121.537275111177 25.0102833853773, 121.537398857074 25.0097742574566, 121.537466298587 25.0095830535843, 121.537545495961 25.0093767100686, 121.537687803741 25.0089959829436, 121.537891365741 25.0086219832784, 121.538096165199 25.0082401323703, 121.538522469812 25.007492127298, 121.53870437628 25.0071814851748, 121.538826884717 25.0068887855549, 121.538911650656 25.00662972899, 121.538964861391 25.0063785221023, 121.538994560407 25.0061256325067, 121.538991466759 25.0057914361449, 121.538946299507 25.0053658391263, 121.538895563689 25.0051449093943, 121.538820697422 25.0046705259369, 121.538709326116 25.0044159506074, 121.53858496149 25.0036841837823, 121.538570111982 25.0033477378023, 121.538597336079 25.002899141729, 121.538662921404 25.0026120393824, 121.538833690741 25.0021320386482, 121.538999510242 25.0017193262372, 121.539317537196 25.0009152059543, 121.539586065791 25.0002400548742, 121.539947403808 24.999359661265, 121.540288942482 24.9984915982055, 121.540644093204 24.9975954905008, 121.540868073277 24.9970313542635, 121.540979444584 24.9965389946756, 121.541030180401 24.996246269703, 121.54109081589 24.9959255051394, 121.541132889495 24.9951179822513, 121.541141551708 24.994733285454, 121.541092053349 24.9942397950879, 121.541049979744 24.9939493077868, 121.540793825739 24.9930038173385, 121.540507972719 24.9923218932598, 121.540389176658 24.9920011184538, 121.540191183224 24.9915143466947, 121.539911517498 24.9908391439665, 121.539720948818 24.9903635836728, 121.539615764806 24.9900742088201, 121.539578641037 24.9899098929513, 121.539531617597 24.9897225838091, 121.539509962065 24.9896435101035, 121.539496968746 24.9891185940024, 121.539532855056 24.9887473378853, 121.539621952101 24.9881730663961, 121.539743223079 24.9875931840649, 121.53989790545 24.9869830147903, 121.540090949048 24.9863313416877, 121.540361952561 24.9857020981163, 121.540576032962 24.9851928683408, 121.540839611721 24.9846432567453, 121.541026468024 24.9841463608821, 121.541125464741 24.983827808076, 121.541249210638 24.9831906999881, 121.541327170552 24.9826814598117, 121.541406367926 24.9822238148584, 121.541455866284 24.9819602195657, 121.54156847505 24.9814924767406, 121.541709545372 24.9810606262697, 121.541799879876 24.9807465522475, 121.541960749541 24.9802159896666, 121.542121619207 24.9797033720601, 121.542234227972 24.9793085316593, 121.542417371899 24.9786971995608, 121.542672288445 24.9778637639331, 121.542799746718 24.9771806341533, 121.542825733357 24.9765805088023, 121.542843057782 24.9758558675604, 121.542855432372 24.9747285147267, 121.542859144749 24.9738468166539, 121.542872756797 24.9729684775576, 121.542875231715 24.9725736155374, 121.542828208275 24.9718736297506, 121.542637639594 24.9711534479095, 121.542476769929 24.9707114650659, 121.542053558964 24.9694842251906, 121.541677371439 24.9684095389033, 121.541422454892 24.9676769968373, 121.540990581714 24.9664979651507, 121.540629243697 24.965496171977, 121.540468374032 24.9651764490346, 121.540204795273 24.9645515846054, 121.539758072587 24.9634959267196, 121.539313824819 24.9624492346689, 121.53897847344 24.9616022265472, 121.538653021733 24.9608124282922, 121.538269409454 24.9599048271647, 121.537976441045 24.9592252438181, 121.537925705227 24.9590973482249, 121.53799376547 24.9589357957067, 121.538098949482 24.9580898853095, 121.53820908333 24.9570689512271, 121.538301892752 24.9566201863145, 121.538442963074 24.9561366402891, 121.53849493635 24.9559167440411, 121.538658280933 24.9556284100552, 121.53897259551 24.9553131491863, 121.53965319794 24.954825110306, 121.539838816784 24.9546074555609, 121.540111057756 24.9540543415136, 121.540463733561 24.9533060067888, 121.540576342326 24.9530636665327, 121.54073968691 24.952930154799, 121.540962429523 24.952841520879, 121.541167847711 24.9528280574932, 121.542630524205 24.9528729354402, 121.543012899025 24.9529178133709, 121.543662564981 24.953062544586, 121.544014003326 24.9531377149949, 121.544309756018 24.953148934455, 121.544539923386 24.9531208858029, 121.545798419151 24.9527899112253, 121.546389924535 24.9526866918531, 121.546604004936 24.9526339601838, 121.546752500012 24.9525868382475, 121.547152199257 24.9522760574066, 121.54737494187 24.9521144959375, 121.547430627524 24.9519989344789, 121.547383604083 24.951900202273, 121.546502533301 24.9511316591004, 121.546188218725 24.9508242404884, 121.546114589916 24.9507041899461, 121.546094790573 24.9505891881487, 121.54608612836 24.9502436211258, 121.546095409302 24.9500197874231, 121.546027349059 24.9499760304111, 121.545903603163 24.9499737864613, 121.545856579722 24.9499984699063, 121.545792231856 24.9501432045526, 121.545739021121 24.9503580622602, 121.545657348829 24.9505128942141, 121.54548967314 24.9506935312475, 121.545247749912 24.950935876168, 121.54512555084 24.9510118893492, 121.545014798263 24.9510636399937, 121.545003329652 24.9510496780039)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0161000400'=='0100020200' || '0161000400'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
