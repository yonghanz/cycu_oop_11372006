
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231491773</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100006600">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100006600">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100006600" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0100006600" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100006600" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100006600',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="K-ThITzo01uWcERGJ35VIAemKIMRNsPxLLVEF9v-U32567vHHme55IBaTZF3VN9hF3AoEl-zz7Wt4JDfwibUilPU50I1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">66 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0100006600" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0100006600" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">捷運動物園站 - 松山車站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0630 - 2230 <br>
                        [假日] 0630 - 2230
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0630 0645 0700 0720 0740 0800 0820 0840 0900 0920 0940 1000 1020 1040 1100 1120 1140 1200 1220 1240 1300 1320 1340 1400 1420 1440 1500 1520 1540 1600 1620 1640 1700 1720 1740 1800 1820 1840 1900 1940 2020 2110 2150 2230<br>
[假日]<br /> 班表:0630 0700 0730 0800 0830 0900 0930 1000 1030 1100 1130 1200 1230 1300 1320 1340 1400 1420 1440 1500 1530 1600 1630 1700 1730 1800 1830 1900 1930 2000 2040 2120 2200 2230<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">欣欣客運木柵一站:02-2239-6952</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 松山車站</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 捷運動物園站</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">捷運動物園站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165601740" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.99882" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.580221" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">貓纜動物園站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165603340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9968" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.576778" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">萬壽橋頭(新光)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165200440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.993482" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57363" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">萬壽橋頭(秀明)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165200320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.99161" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.574153" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">萬興國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165200640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.989679" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.576757" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">政大一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.987811" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.576051" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">新光路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165100860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.988084" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5738817" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">指南路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166400340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.986197" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.570658" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">木南公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165700040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.984828" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57011" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">景文中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165700360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.984111" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5689404" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">司法新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98335" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56699" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">忠順廟</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98265" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5645265" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">國泰新村(興隆)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166000300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982927" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.562389" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">忠順街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166300000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.984307" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5618292" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">木柵公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1164600000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98702" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56077" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">馬明潭(再興中學)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1164900200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.989363" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5599425" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">興隆山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1164900400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.990768" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.55919" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">海巡署一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169800100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.992388" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5587834" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">海巡署</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169800000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.993856" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5594086" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">文山運動中心(興隆)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169600000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.996475" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.560053" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">文山運動中心(萬芳)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169600020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.996958" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56078" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">棕櫚泉社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169600320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.99729" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56229" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">萬利街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165300220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998733" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56623" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">捷運萬芳社區站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998858" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5680836" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">木柵高工</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165300041" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.996667" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.570733" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">捷運木柵站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165601620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.997873" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5743716" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">博嘉國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165601820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999501" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5755679" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">信義松仁路口(信義)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1104700460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032949" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5666876" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">101國際購物中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1104700100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034635" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.565536" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">松壽路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1105100420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035784" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5674077" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">興雅國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03724" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.568534" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">消防局(松仁)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039991" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.568621" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">市立工農</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106000020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040854" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5726502" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">捷運永春站(忠孝)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106100220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040733" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.575809" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">捷運永春站(松山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04195" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5778998" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 36</span>
                                    <span class="auto-list-stationlist-place">雙永國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106200000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.043558" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5779186" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 37</span>
                                    <span class="auto-list-stationlist-place">永吉松山路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106200100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045005" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5779069" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 38</span>
                                    <span class="auto-list-stationlist-place">松山車站(松山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1109000000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047269" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5779129" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 39</span>
                                    <span class="auto-list-stationlist-place">松山車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049806" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.578206" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">松山車站(松隆)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1108700060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.048183" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5789197" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">松山車站(松山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1109000040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047159" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.577685" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">永吉松山路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1108900040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.044863" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5776905" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">捷運永春站(松山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106100140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.041936" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.577654" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">捷運永春站(忠孝)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106100260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040967" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.575743" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">市立工農</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1106600060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.041089" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5724391" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">消防局(松仁)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300441" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038604" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.568284" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">興雅國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037232" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5682685" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">松壽路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1105100460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035881" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5666401" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">101國際購物中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1100100040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034261" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.565358" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">信義松仁路口(信義)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1104700420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032733" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5671167" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">博嘉國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165601860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999389" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5753953" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">捷運木柵站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165601660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.997735" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57396" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">木柵高工</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165300000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.996525" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5707783" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">捷運萬芳社區站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165300101" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998788" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.569352" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">萬利街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165400260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999065" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.567262" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">棕櫚泉社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169600360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.997568" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5625566" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">文山運動中心(興隆)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169600040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.996275" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.559841" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">海巡署</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169800040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.99467" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5594932" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">海巡署一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169800140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.993046" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.558778" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">興隆山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169800440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.991386" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5586916" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">馬明潭(再興中學)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1164900240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.989377" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5597219" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">木柵公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1164600040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98693" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56074" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">忠順街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166300040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98477" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5614966" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">國泰新村(興隆)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166000340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982543" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5622646" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">忠順廟</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165800120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982483" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56469" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">司法新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98305" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56636" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">景文中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165700320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.983787" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5685285" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">木南公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165700000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.985348" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.570615" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">指南路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166400300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.987194" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5707228" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">政大</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165100620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98778" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.574739" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">政大一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.988319" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.576427" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">萬興圖書館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166602400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98897" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57697" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">大誠高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165200000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.990413" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.576905" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">萬壽橋頭(秀明)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165200360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.991863" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.574627" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 36</span>
                                    <span class="auto-list-stationlist-place">萬壽橋頭(新光)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165200400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.992819" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.573853" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 37</span>
                                    <span class="auto-list-stationlist-place">貓纜動物園站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165603300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.996309" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.576197" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 38</span>
                                    <span class="auto-list-stationlist-place">捷運動物園站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1165601700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998553" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.579926" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0100006600";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 39;
        var existBackNum = 38;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0100006600',
                        url: './StopStatusRecent3OfRoute?routeid=0100006600&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0100006600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0100006600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0100006600');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0100006600","Name":"66","BeginStop":"捷運動物園站","GoDirStops":[{"UniStopId":"1165601740","Name":"捷運動物園站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.580221,"Latitude":24.99882,"PublicId":"1165601740"},{"UniStopId":"1165603340","Name":"貓纜動物園站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.576778,"Latitude":24.9968,"PublicId":"1165603340"},{"UniStopId":"1165200440","Name":"萬壽橋頭(新光)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57363,"Latitude":24.993482,"PublicId":"1165200440"},{"UniStopId":"1165200320","Name":"萬壽橋頭(秀明)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.574153,"Latitude":24.99161,"PublicId":"1165200320"},{"UniStopId":"1165200640","Name":"萬興國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.576757,"Latitude":24.989679,"PublicId":"1165200640"},{"UniStopId":"1166601040","Name":"政大一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.576051,"Latitude":24.987811,"PublicId":"1166601040"},{"UniStopId":"1165100860","Name":"新光路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5738817,"Latitude":24.988084,"PublicId":"1165100860"},{"UniStopId":"1166400340","Name":"指南路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.570658,"Latitude":24.986197,"PublicId":"1166400340"},{"UniStopId":"1165700040","Name":"木南公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57011,"Latitude":24.984828,"PublicId":"1165700040"},{"UniStopId":"1165700360","Name":"景文中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5689404,"Latitude":24.984111,"PublicId":"1165700360"},{"UniStopId":"1166400060","Name":"司法新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56699,"Latitude":24.98335,"PublicId":"1166400060"},{"UniStopId":"1166400160","Name":"忠順廟","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5645265,"Latitude":24.98265,"PublicId":"1166400160"},{"UniStopId":"1166000300","Name":"國泰新村(興隆)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.562389,"Latitude":24.982927,"PublicId":"1166000300"},{"UniStopId":"1166300000","Name":"忠順街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5618292,"Latitude":24.984307,"PublicId":"1166300000"},{"UniStopId":"1164600000","Name":"木柵公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56077,"Latitude":24.98702,"PublicId":"1164600000"},{"UniStopId":"1164900200","Name":"馬明潭(再興中學)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5599425,"Latitude":24.989363,"PublicId":"1164900200"},{"UniStopId":"1164900400","Name":"興隆山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.55919,"Latitude":24.990768,"PublicId":"1164900400"},{"UniStopId":"1169800100","Name":"海巡署一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5587834,"Latitude":24.992388,"PublicId":"1169800100"},{"UniStopId":"1169800000","Name":"海巡署","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5594086,"Latitude":24.993856,"PublicId":"1169800000"},{"UniStopId":"1169600000","Name":"文山運動中心(興隆)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.560053,"Latitude":24.996475,"PublicId":"1169600000"},{"UniStopId":"1169600020","Name":"文山運動中心(萬芳)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56078,"Latitude":24.996958,"PublicId":"1169600020"},{"UniStopId":"1169600320","Name":"棕櫚泉社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56229,"Latitude":24.99729,"PublicId":"1169600320"},{"UniStopId":"1165300220","Name":"萬利街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56623,"Latitude":24.998733,"PublicId":"1165300220"},{"UniStopId":"1165300120","Name":"捷運萬芳社區站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5680836,"Latitude":24.998858,"PublicId":"1165300120"},{"UniStopId":"1165300041","Name":"木柵高工","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.570733,"Latitude":24.996667,"PublicId":"1165300041"},{"UniStopId":"1165601620","Name":"捷運木柵站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5743716,"Latitude":24.997873,"PublicId":"1165601620"},{"UniStopId":"1165601820","Name":"博嘉國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5755679,"Latitude":24.999501,"PublicId":"1165601820"},{"UniStopId":"1104700460","Name":"信義松仁路口(信義)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5666876,"Latitude":25.032949,"PublicId":"1104700460"},{"UniStopId":"1104700100","Name":"101國際購物中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.565536,"Latitude":25.034635,"PublicId":"1104700100"},{"UniStopId":"1105100420","Name":"松壽路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5674077,"Latitude":25.035784,"PublicId":"1105100420"},{"UniStopId":"1107300700","Name":"興雅國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.568534,"Latitude":25.03724,"PublicId":"1107300700"},{"UniStopId":"1107300400","Name":"消防局(松仁)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.568621,"Latitude":25.039991,"PublicId":"1107300400"},{"UniStopId":"1106000020","Name":"市立工農","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5726502,"Latitude":25.040854,"PublicId":"1106000020"},{"UniStopId":"1106100220","Name":"捷運永春站(忠孝)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.575809,"Latitude":25.040733,"PublicId":"1106100220"},{"UniStopId":"1106100100","Name":"捷運永春站(松山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5778998,"Latitude":25.04195,"PublicId":"1106100100"},{"UniStopId":"1106200000","Name":"雙永國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5779186,"Latitude":25.043558,"PublicId":"1106200000"},{"UniStopId":"1106200100","Name":"永吉松山路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5779069,"Latitude":25.045005,"PublicId":"1106200100"},{"UniStopId":"1109000000","Name":"松山車站(松山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5779129,"Latitude":25.047269,"PublicId":"1109000000"},{"UniStopId":"1056700120","Name":"松山車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.578206,"Latitude":25.049806,"PublicId":"1056700120"}],"LastStop":"松山車站","BackDirStops":[{"UniStopId":"1108700060","Name":"松山車站(松隆)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5789197,"Latitude":25.048183,"PublicId":"1108700060"},{"UniStopId":"1109000040","Name":"松山車站(松山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.577685,"Latitude":25.047159,"PublicId":"1109000040"},{"UniStopId":"1108900040","Name":"永吉松山路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5776905,"Latitude":25.044863,"PublicId":"1108900040"},{"UniStopId":"1106100140","Name":"捷運永春站(松山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.577654,"Latitude":25.041936,"PublicId":"1106100140"},{"UniStopId":"1106100260","Name":"捷運永春站(忠孝)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.575743,"Latitude":25.040967,"PublicId":"1106100260"},{"UniStopId":"1106600060","Name":"市立工農","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5724391,"Latitude":25.041089,"PublicId":"1106600060"},{"UniStopId":"1107300441","Name":"消防局(松仁)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.568284,"Latitude":25.038604,"PublicId":"1107300441"},{"UniStopId":"1107300740","Name":"興雅國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5682685,"Latitude":25.037232,"PublicId":"1107300740"},{"UniStopId":"1105100460","Name":"松壽路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5666401,"Latitude":25.035881,"PublicId":"1105100460"},{"UniStopId":"1100100040","Name":"101國際購物中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.565358,"Latitude":25.034261,"PublicId":"1100100040"},{"UniStopId":"1104700420","Name":"信義松仁路口(信義)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5671167,"Latitude":25.032733,"PublicId":"1104700420"},{"UniStopId":"1165601860","Name":"博嘉國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5753953,"Latitude":24.999389,"PublicId":"1165601860"},{"UniStopId":"1165601660","Name":"捷運木柵站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57396,"Latitude":24.997735,"PublicId":"1165601660"},{"UniStopId":"1165300000","Name":"木柵高工","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5707783,"Latitude":24.996525,"PublicId":"1165300000"},{"UniStopId":"1165300101","Name":"捷運萬芳社區站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.569352,"Latitude":24.998788,"PublicId":"1165300101"},{"UniStopId":"1165400260","Name":"萬利街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.567262,"Latitude":24.999065,"PublicId":"1165400260"},{"UniStopId":"1169600360","Name":"棕櫚泉社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5625566,"Latitude":24.997568,"PublicId":"1169600360"},{"UniStopId":"1169600040","Name":"文山運動中心(興隆)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.559841,"Latitude":24.996275,"PublicId":"1169600040"},{"UniStopId":"1169800040","Name":"海巡署","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5594932,"Latitude":24.99467,"PublicId":"1169800040"},{"UniStopId":"1169800140","Name":"海巡署一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.558778,"Latitude":24.993046,"PublicId":"1169800140"},{"UniStopId":"1169800440","Name":"興隆山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5586916,"Latitude":24.991386,"PublicId":"1169800440"},{"UniStopId":"1164900240","Name":"馬明潭(再興中學)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5597219,"Latitude":24.989377,"PublicId":"1164900240"},{"UniStopId":"1164600040","Name":"木柵公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56074,"Latitude":24.98693,"PublicId":"1164600040"},{"UniStopId":"1166300040","Name":"忠順街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5614966,"Latitude":24.98477,"PublicId":"1166300040"},{"UniStopId":"1166000340","Name":"國泰新村(興隆)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5622646,"Latitude":24.982543,"PublicId":"1166000340"},{"UniStopId":"1165800120","Name":"忠順廟","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56469,"Latitude":24.982483,"PublicId":"1165800120"},{"UniStopId":"1165700120","Name":"司法新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56636,"Latitude":24.98305,"PublicId":"1165700120"},{"UniStopId":"1165700320","Name":"景文中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5685285,"Latitude":24.983787,"PublicId":"1165700320"},{"UniStopId":"1165700000","Name":"木南公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.570615,"Latitude":24.985348,"PublicId":"1165700000"},{"UniStopId":"1166400300","Name":"指南路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5707228,"Latitude":24.987194,"PublicId":"1166400300"},{"UniStopId":"1165100620","Name":"政大","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.574739,"Latitude":24.98778,"PublicId":"1165100620"},{"UniStopId":"1166601020","Name":"政大一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.576427,"Latitude":24.988319,"PublicId":"1166601020"},{"UniStopId":"1166602400","Name":"萬興圖書館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57697,"Latitude":24.98897,"PublicId":"1166602400"},{"UniStopId":"1165200000","Name":"大誠高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.576905,"Latitude":24.990413,"PublicId":"1165200000"},{"UniStopId":"1165200360","Name":"萬壽橋頭(秀明)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.574627,"Latitude":24.991863,"PublicId":"1165200360"},{"UniStopId":"1165200400","Name":"萬壽橋頭(新光)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.573853,"Latitude":24.992819,"PublicId":"1165200400"},{"UniStopId":"1165603300","Name":"貓纜動物園站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.576197,"Latitude":24.996309,"PublicId":"1165603300"},{"UniStopId":"1165601700","Name":"捷運動物園站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.579926,"Latitude":24.998553,"PublicId":"1165601700"}],"RouteMapUrl":"../MapOverview?nid=0100006600","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"0630 - 2230","HeadwayDesc":"班表:0630 0645 0700 0720 0740 0800 0820 0840 0900 0920 0940 1000 1020 1040 1100 1120 1140 1200 1220 1240 1300 1320 1340 1400 1420 1440 1500 1520 1540 1600 1620 1640 1700 1720 1740 1800 1820 1840 1900 1940 2020 2110 2150 2230","HolidayBusTimeDesc":"0630 - 2230","HolidayHeadwayDesc":"班表:0630 0700 0730 0800 0830 0900 0930 1000 1030 1100 1130 1200 1230 1300 1320 1340 1400 1420 1440 1500 1530 1600 1630 1700 1730 1800 1830 1900 1930 2000 2040 2120 2200 2230","RouteNote":"","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"欣欣客運木柵一站:02-2239-6952","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.583432610744 25.0005554793148, 121.583289890799 25.0006228549201, 121.583159663348 25.0006225110785, 121.583028372649 25.0005627846655, 121.582870514691 25.000478383027, 121.582167629323 25.0000628480166, 121.580876463459 24.9992870619119, 121.57926282014 24.9983261389264, 121.577880190003 24.9974756555558, 121.576573062394 24.9966935255782, 121.575472974534 24.9960383983864, 121.574431017971 24.9954195025922, 121.574115350643 24.9951801720613, 121.57393702868 24.9949694467103, 121.573863152154 24.9947400490344, 121.573850181537 24.9945572033755, 121.573855313883 24.9944461302639, 121.573751944808 24.9932502622839, 121.573650973288 24.9917364966896, 121.573661351243 24.9915520854325, 121.573988731167 24.9916561915794, 121.574741114722 24.9917937448284, 121.575119307806 24.9918850787681, 121.575437369214 24.9919047448843, 121.575649330064 24.9918823533569, 121.57584401434 24.9918287236681, 121.576187913725 24.991650696382, 121.576427182792 24.9914846383155, 121.57662349012 24.9912764237616, 121.576756562715 24.9910127658957, 121.57679861737 24.9908502277393, 121.576809394264 24.9897373188602, 121.576817197132 24.9893044609752, 121.576900605736 24.9889861905963, 121.576969 24.988689, 121.576830963364 24.9886485531126, 121.576732791756 24.9886101718942, 121.576608867564 24.9885441324665, 121.576477098603 24.9884514545166, 121.575966286022 24.9880103683231, 121.57614488092 24.9876057729112, 121.575791532299 24.9876745043758, 121.57455639985 24.9879147171318, 121.573856 24.98806, 121.573412340534 24.9881718938018, 121.573113394264 24.9881781283059, 121.572960366711 24.988141321613, 121.572249335664 24.9878676924442, 121.571745072293 24.9876646947428, 121.57153478505 24.9876312995386, 121.571244106965 24.9876614738532, 121.570636769181 24.987737282994, 121.570654492714 24.9859732784017, 121.570424171766 24.9851479743547, 121.570180126319 24.9848243535101, 121.56982461766 24.9844703285689, 121.569465738533 24.9842395063903, 121.567683714207 24.9836185517579, 121.56524275382 24.9827772899585, 121.562578880628 24.9821490426861, 121.562006110236 24.9837175140196, 121.561247851411 24.9858660025618, 121.560173874082 24.9887806410968, 121.559919344633 24.9893003360096, 121.55976532302 24.9896887442054, 121.559575123859 24.9901344325692, 121.55939147718 24.9904292533578, 121.559098964058 24.9908714792251, 121.558895182792 24.9912550903649, 121.558763817208 24.9916718185709, 121.558684503977 24.9920665205537, 121.558733682559 24.9924380667479, 121.558862636963 24.9928176908786, 121.559109810489 24.9933730838232, 121.559385165199 24.9939130395512, 121.559556289557 24.9942557437565, 121.559628825652 24.9944794159353, 121.55967679229 24.9949087422703, 121.55974788954 24.9952257950647, 121.559810727383 24.9954567259686, 121.560092257845 24.9962248986532, 121.559976396323 24.996763119673, 121.560905996268 24.9970480163232, 121.561263001762 24.9971321438775, 121.561632634298 24.997151740944, 121.561951982215 24.9972022771377, 121.562207087954 24.9972893708784, 121.562586059931 24.9974638527246, 121.563746404579 24.9979304770288, 121.565255337619 24.9983098632313, 121.566695326963 24.9989489083079, 121.566911855506 24.9990116724965, 121.567121426492 24.999040690605, 121.567506245067 24.9990015102939, 121.567855856189 24.9989419255981, 121.5681260285 24.9988385553644, 121.568441194896 24.9987638416466, 121.568772437286 24.9987416533545, 121.569087566567 24.9987416380052, 121.569433372602 24.998671759284, 121.569745191251 24.9985305664606, 121.570017155327 24.998440586374, 121.570344521259 24.9983057656528, 121.570558912144 24.9982131639159, 121.570737862505 24.9981023625688, 121.570903652198 24.9978925354269, 121.570978950208 24.9977161726731, 121.571039957165 24.9975509472801, 121.571041259751 24.9973662551482, 121.570990554107 24.9971959146481, 121.57089804704 24.9970232077823, 121.570780644896 24.996788413616, 121.570641417421 24.9964307656895, 121.570614686888 24.9961326888975, 121.570643357262 24.9958594355912, 121.570760118491 24.9955351012339, 121.570942444964 24.9952936775382, 121.571281100308 24.9950510833688, 121.571771795443 24.9948345122904, 121.571853309838 24.9953230894337, 121.571976742635 24.9956691629991, 121.572154275722 24.9959893857672, 121.572423170981 24.9962544585938, 121.574906351384 24.998440056441, 121.575676200385 24.9996915757304, 121.575778540609 24.9997933522322, 121.575909037977 24.999871890069, 121.576189941388 24.9999498238783, 121.576448042954 25.0000258502025, 121.57691328667 25.0001477002049, 121.576908193746 25.0002722065549, 121.576904697457 25.0003943914064, 121.576914130634 25.0005326911547, 121.576961334021 25.0006823143806, 121.577085453396 25.0009196312279, 121.577273444705 25.0011260296548, 121.578156605498 25.0017866216246, 121.579206951352 25.0026314836448, 121.579952535057 25.0033841245903, 121.580492011152 25.0041662856443, 121.580770255967 25.0047568827588, 121.580990506866 25.005303359134, 121.581256945065 25.0063012562242, 121.581455956902 25.0075284772226, 121.581578543841 25.0087121588765, 121.581654390066 25.0110050675228, 121.58150181698 25.0131163817464, 121.581192894934 25.0145345401983, 121.580645266039 25.0163131743334, 121.580022566919 25.0177926894471, 121.579069210574 25.0195961715324, 121.577720547724 25.0216452376463, 121.576708470174 25.0232123490869, 121.575007166801 25.0258613012575, 121.5740629798 25.0273543381995, 121.573362380809 25.0284695625474, 121.572593373671 25.0296741640496, 121.572244946319 25.0302333933017, 121.572089412601 25.0305929510516, 121.571992502465 25.0309609873172, 121.571841429704 25.0320262954073, 121.571747915005 25.0324288133185, 121.571585224114 25.0326548595642, 121.571411907788 25.0327663589385, 121.571121380289 25.0328365885983, 121.56992817792 25.0328618650189, 121.568197080408 25.0328868047553, 121.56543685444 25.0329528013646, 121.565497988405 25.0358289503429, 121.568445232546 25.0357710487731, 121.568492510959 25.0387353490361, 121.568534789768 25.0410061006955, 121.569735109661 25.0409689210399, 121.574136367162 25.0408467076503, 121.577888208696 25.0407722843403, 121.577850798096 25.0453241567534, 121.577823345679 25.0495427290907, 121.577786430534 25.0500446713867, 121.578137250955 25.0500529285224, 121.578143940346 25.0499570032264, 121.57817621207 25.0498569420589, 121.578247796622 25.0497916988173, 121.578344924893 25.0497640543127, 121.578482032786 25.0497790101866, 121.5785636358 25.0498457675212, 121.578594496656 25.0499493793533, 121.578580551677 25.0500848538385, 121.578904965454 25.0501552403214, 121.579486198947 25.0502871247507, 121.579552016287 25.0501403254887, 121.579642786924 25.0500232409966, 121.579766378271 25.049879739611, 121.579846960198 25.0497941853981, 121.579898900005 25.0497125036134, 121.579927227705 25.0496085430592, 121.579960951356 25.0494439158017, 121.579984800046 25.0492959156269, 121.580009295249 25.0491048480014, 121.58004312312 25.0488407638165, 121.580066397024 25.0485013854024, 121.579856952212 25.0484034846631, 121.579456827128 25.0482580440241, 121.578922632203 25.0481596138542, 121.578204468687 25.0481127112238, 121.577714568317 25.0480954586404, 121.577743521195 25.0453363552401, 121.577781349262 25.040859545325, 121.574046094073 25.0409591008193, 121.569672826514 25.0410501761385, 121.568403964637 25.0410850645922, 121.5683510677 25.0387214419869, 121.568319510005 25.035829485301, 121.565436430191 25.0359005289635, 121.565364682242 25.0328521959734, 121.568214930562 25.0327678702566, 121.569891522567 25.0327355190678, 121.571080545599 25.0327194342004, 121.571329013715 25.0326714531744, 121.57148495036 25.0325533164009, 121.571578452564 25.0323838985399, 121.571599619493 25.0319579957682, 121.571642146287 25.0309128366177, 121.571729796231 25.0304887271869, 121.571865569748 25.0301291618947, 121.572238842677 25.0295007414067, 121.573042638929 25.0282710204605, 121.573740833249 25.0271759964035, 121.574685943932 25.0257062070919, 121.576465626514 25.0231656095153, 121.577341898887 25.0215163051111, 121.578670830799 25.0194120620544, 121.579627680464 25.017675288329, 121.580189239012 25.0162834946959, 121.580730926848 25.0146277155754, 121.581079602243 25.0131013891112, 121.581264492172 25.0110246448175, 121.581272374434 25.0087147758674, 121.581216419234 25.0075435330272, 121.581079901256 25.0063026549843, 121.580840945073 25.0053152639769, 121.580638816626 25.0047627590366, 121.580372143858 25.0042007270868, 121.579863647479 25.00343587163, 121.579153434393 25.0026800375534, 121.578109559522 25.0018437846114, 121.577227376109 25.001191172524, 121.577029506474 25.0009774783838, 121.576906247447 25.000744338555, 121.576853766021 25.0005674595369, 121.576785384384 25.0004391509557, 121.576577957644 25.0001800557371, 121.576422064954 25.0001120115395, 121.576185780317 25.0000265651302, 121.575913652218 24.9999425840877, 121.57574442051 24.9998476687471, 121.575633923408 24.9997351379198, 121.574860250773 24.9984603827882, 121.57238301827 24.9962880624081, 121.572106532982 24.9960195683818, 121.571921869881 24.9956949342078, 121.571798738652 24.9953223082411, 121.571732039073 24.9949302203484, 121.571322529301 24.9951093111447, 121.571007604186 24.9953386665589, 121.570841138799 24.9955649947817, 121.570725773834 24.9958597637237, 121.570699301164 24.9961371106862, 121.57071502452 24.9964014101737, 121.570846853203 24.9967549659837, 121.570962288015 24.9969843708257, 121.571062680429 24.9971781955278, 121.571126939314 24.9973891173742, 121.571118429064 24.9975590804124, 121.571057048363 24.9977366123794, 121.570965642177 24.997941091288, 121.570791997958 24.9981612301763, 121.570580805698 24.9982829935088, 121.570363759538 24.9983724042637, 121.570044116631 24.9985054286911, 121.569769509746 24.9986001649959, 121.569448799029 24.998735633547, 121.56910255228 24.9988008436106, 121.568766598259 24.9988055957658, 121.568442657981 24.9988203567659, 121.568169470307 24.9988924888155, 121.567857228289 24.9990130117416, 121.567510879669 24.9990672307113, 121.567115809913 24.9991031967197, 121.566889753464 24.9990760096071, 121.566680651499 24.9990099022822, 121.565232892187 24.9983740209618, 121.563715696095 24.9979830904644, 121.5625550244 24.9975083110063, 121.562192444972 24.9973476411991, 121.561921465801 24.9972589792159, 121.561639206373 24.9972156365791, 121.561253958405 24.9971922601956, 121.560884902367 24.9971033313238, 121.559866735544 24.9967951196967, 121.559996091506 24.9962176981262, 121.559722151163 24.995462627907, 121.559652608146 24.9952234503585, 121.559582175064 24.9949266650447, 121.559537380411 24.9944938673808, 121.559463314561 24.9942968389291, 121.559293759274 24.9939548398388, 121.559015505126 24.9933949636633, 121.558769072676 24.9928363053135, 121.558634398956 24.9924427999786, 121.558589351243 24.9920589606067, 121.558661217856 24.9916507828761, 121.558801082605 24.9912193995545, 121.559017524703 24.9908234606244, 121.559314177614 24.9903838036907, 121.55949012749 24.9901047989617, 121.559683067671 24.9896512812289, 121.559834488824 24.9892735036296, 121.560083524216 24.9887563022386, 121.561123376752 24.9859276669875, 121.561918999244 24.9837173832731, 121.562504808842 24.9820713064822, 121.565275780795 24.9827184687657, 121.567686913323 24.9835536850571, 121.569505669541 24.984188994011, 121.569859212502 24.9844091015231, 121.570236447628 24.9847920659197, 121.570476263443 24.985122711218, 121.570711554238 24.9859621099845, 121.570687854776 24.987686176043, 121.57124498686 24.9876193846277, 121.571533776162 24.9875883744362, 121.571747293785 24.9876191497981, 121.572272270863 24.98782385173, 121.572977677437 24.9880973185827, 121.573142087478 24.9881265373856, 121.573412030252 24.9881196874916, 121.573859868983 24.9880019133567, 121.574549960333 24.9878666459429, 121.575690592523 24.9876476394687, 121.575956847631 24.9879265239194, 121.576516743203 24.9884073584075, 121.576647805921 24.988497299071, 121.576762284105 24.9885576474921, 121.576872002422 24.9886043913329, 121.577042173459 24.9886505366219, 121.576949634416 24.9890247875096, 121.576878437285 24.9893258719221, 121.576866210397 24.9897480227179, 121.576854420069 24.9908406571279, 121.576806 24.99105, 121.576663463995 24.99131840522, 121.576444211472 24.9915394468061, 121.576242927007 24.9916923803182, 121.575901 24.991879, 121.575651709332 24.9919402274999, 121.575408749138 24.9919614679467, 121.575110787495 24.9919321752823, 121.574735218134 24.9918540575956, 121.573971308223 24.9916953404074, 121.573705 24.991732, 121.573794346752 24.9932437940259, 121.573911398741 24.99441907524, 121.573941825181 24.9946675105117, 121.574018874569 24.9948363650739, 121.574200076139 24.9950490473692, 121.574522638047 24.9952361472595, 121.57557235726 24.9958749252268, 121.576695708262 24.99655850981, 121.578017073951 24.9973452215629, 121.57942297132 24.9981822615989, 121.581013219754 24.9991308245066, 121.582317104915 24.9999073491193, 121.582623380339 25.0000288479962, 121.582872087533 25.0000262668219, 121.583104394861 25.0000737617254, 121.583239001902 25.0001394012139, 121.583410051841 25.0002523284498, 121.583482615208 25.0003999966451, 121.583428310875 25.0005614199439)","wkt0":"LINESTRING (121.580225637416 24.9988116119376, 121.576511741196 24.9965696998882, 121.575290650163 24.995880086468, 121.574551245794 24.9954365628889, 121.57401126584 24.9951139992805, 121.573880872953 24.9949068351373, 121.57375968427 24.9936082277879, 121.573592474568 24.9917534478872, 121.573729003591 24.9916144077864, 121.574207622187 24.9916380446147, 121.5748089635 24.991793769487, 121.575209346363 24.9918883166347, 121.575579048548 24.9918660702535, 121.575870515001 24.9917951598867, 121.576339929393 24.9915671341163, 121.576608385336 24.9913015669847, 121.576737244189 24.9910749307065, 121.576810877819 24.9907426227701, 121.576809343785 24.9896928574881, 121.576847694634 24.9893369085493, 121.576976553487 24.9886987006449, 121.576894386281 24.9886460409054, 121.576573665309 24.9884916505539, 121.576243737038 24.9882343328705, 121.576011252697 24.9880263919707, 121.576013947176 24.987872084393, 121.57608144467 24.9877114879919, 121.576072240467 24.9876607367047, 121.576021617346 24.9876482226854, 121.575008387915 24.987823418839, 121.57405191774 24.9879972243003, 121.573534948295 24.9881411350363, 121.573223539401 24.988181457821, 121.573022580952 24.9881543442259, 121.572629101241 24.9880166904967, 121.571974068739 24.9877587631447, 121.571662659845 24.9876593462581, 121.571392669868 24.987649613132, 121.570761414893 24.987750420472, 121.570619516752 24.9876732507226, 121.57065556655 24.9860936934977, 121.570617215701 24.9858086479989, 121.570460744237 24.9852621930731, 121.570318079078 24.9849757551697, 121.570052691203 24.9846990499596, 121.569813381905 24.9844612776484, 121.569607821354 24.9843319626896, 121.569210506558 24.9841651044773, 121.567859022638 24.9836992907696, 121.566812811477 24.9833447149735, 121.565449055285 24.9828816791591, 121.565067080829 24.9827384575181, 121.56272461097 24.9822045035223, 121.56263065139 24.9822135418254, 121.562560469337 24.9822350946992, 121.561969866261 24.9838911784211, 121.561425667714 24.9853769070948, 121.560259801903 24.9886180554016, 121.559887031651 24.989502369317, 121.559613973606 24.9901099838391, 121.559314836983 24.9906230473096, 121.558975815478 24.9910999580461, 121.558892977644 24.9913585735901, 121.558707359535 24.9919870349024, 121.558725767942 24.9923513185283, 121.559299496644 24.993797319219, 121.559557214349 24.9942060894068, 121.559663062692 24.9946663018349, 121.559784251375 24.9952363510937, 121.559980607722 24.9958675732855, 121.560103330439 24.9962443585552, 121.560008220334 24.99672124748, 121.560043503115 24.9967414074666, 121.560377922518 24.9968818321096, 121.561142638448 24.997083431564, 121.561448678223 24.9971251417546, 121.561912723496 24.9971550340492, 121.562250977985 24.99728364035, 121.56301185883 24.9976013320944, 121.563959124801 24.9979829782025, 121.56482048487 24.9981755387215, 121.5651380299 24.9982499212239, 121.56551386822 24.998390344143, 121.565991719799 24.9986162717702, 121.566647519318 24.9989263133147, 121.566860750038 24.9989930486121, 121.567059407436 24.9990180743392, 121.567293347615 24.9990222452933, 121.567742819566 24.9989694131984, 121.56805422846 24.9988818230963, 121.568373307524 24.9987831103667, 121.569218560237 24.9987094233478, 121.569638885542 24.9985884653154, 121.570456525643 24.9982478357338, 121.570761798402 24.9980921190391, 121.570961222816 24.9978015400366, 121.571057866956 24.9975067893416, 121.571033322413 24.9973552427185, 121.570810887488 24.9968310846086, 121.570706573179 24.9965961164543, 121.570625269379 24.9963583671545, 121.570611463073 24.9960844682682, 121.570637541651 24.9957994459363, 121.570795547149 24.9954977386501, 121.571037924514 24.9952252282066, 121.571272631711 24.9950597751425, 121.571631595657 24.9948887603968, 121.571814145699 24.9949235195108, 121.571886245295 24.9954365628889, 121.572013570114 24.9957368799701, 121.572107146185 24.9958967707093, 121.572512131151 24.9962902400774, 121.573667258724 24.9973218746296, 121.574716537953 24.9982436647535, 121.575089308206 24.9986718846609, 121.575716728096 24.9997452085201, 121.575834848711 24.9998272367714, 121.576141655503 24.9999134358917, 121.57675987119 25.0000747115027, 121.57691480862 25.0001873262435, 121.576924012824 25.0005738303714, 121.577065143948 25.0009255758771, 121.578051527785 25.0016930171214, 121.579346252448 25.0026842883005, 121.579700614293 25.0030666137568, 121.580196107263 25.0036282824511, 121.580470699342 25.0040995816761, 121.580785176304 25.0047655146667, 121.581049030145 25.0054467367465, 121.581319020122 25.006419904593, 121.581415664262 25.0072304085005, 121.581549125216 25.0082994869501, 121.581601282371 25.0089570559388, 121.581593612201 25.0092962656263, 121.581533784877 25.009992754712, 121.581490831926 25.010901938114, 121.581378847447 25.0117596783642, 121.580619500636 25.0147485157314, 121.578079140396 25.0210873904781, 121.57673686068 25.0232030560814, 121.574874543451 25.0260706838986, 121.573730154116 25.0278276462202, 121.573441755732 25.0283127524297, 121.572139360899 25.0302906871238, 121.571961412959 25.030963427849, 121.571808009563 25.0322991686454, 121.571696025084 25.032517389225, 121.571491998567 25.0327411691615, 121.571065537126 25.0328912821821, 121.569733995647 25.0329176909352, 121.568471485697 25.0329371500128, 121.565585967816 25.032981627893, 121.565518470322 25.0329983070939, 121.565475517371 25.0330539044138, 121.565533810662 25.0357753624219, 121.565585967816 25.0358240089769, 121.568284333554 25.03577397252, 121.568462281494 25.0358698757112, 121.568528244954 25.0389720950215, 121.56854205126 25.0404272757011, 121.568557391599 25.0408970438099, 121.568632559263 25.0409915531528, 121.571021050141 25.0409304000569, 121.572676272785 25.0408998234975, 121.574578474897 25.0408358906668, 121.576808960276 25.0407775171836, 121.577781537808 25.0407483304316, 121.577891988253 25.0408887047467, 121.577907328593 25.0417059302421, 121.577891988253 25.0428386402484, 121.577885852117 25.0438240199528, 121.577872045811 25.0451109778541, 121.57785977354 25.0460991188682, 121.57785210337 25.0478349478658, 121.577838297064 25.0494248289231, 121.577826024793 25.0499557111879, 121.577929572085 25.0499876752299, 121.578142035789 25.0499897598411, 121.578144167228 25.0499386255903, 121.578179144333 25.0498578053318, 121.578206062017 25.0498061943225)","wkt1":"LINESTRING (121.578206062017 25.0498061943225, 121.578289292323 25.0497876162942, 121.578399012655 25.0497818816751, 121.578511610269 25.0498192435821, 121.578560907691 25.0498781537285, 121.578590255962 25.0499666057831, 121.578585652311 25.0500256896346, 121.57856570316 25.0501000657367, 121.579099726595 25.0501973801947, 121.579484898671 25.0502835729358, 121.579567764376 25.0502272696198, 121.579720452111 25.0500076169301, 121.5799329873 25.0498122925305, 121.580003576605 25.0496239188823, 121.580041173083 25.0485374630045, 121.579924547275 25.0484095622549, 121.57939819659 25.0482330033922, 121.578526572132 25.0481245655395, 121.577783658064 25.0481226539739, 121.577708465109 25.048035069483, 121.577754501613 25.0455785075611, 121.577775985314 25.0433346100289, 121.577783658064 25.0415744980994, 121.577768312563 25.0409613726085, 121.577677774107 25.0408487573893, 121.574771336215 25.0409419082571, 121.573044967351 25.0409863981988, 121.571295580235 25.0410281075045, 121.568587099306 25.0411004036008, 121.568410626045 25.0409613726086, 121.568369193192 25.0391762006638, 121.568313949388 25.0370364626719, 121.568301672987 25.0359825689018, 121.568257171035 25.0358782913214, 121.566191666598 25.0359116601568, 121.565573242907 25.035933906042, 121.565441271598 25.0358560454262, 121.565398304196 25.0346200015306, 121.565373751394 25.0334645881573, 121.565367613193 25.0330502495435, 121.565508791803 25.0328375181009, 121.566865334093 25.032811100445, 121.568858714674 25.0327401898668, 121.569880725042 25.0327387994629, 121.570964117414 25.0327221146149, 121.571284838385 25.0326956969342, 121.5715088827 25.0325469235733, 121.571631646708 25.0323328008494, 121.571627043057 25.0319351433707, 121.571623973957 25.0315166283386, 121.571602490256 25.0310424949661, 121.571587144755 25.0306921078362, 121.571700701462 25.0302666364046, 121.573741653097 25.0272076480399, 121.575064435285 25.0252637603555, 121.57589616144 25.0239984091961, 121.576485428679 25.0231251702387, 121.576865997104 25.0224382549735, 121.577160630723 25.0218681401944, 121.577636341255 25.0208363647644, 121.580165279822 25.0147484350889, 121.580815929065 25.0123037223751, 121.58104918068 25.0113497427791, 121.581294708697 25.0097115506154, 121.581273224995 25.0086768916744, 121.581144322787 25.0068467477957, 121.581018489678 25.0061235831237, 121.580766823462 25.0051834626853, 121.580478328043 25.0044602882213, 121.579809264198 25.0034144591589, 121.579401073871 25.0029416079899, 121.57907268015 25.0026384259887, 121.57817650289 25.0019402700949, 121.577249634629 25.0012504547974, 121.576976484711 25.0009500501508, 121.57681228785 25.0005063956489, 121.576819960601 25.0002491031192, 121.576737094895 25.0001684383233, 121.576061892851 24.9999862469514, 121.575770328331 24.9998694218074, 121.575659840724 24.9997692858813, 121.575205613894 24.9990669413285, 121.575044486133 24.9987567958224, 121.574884892923 24.9985426141639, 121.57453348095 24.998175444738, 121.573529885183 24.9973187118109, 121.572616827873 24.9965315136288, 121.572170273793 24.996097578906, 121.571986127781 24.9958597486483, 121.571864898323 24.9956288720514, 121.571806585419 24.9954285932064, 121.571729857914 24.995034988692, 121.571676148661 24.9949960454206, 121.571313994837 24.9951142660277, 121.570924219111 24.9954591913844, 121.5707615568 24.9957651727454, 121.570707847547 24.9960906248114, 121.570740073099 24.9963785239976, 121.570876648058 24.9968124577283, 121.571166678027 24.9973673899782, 121.571175885328 24.997499516335, 121.57106232862 24.9978096650144, 121.570891993559 24.9980919969882, 121.570640327342 24.9982894899044, 121.570390195676 24.9983798914855, 121.569513967568 24.9987442787227, 121.569012169684 24.9988541509983, 121.568501164501 24.998862495724, 121.567993228417 24.9989807126116, 121.56774002765 24.9990599874019, 121.567204469665 24.9991336990032, 121.566814693939 24.9991031017401, 121.566451005565 24.9989334258702, 121.565605468459 24.9985509589108, 121.565140499778 24.9983562480015, 121.564024881855 24.9981059049504, 121.563694953583 24.9979988136006, 121.562838674626 24.9976483321668, 121.56213585068 24.9973520911277, 121.561792111457 24.9972505623444, 121.561336350077 24.997225527837, 121.560653475282 24.9970683666461, 121.5601731611 24.9969042512058, 121.559893872982 24.9967095376872, 121.559987480538 24.9962672586916, 121.559953720435 24.9960447277774, 121.559772643524 24.9955565491728, 121.559672897767 24.9952922921392, 121.559577755661 24.9947707305369, 121.559504097256 24.9943952048127, 121.5594104897 24.994167107146, 121.559034524925 24.993431350202, 121.558885673565 24.993058602092, 121.558646283749 24.9923965541544, 121.558604850896 24.9920613562548, 121.558635541898 24.9918318633898, 121.558836567962 24.9912365708092, 121.558951659219 24.9909277964193, 121.559318416693 24.9904076071796, 121.559547064659 24.9900125956983, 121.56001817154 24.9889290893796, 121.560203852102 24.9885006914357, 121.560533780374 24.9875896453905, 121.560843759494 24.9867453569977, 121.561202844218 24.9857494508803, 121.562422811549 24.9823485654136, 121.562559386508 24.9821357461407, 121.562717445168 24.9821218363715, 121.565079117774 24.9826796168839, 121.566691929931 24.9832179213634, 121.568218807282 24.9837534415693, 121.569497087517 24.9841818560548, 121.569831619439 24.9843682437091, 121.570017300001 24.9845546310809, 121.570377919275 24.9849538329341, 121.570534443385 24.9852389763214, 121.570749280399 24.985981736967, 121.570710916647 24.987376835189, 121.570729331248 24.9876772730135, 121.570787644152 24.9876856184982, 121.571422947894 24.9875945135935, 121.571579472004 24.987585472645, 121.571767454392 24.9876237228069, 121.572478718364 24.9878963417977, 121.572998163573 24.9881042829175, 121.573166964084 24.9881293192828, 121.573331160945 24.9881314056463, 121.573549067059 24.9880827238211, 121.573875158956 24.9879784055593, 121.57423270913 24.9879102509137, 121.575702040852 24.9876411092402, 121.575942965218 24.987883823592, 121.57612864578 24.9880500374419, 121.576473919553 24.9883560372473, 121.576664971041 24.9884958232686, 121.5768076842 24.9885625866854, 121.577073928643 24.9886383909376, 121.577067023167 24.9887454904436, 121.576922775458 24.9893407950878, 121.576905895406 24.9899451376247, 121.576905128131 24.9907963584369, 121.576847582503 24.9910467163776, 121.576745534921 24.9912609110998, 121.576575967135 24.9914709328351, 121.576343482794 24.9916684363913, 121.575860866787 24.9919083610591, 121.57552863669 24.9919695591602, 121.575184130193 24.9919639956977, 121.574737576113 24.9918708076637, 121.574426829718 24.9917929191035, 121.574056235868 24.9917345026509, 121.573842166129 24.9917157259281, 121.57378001685 24.9917379798215, 121.573754696773 24.9917915282359, 121.573997155689 24.9947443046901, 121.574101505096 24.9949459754821, 121.574635528531 24.9953673968276, 121.575711248152 24.996057245152, 121.577962433151 24.9973590451509, 121.579926657281 24.9985530450975)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0100006600'=='0100020200' || '0100006600'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
