
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492977</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454071100">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454071100">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454071100" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454071100" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454071100" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454071100',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="jaztmzqpjMeDG0-2_3TBGOmWUAqn615gXRSALVPut2xRBKEnU6r3AVKMfNtTBIdu1EQx4j1o-SYv29kW9wmP7xM5rKc1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F711 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454071100" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454071100" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">深坑區公有市場 - 深坑國小</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0700 - 1720 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> F711深坑區公有市場班表:0700 0800 1000 1720<br/>F711深坑國小班表:1240 1605<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">深坑區公所深坑區公所站:(02)2662-3116</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 深坑國小</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 深坑區公有市場</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">深坑區公有市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200720" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.00098" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.615344" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">世新山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00937" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.62065" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">崩山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224501520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.014074" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6229761" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">青山雄觀北區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224501000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.016153" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6265896" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">風格山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224501220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.016898" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.627645" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">大坪</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.018206" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.629884" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">土庫尖</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.017334" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.634776" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">土庫尖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224600140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011253" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.640676" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">烏月一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401250" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.008126" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.633286" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">烏月二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401350" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.005537" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.631839" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">昇高活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.004838" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6282048" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">旺耽</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500750" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003568" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.626642" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">昇高橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.001016" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.621828" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">深坑國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224300760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003315" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.616794" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">深坑國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224300720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003092" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6165706" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">昇高橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.000967" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.621846" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">旺耽</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003485" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.626727" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">昇高活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.004767" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6278333" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">烏月二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.006587" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.632471" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">烏月一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.007934" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.633255" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">土庫尖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224600120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011643" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.640698" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">土庫尖</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.017427" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.634795" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">大坪</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.018248" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.629835" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">風格山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224501260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01696" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.627662" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">青山雄觀北區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224501040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.015977" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6264028" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">崩山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224501560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01486" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.62436" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">世新山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224500560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00959" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.62058" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">深坑區公有市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00098" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.615344" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454071100";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 14;
        var existBackNum = 14;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454071100',
                        url: './StopStatusRecent3OfRoute?routeid=0454071100&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454071100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454071100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454071100');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454071100","Name":"F711","BeginStop":"深坑區公有市場","GoDirStops":[{"UniStopId":"2224200720","Name":"深坑區公有市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615344,"Latitude":25.00098,"PublicId":"2224200720"},{"UniStopId":"2224500520","Name":"世新山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.62065,"Latitude":25.00937,"PublicId":"2224500520"},{"UniStopId":"2224501520","Name":"崩山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6229761,"Latitude":25.014074,"PublicId":"2224501520"},{"UniStopId":"2224501000","Name":"青山雄觀北區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6265896,"Latitude":25.016153,"PublicId":"2224501000"},{"UniStopId":"2224501220","Name":"風格山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.627645,"Latitude":25.016898,"PublicId":"2224501220"},{"UniStopId":"2224500320","Name":"大坪","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.629884,"Latitude":25.018206,"PublicId":"2224500320"},{"UniStopId":"2224500220","Name":"土庫尖","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.634776,"Latitude":25.017334,"PublicId":"2224500220"},{"UniStopId":"2224600140","Name":"土庫尖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.640676,"Latitude":25.011253,"PublicId":"2224600140"},{"UniStopId":"2224401250","Name":"烏月一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.633286,"Latitude":25.008126,"PublicId":"2224401250"},{"UniStopId":"2224401350","Name":"烏月二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.631839,"Latitude":25.005537,"PublicId":"2224401350"},{"UniStopId":"2224200460","Name":"昇高活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6282048,"Latitude":25.004838,"PublicId":"2224200460"},{"UniStopId":"2224500750","Name":"旺耽","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.626642,"Latitude":25.003568,"PublicId":"2224500750"},{"UniStopId":"2224500860","Name":"昇高橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.621828,"Latitude":25.001016,"PublicId":"2224500860"},{"UniStopId":"2224300760","Name":"深坑國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.616794,"Latitude":25.003315,"PublicId":"2224300760"}],"LastStop":"深坑國小","BackDirStops":[{"UniStopId":"2224300720","Name":"深坑國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6165706,"Latitude":25.003092,"PublicId":"2224300720"},{"UniStopId":"2224500820","Name":"昇高橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.621846,"Latitude":25.000967,"PublicId":"2224500820"},{"UniStopId":"2224500720","Name":"旺耽","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.626727,"Latitude":25.003485,"PublicId":"2224500720"},{"UniStopId":"2224200420","Name":"昇高活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6278333,"Latitude":25.004767,"PublicId":"2224200420"},{"UniStopId":"2224401320","Name":"烏月二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.632471,"Latitude":25.006587,"PublicId":"2224401320"},{"UniStopId":"2224401220","Name":"烏月一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.633255,"Latitude":25.007934,"PublicId":"2224401220"},{"UniStopId":"2224600120","Name":"土庫尖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.640698,"Latitude":25.011643,"PublicId":"2224600120"},{"UniStopId":"2224500260","Name":"土庫尖","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.634795,"Latitude":25.017427,"PublicId":"2224500260"},{"UniStopId":"2224500340","Name":"大坪","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.629835,"Latitude":25.018248,"PublicId":"2224500340"},{"UniStopId":"2224501260","Name":"風格山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.627662,"Latitude":25.01696,"PublicId":"2224501260"},{"UniStopId":"2224501040","Name":"青山雄觀北區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6264028,"Latitude":25.015977,"PublicId":"2224501040"},{"UniStopId":"2224501560","Name":"崩山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.62436,"Latitude":25.01486,"PublicId":"2224501560"},{"UniStopId":"2224500560","Name":"世新山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.62058,"Latitude":25.00959,"PublicId":"2224500560"},{"UniStopId":"2224200720","Name":"深坑區公有市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615344,"Latitude":25.00098,"PublicId":"2224200720"}],"RouteMapUrl":"../MapOverview?nid=0454071100","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0700 - 1720","HeadwayDesc":"F711深坑區公有市場班表:0700 0800 1000 1720;F711深坑國小班表:1240 1605","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"深坑區公所深坑區公所站:(02)2662-3116","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.615325194434 25.0009396465142, 121.615601338095 25.0009613233752, 121.615629604769 25.0022023172954, 121.615427389332 25.0026560479495, 121.615920968946 25.0028609898019, 121.616661881958 25.0031452475265, 121.618037164365 25.0036901140474, 121.618774272248 25.0039916123856, 121.619292856997 25.0041655155024, 121.61988863151 25.0044354835926, 121.620136508497 25.0044886889126, 121.620521370135 25.0044187337648, 121.620799688155 25.0044069103556, 121.621130190805 25.0044620862555, 121.622026026934 25.0047655532617, 121.622208673135 25.0053212506414, 121.622486991155 25.0059537967272, 121.622547873222 25.0061547919977, 121.622573965537 25.0063163761924, 121.622560919379 25.0065291940757, 121.622478293717 25.0066789545874, 121.62134110368 25.0080248204656, 121.621119319007 25.0082218713332, 121.61955812886 25.0092347078037, 121.619488549355 25.0094238747791, 121.619518990389 25.0095578678771, 121.61960596477 25.0096839788946, 121.619766867376 25.00975097532, 121.619953862296 25.0097233885611, 121.6206571182 25.0094519559365, 121.620914385621 25.0093558929308, 121.621142693372 25.0093322470618, 121.62133838573 25.0093893912376, 121.621484067819 25.0095076204825, 121.621545493476 25.0097169844911, 121.62138676523 25.0106879362043, 121.621304139568 25.0111076450708, 121.621347626758 25.0113662677778, 121.621449821657 25.0116362200415, 121.621741185834 25.0119066643239, 121.622200519286 25.0121298173542, 121.622369348844 25.0123552046159, 121.622385339847 25.01248893032, 121.622383165487 25.0132342464707, 121.622435350116 25.0133825209883, 121.622775093794 25.013920938246, 121.62318318516 25.0145396899564, 121.623364888818 25.0147278208051, 121.623501873469 25.0148224000986, 121.623893223499 25.014846557586, 121.62419658134 25.0147908736755, 121.625221305668 25.0144537696827, 121.625605108174 25.014333246712, 121.625826263813 25.0143746256121, 121.62602630489 25.0144967908705, 121.626095884395 25.0146588566911, 121.626067617721 25.0148381633071, 121.625961074104 25.0150214104573, 121.625797453549 25.015122393313, 121.625616981707 25.0151283045019, 121.625034253352 25.0150672222021, 121.624844087532 25.0151385648426, 121.624740714814 25.0152701729521, 121.624716072602 25.01551359197, 121.624799422522 25.0156997180933, 121.624927709734 25.0157785335523, 121.625228156621 25.015754227573, 121.625499838087 25.0156846938908, 121.626346318538 25.0155761314499, 121.626565546055 25.0156780438331, 121.626626428122 25.0158893677061, 121.626574243493 25.0160745836686, 121.626408992168 25.0161888657188, 121.625466950899 25.0166405743331, 121.625601761191 25.016695744737, 121.626014996631 25.0164947649703, 121.626430735764 25.0165105297116, 121.626548151179 25.0165381149458, 121.626744387127 25.016613481715, 121.627027053866 25.016871600234, 121.627262871166 25.0169679447448, 121.627463351556 25.0170020330179, 121.627677730957 25.0169208594317, 121.627935205375 25.0167497290542, 121.628050090028 25.0167454965978, 121.62818272596 25.0167809632586, 121.628341454206 25.0169267705341, 121.628391464475 25.0170114963038, 121.628496377323 25.0173745357132, 121.629398276478 25.0175245388389, 121.629584100681 25.0177257519221, 121.629817300741 25.017834121377, 121.629910798201 25.0179444610873, 121.62991297256 25.0180513525872, 121.62986731101 25.0181715438399, 121.62991514692 25.0183094680832, 121.630325013693 25.0184222702956, 121.630507659894 25.0185030543491, 121.630703352252 25.01864097822, 121.63085338306 25.0186587112779, 121.631003413868 25.0185641349396, 121.631092562609 25.0183237530853, 121.631157793395 25.0182587316831, 121.631266511372 25.0182055323285, 121.631355660113 25.0182015916347, 121.631567116577 25.0182409985675, 121.631808470486 25.0181562736463, 121.632322162926 25.0176671338589, 121.632502634768 25.0176710745699, 121.632842378445 25.017647430302, 121.63318581402 25.0175375713704, 121.633321281133 25.017386850464, 121.633423476031 25.0172292215601, 121.633495229896 25.0171661699419, 121.633595250435 25.0171661699419, 121.63366482994 25.0172824213378, 121.634121989032 25.017424287299, 121.634287240357 25.0174183762205, 121.634604696849 25.0173001545919, 121.634692214821 25.0173100063987, 121.634904214875 25.0174193614003, 121.635002061054 25.0174380798142, 121.635120563649 25.0174292131975, 121.635305572991 25.0172817785083, 121.635360558583 25.0172538510897, 121.635441009886 25.0172607473571, 121.635520374009 25.017309021218, 121.635556250941 25.0174055688829, 121.635572558638 25.0175178793364, 121.635560871455 25.0176442284737, 121.635670676612 25.0179222946356, 121.635825056139 25.0180759819518, 121.635940568989 25.0181097241734, 121.636063420303 25.0181146500443, 121.636135174168 25.0180525840555, 121.636163440842 25.0179796811079, 121.636141697246 25.0179264816324, 121.635892733079 25.0178267325536, 121.63579814844 25.0177715626579, 121.635759009968 25.0176819115246, 121.6357948869 25.0175703401051, 121.635966661304 25.0172735547098, 121.636147133145 25.0170959757195, 121.636484430668 25.0165487057038, 121.636552922993 25.0165467353303, 121.63661815378 25.0165693946236, 121.636629025577 25.0166590465694, 121.636532538373 25.0168917965075, 121.636290097285 25.0172999082968, 121.636249871633 25.0174233021193, 121.636257481892 25.0174725610956, 121.636324887037 25.0174902943222, 121.636374897306 25.0174833980677, 121.636431430654 25.0173218285657, 121.636491225542 25.0172311919227, 121.636703225596 25.016998442628, 121.636836133323 25.0167223447443, 121.636905712828 25.0166908188091, 121.636974205154 25.0167203743736, 121.63699268721 25.016793278069, 121.636932892322 25.0168711076419, 121.636900276929 25.0169449964314, 121.63689701539 25.0170021370647, 121.636931805143 25.0170819368702, 121.637079933386 25.0171787310091, 121.637164733408 25.0171964642782, 121.63760096429 25.0170949905371, 121.637705333548 25.0170940053548, 121.637771923308 25.0171235608222, 121.637958918228 25.0172811898618, 121.638024420809 25.0172821750426, 121.638171190078 25.0171935087335, 121.638378297824 25.0170385888341, 121.63853811325 25.0168947520594, 121.638609867115 25.0168740631944, 121.638689231238 25.0169065742664, 121.638783815877 25.0170346481028, 121.638872149234 25.0170720850451, 121.63917221085 25.0168701224578, 121.639402964755 25.0165822020485, 121.639401877575 25.0165221056589, 121.639361651924 25.0165004315439, 121.63914421597 25.0166176687564, 121.63900723132 25.0166620021269, 121.638949610792 25.0166363872926, 121.638927867197 25.0165831872349, 121.638944174893 25.0165004315439, 121.639008318499 25.0164440295678, 121.639251846768 25.016313984738, 121.639414108348 25.0161669452476, 121.639445636561 25.0161137449866, 121.639529349403 25.0156085876557, 121.639716344323 25.0148561432143, 121.639711995604 25.0147347172144, 121.639620672504 25.0143066465045, 121.639642416099 25.0141379300782, 121.639702482781 25.0139751246646, 121.639780759725 25.0138263582583, 121.6399647649 25.0135965581407, 121.640101749551 25.0135197117031, 121.640228134199 25.0133931120184, 121.640435785535 25.0130857254705, 121.640498841961 25.0129564159956, 121.640509713759 25.0127640525058, 121.640546677871 25.0125867132982, 121.640529282995 25.0125034623041, 121.64045644195 25.0122926252144, 121.640462965029 25.0121583887947, 121.640493406063 25.012011344328, 121.640573857365 25.011840654299, 121.640673923763 25.0114705540127, 121.640686672971 25.0112243719192, 121.640570867621 25.011147300588, 121.640072667492 25.0107056704108, 121.639837564868 25.0105497570911, 121.639588328906 25.0104699530405, 121.639304574986 25.0104049274794, 121.638776749209 25.0104394107357, 121.638151892637 25.0105339933321, 121.637124507756 25.0107477891409, 121.636144143401 25.0107369515743, 121.634361712171 25.010735966341, 121.634018978749 25.0107458186744, 121.633508547848 25.0108354748719, 121.632984722177 25.0109564950527, 121.632717624567 25.0109234068483, 121.631914470513 25.0105278356132, 121.631516290923 25.0102931031385, 121.630946065135 25.0098662484959, 121.6308512087 25.0097140287665, 121.63059653684 25.0092034262576, 121.630447321416 25.009061304487, 121.630207724638 25.0089153976131, 121.630064362343 25.0088531709212, 121.629761854573 25.0087928244368, 121.629135367231 25.0086972552498, 121.628969028727 25.0086371550013, 121.628889392809 25.0085915871704, 121.62878937227 25.0084763127983, 121.628665433777 25.0082413300893, 121.628539320924 25.0079388569257, 121.628430602947 25.0078689037428, 121.628037043871 25.0077117552498, 121.628065310545 25.0075619959974, 121.628380592677 25.0073112473665, 121.629057905673 25.0069935003309, 121.630983301042 25.005997394994, 121.631311629332 25.0058732507361, 121.631775311503 25.0067368389469, 121.632161431149 25.0074135394229, 121.632415660386 25.0077196373107, 121.63260964057 25.0078989326477, 121.632948378473 25.008135415304, 121.633385424739 25.0082832033513, 121.633318019594 25.0081147249632, 121.632904619487 25.0076344125008, 121.632716537387 25.0073826787575, 121.632552101447 25.0069664055844, 121.632379239864 25.0065247603737, 121.631922080772 25.0056072269038, 121.631784008941 25.0054298773622, 121.631677193529 25.0053648491328, 121.631046357469 25.0053313497285, 121.629752069955 25.005661663309, 121.629647700697 25.0056611706719, 121.629581382731 25.0056463915597, 121.629517239125 25.0056188038789, 121.629309315994 25.0053495773467, 121.629188367245 25.0052616413799, 121.628794536374 25.0051086769851, 121.628281387524 25.0048653129499, 121.627938654102 25.004824916444, 121.627815530993 25.0048111225121, 121.627718771994 25.0047687554259, 121.627661151466 25.0046879623372, 121.627471710391 25.0041334937006, 121.627331460529 25.0039285067279, 121.62726596162 25.0038581058599, 121.62717137698 25.0037901209312, 121.626830020049 25.003602870052, 121.626607674271 25.0035011845646, 121.626051853614 25.0033001849523, 121.626747648666 25.0019887529386, 121.626293207523 25.001745382723, 121.625270714951 25.0014340257928, 121.624275945463 25.0009684668856, 121.623739965838 25.0007398743531, 121.622966165638 25.0009132894167, 121.622495416798 25.0009369369064, 121.622070873099 25.0010453211759, 121.621829247395 25.001001228496, 121.621753144812 25.0010573912364, 121.621114426698 25.0013226859395, 121.620985052306 25.0013463333504, 121.620499898334 25.0013059356873, 121.620146836704 25.0013660395227, 121.619441800625 25.001531571245, 121.61829428238 25.0018887445885, 121.618135282339 25.0019853043762, 121.6176860053 25.0019803778583, 121.616901333302 25.0019153478029, 121.616824958923 25.0022094607336, 121.616717328126 25.0025535768952, 121.616635517849 25.0026215625081, 121.616515656279 25.0026885627855, 121.616674384526 25.0032092916373, 121.61618406645 25.003029229072, 121.616161235675 25.0029464642477, 121.616598281942 25.0031139644297, 121.616476517808 25.0026764928853, 121.616628722975 25.0025996396153, 121.616685256323 25.0025553011684, 121.616724394795 25.0024804184218, 121.616891005094 25.0018727333919, 121.617690354019 25.0019446605973, 121.618115984898 25.001953528332, 121.618284769557 25.0018609097377, 121.618589723482 25.0017601623045, 121.619040903085 25.0016123664095, 121.61953720065 25.0014662946252, 121.620180267482 25.0013175130677, 121.620512129107 25.0012682476117, 121.620971190764 25.001313571832, 121.62110736003 25.0012879537965, 121.621747165323 25.0010243833132, 121.621828703806 25.0009800442978, 121.622074678228 25.0010233980019, 121.622483729616 25.0009199402736, 121.622966981023 25.0008903809067, 121.623979145387 25.0006694244137, 121.625328607274 25.0013064283418, 121.62660930504 25.0017340517093, 121.62689142819 25.001865097282, 121.626125510044 25.0033051114173, 121.626654151206 25.0034945338474, 121.627181705188 25.0037706614701, 121.627300479578 25.0038613080477, 121.627397510372 25.0039908734201, 121.62750079245 25.0041435928852, 121.627681264292 25.0046859917734, 121.62773344892 25.0047569320504, 121.627816074583 25.0047874757681, 121.627942459231 25.0048081666693, 121.628289541372 25.0048497947815, 121.628610259403 25.0050005426201, 121.628817367149 25.0050993168388, 121.629195977503 25.0052463695809, 121.629324264716 25.0053291328558, 121.629537623745 25.0056091974528, 121.629590895554 25.0056328440387, 121.62965503916 25.0056407262329, 121.629740926362 25.0056387556844, 121.630632141977 25.0054072160134, 121.631040106185 25.0053096736384, 121.631666865321 25.005342187772, 121.631736716621 25.0053707607915, 121.631795424329 25.0054160834982, 121.631912024359 25.0055493420121, 121.632022916695 25.0057483673977, 121.632279762915 25.0062710538179, 121.632414573206 25.0065545647017, 121.632738824572 25.0073819398123, 121.632926091287 25.0076277620074, 121.633335142675 25.0081110302592, 121.633421029877 25.008289607496, 121.633389501663 25.008427542839, 121.633143799036 25.0083654719538, 121.632855696397 25.008231477555, 121.632599937357 25.0080627527823, 121.632290634713 25.0077974726346, 121.632034875673 25.00747283004, 121.631258085728 25.0061481414243, 121.631081962606 25.0061001094935, 121.630947152315 25.0061276970663, 121.629684936604 25.0067942306465, 121.628379233703 25.0074730763549, 121.628320525995 25.0075440150223, 121.628279213164 25.0076563344952, 121.628283561883 25.0077588012931, 121.628468382444 25.0078297397955, 121.62857927478 25.0078967372323, 121.628849438952 25.0084568540795, 121.628923367177 25.0085553792062, 121.629106013378 25.0086322287502, 121.629969777703 25.0087647448381, 121.630106762354 25.0088061252972, 121.630403018841 25.0089504641705, 121.630657418906 25.0091652479819, 121.630913993332 25.0096898903455, 121.631003142073 25.0098416174846, 121.631216772897 25.0099918665771, 121.631645665316 25.0103056649088, 121.632078906453 25.0105504960173, 121.632766004066 25.0108775935576, 121.632987788739 25.0108972982009, 121.633394937562 25.0107928635555, 121.633984188996 25.0106903992888, 121.634328281393 25.0106746355478, 121.636336846014 25.0106805469509, 121.637131574425 25.0106805469509, 121.638131779811 25.0104716772026, 121.638768867155 25.0103770945583, 121.63926299036 25.010345566994, 121.639611431476 25.0104086221145, 121.639846262306 25.0104874409696, 121.640066959798 25.010623895993, 121.640488785548 25.0109864616722, 121.640734488176 25.0111795668689, 121.640701872783 25.0114672536395, 121.640671431749 25.0116352348155, 121.640602939424 25.0118670090521, 121.640519226582 25.0120335118468, 121.640487698369 25.012304940475, 121.640579021469 25.0125138071053, 121.64057467275 25.0126162698507, 121.640542057357 25.0127901607565, 121.640537708638 25.0129517362217, 121.64048334965 25.013074395503, 121.640344190639 25.0132911425278, 121.640148498281 25.0135394159225, 121.639987052085 25.0136266070552, 121.639802231525 25.0138532051894, 121.639717431503 25.0140133014452, 121.639671769953 25.0141650232427, 121.639660898155 25.0143192078643, 121.639750046896 25.0147329931122, 121.639754395615 25.0148551580141, 121.639563051976 25.0156172081055, 121.639493472471 25.0161275376491, 121.639434764763 25.0161910823956, 121.639276036517 25.0163487126323, 121.639039031328 25.0164728463013, 121.638975974901 25.016520135285, 121.638965103104 25.016583187235, 121.638999892856 25.0166363872927, 121.639119482631 25.0165969798448, 121.639306477551 25.0164905796723, 121.639391277573 25.0164689055518, 121.639432590404 25.0165063426667, 121.639436939123 25.0165930390993, 121.639195585214 25.0168969687234, 121.638908026166 25.0170925275813, 121.638838446661 25.0171004090401, 121.638764518436 25.0170688832019, 121.638660149179 25.0169368686668, 121.638612313269 25.0169014020511, 121.638551431202 25.0169250464627, 121.638313882423 25.0171442496453, 121.638076877233 25.017305819381, 121.638024692604 25.0173137008261, 121.637937718223 25.0173137008261, 121.637734959196 25.0171462200092, 121.637606671983 25.0171284867329, 121.637171256486 25.0172304530369, 121.637068517998 25.017206808684, 121.636942405145 25.0171358755983, 121.636883697438 25.0170688832019, 121.636835861528 25.0169940093039, 121.636864128202 25.0169270168301, 121.636931533348 25.0167989428814, 121.636929358988 25.0167536243753, 121.636885871797 25.0167299799307, 121.636840210247 25.0167634762259, 121.636761933304 25.0169703649056, 121.636624405063 25.0171437570543, 121.636480897334 25.0172935046221, 121.636387399874 25.0175279774205, 121.636317820369 25.0175338884936, 121.636222148549 25.0175082738412, 121.636198230594 25.0174334002111, 121.636241717785 25.0172895638989, 121.636415666548 25.017001890769, 121.636576569153 25.0166728391707, 121.636574394794 25.0165979650311, 121.636506989648 25.0165762909296, 121.636180835718 25.0170964683108, 121.635999820286 25.0172762639574, 121.635823697164 25.0175816696579, 121.63579543049 25.0176831429967, 121.635826958703 25.0177491498808, 121.635913933085 25.0178131863763, 121.636169692125 25.0178991430041, 121.636196871619 25.0179907643292, 121.636165343406 25.0180717949603, 121.636094676721 25.0181515940705, 121.635988948489 25.0181506088966, 121.635893276669 25.0181387868094, 121.635810651007 25.0181072612379, 121.635716066367 25.0180314027983, 121.635637789424 25.0179358408012, 121.635520374009 25.0176469377131, 121.635538856065 25.0175205885786, 121.635522548368 25.0174053225881, 121.635488845795 25.0173304488952, 121.635424430394 25.017294736098, 121.635338543192 25.017298676821, 121.635145025194 25.0174523649178, 121.63502380465 25.0174779795819, 121.634877035381 25.0174494093793, 121.634669384045 25.0173361136828, 121.63460089172 25.0173262618782, 121.634323117289 25.0174378335194, 121.634123891597 25.0174486704947, 121.633677876097 25.0173235526318, 121.633624604288 25.0172782343192, 121.633573506839 25.0171974494598, 121.633508276053 25.0171954790967, 121.633443045267 25.0172585306999, 121.633374552942 25.017344241421, 121.633335142675 25.0174151743864, 121.633238383676 25.0175117219678, 121.633156845193 25.0175787141225, 121.632864937425 25.0176755078698, 121.632710557898 25.0176922558896, 121.632562429655 25.0176961965998, 121.6323504296 25.017686344824, 121.632215347514 25.0178284566125, 121.631841085879 25.01817154384, 121.63157989094 25.018263411255, 121.631338265236 25.0182368115816, 121.631287167787 25.0182348412352, 121.63122628572 25.018262426082, 121.631150183136 25.018302818168, 121.631115393384 25.0183432102407, 121.631052065162 25.0185552684043, 121.630984660017 25.0186143786285, 121.630941172826 25.01864393373, 121.63082810613 25.01868531086, 121.630699547122 25.0186715184849, 121.630485100913 25.0185247281106, 121.630284788041 25.0184370478705, 121.629924659743 25.0183542934291, 121.629853721263 25.01825848539, 121.629842849465 25.0181668642647, 121.629873290499 25.0180513525873, 121.629876552038 25.0179508647283, 121.629787403297 25.0178543174922, 121.629540341695 25.0177220575073, 121.629376992935 25.0175553161315, 121.629184562116 25.0175099979045, 121.628944023592 25.0174922646807, 121.628750505593 25.0174400501735, 121.628538233744 25.0174173910409, 121.62846104398 25.0173701024027, 121.628414023455 25.0172612399477, 121.628360751647 25.0170178999934, 121.628308567018 25.0169292334935, 121.628158264415 25.0168009132509, 121.628032151562 25.0167762836305, 121.627939741281 25.0167920465881, 121.627713336095 25.0169289871975, 121.627582874523 25.0169880982048, 121.627417351403 25.0170206092466, 121.627275746238 25.0170048463183, 121.627157243643 25.0169683945389, 121.627009387195 25.0168816983713, 121.626943069229 25.0168353947112, 121.626825382019 25.016710029927, 121.626719925582 25.0166420521123, 121.626534833226 25.0165560946042, 121.626407361398 25.0165393464295, 121.626035545918 25.0165235834394, 121.625627309915 25.0167149558541, 121.625547673997 25.0167188965957, 121.625382422672 25.0166223483908, 121.62579038688 25.0164053609492, 121.626368766517 25.0161413303101, 121.626525320403 25.0160290185974, 121.626566633234 25.0159024214999, 121.62649542296 25.0157127719073, 121.626359525489 25.0156374045853, 121.626212076733 25.0156447935404, 121.625471027823 25.0157590759907, 121.625164986719 25.0158383840079, 121.624912217422 25.015826561698, 121.624792627648 25.0157556278149, 121.624679560952 25.0156393749733, 121.6246447712 25.0154837142165, 121.62469043275 25.0152413559365, 121.624810022524 25.0150837242782, 121.624992668725 25.0150049083731, 121.625190535443 25.0150127899659, 121.62562595094 25.0150679611012, 121.625786853546 25.0150679611012, 121.625915140758 25.0149871747875, 121.626011356168 25.0148428430093, 121.626022227966 25.0146733884184, 121.625963520258 25.0145334896846, 121.625809140731 25.0144329989465, 121.625609099654 25.0144014724234, 121.624148473635 25.0148645174169, 121.623787529952 25.0149177182192, 121.623524432449 25.0148783102197, 121.623320042652 25.0147679677538, 121.623134678502 25.0145645235724, 121.622464432175 25.0135448345823, 121.622360062917 25.0133537035297, 121.622316575726 25.0131960694481, 121.622316575726 25.0124817874799, 121.622283960333 25.0123433640799, 121.622142626964 25.0121581424893, 121.621681119152 25.0119251372724, 121.621402257542 25.0116566634827, 121.621260924172 25.0113492725882, 121.621243529295 25.0110729156945, 121.621471837047 25.0097083636274, 121.62141095498 25.0095344683578, 121.621300062643 25.0094379145041, 121.6211304626 25.0093886523046, 121.620932595882 25.0094162391387, 121.61995739563 25.0097827493473, 121.619729087879 25.0098004836845, 121.619602975026 25.0097374282518, 121.61948773397 25.0096389040733, 121.619429026263 25.0094201801145, 121.619520349363 25.0092088451087, 121.620540123985 25.0085324721213, 121.621123395931 25.0081575835225, 121.621313108801 25.0079797450354, 121.621948565375 25.0072260222733, 121.622423119344 25.0066777230051, 121.622494873208 25.0065200803546, 121.622507919366 25.006323026757, 121.62248835013 25.006180655336, 121.622412247546 25.005969807392, 121.622146975683 25.0053313497285, 121.621966503841 25.004804718186, 121.621248965194 25.0045505154362, 121.620829313804 25.0044539576648, 121.620524359879 25.0044756339058, 121.620313447004 25.0045288392084, 121.620117754646 25.0045505154362, 121.619860636631 25.0044953395761, 121.619277364685 25.0042268495459, 121.618741928649 25.0040490053679, 121.616689333247 25.0032139717825, 121.615355907262 25.0026991547378, 121.615582040654 25.0021927106023, 121.61555377398 25.0009753640674, 121.615325466228 25.0009536872088)","wkt0":"LINESTRING (121.615370945905 25.0009492937803, 121.615251765143 25.0009367305661, 121.61525482106 25.0009238278055, 121.615601338095 25.0009613233752, 121.615629604769 25.0022023172954, 121.615427389332 25.0026560479495, 121.615920968946 25.0028609898019, 121.616661881958 25.0031452475265, 121.618037164365 25.0036901140474, 121.618774272248 25.0039916123856, 121.619292856997 25.0041655155024, 121.61988863151 25.0044354835926, 121.620136508497 25.0044886889126, 121.620521370135 25.0044187337648, 121.620799688155 25.0044069103556, 121.621130190805 25.0044620862555, 121.622026026934 25.0047655532617, 121.622208673135 25.0053212506414, 121.622486991155 25.0059537967272, 121.622547873222 25.0061547919977, 121.622573965537 25.0063163761924, 121.622560919379 25.0065291940757, 121.622478293717 25.0066789545874, 121.62134110368 25.0080248204656, 121.621119319007 25.0082218713332, 121.61955812886 25.0092347078037, 121.619488549355 25.0094238747791, 121.619518990389 25.0095578678771, 121.61960596477 25.0096839788946, 121.619766867376 25.00975097532, 121.619953862296 25.0097233885611, 121.6206571182 25.0094519559365, 121.620914385621 25.0093558929308, 121.621142693372 25.0093322470618, 121.62133838573 25.0093893912376, 121.621484067819 25.0095076204825, 121.621545493476 25.0097169844911, 121.62138676523 25.0106879362043, 121.621304139568 25.0111076450708, 121.621347626758 25.0113662677778, 121.621449821657 25.0116362200415, 121.621741185834 25.0119066643239, 121.622200519286 25.0121298173542, 121.622369348844 25.0123552046159, 121.622385339847 25.01248893032, 121.622383165487 25.0132342464707, 121.622435350116 25.0133825209883, 121.622775093794 25.013920938246, 121.62318318516 25.0145396899564, 121.623364888818 25.0147278208051, 121.623501873469 25.0148224000986, 121.623893223499 25.014846557586, 121.62419658134 25.0147908736755, 121.625221305668 25.0144537696827, 121.625605108174 25.014333246712, 121.625826263813 25.0143746256121, 121.62602630489 25.0144967908705, 121.626095884395 25.0146588566911, 121.626067617721 25.0148381633071, 121.625961074104 25.0150214104573, 121.625797453549 25.015122393313, 121.625616981707 25.0151283045019, 121.625034253352 25.0150672222021, 121.624844087532 25.0151385648426, 121.624740714814 25.0152701729521, 121.624716072602 25.01551359197, 121.624799422522 25.0156997180933, 121.624927709734 25.0157785335523, 121.625228156621 25.015754227573, 121.625499838087 25.0156846938908, 121.626346318538 25.0155761314499, 121.626565546055 25.0156780438331, 121.626626428122 25.0158893677061, 121.626574243493 25.0160745836686, 121.626408992168 25.0161888657188, 121.625466950899 25.0166405743331, 121.625601761191 25.016695744737, 121.626014996631 25.0164947649703, 121.626430735764 25.0165105297116, 121.626548151179 25.0165381149458, 121.626744387127 25.016613481715, 121.627027053866 25.016871600234, 121.627262871166 25.0169679447448, 121.627463351556 25.0170020330179, 121.627677730957 25.0169208594317, 121.627935205375 25.0167497290542, 121.628050090028 25.0167454965978, 121.62818272596 25.0167809632586, 121.628341454206 25.0169267705341, 121.628391464475 25.0170114963038, 121.628496377323 25.0173745357132, 121.629398276478 25.0175245388389, 121.629584100681 25.0177257519221, 121.629817300741 25.017834121377, 121.629910798201 25.0179444610873, 121.62991297256 25.0180513525872, 121.62986731101 25.0181715438399, 121.62991514692 25.0183094680832, 121.630325013693 25.0184222702956, 121.630507659894 25.0185030543491, 121.630703352252 25.01864097822, 121.63085338306 25.0186587112779, 121.631003413868 25.0185641349396, 121.631092562609 25.0183237530853, 121.631157793395 25.0182587316831, 121.631266511372 25.0182055323285, 121.631355660113 25.0182015916347, 121.631567116577 25.0182409985675, 121.631808470486 25.0181562736463, 121.632322162926 25.0176671338589, 121.632502634768 25.0176710745699, 121.632842378445 25.017647430302, 121.63318581402 25.0175375713704, 121.633321281133 25.017386850464, 121.633423476031 25.0172292215601, 121.633495229896 25.0171661699419, 121.633595250435 25.0171661699419, 121.63366482994 25.0172824213378, 121.634121989032 25.017424287299, 121.634287240357 25.0174183762205, 121.634604696849 25.0173001545919, 121.634692214821 25.0173100063987, 121.634904214875 25.0174193614003, 121.635002061054 25.0174380798142, 121.635120563649 25.0174292131975, 121.635305572991 25.0172817785083, 121.635360558583 25.0172538510897, 121.635441009886 25.0172607473571, 121.635520374009 25.017309021218, 121.635556250941 25.0174055688829, 121.635572558638 25.0175178793364, 121.635560871455 25.0176442284737, 121.635670676612 25.0179222946356, 121.635825056139 25.0180759819518, 121.635940568989 25.0181097241734, 121.636063420303 25.0181146500443, 121.636135174168 25.0180525840555, 121.636163440842 25.0179796811079, 121.636141697246 25.0179264816324, 121.635892733079 25.0178267325536, 121.63579814844 25.0177715626579, 121.635759009968 25.0176819115246, 121.6357948869 25.0175703401051, 121.635966661304 25.0172735547098, 121.636147133145 25.0170959757195, 121.636484430668 25.0165487057038, 121.636552922993 25.0165467353303, 121.63661815378 25.0165693946236, 121.636629025577 25.0166590465694, 121.636532538373 25.0168917965075, 121.636290097285 25.0172999082968, 121.636249871633 25.0174233021193, 121.636257481892 25.0174725610956, 121.636324887037 25.0174902943222, 121.636374897306 25.0174833980677, 121.636431430654 25.0173218285657, 121.636491225542 25.0172311919227, 121.636703225596 25.016998442628, 121.636836133323 25.0167223447443, 121.636905712828 25.0166908188091, 121.636974205154 25.0167203743736, 121.63699268721 25.016793278069, 121.636932892322 25.0168711076419, 121.636900276929 25.0169449964314, 121.63689701539 25.0170021370647, 121.636931805143 25.0170819368702, 121.637079933386 25.0171787310091, 121.637164733408 25.0171964642782, 121.63760096429 25.0170949905371, 121.637705333548 25.0170940053548, 121.637771923308 25.0171235608222, 121.637958918228 25.0172811898618, 121.638024420809 25.0172821750426, 121.638171190078 25.0171935087335, 121.638378297824 25.0170385888341, 121.63853811325 25.0168947520594, 121.638609867115 25.0168740631944, 121.638689231238 25.0169065742664, 121.638783815877 25.0170346481028, 121.638872149234 25.0170720850451, 121.63917221085 25.0168701224578, 121.639402964755 25.0165822020485, 121.639401877575 25.0165221056589, 121.639361651924 25.0165004315439, 121.63914421597 25.0166176687564, 121.63900723132 25.0166620021269, 121.638949610792 25.0166363872926, 121.638927867197 25.0165831872349, 121.638944174893 25.0165004315439, 121.639008318499 25.0164440295678, 121.639251846768 25.016313984738, 121.639414108348 25.0161669452476, 121.639445636561 25.0161137449866, 121.639529349403 25.0156085876557, 121.639716344323 25.0148561432143, 121.639711995604 25.0147347172144, 121.639620672504 25.0143066465045, 121.639642416099 25.0141379300782, 121.639702482781 25.0139751246646, 121.639780759725 25.0138263582583, 121.6399647649 25.0135965581407, 121.640101749551 25.0135197117031, 121.640228134199 25.0133931120184, 121.640435785535 25.0130857254705, 121.640498841961 25.0129564159956, 121.640509713759 25.0127640525058, 121.640546677871 25.0125867132982, 121.640529282995 25.0125034623041, 121.64045644195 25.0122926252144, 121.640462965029 25.0121583887947, 121.640493406063 25.012011344328, 121.640573857365 25.011840654299, 121.640673923763 25.0114705540127, 121.640686672971 25.0112243719192, 121.640570867621 25.011147300588, 121.640072667492 25.0107056704108, 121.639837564868 25.0105497570911, 121.639588328906 25.0104699530405, 121.639304574986 25.0104049274794, 121.638776749209 25.0104394107357, 121.638151892637 25.0105339933321, 121.637124507756 25.0107477891409, 121.636144143401 25.0107369515743, 121.634361712171 25.010735966341, 121.634018978749 25.0107458186744, 121.633508547848 25.0108354748719, 121.632984722177 25.0109564950527, 121.632717624567 25.0109234068483, 121.631914470513 25.0105278356132, 121.631516290923 25.0102931031385, 121.630946065135 25.0098662484959, 121.6308512087 25.0097140287665, 121.63059653684 25.0092034262576, 121.630447321416 25.009061304487, 121.630207724638 25.0089153976131, 121.630064362343 25.0088531709212, 121.629761854573 25.0087928244368, 121.629135367231 25.0086972552498, 121.628969028727 25.0086371550013, 121.628889392809 25.0085915871704, 121.62878937227 25.0084763127983, 121.628665433777 25.0082413300893, 121.628539320924 25.0079388569257, 121.628430602947 25.0078689037428, 121.628037043871 25.0077117552498, 121.628065310545 25.0075619959974, 121.628380592677 25.0073112473665, 121.629057905673 25.0069935003309, 121.630983301042 25.005997394994, 121.631311629332 25.0058732507361, 121.631775311503 25.0067368389469, 121.632161431149 25.0074135394229, 121.632415660386 25.0077196373107, 121.63260964057 25.0078989326477, 121.632948378473 25.008135415304, 121.633385424739 25.0082832033513, 121.633318019594 25.0081147249632, 121.632904619487 25.0076344125008, 121.632716537387 25.0073826787575, 121.632552101447 25.0069664055844, 121.632379239864 25.0065247603737, 121.631922080772 25.0056072269038, 121.631784008941 25.0054298773622, 121.631677193529 25.0053648491328, 121.631046357469 25.0053313497285, 121.629752069955 25.005661663309, 121.629647700697 25.0056611706719, 121.629581382731 25.0056463915597, 121.629517239125 25.0056188038789, 121.629309315994 25.0053495773467, 121.629188367245 25.0052616413799, 121.628794536374 25.0051086769851, 121.628281387524 25.0048653129499, 121.627938654102 25.004824916444, 121.627815530993 25.0048111225121, 121.627718771994 25.0047687554259, 121.627661151466 25.0046879623372, 121.627471710391 25.0041334937006, 121.627331460529 25.0039285067279, 121.62726596162 25.0038581058599, 121.62717137698 25.0037901209312, 121.626830020049 25.003602870052, 121.626607674271 25.0035011845646, 121.626051853614 25.0033001849523, 121.626747648666 25.0019887529386, 121.626293207523 25.001745382723, 121.625270714951 25.0014340257928, 121.624275945463 25.0009684668856, 121.623739965838 25.0007398743531, 121.622966165638 25.0009132894167, 121.622495416798 25.0009369369064, 121.622070873099 25.0010453211759, 121.621829247395 25.001001228496, 121.621753144812 25.0010573912364, 121.621114426698 25.0013226859395, 121.620985052306 25.0013463333504, 121.620499898334 25.0013059356873, 121.620146836704 25.0013660395227, 121.619441800625 25.001531571245, 121.61829428238 25.0018887445885, 121.618135282339 25.0019853043762, 121.6176860053 25.0019803778583, 121.616901333302 25.0019153478029, 121.616824958923 25.0022094607336, 121.616717328126 25.0025535768952, 121.616635517849 25.0026215625081, 121.616515656279 25.0026885627855, 121.616648998296 25.0031139016419, 121.616983111886 25.0033305322012, 121.6161838747 25.0030136523142)","wkt1":"LINESTRING (121.616161235675 25.0029464642477, 121.616598281942 25.0031139644297, 121.616476517808 25.0026764928853, 121.616628722975 25.0025996396153, 121.616685256323 25.0025553011684, 121.616724394795 25.0024804184218, 121.616891005094 25.0018727333919, 121.617690354019 25.0019446605973, 121.618115984898 25.001953528332, 121.618284769557 25.0018609097377, 121.618589723482 25.0017601623045, 121.619040903085 25.0016123664095, 121.61953720065 25.0014662946252, 121.620180267482 25.0013175130677, 121.620512129107 25.0012682476117, 121.620971190764 25.001313571832, 121.62110736003 25.0012879537965, 121.621747165323 25.0010243833132, 121.621828703806 25.0009800442978, 121.622074678228 25.0010233980019, 121.622483729616 25.0009199402736, 121.622966981023 25.0008903809067, 121.623979145387 25.0006694244137, 121.625328607274 25.0013064283418, 121.62660930504 25.0017340517093, 121.62689142819 25.001865097282, 121.626125510044 25.0033051114173, 121.626654151206 25.0034945338474, 121.627181705188 25.0037706614701, 121.627300479578 25.0038613080477, 121.627397510372 25.0039908734201, 121.62750079245 25.0041435928852, 121.627681264292 25.0046859917734, 121.62773344892 25.0047569320504, 121.627816074583 25.0047874757681, 121.627942459231 25.0048081666693, 121.628289541372 25.0048497947815, 121.628610259403 25.0050005426201, 121.628817367149 25.0050993168388, 121.629195977503 25.0052463695809, 121.629324264716 25.0053291328558, 121.629537623745 25.0056091974528, 121.629590895554 25.0056328440387, 121.62965503916 25.0056407262329, 121.629740926362 25.0056387556844, 121.630632141977 25.0054072160134, 121.631040106185 25.0053096736384, 121.631666865321 25.005342187772, 121.631736716621 25.0053707607915, 121.631795424329 25.0054160834982, 121.631912024359 25.0055493420121, 121.632022916695 25.0057483673977, 121.632279762915 25.0062710538179, 121.632414573206 25.0065545647017, 121.632738824572 25.0073819398123, 121.632926091287 25.0076277620074, 121.633335142675 25.0081110302592, 121.633421029877 25.008289607496, 121.633389501663 25.008427542839, 121.633143799036 25.0083654719538, 121.632855696397 25.008231477555, 121.632599937357 25.0080627527823, 121.632290634713 25.0077974726346, 121.632034875673 25.00747283004, 121.631258085728 25.0061481414243, 121.631081962606 25.0061001094935, 121.630947152315 25.0061276970663, 121.629684936604 25.0067942306465, 121.628379233703 25.0074730763549, 121.628320525995 25.0075440150223, 121.628279213164 25.0076563344952, 121.628283561883 25.0077588012931, 121.628468382444 25.0078297397955, 121.62857927478 25.0078967372323, 121.628849438952 25.0084568540795, 121.628923367177 25.0085553792062, 121.629106013378 25.0086322287502, 121.629969777703 25.0087647448381, 121.630106762354 25.0088061252972, 121.630403018841 25.0089504641705, 121.630657418906 25.0091652479819, 121.630913993332 25.0096898903455, 121.631003142073 25.0098416174846, 121.631216772897 25.0099918665771, 121.631645665316 25.0103056649088, 121.632078906453 25.0105504960173, 121.632766004066 25.0108775935576, 121.632987788739 25.0108972982009, 121.633394937562 25.0107928635555, 121.633984188996 25.0106903992888, 121.634328281393 25.0106746355478, 121.636336846014 25.0106805469509, 121.637131574425 25.0106805469509, 121.638131779811 25.0104716772026, 121.638768867155 25.0103770945583, 121.63926299036 25.010345566994, 121.639611431476 25.0104086221145, 121.639846262306 25.0104874409696, 121.640066959798 25.010623895993, 121.640488785548 25.0109864616722, 121.640734488176 25.0111795668689, 121.640701872783 25.0114672536395, 121.640671431749 25.0116352348155, 121.640602939424 25.0118670090521, 121.640519226582 25.0120335118468, 121.640487698369 25.012304940475, 121.640579021469 25.0125138071053, 121.64057467275 25.0126162698507, 121.640542057357 25.0127901607565, 121.640537708638 25.0129517362217, 121.64048334965 25.013074395503, 121.640344190639 25.0132911425278, 121.640148498281 25.0135394159225, 121.639987052085 25.0136266070552, 121.639802231525 25.0138532051894, 121.639717431503 25.0140133014452, 121.639671769953 25.0141650232427, 121.639660898155 25.0143192078643, 121.639750046896 25.0147329931122, 121.639754395615 25.0148551580141, 121.639563051976 25.0156172081055, 121.639493472471 25.0161275376491, 121.639434764763 25.0161910823956, 121.639276036517 25.0163487126323, 121.639039031328 25.0164728463013, 121.638975974901 25.016520135285, 121.638965103104 25.016583187235, 121.638999892856 25.0166363872927, 121.639119482631 25.0165969798448, 121.639306477551 25.0164905796723, 121.639391277573 25.0164689055518, 121.639432590404 25.0165063426667, 121.639436939123 25.0165930390993, 121.639195585214 25.0168969687234, 121.638908026166 25.0170925275813, 121.638838446661 25.0171004090401, 121.638764518436 25.0170688832019, 121.638660149179 25.0169368686668, 121.638612313269 25.0169014020511, 121.638551431202 25.0169250464627, 121.638313882423 25.0171442496453, 121.638076877233 25.017305819381, 121.638024692604 25.0173137008261, 121.637937718223 25.0173137008261, 121.637734959196 25.0171462200092, 121.637606671983 25.0171284867329, 121.637171256486 25.0172304530369, 121.637068517998 25.017206808684, 121.636942405145 25.0171358755983, 121.636883697438 25.0170688832019, 121.636835861528 25.0169940093039, 121.636864128202 25.0169270168301, 121.636931533348 25.0167989428814, 121.636929358988 25.0167536243753, 121.636885871797 25.0167299799307, 121.636840210247 25.0167634762259, 121.636761933304 25.0169703649056, 121.636624405063 25.0171437570543, 121.636480897334 25.0172935046221, 121.636387399874 25.0175279774205, 121.636317820369 25.0175338884936, 121.636222148549 25.0175082738412, 121.636198230594 25.0174334002111, 121.636241717785 25.0172895638989, 121.636415666548 25.017001890769, 121.636576569153 25.0166728391707, 121.636574394794 25.0165979650311, 121.636506989648 25.0165762909296, 121.636180835718 25.0170964683108, 121.635999820286 25.0172762639574, 121.635823697164 25.0175816696579, 121.63579543049 25.0176831429967, 121.635826958703 25.0177491498808, 121.635913933085 25.0178131863763, 121.636169692125 25.0178991430041, 121.636196871619 25.0179907643292, 121.636165343406 25.0180717949603, 121.636094676721 25.0181515940705, 121.635988948489 25.0181506088966, 121.635893276669 25.0181387868094, 121.635810651007 25.0181072612379, 121.635716066367 25.0180314027983, 121.635637789424 25.0179358408012, 121.635520374009 25.0176469377131, 121.635538856065 25.0175205885786, 121.635522548368 25.0174053225881, 121.635488845795 25.0173304488952, 121.635424430394 25.017294736098, 121.635338543192 25.017298676821, 121.635145025194 25.0174523649178, 121.63502380465 25.0174779795819, 121.634877035381 25.0174494093793, 121.634669384045 25.0173361136828, 121.63460089172 25.0173262618782, 121.634323117289 25.0174378335194, 121.634123891597 25.0174486704947, 121.633677876097 25.0173235526318, 121.633624604288 25.0172782343192, 121.633573506839 25.0171974494598, 121.633508276053 25.0171954790967, 121.633443045267 25.0172585306999, 121.633374552942 25.017344241421, 121.633335142675 25.0174151743864, 121.633238383676 25.0175117219678, 121.633156845193 25.0175787141225, 121.632864937425 25.0176755078698, 121.632710557898 25.0176922558896, 121.632562429655 25.0176961965998, 121.6323504296 25.017686344824, 121.632215347514 25.0178284566125, 121.631841085879 25.01817154384, 121.63157989094 25.018263411255, 121.631338265236 25.0182368115816, 121.631287167787 25.0182348412352, 121.63122628572 25.018262426082, 121.631150183136 25.018302818168, 121.631115393384 25.0183432102407, 121.631052065162 25.0185552684043, 121.630984660017 25.0186143786285, 121.630941172826 25.01864393373, 121.63082810613 25.01868531086, 121.630699547122 25.0186715184849, 121.630485100913 25.0185247281106, 121.630284788041 25.0184370478705, 121.629924659743 25.0183542934291, 121.629853721263 25.01825848539, 121.629842849465 25.0181668642647, 121.629873290499 25.0180513525873, 121.629876552038 25.0179508647283, 121.629787403297 25.0178543174922, 121.629540341695 25.0177220575073, 121.629376992935 25.0175553161315, 121.629184562116 25.0175099979045, 121.628944023592 25.0174922646807, 121.628750505593 25.0174400501735, 121.628538233744 25.0174173910409, 121.62846104398 25.0173701024027, 121.628414023455 25.0172612399477, 121.628360751647 25.0170178999934, 121.628308567018 25.0169292334935, 121.628158264415 25.0168009132509, 121.628032151562 25.0167762836305, 121.627939741281 25.0167920465881, 121.627713336095 25.0169289871975, 121.627582874523 25.0169880982048, 121.627417351403 25.0170206092466, 121.627275746238 25.0170048463183, 121.627157243643 25.0169683945389, 121.627009387195 25.0168816983713, 121.626943069229 25.0168353947112, 121.626825382019 25.016710029927, 121.626719925582 25.0166420521123, 121.626534833226 25.0165560946042, 121.626407361398 25.0165393464295, 121.626035545918 25.0165235834394, 121.625627309915 25.0167149558541, 121.625547673997 25.0167188965957, 121.625382422672 25.0166223483908, 121.62579038688 25.0164053609492, 121.626368766517 25.0161413303101, 121.626525320403 25.0160290185974, 121.626566633234 25.0159024214999, 121.62649542296 25.0157127719073, 121.626359525489 25.0156374045853, 121.626212076733 25.0156447935404, 121.625471027823 25.0157590759907, 121.625164986719 25.0158383840079, 121.624912217422 25.015826561698, 121.624792627648 25.0157556278149, 121.624679560952 25.0156393749733, 121.6246447712 25.0154837142165, 121.62469043275 25.0152413559365, 121.624810022524 25.0150837242782, 121.624992668725 25.0150049083731, 121.625190535443 25.0150127899659, 121.62562595094 25.0150679611012, 121.625786853546 25.0150679611012, 121.625915140758 25.0149871747875, 121.626011356168 25.0148428430093, 121.626022227966 25.0146733884184, 121.625963520258 25.0145334896846, 121.625809140731 25.0144329989465, 121.625609099654 25.0144014724234, 121.624148473635 25.0148645174169, 121.623787529952 25.0149177182192, 121.623524432449 25.0148783102197, 121.623320042652 25.0147679677538, 121.623134678502 25.0145645235724, 121.622464432175 25.0135448345823, 121.622360062917 25.0133537035297, 121.622316575726 25.0131960694481, 121.622316575726 25.0124817874799, 121.622283960333 25.0123433640799, 121.622142626964 25.0121581424893, 121.621681119152 25.0119251372724, 121.621402257542 25.0116566634827, 121.621260924172 25.0113492725882, 121.621243529295 25.0110729156945, 121.621471837047 25.0097083636274, 121.62141095498 25.0095344683578, 121.621300062643 25.0094379145041, 121.6211304626 25.0093886523046, 121.620932595882 25.0094162391387, 121.61995739563 25.0097827493473, 121.619729087879 25.0098004836845, 121.619602975026 25.0097374282518, 121.61948773397 25.0096389040733, 121.619429026263 25.0094201801145, 121.619520349363 25.0092088451087, 121.620540123985 25.0085324721213, 121.621123395931 25.0081575835225, 121.621313108801 25.0079797450354, 121.621948565375 25.0072260222733, 121.622423119344 25.0066777230051, 121.622494873208 25.0065200803546, 121.622507919366 25.006323026757, 121.62248835013 25.006180655336, 121.622412247546 25.005969807392, 121.622146975683 25.0053313497285, 121.621966503841 25.004804718186, 121.621248965194 25.0045505154362, 121.620829313804 25.0044539576648, 121.620524359879 25.0044756339058, 121.620313447004 25.0045288392084, 121.620117754646 25.0045505154362, 121.619860636631 25.0044953395761, 121.619277364685 25.0042268495459, 121.618741928649 25.0040490053679, 121.616689333247 25.0032139717825, 121.615355907262 25.0026991547378, 121.615582040654 25.0021927106023, 121.61555377398 25.0009753640674, 121.615325466228 25.0009536872088)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454071100'=='0100020200' || '0454071100'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
