
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492996</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454080300">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454080300">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454080300" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454080300" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454080300" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454080300',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="lwNqw9FRqJyod1Pd_3XsgV6CcxASEJRA8f0Io0EKEpm7_Fg2ZB1m1WBP06wxzHcZzPXgdlYXkiHtqLA_RF9e59J2Kyw1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F803 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454080300" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454080300" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">瑞芳 - 四腳亭(經八分寮)</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0910 - 1710 <br>
                        [假日] 0910 - 1710
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> F803區民廣場班表:0910 1120 1510 1710<br/>F803月眉路56號班表:0810 1000 1220 1610 1755<br/>一、1220、1710、1755班次八分寮路段終點為「宏欣倉儲」站；二、0910去程班次行經瑞慈宮及八仙宮；1000返程班次行經瑞慈宮；1510去程班次行經八仙宮<br>
[假日]<br /> F803區民廣場班表:0910 1120 1510 1710<br/>F803月眉路56號班表:0810 1000 1220 1610 1755<br/>一、1220、1710、1755班次八分寮路段終點為「宏欣倉儲」站；二、0910去程班次行經瑞慈宮及八仙宮；1000返程班次行經瑞慈宮；1510去程班次行經八仙宮<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">瑞芳區公所瑞芳區公所站:(02)2497-2250</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 四腳亭(經八分寮)</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 瑞芳</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100120" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.107574" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.808298" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">第一市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107432" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.808948" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">東和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106304" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8038192" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">加油站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106861" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.801054" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901061" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11067" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7936866" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">宏欣倉儲</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102979" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7937255" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">瑞芳圳口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245201740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098055" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.795054" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">八分寮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245202030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.090698" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.798458" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">瑞芳圳口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245201700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09815" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.795252" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">宏欣倉儲</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10334" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.79399" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">瑞興新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108179" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7883469" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">山仔腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.104408" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7860254" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">大寮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098468" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.782038" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">大寮路63巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.094305" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.778125" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">瑞亭國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103401" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.778043" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">吉慶公園城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.100256" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.76523" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">吉慶國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500670" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099643" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.763394" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">瑞慶橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.100292" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.761571" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">粗坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.094671" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.763077" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">瑞慶橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.100215" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.761706" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">吉安停車場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102165" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7626626" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">吉安宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900561" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102668" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.763462" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">四腳亭火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102938" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.761862" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">吉慶停車場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103194" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.760916" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">萬福宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103853" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.759022" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">月眉路56號</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110783" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7603" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">月眉路56號</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110783" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7603" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">萬福宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103734" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.75924" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">吉慶停車場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900021" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10297" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.761059" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">四腳亭火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102804" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7618135" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">吉安宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10257" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7635154" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">吉安停車場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102202" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.762645" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">瑞慶橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.100292" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.761571" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">粗坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.094671" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.763077" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">瑞慶橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.100215" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.761706" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">吉慶國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099608" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.763315" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">吉慶公園城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500510" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.100211" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.765258" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">瑞亭國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102866" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.778003" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">大寮路63巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.094305" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.778125" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">大寮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200410" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09816" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.781998" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">山仔腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.104573" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.78635" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">瑞興新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107855" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.788396" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">宏欣倉儲</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102979" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7937255" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">瑞芳圳口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245201740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098055" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.795054" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">八分寮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245202030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.090698" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.798458" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">瑞芳圳口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245201700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09815" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.795252" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">宏欣倉儲</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10334" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.79399" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110433" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7938803" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">加油站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106615" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8013407" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">東和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106173" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8037843" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">第一市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107587" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8091416" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">瑞芳火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108227" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8058805" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454080300";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 26;
        var existBackNum = 26;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454080300',
                        url: './StopStatusRecent3OfRoute?routeid=0454080300&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454080300',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454080300',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454080300');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454080300","Name":"F803","BeginStop":"瑞芳","GoDirStops":[{"UniStopId":"2244100120","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.808298,"Latitude":25.107574,"PublicId":"2244100120"},{"UniStopId":"2244100320","Name":"第一市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.808948,"Latitude":25.107432,"PublicId":"2244100320"},{"UniStopId":"2244400160","Name":"東和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8038192,"Latitude":25.106304,"PublicId":"2244400160"},{"UniStopId":"2244400060","Name":"加油站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.801054,"Latitude":25.106861,"PublicId":"2244400060"},{"UniStopId":"2244901061","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7936866,"Latitude":25.11067,"PublicId":"2244901061"},{"UniStopId":"2245200940","Name":"宏欣倉儲","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7937255,"Latitude":25.102979,"PublicId":"2245200940"},{"UniStopId":"2245201740","Name":"瑞芳圳口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.795054,"Latitude":25.098055,"PublicId":"2245201740"},{"UniStopId":"2245202030","Name":"八分寮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.798458,"Latitude":25.090698,"PublicId":"2245202030"},{"UniStopId":"2245201700","Name":"瑞芳圳口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.795252,"Latitude":25.09815,"PublicId":"2245201700"},{"UniStopId":"2245200920","Name":"宏欣倉儲","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.79399,"Latitude":25.10334,"PublicId":"2245200920"},{"UniStopId":"2245300640","Name":"瑞興新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7883469,"Latitude":25.108179,"PublicId":"2245300640"},{"UniStopId":"2245300440","Name":"山仔腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7860254,"Latitude":25.104408,"PublicId":"2245300440"},{"UniStopId":"2245200440","Name":"大寮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.782038,"Latitude":25.098468,"PublicId":"2245200440"},{"UniStopId":"2245200320","Name":"大寮路63巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.778125,"Latitude":25.094305,"PublicId":"2245200320"},{"UniStopId":"2244501120","Name":"瑞亭國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.778043,"Latitude":25.103401,"PublicId":"2244501120"},{"UniStopId":"2244500560","Name":"吉慶公園城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.76523,"Latitude":25.100256,"PublicId":"2244500560"},{"UniStopId":"2244500670","Name":"吉慶國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.763394,"Latitude":25.099643,"PublicId":"2244500670"},{"UniStopId":"2244501240","Name":"瑞慶橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.761571,"Latitude":25.100292,"PublicId":"2244501240"},{"UniStopId":"2244900820","Name":"粗坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.763077,"Latitude":25.094671,"PublicId":"2244900820"},{"UniStopId":"2244501220","Name":"瑞慶橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.761706,"Latitude":25.100215,"PublicId":"2244501220"},{"UniStopId":"2244500420","Name":"吉安停車場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7626626,"Latitude":25.102165,"PublicId":"2244500420"},{"UniStopId":"2244900561","Name":"吉安宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.763462,"Latitude":25.102668,"PublicId":"2244900561"},{"UniStopId":"2244900460","Name":"四腳亭火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.761862,"Latitude":25.102938,"PublicId":"2244900460"},{"UniStopId":"2244900060","Name":"吉慶停車場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.760916,"Latitude":25.103194,"PublicId":"2244900060"},{"UniStopId":"2244901260","Name":"萬福宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.759022,"Latitude":25.103853,"PublicId":"2244901260"},{"UniStopId":"2244900260","Name":"月眉路56號","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7603,"Latitude":25.110783,"PublicId":"2244900260"}],"LastStop":"四腳亭(經八分寮)","BackDirStops":[{"UniStopId":"2244900260","Name":"月眉路56號","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7603,"Latitude":25.110783,"PublicId":"2244900260"},{"UniStopId":"2244901220","Name":"萬福宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.75924,"Latitude":25.103734,"PublicId":"2244901220"},{"UniStopId":"2244900021","Name":"吉慶停車場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.761059,"Latitude":25.10297,"PublicId":"2244900021"},{"UniStopId":"2244900420","Name":"四腳亭火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7618135,"Latitude":25.102804,"PublicId":"2244900420"},{"UniStopId":"2244900520","Name":"吉安宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7635154,"Latitude":25.10257,"PublicId":"2244900520"},{"UniStopId":"2244500460","Name":"吉安停車場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.762645,"Latitude":25.102202,"PublicId":"2244500460"},{"UniStopId":"2244501240","Name":"瑞慶橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.761571,"Latitude":25.100292,"PublicId":"2244501240"},{"UniStopId":"2244900820","Name":"粗坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.763077,"Latitude":25.094671,"PublicId":"2244900820"},{"UniStopId":"2244501220","Name":"瑞慶橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.761706,"Latitude":25.100215,"PublicId":"2244501220"},{"UniStopId":"2244500620","Name":"吉慶國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.763315,"Latitude":25.099608,"PublicId":"2244500620"},{"UniStopId":"2244500510","Name":"吉慶公園城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.765258,"Latitude":25.100211,"PublicId":"2244500510"},{"UniStopId":"2244501140","Name":"瑞亭國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.778003,"Latitude":25.102866,"PublicId":"2244501140"},{"UniStopId":"2245200320","Name":"大寮路63巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.778125,"Latitude":25.094305,"PublicId":"2245200320"},{"UniStopId":"2245200410","Name":"大寮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.781998,"Latitude":25.09816,"PublicId":"2245200410"},{"UniStopId":"2245300400","Name":"山仔腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.78635,"Latitude":25.104573,"PublicId":"2245300400"},{"UniStopId":"2245300600","Name":"瑞興新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.788396,"Latitude":25.107855,"PublicId":"2245300600"},{"UniStopId":"2245200940","Name":"宏欣倉儲","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7937255,"Latitude":25.102979,"PublicId":"2245200940"},{"UniStopId":"2245201740","Name":"瑞芳圳口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.795054,"Latitude":25.098055,"PublicId":"2245201740"},{"UniStopId":"2245202030","Name":"八分寮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.798458,"Latitude":25.090698,"PublicId":"2245202030"},{"UniStopId":"2245201700","Name":"瑞芳圳口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.795252,"Latitude":25.09815,"PublicId":"2245201700"},{"UniStopId":"2245200920","Name":"宏欣倉儲","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.79399,"Latitude":25.10334,"PublicId":"2245200920"},{"UniStopId":"2244901020","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7938803,"Latitude":25.110433,"PublicId":"2244901020"},{"UniStopId":"2244400020","Name":"加油站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8013407,"Latitude":25.106615,"PublicId":"2244400020"},{"UniStopId":"2244200220","Name":"東和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8037843,"Latitude":25.106173,"PublicId":"2244200220"},{"UniStopId":"2244100360","Name":"第一市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8091416,"Latitude":25.107587,"PublicId":"2244100360"},{"UniStopId":"2244100460","Name":"瑞芳火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8058805,"Latitude":25.108227,"PublicId":"2244100460"}],"RouteMapUrl":"../MapOverview?nid=0454080300","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0910 - 1710","HeadwayDesc":"F803區民廣場班表:0910 1120 1510 1710;F803月眉路56號班表:0810 1000 1220 1610 1755;一、1220、1710、1755班次八分寮路段終點為「宏欣倉儲」站；二、0910去程班次行經瑞慈宮及八仙宮；1000返程班次行經瑞慈宮；1510去程班次行經八仙宮","HolidayBusTimeDesc":"0910 - 1710","HolidayHeadwayDesc":"F803區民廣場班表:0910 1120 1510 1710;F803月眉路56號班表:0810 1000 1220 1610 1755;一、1220、1710、1755班次八分寮路段終點為「宏欣倉儲」站；二、0910去程班次行經瑞慈宮及八仙宮；1000返程班次行經瑞慈宮；1510去程班次行經八仙宮","RouteNote":"","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"瑞芳區公所瑞芳區公所站:(02)2497-2250","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.8059326484 25.1082063980623, 121.809386356726 25.1074549227592, 121.809083731726 25.1060604634391, 121.808725717645 25.1054608568569, 121.808019020734 25.105173284206, 121.807431384823 25.1052132977099, 121.806730676425 25.1052671742321, 121.805411209445 25.1059855893058, 121.804771319333 25.1061567034959, 121.802252751337 25.1065938446118, 121.80055500911 25.1069399798435, 121.799926820955 25.1072986655228, 121.799297577872 25.1077798072593, 121.79897189835 25.1085118286949, 121.79873252774 25.1089445103045, 121.798421196577 25.1091962672773, 121.797727800896 25.109628986165, 121.797125617894 25.1099258174528, 121.796384797792 25.1101437362959, 121.79469004571 25.1105528915077, 121.794025922408 25.1105944021552, 121.793281301972 25.1106083525511, 121.793137842193 25.1099925549129, 121.793264124006 25.1093007674409, 121.793344176606 25.1086934764288, 121.793402593548 25.1081511695221, 121.79376629792 25.1070193687043, 121.793891834803 25.1065289394536, 121.794335142046 25.1054650540433, 121.794784145324 25.104821902969, 121.794712417474 25.1042901436887, 121.794524417494 25.1039805464444, 121.794106103524 25.103510854598, 121.793892849321 25.1031991586994, 121.793752623867 25.1026680718652, 121.79345124911 25.1023487968524, 121.793066323985 25.1021021312201, 121.792418141193 25.1019167239003, 121.792246353952 25.1016143514563, 121.792459944134 25.1012547412584, 121.793200930059 25.1005963976268, 121.793615413727 25.1002356061144, 121.793647899575 25.099840285335, 121.793664410099 25.0995597478795, 121.793930601563 25.0992417843464, 121.794216524181 25.0991173021919, 121.794617667112 25.099144488413, 121.794925933776 25.0989526576337, 121.795059206311 25.0984263742793, 121.795189216809 25.0978786318935, 121.795397695231 25.0976898584628, 121.795832135096 25.0974910720411, 121.796041421312 25.0971419849714, 121.796102677791 25.0966566883513, 121.796029759013 25.0963534413063, 121.795830157521 25.095946145471, 121.795825235445 25.0956522536729, 121.79614962051 25.0946786117195, 121.796225743374 25.094152458233, 121.796718099981 25.0930978189834, 121.796621481906 25.0927709412382, 121.796529003373 25.0925767196151, 121.79664968976 25.0922994204495, 121.797214691611 25.0917722014491, 121.797518077557 25.0913207643147, 121.798268493179 25.0909801367822, 121.798493392157 25.0908316945816, 121.798167584579 25.0910929268152, 121.797598711005 25.0913392140704, 121.797117139154 25.0919721376739, 121.796776160092 25.0922730457443, 121.796568502252 25.0925194514315, 121.796768704487 25.0929538117317, 121.796273567569 25.0941640651807, 121.796222898078 25.0947064646887, 121.795910377145 25.0955806562817, 121.795885794125 25.0959527065169, 121.796031242369 25.0963130973179, 121.796161505007 25.0967033234163, 121.796053758062 25.0972395593729, 121.795861075947 25.0975047081029, 121.795407616221 25.0977486068329, 121.795187864737 25.0980589784577, 121.79501323652 25.0988886231582, 121.794828763507 25.0991409732848, 121.794507585797 25.0992079949188, 121.794075163141 25.0992045047655, 121.79375240774 25.0995417355161, 121.793711733272 25.1001659071972, 121.793500147963 25.1004291599389, 121.792692529678 25.1011113212984, 121.792334950892 25.1015724791128, 121.792324549288 25.1017716582042, 121.792508498596 25.1019110185516, 121.792959560626 25.1020273865426, 121.793335944655 25.1022238607115, 121.793772605796 25.1026009899895, 121.793913485977 25.1031652421552, 121.794538604276 25.1038786853056, 121.794816800698 25.1044053548397, 121.794793911064 25.1047977715493, 121.794551052874 25.1052155407528, 121.79396336293 25.1064854842327, 121.793826944147 25.1070838660314, 121.793455998062 25.1080603013058, 121.793426375381 25.1086538029026, 121.793337562705 25.1091753055026, 121.793764913898 25.1092722862138, 121.79384728169 25.1095236468293, 121.793818849568 25.1098592576874, 121.794473936215 25.1100588719693, 121.794778703976 25.11003612593, 121.794663412411 25.1105764167288, 121.79301887684 25.110587967874, 121.791704227269 25.1103645738231, 121.790136000093 25.1097163643415, 121.789645310295 25.1094485074893, 121.788364301846 25.108156289718, 121.786299935562 25.1046565007668, 121.785964931832 25.1042386997212, 121.785700138316 25.1037038061572, 121.785553522115 25.1031489616645, 121.785635785533 25.1014504541155, 121.785521033219 25.1006609981252, 121.785273805982 25.0999571833078, 121.784652187565 25.0996158633928, 121.783624094617 25.0992641262439, 121.782885324552 25.099032462633, 121.782342742247 25.0986828406627, 121.781878931624 25.0982081218282, 121.781576330537 25.0979554830364, 121.781835520936 25.0976906087973, 121.781866920962 25.0975664626865, 121.781976796509 25.0973598934902, 121.781827955251 25.096898544065, 121.78163100105 25.0966799278739, 121.7810430899 25.0963153641453, 121.780517248104 25.0958128372907, 121.780244959416 25.0951166490608, 121.780083349527 25.0949734047685, 121.77986725266 25.0949441424239, 121.779489805314 25.0949378499379, 121.779249869085 25.0948919357155, 121.778982350238 25.0946976250012, 121.778417660564 25.0945074221224, 121.778116992924 25.0943365666251, 121.77842943305 25.0944836304758, 121.779000284943 25.0946717531242, 121.779266318487 25.0948778203817, 121.779504919599 25.0949180833486, 121.779960978817 25.0949286400498, 121.780115506015 25.0949480412449, 121.7802858481 25.0950963522961, 121.780427635977 25.0954953193091, 121.780542152128 25.0957824012998, 121.781076645764 25.0963137237124, 121.781655511722 25.0966440306504, 121.781876515865 25.0969144133693, 121.781998151266 25.097359487181, 121.781888883798 25.0976091540424, 121.781863154089 25.0977207588376, 121.781686705391 25.0979076485453, 121.781934012977 25.0981276563946, 121.781746519165 25.0983340888614, 121.781599924101 25.0992712979492, 121.781466695795 25.1001040225207, 121.781038732682 25.1014071774437, 121.780377743291 25.1012365183233, 121.779810641917 25.1011699068963, 121.779457778227 25.1011241231247, 121.778892576452 25.1012012136884, 121.778437786496 25.101448174919, 121.778076981995 25.1018428480446, 121.778000098844 25.1022368482717, 121.778051166539 25.1027125611163, 121.777990177853 25.1038342630913, 121.778143046598 25.1041633556917, 121.778513604971 25.1045646189249, 121.778671430089 25.1049340891622, 121.778821894743 25.1051860186029, 121.778513512392 25.105720897224, 121.777875183629 25.1067667955263, 121.777299121767 25.1075986229702, 121.776925612549 25.1078177081059, 121.776627413397 25.108096905423, 121.776494866007 25.1086482570707, 121.775908486328 25.1094923111346, 121.775530138778 25.1093633241068, 121.774056238338 25.1094355168503, 121.77275850364 25.1095264276023, 121.772334430025 25.1096672372188, 121.771781171415 25.1098977919365, 121.77152630891 25.1099468793124, 121.771170421556 25.1098978578715, 121.770813393839 25.1096667219076, 121.770501069592 25.109309408443, 121.76978111953 25.1080827417838, 121.76909572775 25.1070721536446, 121.767888030441 25.1055444634142, 121.767311417415 25.1047293419426, 121.766974438746 25.1041826125654, 121.766936469938 25.1040368233241, 121.766571073259 25.1035363197547, 121.766483942151 25.1034117985818, 121.766503101508 25.1027318150709, 121.766607943966 25.1022821356864, 121.76609131919 25.1009727843843, 121.765851215965 25.100493638855, 121.765652714271 25.1005375424888, 121.764830803442 25.0999177715282, 121.764288269004 25.0994548647, 121.764191755604 25.0993137781325, 121.763553070329 25.0994983767863, 121.762695172143 25.0999873773114, 121.762088060927 25.1002373355675, 121.761676313489 25.1003344286328, 121.761086331904 25.0990064094537, 121.761944866056 25.0987231784395, 121.7615975549 25.0983847563155, 121.761565505903 25.0982219685555, 121.761627142559 25.0980073284975, 121.761750028942 25.097781165547, 121.761899658598 25.0975383611926, 121.761973245077 25.0970933344013, 121.762056862415 25.0968939959316, 121.762179462983 25.0967790112063, 121.762569503997 25.0966475878494, 121.762819645729 25.0964150950136, 121.762888238377 25.0962675739312, 121.762938673003 25.0959878317013, 121.763061074942 25.0956558938575, 121.763189477638 25.0953080433471, 121.763207128469 25.0950781863362, 121.763194292792 25.0948640705763, 121.763123316297 25.0946084219821, 121.763224999145 25.0948488238981, 121.763221134196 25.0952682427652, 121.763113593553 25.0956587441414, 121.7629710453 25.0960092453591, 121.762894720945 25.096365431871, 121.762603979305 25.0966818280675, 121.762192925607 25.0968140442114, 121.762043336891 25.0969462289921, 121.761977721889 25.0972100149363, 121.761938392633 25.0975524217181, 121.761746669708 25.0978753276793, 121.761621110935 25.0980744783209, 121.761600767957 25.098278990581, 121.761686990531 25.098423816667, 121.762008009484 25.0987271035643, 121.761147323679 25.0990135363929, 121.761488127404 25.0998467160116, 121.761765684284 25.1005027170773, 121.761982604475 25.1009888887089, 121.76225736495 25.1016239394746, 121.7623878446 25.1022239391325, 121.763464804307 25.1020394597501, 121.763788350191 25.1022866304252, 121.763800836499 25.1026055135937, 121.762558870105 25.1027073413317, 121.761713968619 25.1029184581822, 121.760901377865 25.1030685796715, 121.760787882258 25.1033655149471, 121.760470814928 25.1035743830292, 121.759668710536 25.1037641412022, 121.758648333558 25.1038046766832, 121.758322249858 25.1040249908106, 121.758953632268 25.1043036960409, 121.759398522221 25.1045457124626, 121.760121122418 25.105131144861, 121.76028900654 25.1053216501607, 121.760242971458 25.1056760988783, 121.760219037628 25.1059802227304, 121.760472664573 25.1063961374136, 121.760555394948 25.106945076405, 121.760522747604 25.1077383472599, 121.760712061223 25.1081366602189, 121.760888610102 25.1084826463742, 121.760807063335 25.1089794892911, 121.760720903309 25.10929358694, 121.760363936996 25.1096411913645, 121.760316482728 25.1098770263829, 121.760406901715 25.1101522341386, 121.760391535038 25.1106867988682)","wkt0":"LINESTRING (121.805917771088 25.1081603700826, 121.809359222664 25.1073723881085, 121.809083731726 25.1060604634391, 121.808725717645 25.1054608568569, 121.808213067066 25.105181559438, 121.807434039432 25.1052143920203, 121.806475924986 25.1052860267452, 121.805380510651 25.1059605870715, 121.804699980764 25.1061366891036, 121.802180826271 25.1065515735521, 121.800673512268 25.1068202037705, 121.799900454195 25.1072828447023, 121.799297577872 25.1077798072593, 121.79897189835 25.1085118286949, 121.79873252774 25.1089445103045, 121.798421196577 25.1091962672773, 121.797727800896 25.109628986165, 121.797125617894 25.1099258174528, 121.796384797792 25.1101437362959, 121.794509941145 25.1105213312247, 121.793223500876 25.1104855138623, 121.79313694225 25.1096646993059, 121.793330952964 25.1087752348048, 121.793295135601 25.1082946851918, 121.793665248347 25.107321646845, 121.793796578676 25.1064978475084, 121.794274143508 25.1054591439971, 121.794709921418 25.1048502488353, 121.794775586583 25.1044293948264, 121.794500986804 25.1040085408175, 121.793868213401 25.1032399599148, 121.793752623867 25.1026680718652, 121.79345124911 25.1023487968524, 121.792930992416 25.1019639663771, 121.792420595001 25.1018594990699, 121.792246353952 25.1016143514563, 121.792459944134 25.1012547412584, 121.792796677307 25.1008775063825, 121.793539887578 25.1002924894623, 121.793581674501 25.1001760830343, 121.793602567962 25.0997611985858, 121.793664410099 25.0995597478795, 121.793901045983 25.0992090142479, 121.794184600102 25.0991015621605, 121.794617667112 25.099144488413, 121.794889008231 25.0989911252929, 121.795088988504 25.0987523428765, 121.795205394932 25.0978807870567, 121.795378512184 25.0977136393652, 121.795832135096 25.0974910720411, 121.796041421312 25.0971419849714, 121.796115752895 25.0966838901945, 121.796029759013 25.0963534413063, 121.795830157521 25.095946145471, 121.795841153116 25.0952273174544, 121.79604710295 25.0947706460831, 121.796124707235 25.0942214465254, 121.79663211987 25.0930931996079, 121.796566454706 25.0927827824666, 121.796432139597 25.0925350457096, 121.796641074211 25.0922097046672, 121.797023126077 25.0919321201082, 121.797518077557 25.0913207643147, 121.79823196206 25.0909531122009, 121.798470744477 25.0907949188501, 121.798273748983 25.0909740056624, 121.797518599591 25.0913500879682, 121.797052973879 25.09195898313, 121.796673906793 25.0922276133484, 121.796491835201 25.0925440000502, 121.796596302508 25.0927648737853, 121.796661967672 25.0930842452673, 121.796157539818 25.0942333856462, 121.796091874653 25.0947825852039, 121.795879955259 25.0952482109159, 121.795885794125 25.0959527065169, 121.796031242369 25.0963130973179, 121.796161505007 25.0967033234163, 121.796053758062 25.0972395593729, 121.795861075947 25.0975047081029, 121.795407616221 25.0977486068329, 121.795244197075 25.0979016805181, 121.795136744988 25.0987583124369, 121.794924825593 25.0990090339741, 121.794632317133 25.0991851360062, 121.794193554443 25.0991224556219, 121.793927909005 25.0992358772697, 121.793707035269 25.0995642030923, 121.793626446204 25.0997761224868, 121.793626446204 25.1001910069353, 121.79356973538 25.1003163677039, 121.792826525109 25.1008954150637, 121.792459397144 25.1012894060507, 121.792289264672 25.1016057927525, 121.792438503682 25.1018415903887, 121.792939946757 25.1019251642344, 121.793335944655 25.1022238607115, 121.793781654775 25.1026444962639, 121.793878660131 25.1032369751345, 121.794521880265 25.1039966016967, 121.794802449605 25.1044323796066, 121.79473081488 25.1048621879561, 121.794306976091 25.1054680983377, 121.79385627428 25.1064978475084, 121.793695096149 25.1073097077242, 121.793455998062 25.1080603013058, 121.793378709447 25.108778219584998, 121.793184698734 25.1096766384267, 121.7932802117 25.1105004377633, 121.792002725772 25.1104079095769, 121.790017846936 25.1096139580424, 121.789713399355 25.1094229321093, 121.788609030679 25.1084409394219, 121.786299935562 25.1046565007668, 121.785700138316 25.1037038061572, 121.785553522115 25.1031489616645, 121.785612311354 25.10156997539, 121.785521033219 25.1006609981252, 121.785273805982 25.0999571833078, 121.784652187565 25.0996158633928, 121.783624094617 25.0992641262439, 121.782885324552 25.099032462633, 121.782579774665 25.0988418862827, 121.781606736319 25.0979136196389, 121.781835520936 25.0976906087973, 121.781866920962 25.0975664626865, 121.781976796509 25.0973598934902, 121.781827955251 25.096898544065, 121.78163100105 25.0966799278739, 121.78103962808 25.0962481122846, 121.780517248104 25.0958128372907, 121.780244959416 25.0951166490608, 121.780083349527 25.0949734047685, 121.77986725266 25.0949441424239, 121.779489805314 25.0949378499379, 121.779249869085 25.0948919357155, 121.778982350238 25.0946976250012, 121.778417660564 25.0945074221224, 121.778116992924 25.0943365666251, 121.77842943305 25.0944836304758, 121.779000284943 25.0946717531242, 121.779266318487 25.0948778203817, 121.779504919599 25.0949180833486, 121.779960978817 25.0949286400498, 121.780115506015 25.0949480412449, 121.7802858481 25.0950963522961, 121.780542152128 25.0957824012998, 121.781057536761 25.0962272188231, 121.781655511722 25.0966440306504, 121.781876515865 25.0969144133693, 121.781998151266 25.097359487181, 121.781888883798 25.0976091540424, 121.781863154089 25.0977207588376, 121.781686705391 25.0979076485453, 121.781934012977 25.0981276563946, 121.781746519165 25.0983340888614, 121.781599924101 25.0992712979492, 121.781490329891 25.1000029657824, 121.781182897529 25.1004148654507, 121.780872480388 25.1013550712153, 121.780377743291 25.1012365183233, 121.779810641917 25.1011699068963, 121.779457778227 25.1011241231247, 121.778892576452 25.1012012136884, 121.778437786496 25.101448174919, 121.778076981995 25.1018428480446, 121.778000098844 25.1022368482717, 121.778051166539 25.1027125611163, 121.777990177853 25.1038342630913, 121.77817886396 25.1041424622303, 121.778508534466 25.1045308773534, 121.7787144843 25.1049278531206, 121.778774179904 25.105181559438, 121.778484656224 25.1056262916886, 121.777807111118 25.1067575233863, 121.77739819623 25.1074440228334, 121.776872874913 25.1077544399747, 121.776652001178 25.1079962071713, 121.776550518651 25.1084469089823, 121.775908486328 25.1094923111346, 121.775530138778 25.1093633241068, 121.772718060868 25.1094527799114, 121.772049470102 25.1096676840861, 121.771536087907 25.1098348317776, 121.77114209692 25.109825877437, 121.770813393839 25.1096667219076, 121.770501069592 25.109309408443, 121.76978111953 25.1080827417838, 121.76909572775 25.1070721536446, 121.767888030441 25.1055444634142, 121.767311417415 25.1047293419426, 121.766974438746 25.1041826125654, 121.76648882458 25.103375767414, 121.766503101508 25.1027318150709, 121.766607943966 25.1022821356864, 121.76609131919 25.1009727843843, 121.765851215965 25.100493638855, 121.765652714271 25.1005375424888, 121.764830803442 25.0999177715282, 121.764247254646 25.099501522708, 121.764191755604 25.0993137781325, 121.763553070329 25.0994983767863, 121.762695172143 25.0999873773114, 121.762088060927 25.1002373355675, 121.761676313489 25.1003344286328, 121.761086331904 25.0990064094537, 121.761944866056 25.0987231784395, 121.7615975549 25.0983847563155, 121.761565505903 25.0982219685555, 121.761627142559 25.0980073284975, 121.761750028942 25.097781165547, 121.761899658598 25.0975383611926, 121.761973245077 25.0970933344013, 121.762056862415 25.0968939959316, 121.762179462983 25.0967790112063, 121.762569503997 25.0966475878494, 121.762927981796 25.0963376556907, 121.763121992509 25.0955795215187, 121.763268246739 25.0953705869043, 121.763220490256 25.094827356907, 121.763163779432 25.094594544051, 121.763253322838 25.0948243721268, 121.763289140201 25.0953735716845, 121.76313691641 25.0956063845405, 121.762942905697 25.0963466100313, 121.762603979305 25.0966818280675, 121.762192925607 25.0968140442114, 121.762043336891 25.0969462289921, 121.761977721889 25.0972100149363, 121.761938392633 25.0975524217181, 121.761746669708 25.0978753276793, 121.761621110935 25.0980744783209, 121.761600767957 25.098278990581, 121.761686990531 25.098423816667, 121.762008009484 25.0987271035643, 121.761147323679 25.0990135363929, 121.761488127404 25.0998467160116, 121.761765684284 25.1005027170773, 121.762286254052 25.1015908688515, 121.76240266048 25.1022445357164, 121.763504044375 25.1020624641239, 121.763829385418 25.1022624443976, 121.763800836499 25.1026055135937, 121.762558870105 25.1027073413317, 121.761713968619 25.1029184581822, 121.760901377865 25.1030685796715, 121.760787882258 25.1033655149471, 121.760470814928 25.1035743830292, 121.759668710536 25.1037641412022, 121.758648333558 25.1038046766832, 121.758420963686 25.1040354038393, 121.758953632268 25.1043036960409, 121.759453697637 25.1045159534523, 121.760047668898 25.1049397922414, 121.760352116479 25.1052949810858, 121.760242971458 25.1056760988783, 121.760298390435 25.1060053587746, 121.760522248951 25.1063665171794, 121.760596868456 25.1068619906934, 121.760602838016 25.1078499529413, 121.760940118179 25.1083931829386, 121.760758046587 25.1093184648021, 121.760363936996 25.1096411913645, 121.760328238237 25.1098139383162, 121.760477477248 25.1101810662814, 121.760459568566 25.1107332506193, 121.760522248951 25.1109272613326, 121.760498370709 25.1109421852336, 121.760420766424 25.1107153419381)","wkt1":"LINESTRING (121.760459568566 25.1109093526514, 121.760477477248 25.1102228532043, 121.760316482728 25.1098770263829, 121.760363936996 25.1096411913645, 121.760720903309 25.10929358694, 121.760807063335 25.1089794892911, 121.760888610102 25.1084826463742, 121.760712061223 25.1081366602189, 121.760522747604 25.1077383472599, 121.760555394948 25.106945076405, 121.760504340269 25.1062889128941, 121.760277496974 25.1060561000381, 121.760242971458 25.1056760988783, 121.760331223017 25.105268118064, 121.759907384228 25.1048054771322, 121.759373108572 25.1044681969691, 121.758412009346 25.1040234647185, 121.758648333558 25.1038046766832, 121.759668710536 25.1037641412022, 121.760470814928 25.1035743830292, 121.760787882258 25.1033655149471, 121.760901377865 25.1030685796715, 121.761713968619 25.1029184581822, 121.76255488427 25.1026922527471, 121.763811476736 25.1025848006597, 121.763788350191 25.1022866304252, 121.763464804307 25.1020394597501, 121.7623878446 25.1022239391325, 121.76225736495 25.1016239394746, 121.761982604475 25.1009888887089, 121.761050555047 25.0990090339742, 121.761923603257 25.0987016016131, 121.7616758665 25.098452372466, 121.761613186115 25.0982732856537, 121.761617663286 25.0980658434294, 121.761720638203 25.0978076599417, 121.761922110867 25.0975375373331, 121.761977721889 25.0972100149363, 121.762043336891 25.0969462289921, 121.762195218255 25.0967853727215, 121.762586224462 25.0966898597549, 121.762914550285 25.0963615339324, 121.763075728416 25.0958675528084, 121.763116022949 25.0956168312712, 121.763269739129 25.095381033635, 121.763224999145 25.0948488238981, 121.763189150064 25.0945736505896, 121.763245860888 25.0948363112476, 121.763287647811 25.095394465146, 121.763126469679 25.0956198160514, 121.763095129487 25.0958630756381, 121.762930966576 25.0963675034928, 121.762589209243 25.0967092608262, 121.762195218255 25.0968002966225, 121.762056425976 25.0969495356328, 121.762001207542 25.097230104972, 121.761943004328 25.0975375373331, 121.761741531664 25.0978076599417, 121.761641541527 25.0980688282096, 121.761632587187 25.0982747780438, 121.76168183606 25.0984419257352, 121.76196688257 25.0987060787834, 121.761086331904 25.0990064094537, 121.761698252351 25.1003044285831, 121.762695172143 25.0999873773114, 121.763553070329 25.0994983767863, 121.764191755604 25.0993137781325, 121.764229345965 25.0994925683674, 121.765641147002 25.1005193327579, 121.765826203375 25.1004536675934, 121.76609131919 25.1009727843843, 121.766607943966 25.1022821356864, 121.766539565844 25.1027101614283, 121.766512702822 25.103345919612, 121.767002206776 25.1041339015861, 121.768172240616 25.1057725459186, 121.769336304896 25.1072380729993, 121.77056603434 25.1092766778793, 121.770897344943 25.1096139580424, 121.771276412029 25.1097542427121, 121.771706220379 25.109709471009, 121.772100211366 25.1095244146363, 121.77259866966 25.1093542821646, 121.775502860799 25.109243845297, 121.775914760468 25.1093572669448, 121.776517686069 25.1085095893666, 121.776627413397 25.108096905423, 121.77682810321 25.107802196458, 121.777272835461 25.1075634140416, 121.778750301662 25.1052054376797, 121.778671430089 25.1049340891622, 121.778468833268 25.1044601516177, 121.778098274895 25.1040588883845, 121.777990177853 25.1038342630913, 121.778051166539 25.1027125611163, 121.778000098844 25.1022368482717, 121.778076981995 25.1018428480446, 121.778437786496 25.101448174919, 121.778892576452 25.1012012136884, 121.779457778227 25.1011241231247, 121.779810641917 25.1011699068963, 121.780377743291 25.1012365183233, 121.780863526047 25.1013491016549, 121.781162004068 25.1003999415497, 121.781490329891 25.0999880418814, 121.781599924101 25.0992712979492, 121.781746519165 25.0983340888614, 121.781866412196 25.0981673259564, 121.781576888516 25.0978957109577, 121.781815670933 25.0977017002444, 121.781845518735 25.097579324256, 121.781958940383 25.0973494961802, 121.781876515865 25.0969144133693, 121.781657477582 25.0966749358539, 121.781027688959 25.0962212492627, 121.780632205582 25.0958600908579, 121.780385961215 25.095439236849, 121.7802858481 25.0950963522961, 121.780096437535 25.0949571948459, 121.7798755638 25.0948989916319, 121.779504919599 25.0949180833486, 121.779266318487 25.0948778203817, 121.779000284943 25.0946717531242, 121.778498087735 25.094536340837, 121.778148868451 25.0943408377336, 121.778510026856 25.0945199245459, 121.77900550037 25.0946542396551, 121.779275622978 25.0948631742695, 121.779511420615 25.0949049611923, 121.7798755638 25.0948795905606, 121.780103899485 25.0949467481152, 121.780300894979 25.0950780784442, 121.780400885116 25.0954347596787, 121.780656083823 25.0958541212975, 121.781021719398 25.0961973710211, 121.781666431923 25.0966600119529, 121.781896259998 25.0969107334901, 121.781991772965 25.0973644200812, 121.781866920962 25.0975664626865, 121.781860442636 25.0977017002444, 121.78162762978 25.0978807870567, 121.782624546368 25.0988478558431, 121.782885324552 25.099032462633, 121.783624094617 25.0992641262439, 121.784909395615 25.0997104573224, 121.785336219185 25.1000059505626, 121.785521033219 25.1006609981252, 121.785635785533 25.1014504541155, 121.785580971161 25.1032921935683, 121.785754088413 25.1037040932366, 121.786016749071 25.1041339015861, 121.788595599168 25.1083931829386, 121.789652211361 25.1093841299667, 121.790120821853 25.1096109732622, 121.791953476899 25.1103929856759, 121.793242901948 25.1104646204009, 121.79313544986 25.1099781012275, 121.793359308376 25.1086916609591, 121.793314536672 25.108237974368, 121.793633908154 25.1074320837126, 121.793842842769 25.1064441214648, 121.79429354458 25.1054442200961, 121.794693505127 25.1048681575165, 121.794789018094 25.1044771513097, 121.794515910705 25.1040100332076, 121.79385776667 25.1032369751345, 121.793759268923 25.1026504658243, 121.793007104311 25.101990829399, 121.792508498596 25.1019110185516, 121.792324549288 25.1017716582042, 121.79225792448 25.1015162493464, 121.792783245796 25.1008804911627, 121.793523471287 25.1003133829238, 121.793615999473 25.0996537464985, 121.793899553593 25.0992000599073, 121.794206985954 25.0990985773803, 121.794609931281 25.0991194708418, 121.79501323652 25.0988886231582, 121.795218826443 25.0978778022765, 121.795397913256 25.0976867763434, 121.795887417209 25.0974659026082, 121.796036656219 25.0972390593126, 121.796126199626 25.0967017988757, 121.79604561056 25.096400336075, 121.795851599847 25.0959705277255, 121.795860554187 25.0952094087733, 121.796060534461 25.0947497526217, 121.796111275725 25.094230400866, 121.7966276427 25.0930991691684, 121.796451540668 25.0925529543908, 121.796612718799 25.0922365676891, 121.797027603247 25.0919261505478, 121.797406670333 25.0913829205505, 121.798269271813 25.0909292339593, 121.798511039009 25.0907979036303, 121.798268493179 25.0909801367822, 121.797433533355 25.0914127683525, 121.79706342061 25.0919380896686, 121.79663062748 25.0922694002714, 121.796496312371 25.0925529543908, 121.796675399183 25.0930723061465, 121.796153062647 25.0942512943275, 121.796105306164 25.0947557221821, 121.795890401989 25.0952243326743, 121.795884432429 25.0959794820661, 121.796081427922 25.0963883969542, 121.796156047428 25.0966868749747, 121.796084412703 25.0972450288731, 121.79589637155 25.0974987351905, 121.795409852376 25.0977196089256, 121.795257628586 25.0978867566171, 121.795048693972 25.0988985971066, 121.794624855182 25.0991642425449, 121.794216524181 25.0991173021919, 121.793930601563 25.0992417843464, 121.793663755956 25.0996567312787, 121.793562273429 25.1003283068248, 121.792816078378 25.1009073541846, 121.792302696183 25.1015281884672, 121.792365376567 25.1017550317628, 121.792520585138 25.1018714381908, 121.793010089092 25.1019460576959, 121.793786131945 25.1026206180222, 121.793871198181 25.1032280207939, 121.794530834606 25.1039951093066, 121.794821850676 25.1044681969691, 121.79474126161 25.1048621879561, 121.794335142046 25.1054650540433, 121.793869705791 25.1064441214648, 121.793669725517 25.1074320837126, 121.793353338815 25.1082499134888, 121.793392140958 25.1086856913987, 121.793180221563 25.109972131667, 121.79328468887 25.1104705899613, 121.794314438041 25.1105153616644, 121.794621870402 25.1104765595217, 121.79706939017 25.1099064665025, 121.797532031102 25.1096885775476, 121.798588643295 25.1090140172213, 121.798866227854 25.1086767370581, 121.799227386259 25.1078081660185, 121.799913885706 25.1072112099775, 121.800675004658 25.1067903559686, 121.80259123355 25.106447106245, 121.804608944968 25.1061426586641, 121.805304398756 25.1059546175112, 121.806474432596 25.105253194163, 121.806769925836 25.1051636507569, 121.808232468137 25.105136787735, 121.808832408958 25.1055277939419, 121.809083731726 25.1060604634391, 121.809357730274 25.1073813424491, 121.805883446116 25.1081812635441)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454080300'=='0100020200' || '0454080300'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
