
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492376</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400092300">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400092300">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400092300" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400092300" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400092300" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400092300',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="2-Szy7lfKVz4a0PDxVyB5tuTI88DSOoT0D1P1xJkkipJTi87l9wMnw-zrGSgBukSCVhkXzVRGQouGzwQ0Divl60FPuw1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">923</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0400092300" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400092300" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">坪林 - 捷運新店站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0630 - 2110 <br>
                        [假日] 0730 - 2110
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 923坪林站班表:0630 0700 0740 0830 0930 1030 1130 1330 1430 1530 1630 1730 1830 1930 2030 2110<br/>923捷運新店站(新店路)班表:0550 0620 0700 0730 0830 0930 1030 1130 1330 1430 1530 1630 1730 1830 1930 2030<br>
[假日]<br /> 923坪林站班表:0730 0800 0830 0900 0930 1000 1030 1100 1200 1230 1300 1330 1400 1430 1500 1530 1600 1630 1700 1730 1800 1830 1900 1930 2000 2030 2050 2110<br/>923捷運新店站(新店路)班表:0630 0700 0730 0800 0830 0900 0930 1000 1030 1100 1200 1230 1300 1330 1400 1430 1500 1530 1600 1630 1700 1730 1800 1830 1900 1930 2000 2030<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">阿柔洋</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">二段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">新店客運新店站:02-2217-1448</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 捷運新店站</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 坪林</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">坪林站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2324100740" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.935506" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.709876" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">坪林國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2324100600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.93705" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.712961" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">國道5號15Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2329700070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94415" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.711219" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">楓子林路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2234103360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00877" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6422517" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">烏月路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.005201" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6305868" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">深坑消防隊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.002557" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6274888" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">昇高坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.000673" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6232469" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">喜樂橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224402060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.000203" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.621305" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">福安居</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.99886" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.61604" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">阿柔洋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998231" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.611603" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">文山路三段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224400260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998692" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6091801" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">國道3號20Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1169700040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999425" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.594146" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">中正路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314600062" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.969788" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54502" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">捷運新店區公所站(北新)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967768" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541385" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">檳榔路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314702040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.965168" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5404224" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">碧潭橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314701641" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.963276" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53963" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">捷運新店站(新店路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700841" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958392" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53755" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">捷運新店站(新店路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700841" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958392" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53755" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">碧潭橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314701600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.963158" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53982" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">檳榔路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314702000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.965001" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5405875" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">捷運新店區公所站(北新)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967638" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5416161" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">中正路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314600022" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.969823" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54459" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">國道3號26Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2319700110" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97471" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.555814" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">文山路三段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224400220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998421" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.608972" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">阿柔洋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.997975" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.611761" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">福安居</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224401820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998872" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6169638" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">喜樂橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224402020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.999972" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.621334" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">昇高坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.000387" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.623241" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">深坑消防隊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00225" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.627544" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">烏月路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2224200500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0051" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.630868" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">楓子林路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2234103320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.008547" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6423912" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">國道5號4Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2239700040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.006165" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.649619" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">坪林國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2324100660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.937332" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.712939" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">坪林區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2324101250" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.935418" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.711785" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">坪林站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2324100740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.935506" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.709876" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400092300";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 17;
        var existBackNum = 18;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400092300',
                        url: './StopStatusRecent3OfRoute?routeid=0400092300&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400092300',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400092300',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400092300');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400092300","Name":"923","BeginStop":"坪林","GoDirStops":[{"UniStopId":"2324100740","Name":"坪林站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.709876,"Latitude":24.935506,"PublicId":"2324100740"},{"UniStopId":"2324100600","Name":"坪林國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.712961,"Latitude":24.93705,"PublicId":"2324100600"},{"UniStopId":"2329700070","Name":"國道5號15Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.711219,"Latitude":24.94415,"PublicId":"2329700070"},{"UniStopId":"2234103360","Name":"楓子林路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6422517,"Latitude":25.00877,"PublicId":"2234103360"},{"UniStopId":"2224200540","Name":"烏月路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6305868,"Latitude":25.005201,"PublicId":"2224200540"},{"UniStopId":"2224200640","Name":"深坑消防隊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6274888,"Latitude":25.002557,"PublicId":"2224200640"},{"UniStopId":"2224200360","Name":"昇高坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6232469,"Latitude":25.000673,"PublicId":"2224200360"},{"UniStopId":"2224402060","Name":"喜樂橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.621305,"Latitude":25.000203,"PublicId":"2224402060"},{"UniStopId":"2224401860","Name":"福安居","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.61604,"Latitude":24.99886,"PublicId":"2224401860"},{"UniStopId":"2224401160","Name":"阿柔洋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.611603,"Latitude":24.998231,"PublicId":"2224401160"},{"UniStopId":"2224400260","Name":"文山路三段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6091801,"Latitude":24.998692,"PublicId":"2224400260"},{"UniStopId":"1169700040","Name":"國道3號20Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.594146,"Latitude":24.999425,"PublicId":"1169700040"},{"UniStopId":"2314600062","Name":"中正路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54502,"Latitude":24.969788,"PublicId":"2314600062"},{"UniStopId":"2314700940","Name":"捷運新店區公所站(北新)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541385,"Latitude":24.967768,"PublicId":"2314700940"},{"UniStopId":"2314702040","Name":"檳榔路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5404224,"Latitude":24.965168,"PublicId":"2314702040"},{"UniStopId":"2314701641","Name":"碧潭橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53963,"Latitude":24.963276,"PublicId":"2314701641"},{"UniStopId":"2314700841","Name":"捷運新店站(新店路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53755,"Latitude":24.958392,"PublicId":"2314700841"}],"LastStop":"捷運新店站","BackDirStops":[{"UniStopId":"2314700841","Name":"捷運新店站(新店路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53755,"Latitude":24.958392,"PublicId":"2314700841"},{"UniStopId":"2314701600","Name":"碧潭橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53982,"Latitude":24.963158,"PublicId":"2314701600"},{"UniStopId":"2314702000","Name":"檳榔路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5405875,"Latitude":24.965001,"PublicId":"2314702000"},{"UniStopId":"2314700900","Name":"捷運新店區公所站(北新)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5416161,"Latitude":24.967638,"PublicId":"2314700900"},{"UniStopId":"2314600022","Name":"中正路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54459,"Latitude":24.969823,"PublicId":"2314600022"},{"UniStopId":"2319700110","Name":"國道3號26Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.555814,"Latitude":24.97471,"PublicId":"2319700110"},{"UniStopId":"2224400220","Name":"文山路三段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.608972,"Latitude":24.998421,"PublicId":"2224400220"},{"UniStopId":"2224401120","Name":"阿柔洋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.611761,"Latitude":24.997975,"PublicId":"2224401120"},{"UniStopId":"2224401820","Name":"福安居","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6169638,"Latitude":24.998872,"PublicId":"2224401820"},{"UniStopId":"2224402020","Name":"喜樂橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.621334,"Latitude":24.999972,"PublicId":"2224402020"},{"UniStopId":"2224200320","Name":"昇高坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.623241,"Latitude":25.000387,"PublicId":"2224200320"},{"UniStopId":"2224200600","Name":"深坑消防隊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.627544,"Latitude":25.00225,"PublicId":"2224200600"},{"UniStopId":"2224200500","Name":"烏月路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.630868,"Latitude":25.0051,"PublicId":"2224200500"},{"UniStopId":"2234103320","Name":"楓子林路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6423912,"Latitude":25.008547,"PublicId":"2234103320"},{"UniStopId":"2239700040","Name":"國道5號4Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.649619,"Latitude":25.006165,"PublicId":"2239700040"},{"UniStopId":"2324100660","Name":"坪林國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.712939,"Latitude":24.937332,"PublicId":"2324100660"},{"UniStopId":"2324101250","Name":"坪林區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.711785,"Latitude":24.935418,"PublicId":"2324101250"},{"UniStopId":"2324100740","Name":"坪林站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.709876,"Latitude":24.935506,"PublicId":"2324100740"}],"RouteMapUrl":"../MapOverview?nid=0400092300","RouteTracks":null,"StopDirection":null,"TicketPrice":"二段票","BusTimeDesc":"0630 - 2110","HeadwayDesc":"923坪林站班表:0630 0700 0740 0830 0930 1030 1130 1330 1430 1530 1630 1730 1830 1930 2030 2110;923捷運新店站(新店路)班表:0550 0620 0700 0730 0830 0930 1030 1130 1330 1430 1530 1630 1730 1830 1930 2030","HolidayBusTimeDesc":"0730 - 2110","HolidayHeadwayDesc":"923坪林站班表:0730 0800 0830 0900 0930 1000 1030 1100 1200 1230 1300 1330 1400 1430 1500 1530 1600 1630 1700 1730 1800 1830 1900 1930 2000 2030 2050 2110;923捷運新店站(新店路)班表:0630 0700 0730 0800 0830 0900 0930 1000 1030 1100 1200 1230 1300 1330 1400 1430 1500 1530 1600 1630 1700 1730 1800 1830 1900 1930 2000 2030","RouteNote":"","SegmentBuffer":"阿柔洋","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"新店客運新店站:02-2217-1448","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.537496951326 24.958400540312, 121.537508391824 24.958680587247, 121.537655211554 24.9587964089413, 121.53805372225 24.9589571761872, 121.538175754233 24.959313715701, 121.538357372146 24.9598496034519, 121.538811178584 24.9609706385086, 121.539669215967 24.9628708430771, 121.540483838997 24.9648642245569, 121.541039215655 24.9662174135858, 121.541474907971 24.9674395114327, 121.54233866937 24.9699374279588, 121.542642792186 24.9707583014915, 121.543133780244 24.970479578426, 121.544364110514 24.9699195376132, 121.546003438603 24.9691136102108, 121.546577846962 24.9701269604337, 121.54765420719 24.9718463957251, 121.547187053504 24.9720417158316, 121.546942989537 24.9721903663244, 121.546805703556 24.9723614870181, 121.546723713317 24.972546867501, 121.546676044574 24.9726972458694, 121.546676044574 24.9729029355238, 121.546731340316 24.9730762158272, 121.5468495588 24.9732542492014, 121.547004482216 24.9734275290099, 121.547242825934 24.9735312375067, 121.547429687408 24.9735848201958, 121.547632279568 24.973600376456, 121.54837600818 24.9735786923931, 121.55040850719 24.9735200024238, 121.551407167366 24.9734888898811, 121.551930570169 24.9733799959196, 121.552407257604 24.973217519036, 121.552924463471 24.9729163312667, 121.553598022817 24.9723731543295, 121.553857817469 24.9722603702733, 121.554136679618 24.9721583891987, 121.55449514857 24.9721238193237, 121.554727772038 24.9721653031725, 121.554935607759 24.9723087680419, 121.555103119651 24.9725004651269, 121.555164894416 24.9727516931643, 121.555124852671 24.9733091283691, 121.55513057292 24.97369284974, 121.555227817157 24.9739888502049, 121.555499052308 24.9743799154205, 121.555786971518 24.9746927666979, 121.556920534239 24.9753889011466, 121.558109392702 24.976004659247, 121.559277276917 24.9765119551836, 121.560167952128 24.9767868045142, 121.561346100385 24.9770879539109, 121.562000846268 24.9771933361652, 121.562815727747 24.9772767841143, 121.564496702118 24.97722868668, 121.566875564726 24.9768221551459, 121.569337765232 24.9762565790409, 121.572303300473 24.9759583455191, 121.573112176342 24.9759467565113, 121.574128950641 24.9759968812691, 121.575232005366 24.9760954022854, 121.577400456508 24.9764168913684, 121.579364593413 24.9768575057674, 121.581091924004 24.9775481460043, 121.583065409985 24.9785074141287, 121.584064546848 24.978991366379, 121.584989320472 24.9796153162915, 121.587063864189 24.9812987553876, 121.588656000222 24.9827868687053, 121.589851532309 24.9843371836353, 121.590664761073 24.9856213204429, 121.591694405933 24.9876028053663, 121.592579137812 24.9900076785314, 121.592802227532 24.9911267105514, 121.593608520746 24.9945845620861, 121.593828058892 24.9950972477531, 121.594102630854 24.9957228440936, 121.59435432182 24.9961306897167, 121.594914945292 24.996846654546, 121.595460913759 24.9973591540834, 121.59627986646 24.9982074244832, 121.597059821414 24.9995151632103, 121.597469297764 25.0006461692639, 121.597664439368 25.0012243255858, 121.597900876336 25.0014904503749, 121.598209769794 25.001639065266, 121.599653171633 25.0019538820353, 121.600084104788 25.0019259260591, 121.600958349544 25.0014087985122, 121.602041783677 25.0007698724194, 121.602899734125 24.9999746356752, 121.603601693583 24.9994621470461, 121.604137854735 24.9992188666725, 121.605349594195 24.9988214000114, 121.606829231993 24.9986243943202, 121.608300922176 24.9985608687549, 121.610351952138 24.9982502554494, 121.611822056187 24.9980221425072, 121.612275862625 24.9979910361641, 121.613497135834 24.9980774426533, 121.614249348606 24.9982087804005, 121.616531728045 24.998820535952, 121.620546214941 24.999850931719, 121.623032321354 25.0003987625793, 121.624377743649 25.0008228880194, 121.625390487336 25.0013349229707, 121.626729979028 25.0017747193992, 121.627279122954 25.002106509769, 121.628703465009 25.0032729531755, 121.630501530014 25.0047227836903, 121.631004911945 25.0052930341505, 121.63141295639 25.0060680521232, 121.632255288676 25.0075203414734, 121.632500757116 25.0078150646686, 121.632996245881 25.0081388213961, 121.633369281623 25.0083075414604, 121.633971189573 25.0084215540378, 121.634838432297 25.00840085263, 121.637845376637 25.0079481199965, 121.63859377591 25.0078824563462, 121.639537617031 25.0078962802755, 121.640578702389 25.0080725352377, 121.642092470523 25.0084922370965, 121.642602717238 25.0086332662536, 121.643662870094 25.0086436341373, 121.64431211838 25.0085710589328, 121.645839424922 25.0082652058138, 121.646757576086 25.0082801877983, 121.647043060695 25.0083533330618, 121.647520701505 25.0079330000801, 121.648226675596 25.0074349057947, 121.648980447703 25.0068311744625, 121.649581897974 25.0061056364825, 121.649916393647 25.0056472118526, 121.650306462875 25.0049383559558, 121.650571501089 25.0042346126327, 121.65096715166 25.0021959374888, 121.651706970559 24.9978601302173, 121.652348591846 24.994648354494, 121.652642231306 24.99396658662, 121.65286818115 24.9934671395669, 121.653337241586 24.9927758600204, 121.653806302022 24.9921813565008, 121.654207672843 24.9917588079197, 121.654811159135 24.9912705853577, 121.655661569519 24.990693356889, 121.656890469727 24.9900599578603, 121.657604547504 24.9896615974543, 121.658062167442 24.9892537303649, 121.658433030266 24.9888864760015, 121.659184289664 24.9875306498031, 121.660264463391 24.9854791673313, 121.661089132654 24.9838554128337, 121.661944309912 24.9828348302462, 121.662949167025 24.9821910206158, 121.663605088936 24.9819732480048, 121.664554650306 24.9817934988925, 121.667989659963 24.9820078151117, 121.668898226214 24.9820078151117, 121.669757216971 24.9819283107514, 121.671089081665 24.9816137495175, 121.6726659637 24.9809621558304, 121.673940625901 24.980152411915, 121.675318252588 24.9790280948203, 121.675854049265 24.9784594509002, 121.676708273148 24.9769721494322, 121.677029577706 24.9760621143256, 121.678121514641 24.9735521787212, 121.678700826626 24.9728057083141, 121.67959413888 24.9718947936565, 121.682166344279 24.9698361362556, 121.683120672523 24.9688837146704, 121.684094068266 24.9675380393019, 121.6846341385 24.9666230766003, 121.685208563489 24.965343614827, 121.685597540436 24.9636755149054, 121.68625822922 24.9605389072496, 121.686708222159 24.9592484582429, 121.687605347912 24.9574592667777, 121.688273663696 24.9564030265662, 121.689739000871 24.9546345386251, 121.690799153726 24.9536180355263, 121.692720204089 24.9522358889997, 121.693940523923 24.9515132596614, 121.695486897962 24.9508649641603, 121.696918867016 24.9503566981007, 121.698692144274 24.9499314126429, 121.700242987 24.9495814823622, 121.70206041769 24.9491214645284, 121.702590494118 24.9489036333901, 121.705894891417 24.9470650195043, 121.707935292726 24.9463284618539, 121.70938805694 24.9455868473943, 121.710422468674 24.9447561241712, 121.710964938975 24.9437447262122, 121.711083157459 24.9434577297233, 121.711128919453 24.9429805533582, 121.711014514468 24.9422578696916, 121.711037395465 24.9418801015423, 121.711098411457 24.9416034742452, 121.711201375943 24.9414409554185, 121.711327221426 24.9413389488113, 121.711489295154 24.9412957256473, 121.711634208134 24.9413130149147, 121.71228354159 24.9415725326918, 121.712620951124 24.9417072095544, 121.712914113897 24.941188964367, 121.713028518881 24.9408444749086, 121.713074280875 24.9403270905624, 121.71317462358 24.9399616352307, 121.713272821192 24.9392426078861, 121.713361485055 24.9389592749486, 121.713390086301 24.9386279626095, 121.713371018803 24.9385082317734, 121.713256613819 24.9380870117158, 121.713001824385 24.9374189783897, 121.712842610782 24.9369949450044, 121.712510836327 24.9364057912019, 121.712109465507 24.9358174990846, 121.711795328487 24.9353660121567, 121.71155507802 24.9352432523804, 121.711465460782 24.935481855777, 121.711322454551 24.9356098023356, 121.71113511639 24.9357170007014, 121.710769020439 24.9358172829591, 121.710511609225 24.9358120959478, 121.710303296815 24.9357360197565, 121.709517239235 24.9352774003586, 121.709549653981 24.9352151559356, 121.710310923814 24.9356582145124, 121.710547360782 24.9357567678134, 121.710809062184 24.9357377487614, 121.711219013378 24.9356046153156, 121.711381087106 24.9354662947, 121.711463554032 24.9352985807454, 121.711509316026 24.9351602597864, 121.711841090481 24.9353020387674, 121.712120906005 24.9357111653089, 121.712537530823 24.9363781272711, 121.712859294842 24.9369729004154, 121.71307523425 24.9375106143628, 121.713279494816 24.9380887406877, 121.713408200423 24.938512770309, 121.713415827422 24.9386469812154, 121.713390086301 24.9389670552668, 121.713297608938 24.9392426078861, 121.713205131576 24.9399633641762, 121.71309835359 24.9403398414976, 121.713058073502 24.9408280500421, 121.713033285756 24.9409205479459, 121.712947482017 24.9411699461535, 121.71265145912 24.9417106673965, 121.713457060885 24.9420901649811, 121.713921446992 24.9423504667509, 121.714194431225 24.9426333506453, 121.714250745464 24.9428370543072, 121.714246931965 24.9430207503516, 121.714164941726 24.9432005560968, 121.714041002993 24.9433250368436, 121.713869395516 24.9434287707031, 121.713674907043 24.943494468769, 121.713407962079 24.9434685353261, 121.713043997669 24.9433759177777, 121.712751514562 24.9433405575395, 121.712303040464 24.943393597893, 121.711796069744 24.9436941594642, 121.711445090015 24.9439416802075, 121.711055112539 24.9443836802979, 121.710314155333 24.9451792764639, 121.709365175943 24.9458427193916, 121.708365085705 24.9463587839314, 121.70608937989 24.9471445463898, 121.703109321453 24.9489627079047, 121.70224251229 24.9493565834198, 121.701529912673 24.9495991615868, 121.69917054894 24.9501295371427, 121.696986675071 24.9506245522673, 121.695430648844 24.9511692312738, 121.693983848501 24.951809044667, 121.69304149142 24.9523664113397, 121.69224844873 24.9529228107091, 121.691299675533 24.9535929685922, 121.690708037698 24.9541072810016, 121.689170789448 24.9557348764832, 121.68849580004 24.9565828127741, 121.687997694235 24.9573954522392, 121.687042249418 24.9593223504855, 121.686315916368 24.9614967040283, 121.685902620394 24.9637896032887, 121.685464067954 24.9655225236833, 121.685126485064 24.96621651002, 121.684807192668 24.9669425494868, 121.684229536868 24.9679311512669, 121.683391085293 24.9689563892583, 121.68245235674 24.9699778753168, 121.68052475084 24.9715371229369, 121.67951786889 24.9723995138066, 121.679023337555 24.9729688764937, 121.678295642307 24.9740337903592, 121.677597771902 24.9755842156287, 121.676704459649 24.977667838877, 121.676365058195 24.9782416716813, 121.6757865245 24.9789254994445, 121.675208614478 24.9794800697994, 121.674154181872 24.9803494472113, 121.673277076991 24.980930180985, 121.671998868258 24.9815413732584, 121.671019049848 24.9819302146156, 121.669982213441 24.9821702803838, 121.669161357678 24.9822739815091, 121.667978219464 24.9823396588432, 121.665871347158 24.9821599839306, 121.665052394457 24.9821069602807, 121.664577531303 24.9820907761285, 121.663719275414 24.9821849629598, 121.662777559549 24.9825263205486, 121.662302778863 24.9828797671683, 121.661757448438 24.9833014820993, 121.661394212612 24.983692949788, 121.660411662485 24.985412057423, 121.659124736813 24.9880101195461, 121.658793255957 24.9886817185112, 121.658378904889 24.9891589050199, 121.657618448809 24.9898304977091, 121.656974985973 24.9901662926778, 121.655768347505 24.9907590297257, 121.65492556412 24.9912982369529, 121.654165724348 24.991980019628, 121.653654715418 24.9925606984682, 121.653226650101 24.9931672975411, 121.652741382293 24.9940288013356, 121.652504945325 24.9945965091612, 121.652329524349 24.9952497587567, 121.652031118015 24.9969917407025, 121.651085370144 25.0022564199677, 121.650768372999 25.0040959371377, 121.650533366094 25.0049521802164, 121.650165363394 25.0058693300322, 121.649600012096 25.0067691929324, 121.648775709528 25.0078207463962, 121.647932082761 25.0088492636507, 121.647390565835 25.0086401781762, 121.646786824397 25.0084392248062, 121.646407636344 25.0083913487179, 121.64581559055 25.008394804686, 121.644331185877 25.0086885616234, 121.643731513084 25.0087818725036, 121.643113726168 25.0088060642017, 121.642529307373 25.0087611367586, 121.642048598056 25.0086336030919, 121.640761672384 25.0082625170069, 121.640082947457 25.0081036390283, 121.639372683179 25.0080068716539, 121.638074186606 25.0080448874172, 121.636354926898 25.0082801877983, 121.634708773315 25.008528723377, 121.633976064291 25.0085275786106, 121.633342587126 25.0084181324685, 121.632847785569 25.0082194141796, 121.632317709141 25.0078081526996, 121.632058391177 25.0074971136909, 121.631665447742 25.0068841874468, 121.631107876431 25.0057881130851, 121.630833304469 25.0053103144262, 121.630495515312 25.0049226917914, 121.62844813356 25.0032085663401, 121.627210479963 25.0022171063598, 121.626386764075 25.0017643509357, 121.625581799107 25.0015474322593, 121.623902269164 25.0007784788681, 121.622331107378 25.000342999117, 121.619225965427 24.9996603987822, 121.616684268024 24.9989898914704, 121.615642229291 24.9987237612653, 121.61370401818 24.9982329741807, 121.612416962106 24.9981327427745, 121.611764853695 24.998174217849, 121.610538813612 24.9983401180073, 121.608271688171 24.9987246253253, 121.60630582919 24.9987833813938, 121.605390589314 24.9989423682618, 121.604523971558 24.9991877606324, 121.603802266781 24.9994849958053, 121.603030986511 25.0000215725963, 121.601881693106 25.001052813038, 121.600249992016 25.0019812244482, 121.600106985785 25.0020434351062, 121.599672670507 25.0020599121906, 121.598870935266 25.0019328383591, 121.598288250465 25.0019185386299, 121.597224933553 25.0018645793795, 121.595332484436 25.0019475269953, 121.593929116628 25.0020849088607, 121.593902422132 25.0017980484389, 121.594076493718 25.0012293401923, 121.594232484708 25.0003987625793, 121.594268518082 24.9996310209612, 121.594112164603 24.9986140255908, 121.592736444666 24.9926484049295, 121.592362721717 24.9909426542473, 121.591747794925 24.9887244516689, 121.590533195341 24.9862772101789, 121.588748477585 24.9836207919302, 121.58793524882 24.9826909455676, 121.586691295255 24.9814353254022, 121.584656592643 24.9798737101344, 121.581823162529 24.9783777837383, 121.580182404378 24.9776380236958, 121.578614102717 24.9771220902849, 121.576239898882 24.9766807525582, 121.574976977588 24.9764860286958, 121.573379597993 24.9764030638983, 121.571584869801 24.9764276940784, 121.568923047164 24.9767768371539, 121.56711442593 24.9771403103738, 121.564752985483 24.9775256765712, 121.563507134272 24.977529165646, 121.56161574351 24.9773700886378, 121.560533556013 24.9771403103738, 121.559086601943 24.9766519581231, 121.557666550074 24.9760323142753, 121.556227907396 24.9752726629558, 121.55549857562 24.9748574022025, 121.554548537562 24.9742433668235, 121.553873071467 24.9739162545364, 121.552921126659 24.9736535269969, 121.552285225621 24.9735740172362, 121.551525076303 24.9735521787212, 121.549866990263 24.9736219823697, 121.548138521624 24.97369284974, 121.547495946962 24.9736816146718, 121.547230908748 24.9736435882796, 121.54699828528 24.9735277805582, 121.546817144054 24.9733873419439, 121.546719899818 24.9732542492014, 121.54663218933 24.9730658449431, 121.546569266588 24.9728147828569, 121.546574986837 24.9726713185776, 121.546693205321 24.9723805004138, 121.547108876765 24.9717820091618, 121.547190867003 24.9715132273056, 121.546278487253 24.9700958470329, 121.545906194366 24.9693175773231, 121.544478515498 24.9700197920201, 121.543223397482 24.9705902034702, 121.5425436412 24.9709622658774, 121.542009751273 24.969641676912, 121.541310927493 24.9674887753771, 121.540650238708 24.9655838884968, 121.539269751896 24.9623682446313, 121.538734908594 24.9612472223032, 121.537960291513 24.9591944371422, 121.537907275902 24.9589729534681, 121.537485510827 24.9587117035338, 121.537474070329 24.9583918968779)","wkt0":"LINESTRING (121.710132465199 24.9356248319171, 121.709776135362 24.9354154881378, 121.709825130714 24.9353754010312, 121.710310923814 24.9356582145124, 121.710547360782 24.9357567678134, 121.710809062184 24.9357377487614, 121.711219013378 24.9356046153156, 121.711381087106 24.9354662947, 121.711463554032 24.9352985807454, 121.711509316026 24.9351602597864, 121.711842259985 24.935320661057, 121.712120906005 24.9357111653089, 121.712537530823 24.9363781272711, 121.712848382657 24.9369760279629, 121.71307523425 24.9375106143628, 121.713279494816 24.9380887406877, 121.713397426407 24.9385099189392, 121.713415827422 24.9386469812154, 121.713390086301 24.9389670552668, 121.713297608938 24.9392426078861, 121.713198398047 24.9399641985717, 121.71308309886 24.940338920931, 121.713058073502 24.9408280500421, 121.713033285756 24.9409205479459, 121.712947482017 24.9411699461535, 121.712641118641 24.9417032946494, 121.713728225266 24.9422221409931, 121.713979412782 24.9423745006337, 121.714194431225 24.9426333506453, 121.714250745464 24.9428370543072, 121.714246931965 24.9430207503516, 121.714164941726 24.9432005560968, 121.714041002993 24.9433250368436, 121.713869395516 24.9434287707031, 121.713674907043 24.943494468769, 121.713407962079 24.9434685353261, 121.713043997669 24.9433759177777, 121.712751514562 24.9433405575395, 121.712453071157 24.9433442491569, 121.712155214923 24.9434073891881, 121.711891673923 24.9435268062037, 121.711441458048 24.9439097642193, 121.711055112539 24.9443836802979, 121.710542398907 24.9449337308128, 121.710034533439 24.9453784562502, 121.709365175943 24.9458427193916, 121.709010566845 24.9460688787657, 121.708365085705 24.9463587839314, 121.706603010002 24.9469514665936, 121.706100634971 24.9471601032186, 121.703109321453 24.9489627079047, 121.70217222694 24.9493878482337, 121.700920407191 24.9497419814524, 121.698996008847 24.9501221942492, 121.697615163816 24.9503953435148, 121.697090827035 24.9505271140147, 121.695575466286 24.9510528234053, 121.69402990813 24.9517350102645, 121.692671024849 24.9525462224049, 121.691334103318 24.9535043037485, 121.690710938662 24.9540492296702, 121.689689717287 24.9550512345138, 121.689132437881 24.955678516998, 121.688470840162 24.9565638500447, 121.687968465131 24.9573421195602, 121.687317848287 24.958521191013, 121.686689193194 24.9601175357158, 121.686315916368 24.9614967040283, 121.685854646694 24.9640294724337, 121.685547182194 24.9653046265428, 121.685305602944 24.9659099472771, 121.685011864538 24.9664974240895, 121.684674202632 24.9671466683237, 121.684218496319 24.9678768965111, 121.683391085293 24.9689563892583, 121.68245235674 24.9699778753168, 121.68052475084 24.9715371229369, 121.67951786889 24.9723995138066, 121.679023337555 24.9729688764937, 121.678295642307 24.9740337903592, 121.677597771902 24.9755842156287, 121.676704459649 24.977667838877, 121.676365058195 24.9782416716813, 121.6757865245 24.9789254994445, 121.675208614478 24.9794800697994, 121.674154181872 24.9803494472113, 121.673277076991 24.980930180985, 121.672290520853 24.9814259236488, 121.671746967541 24.981675738555, 121.671019049848 24.9819302146156, 121.669982213441 24.9821702803838, 121.669161357678 24.9822739815091, 121.667978219464 24.9823396588432, 121.665871347158 24.9821599839306, 121.664732933636 24.9820847761486, 121.664208596855 24.9821067378986, 121.663568960886 24.9822124288205, 121.662777559549 24.9825263205486, 121.662302778863 24.9828797671683, 121.661757448438 24.9833014820993, 121.661394212612 24.983692949788, 121.660939041324 24.9844113490388, 121.660411662485 24.985412057423, 121.659665259825 24.986928714632, 121.658756592418 24.9886444763504, 121.658378904889 24.9891589050199, 121.657618448809 24.9898304977091, 121.656974985973 24.9901662926778, 121.655768347505 24.9907590297257, 121.65492556412 24.9912982369529, 121.654165724348 24.991980019628, 121.653654715418 24.9925606984682, 121.653109677451 24.9932935043025, 121.652741382293 24.9940288013356, 121.652504945325 24.9945965091612, 121.652329524349 24.9952497587567, 121.651946016234 24.9972607721399, 121.651000268363 25.0025254514051, 121.650751534545 25.0040931948627, 121.650474267452 25.0050897092687, 121.650165363394 25.0058693300322, 121.649600012096 25.0067691929324, 121.648775709528 25.0078207463962, 121.647932082761 25.0088492636507, 121.647390565835 25.0086401781762, 121.646820381296 25.0084292678774, 121.646386636734 25.0083633826275, 121.64581559055 25.008394804686, 121.644331185877 25.0086885616234, 121.643731513084 25.0087818725036, 121.643113726168 25.0088060642017, 121.642529307373 25.0087611367586, 121.642048598056 25.0086336030919, 121.640734231329 25.0082288669087, 121.640082947457 25.0081036390283, 121.639372683179 25.0080068716539, 121.638074186606 25.0080448874172, 121.636354926898 25.0082801877983, 121.634708773315 25.008528723377, 121.633976064291 25.0085275786106, 121.633342587126 25.0084181324685, 121.632847785569 25.0082194141796, 121.632317709141 25.0078081526996, 121.632058391177 25.0074971136909, 121.631665447742 25.0068841874468, 121.631107876431 25.0057881130851, 121.630845953393 25.0052763841437, 121.630390247081 25.0048055791282, 121.62844813356 25.0032085663401, 121.627219519425 25.0022058569725, 121.626386764075 25.0017643509357, 121.625339044582 25.0014413135508, 121.623902269164 25.0007784788681, 121.623107181739 25.000485977426, 121.622331107378 25.000342999117, 121.619225965427 24.9996603987822, 121.616697095959 24.9989651262388, 121.615642229291 24.9987237612653, 121.61370401818 24.9982329741807, 121.61243651646 24.9981113632078, 121.611599224741 24.9981580319265, 121.610538813612 24.9983401180073, 121.608271688171 24.9987246253253, 121.60630582919 24.9987833813938, 121.605390589314 24.9989423682618, 121.604523971558 24.9991877606324, 121.603802266781 24.9994849958053, 121.603423963306 24.9996953544262, 121.603030986511 25.0000215725963, 121.601881693106 25.001052813038, 121.600255980869 25.0019546694569, 121.600106985785 25.0020434351062, 121.599672670507 25.0020599121906, 121.598870935266 25.0019328383591, 121.598288250465 25.0019185386299, 121.597224933553 25.0018645793795, 121.595332484436 25.0019475269953, 121.593929116628 25.0020849088607, 121.593902422132 25.0017980484389, 121.594076493718 25.0012293401923, 121.594178066558 25.0008085406291, 121.594265913557 25.0002306720823, 121.594268518082 24.9996310209612, 121.593925506433 24.9979974366297, 121.592736444666 24.9926484049295, 121.592362721717 24.9909426542473, 121.591747794925 24.9887244516689, 121.590533195341 24.9862772101789, 121.588748477585 24.9836207919302, 121.58793524882 24.9826909455676, 121.586848332497 24.98159887243, 121.585975352934 24.9808617811958, 121.584656592643 24.9798737101344, 121.582656383466 24.9787795327744, 121.581823162529 24.9783777837383, 121.580182404378 24.9776380236958, 121.578614102717 24.9771220902849, 121.576239898882 24.9766807525582, 121.574976977588 24.9764860286958, 121.573379597993 24.9764030638983, 121.571579425812 24.976444724228, 121.570138185969 24.976587475603, 121.568923047164 24.9767768371539, 121.56711442593 24.9771403103738, 121.564752985483 24.9775256765712, 121.563507134272 24.977529165646, 121.562322548189 24.9774714360403, 121.561309562471 24.9773067229153, 121.560398149846 24.9770678888841, 121.559086601943 24.9766519581231, 121.557666550074 24.9760323142753, 121.556227907396 24.9752726629558, 121.55549857562 24.9748574022025, 121.554548537562 24.9742433668235, 121.553873071467 24.9739162545364, 121.552921126659 24.9736535269969, 121.552285225621 24.9735740172362, 121.551525076303 24.9735521787212, 121.549866990263 24.9736219823697, 121.548308206474 24.973667935463, 121.547495946962 24.9736816146718, 121.547230908748 24.9736435882796, 121.54699828528 24.9735277805582, 121.546817144054 24.9733873419439, 121.546719899818 24.9732542492014, 121.54663218933 24.9730658449431, 121.546569266588 24.9728147828569, 121.546574986837 24.9726713185776, 121.546693205321 24.9723805004138, 121.547108876765 24.9717820091618, 121.547190867003 24.9715132273056, 121.546278487253 24.9700958470329, 121.545875942662 24.9692742128545, 121.544429212381 24.9700016958231, 121.543188373506 24.9705534847918, 121.542532266225 24.9709323249792, 121.542029891194 24.9696105021513, 121.541316134319 24.9673909927924, 121.540643555725 24.9655022822928, 121.539292908101 24.9623713603091, 121.538730138257 24.96120601495, 121.53797794832 24.9591896517785, 121.53793402482 24.9589425820911, 121.537485510827 24.9587117035338, 121.537324586257 24.9585321718881, 121.537236739257 24.9583427517944, 121.537459101976 24.9583427517944, 121.537481063726 24.9585266814506)","wkt1":"LINESTRING (121.53747145546 24.9583509874506, 121.537496162429 24.9585458979818, 121.537371254976 24.9585555062474, 121.537508391824 24.958680587247, 121.537655211554 24.9587964089413, 121.538039715742 24.9589569944896, 121.538175754233 24.959313715701, 121.538357372146 24.9598496034519, 121.538848182663 24.961149051661, 121.539759595288 24.9631681600512, 121.540483838997 24.9648642245569, 121.541123969007 24.9665036008317, 121.541609872725 24.9678885636908, 121.54233866937 24.9699374279588, 121.542642792186 24.9707583014915, 121.543149940444 24.9705075023777, 121.544426467162 24.9699488503622, 121.546002222724 24.9691595999718, 121.546694017849 24.9703784770965, 121.54765420719 24.9718463957251, 121.547187053504 24.9720417158316, 121.546942989537 24.9721903663244, 121.546805703556 24.9723614870181, 121.546723713317 24.972546867501, 121.546676044574 24.9726972458694, 121.546676044574 24.9729029355238, 121.546731340316 24.9730762158272, 121.5468495588 24.9732542492014, 121.547004482216 24.9734275290099, 121.547232080724 24.9735505773615, 121.547429687408 24.9735848201958, 121.547632279568 24.973600376456, 121.54837600818 24.9735786923931, 121.55040850719 24.9735200024238, 121.551407167366 24.9734888898811, 121.551930570169 24.9733799959196, 121.552242104942 24.9732678198303, 121.552670359067 24.9730536927678, 121.552920173973 24.9728807439866, 121.553598022817 24.9723731543295, 121.553857817469 24.9722603702733, 121.554136679618 24.9721583891987, 121.55449514857 24.9721238193237, 121.554727772038 24.9721653031725, 121.554935607759 24.9723087680419, 121.555103119651 24.9725004651269, 121.555164894416 24.9727516931643, 121.555124852671 24.9733091283691, 121.55513057292 24.97369284974, 121.555227817157 24.9739888502049, 121.555499052308 24.9743799154205, 121.555786971518 24.9746927666979, 121.556920534239 24.9753889011466, 121.558109392702 24.976004659247, 121.559277276917 24.9765119551836, 121.560167952128 24.9767868045142, 121.561346100385 24.9770879539109, 121.562000846268 24.9771933361652, 121.562815727747 24.9772767841143, 121.563492011377 24.9772936831263, 121.564496702118 24.97722868668, 121.565397193189 24.977105635642, 121.566539204189 24.9768764098764, 121.569337765232 24.9762565790409, 121.572303300473 24.9759583455191, 121.573112176342 24.9759467565113, 121.574128950641 24.9759968812691, 121.575232005366 24.9760954022854, 121.577400456508 24.9764168913684, 121.579364593413 24.9768575057674, 121.581091924004 24.9775481460043, 121.583065409985 24.9785074141287, 121.584064546848 24.978991366379, 121.584989320472 24.9796153162915, 121.587063864189 24.9812987553876, 121.588660176871 24.982823926297, 121.589851532309 24.9843371836353, 121.590716345715 24.9857242499057, 121.591694405933 24.9876028053663, 121.592579137812 24.9900076785314, 121.592802227532 24.9911267105514, 121.593608520746 24.9945845620861, 121.593828058892 24.9950972477531, 121.594102630854 24.9957228440936, 121.59435432182 24.9961306897167, 121.594628282433 24.9965211952472, 121.59494123737 24.9968561119346, 121.595682446432 24.9975273179188, 121.59627986646 24.9982074244832, 121.596602094713 24.9986720741373, 121.597041329713 24.9995395632622, 121.597469297764 25.0006461692639, 121.597664439368 25.0012243255858, 121.597900876336 25.0014904503749, 121.598209769794 25.001639065266, 121.599653171633 25.0019538820353, 121.600107739056 25.0019224131367, 121.601850952962 25.0009506056994, 121.602899734125 24.9999746356752, 121.603601693583 24.9994621470461, 121.604137854735 24.9992188666725, 121.605349594195 24.9988214000114, 121.60609231593 24.9986981537155, 121.607613167117 24.9986185423717, 121.608406535336 24.9985855997467, 121.610351952138 24.9982502554494, 121.61173374046 24.998040673825, 121.612724764429 24.998018712075, 121.61362245096 24.9981147947312, 121.614616220147 24.9983508835437, 121.616531728045 24.998820535952, 121.619585066083 24.9996493720121, 121.622991882551 25.0003919536839, 121.624021339582 25.0007145168869, 121.625413165488 25.0013774872149, 121.626651259144 25.0017618178398, 121.627241481176 25.0021077154022, 121.628703465009 25.0032729531755, 121.630382011425 25.0046593962298, 121.630909093425 25.0051988317141, 121.63141295639 25.0060680521232, 121.632160913174 25.0074567741355, 121.632500757116 25.0078150646686, 121.632915848331 25.0081403336041, 121.633369281623 25.0083075414604, 121.634104528049 25.0084574063696, 121.634838432297 25.00840085263, 121.638189413548 25.007916598276, 121.63915024011 25.0079111078385, 121.639982041392 25.007982483526, 121.640876982704 25.0081746488384, 121.642592744422 25.008667415604, 121.643243361266 25.0087058486665, 121.643712793672 25.0086701608227, 121.644357920078 25.0085850590415, 121.646002306109 25.0082679862759, 121.646518407234 25.0082789671509, 121.647061960546 25.0083777950259, 121.647265106734 25.008158177526, 121.647564335577 25.007916598276, 121.648226675596 25.0074349057947, 121.649016556296 25.0067828229325, 121.649581897974 25.0061056364825, 121.649916393647 25.0056472118526, 121.650284847358 25.0050794146985, 121.650477012671 25.004597628808, 121.650571501089 25.0042346126327, 121.65096715166 25.0021959374888, 121.651745303733 24.9978306645907, 121.652327290108 24.9947930800444, 121.652642231306 24.99396658662, 121.65286818115 24.9934671395669, 121.653337241586 24.9927758600204, 121.653806302022 24.9921813565008, 121.654207672843 24.9917588079197, 121.654811159135 24.9912705853577, 121.655661569519 24.990693356889, 121.657243976888 24.9899093358892, 121.65767772145 24.9896252057486, 121.6579632242 24.9893836264987, 121.658364026138 24.9889608628113, 121.658737375887 24.9884063286239, 121.659184289664 24.9875306498031, 121.660264463391 24.9854791673313, 121.661089132654 24.9838554128337, 121.661858689606 24.9829405980938, 121.662363809855 24.9825260700627, 121.662949167025 24.9821910206158, 121.663605088936 24.9819732480048, 121.664126240293 24.9818548640784, 121.664765876261 24.9817889788284, 121.667996998729 24.9820250676409, 121.668856252198 24.9820305580784, 121.67012454326 24.9818685901722, 121.671089081665 24.9816137495175, 121.6726659637 24.9809621558304, 121.673940625901 24.980152411915, 121.675318252588 24.9790280948203, 121.675854049265 24.9784594509002, 121.676339718509 24.9776917398449, 121.676708273148 24.9769721494322, 121.677042494509 24.9761201021109, 121.678121514641 24.9735521787212, 121.678700826626 24.9728057083141, 121.679255140821 24.972153261018, 121.67984810807 24.9715589211587, 121.680718342414 24.970904186487, 121.682475282414 24.9693284309248, 121.683455325507 24.9682015186282, 121.683935738788 24.967464427394, 121.684896565351 24.9656896434725, 121.685171087226 24.9648303900039, 121.685475806507 24.9634866054261, 121.685783271007 24.9616294649421, 121.686417416538 24.959390739052, 121.687106466444 24.9578273369742, 121.687581389288 24.9569873000368, 121.688663005475 24.9555350793184, 121.689626577256 24.9543779696155, 121.691095269287 24.9530588920064, 121.692660043974 24.9520047280067, 121.693494590474 24.9515311777724, 121.694331882192 24.9511070414756, 121.695350358348 24.9506870230069, 121.696267261411 24.9503754406789, 121.697565749879 24.9500158170227, 121.698754429598 24.9497660021165, 121.700876483691 24.9494420663041, 121.70206041769 24.9491214645284, 121.702590494118 24.9489036333901, 121.703209919628 24.9485979115386, 121.705894891417 24.9470650195043, 121.706463003846 24.9468327358827, 121.708197982096 24.9462150616641, 121.708705847564 24.9459968167736, 121.70948274447 24.9455342474143, 121.709985119501 24.9451334454769, 121.710424354501 24.9447120543988, 121.710964938975 24.9437447262122, 121.711083157459 24.9434577297233, 121.711128919453 24.9429805533582, 121.711014514468 24.9422578696916, 121.711037395465 24.9418801015423, 121.711098411457 24.9416034742452, 121.711201375943 24.9414409554185, 121.711327221426 24.9413389488113, 121.711489295154 24.9412957256473, 121.711634208134 24.9413130149147, 121.71228354159 24.9415725326918, 121.712628765157 24.9417211385713, 121.712999369688 24.9410265982277, 121.713028518881 24.9408444749086, 121.713098197563 24.940316959181, 121.713199770657 24.9399436094311, 121.713272821192 24.9392426078861, 121.713386445532 24.9389416045876, 121.713408407282 24.9386780635876, 121.713371018803 24.9385082317734, 121.713256613819 24.9380870117158, 121.713001824385 24.9374189783897, 121.712842610782 24.9369949450044, 121.712510836327 24.9364057912019, 121.712109465507 24.9358174990846, 121.711813435189 24.9353522310727, 121.711544403751 24.9352204605727, 121.711436495001 24.935461529328, 121.71129348877 24.9355894758866, 121.711106150609 24.9356966742524, 121.710740054658 24.9357969565101, 121.710482643444 24.9357917694988, 121.710306310095 24.9357091095101, 121.709534903627 24.9352561484165)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400092300'=='0100020200' || '0400092300'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
