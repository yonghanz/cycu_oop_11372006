
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493003</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454081100">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454081100">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454081100" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454081100" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454081100" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454081100',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="nRdSXH4pK2GbQTQaOoHWcFcY0iQ8_iid72tHIhGwLtrZ7qn7Gu6b83K3OyjwXxkso-hkFEHdq1R8PIedriM4P8iLHfE1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F811 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454081100" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454081100" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">澳底臻信福 - 貢寮環保公園</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0630 - 1620 <br>
                        [假日] 0630 - 1620
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> F811澳底臻信福班表:0630 0830 1330 1620<br/>F811貢寮環保公園班表:0706 1036 1426 1706<br>
[假日]<br /> F811澳底臻信福班表:0630 0830 1330 1620<br/>F811貢寮環保公園班表:0706 1036 1426 1706<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">雙溪區公所雙溪區公所站:(02)2493-1111</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 貢寮環保公園</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 澳底臻信福</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">澳底臻信福</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284401860" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.053581" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.9226375" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">文秀坑(打鐵寮)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284300560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059451" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.906247" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">雙板橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284303260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.057615" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.894634" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">嶺頭觀日</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100370" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.056164" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.88868" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">三港8鄰</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053842" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.883907" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">慈安宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100250" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053334" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.879446" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">水尾</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047969" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8691575" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">雙溪火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038525" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.866128" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">綜合市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035368" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8644612" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">雙溪公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.033711" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8659148" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">共和橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.031447" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8680708" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">頂雙溪道班房</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274301520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.023915" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.872995" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">丁子蘭坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020567" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8766167" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">公館大橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020624" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.880852" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">八股</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.021751" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.883626" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">長潭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284303920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020438" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8983" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">獅頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284304020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020664" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.903839" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">貢寮環保公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284304170" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020542" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.907267" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">貢寮環保公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284304170" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020542" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.907267" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">獅頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284304060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020717" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.903283" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">長潭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284303960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020642" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.898269" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">八股</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02184" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.883458" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">公館大橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02071" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.88076" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">丁子蘭坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020831" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.876332" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">頂雙溪道班房</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274301510" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024176" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.873207" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">共和橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274300560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.031689" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.867903" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">明天宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032273" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.866316" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">雙溪高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2272100000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034557" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.863527" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">綜合市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035363" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8646231" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">雙溪火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038525" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.866128" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">水尾</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100110" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047909" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8692977" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">慈安宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053287" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8795821" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">三港8鄰</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053775" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.883838" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">嶺頭觀日</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274100320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.05604" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8887071" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">雙板橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284303220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.057348" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.894863" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">文秀坑(打鐵寮)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284300520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059415" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.90642" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">澳底臻信福</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284401820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053363" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.923404" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">澳底醫療救護中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284401520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054914" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.92736" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454081100";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 18;
        var existBackNum = 20;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454081100',
                        url: './StopStatusRecent3OfRoute?routeid=0454081100&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454081100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454081100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454081100');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454081100","Name":"F811","BeginStop":"澳底臻信福","GoDirStops":[{"UniStopId":"2284401860","Name":"澳底臻信福","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.9226375,"Latitude":25.053581,"PublicId":"2284401860"},{"UniStopId":"2284300560","Name":"文秀坑(打鐵寮)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.906247,"Latitude":25.059451,"PublicId":"2284300560"},{"UniStopId":"2284303260","Name":"雙板橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.894634,"Latitude":25.057615,"PublicId":"2284303260"},{"UniStopId":"2274100370","Name":"嶺頭觀日","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.88868,"Latitude":25.056164,"PublicId":"2274100370"},{"UniStopId":"2274100070","Name":"三港8鄰","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.883907,"Latitude":25.053842,"PublicId":"2274100070"},{"UniStopId":"2274100250","Name":"慈安宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.879446,"Latitude":25.053334,"PublicId":"2274100250"},{"UniStopId":"2274100140","Name":"水尾","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8691575,"Latitude":25.047969,"PublicId":"2274100140"},{"UniStopId":"2274400620","Name":"雙溪火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.866128,"Latitude":25.038525,"PublicId":"2274400620"},{"UniStopId":"2274400960","Name":"綜合市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8644612,"Latitude":25.035368,"PublicId":"2274400960"},{"UniStopId":"2274400520","Name":"雙溪公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8659148,"Latitude":25.033711,"PublicId":"2274400520"},{"UniStopId":"2274300520","Name":"共和橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8680708,"Latitude":25.031447,"PublicId":"2274300520"},{"UniStopId":"2274301520","Name":"頂雙溪道班房","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.872995,"Latitude":25.023915,"PublicId":"2274301520"},{"UniStopId":"2274300020","Name":"丁子蘭坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8766167,"Latitude":25.020567,"PublicId":"2274300020"},{"UniStopId":"2274300320","Name":"公館大橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.880852,"Latitude":25.020624,"PublicId":"2274300320"},{"UniStopId":"2274300120","Name":"八股","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.883626,"Latitude":25.021751,"PublicId":"2274300120"},{"UniStopId":"2284303920","Name":"長潭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8983,"Latitude":25.020438,"PublicId":"2284303920"},{"UniStopId":"2284304020","Name":"獅頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.903839,"Latitude":25.020664,"PublicId":"2284304020"},{"UniStopId":"2284304170","Name":"貢寮環保公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.907267,"Latitude":25.020542,"PublicId":"2284304170"}],"LastStop":"貢寮環保公園","BackDirStops":[{"UniStopId":"2284304170","Name":"貢寮環保公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.907267,"Latitude":25.020542,"PublicId":"2284304170"},{"UniStopId":"2284304060","Name":"獅頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.903283,"Latitude":25.020717,"PublicId":"2284304060"},{"UniStopId":"2284303960","Name":"長潭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.898269,"Latitude":25.020642,"PublicId":"2284303960"},{"UniStopId":"2274300160","Name":"八股","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.883458,"Latitude":25.02184,"PublicId":"2274300160"},{"UniStopId":"2274300360","Name":"公館大橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.88076,"Latitude":25.02071,"PublicId":"2274300360"},{"UniStopId":"2274300000","Name":"丁子蘭坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.876332,"Latitude":25.020831,"PublicId":"2274300000"},{"UniStopId":"2274301510","Name":"頂雙溪道班房","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.873207,"Latitude":25.024176,"PublicId":"2274301510"},{"UniStopId":"2274300560","Name":"共和橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.867903,"Latitude":25.031689,"PublicId":"2274300560"},{"UniStopId":"2274400160","Name":"明天宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.866316,"Latitude":25.032273,"PublicId":"2274400160"},{"UniStopId":"2272100000","Name":"雙溪高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.863527,"Latitude":25.034557,"PublicId":"2272100000"},{"UniStopId":"2274400420","Name":"綜合市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8646231,"Latitude":25.035363,"PublicId":"2274400420"},{"UniStopId":"2274400620","Name":"雙溪火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.866128,"Latitude":25.038525,"PublicId":"2274400620"},{"UniStopId":"2274100110","Name":"水尾","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8692977,"Latitude":25.047909,"PublicId":"2274100110"},{"UniStopId":"2274100220","Name":"慈安宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8795821,"Latitude":25.053287,"PublicId":"2274100220"},{"UniStopId":"2274100020","Name":"三港8鄰","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.883838,"Latitude":25.053775,"PublicId":"2274100020"},{"UniStopId":"2274100320","Name":"嶺頭觀日","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8887071,"Latitude":25.05604,"PublicId":"2274100320"},{"UniStopId":"2284303220","Name":"雙板橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.894863,"Latitude":25.057348,"PublicId":"2284303220"},{"UniStopId":"2284300520","Name":"文秀坑(打鐵寮)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.90642,"Latitude":25.059415,"PublicId":"2284300520"},{"UniStopId":"2284401820","Name":"澳底臻信福","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.923404,"Latitude":25.053363,"PublicId":"2284401820"},{"UniStopId":"2284401520","Name":"澳底醫療救護中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.92736,"Latitude":25.054914,"PublicId":"2284401520"}],"RouteMapUrl":"../MapOverview?nid=0454081100","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0630 - 1620","HeadwayDesc":"F811澳底臻信福班表:0630 0830 1330 1620;F811貢寮環保公園班表:0706 1036 1426 1706","HolidayBusTimeDesc":"0630 - 1620","HolidayHeadwayDesc":"F811澳底臻信福班表:0630 0830 1330 1620;F811貢寮環保公園班表:0706 1036 1426 1706","RouteNote":"","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"雙溪區公所雙溪區公所站:(02)2493-1111","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.92738167453 25.0549936404749, 121.926989153949 25.054387455697, 121.925717252048 25.0551142728085, 121.925391402349 25.0552808020322, 121.924745429659 25.0555464182698, 121.924419007289 25.0548937898432, 121.923828010998 25.0533493603999, 121.922512013444 25.0535049974365, 121.922053304114 25.0536087553511, 121.921012761226 25.0540263800691, 121.920856994762 25.0541052357568, 121.920708100348 25.0543127504819, 121.920478459347 25.0548777075408, 121.920302076733 25.0550836646088, 121.919992261817 25.0551811957948, 121.918447195933 25.0550691386808, 121.918020556169 25.0550878148736, 121.917837301506 25.0551251672506, 121.917625985971 25.0552019471009, 121.917309299006 25.0553643259503, 121.916967987194 25.0556071156496, 121.915954359835 25.0564916338836, 121.915709256722 25.056668017988, 121.915466444293 25.0567344213497, 121.915110815711 25.0567842238474, 121.913872128718 25.0569901777116, 121.913233028078 25.0570420552046, 121.912834347944 25.0571337227193, 121.91246278582 25.05723555806, 121.912160415624 25.0573559135694, 121.912065924938 25.0574394360732, 121.912022401956 25.0575348902935, 121.911864344808 25.0585106979224, 121.91177500816 25.058789276346, 121.911639857845 25.0589428314074, 121.911270485163 25.0592400844087, 121.910862743536 25.0594973918345, 121.910378264019 25.0597655927496, 121.910117126123 25.0598340694849, 121.909651544743 25.0598236942245, 121.909201998146 25.0599004711311, 121.908594394401 25.0600213427854, 121.90828744284 25.0600047423936, 121.9073499807 25.0599258905018, 121.907129502433 25.0598574138178, 121.906677665153 25.0595228112888, 121.906549386888 25.0594605595547, 121.906042573208 25.0592945547758, 121.905542631579 25.0591617507907, 121.905359376915 25.0590056021711, 121.905249424117 25.0588333715691, 121.905150924735 25.0581143580681, 121.905288365733 25.0563069490788, 121.905354795548 25.0557378483654, 121.905621087482 25.054984058211, 121.905763109846 25.0547516429683, 121.905877644011 25.0544917316502, 121.905870771961 25.054370854542, 121.905786016679 25.0542255943402, 121.905538622883 25.0540429812707, 121.905173444243 25.0538392122715, 121.904992867588 25.0537981133188, 121.904554774407 25.0537747678318, 121.90412641663 25.0538162709168, 121.903757043949 25.0538889012818, 121.90343176692 25.053905502502, 121.902415848878 25.0534525996563, 121.902150129616 25.0534069461265, 121.901844896066 25.0534442990158, 121.901216676172 25.0536834609952, 121.900654886094 25.0538556988346, 121.899838830169 25.054260353047, 121.899281621457 25.054532715707, 121.899185412758 25.0546240219109, 121.899169377975 25.0548066341146, 121.899306818973 25.0551184230722, 121.899281621457 25.0553072599255, 121.898917402813 25.0560366654778, 121.898741020199 25.0565040845346, 121.898522832615 25.0567224894983, 121.898307508385 25.056805493658, 121.898197555586 25.0567743671047, 121.898034344402 25.0565476618031, 121.897924391603 25.0564459814858, 121.897626030104 25.056331850417, 121.897461100906 25.0563380757508, 121.897298462392 25.0564086295114, 121.896906755549 25.056618215443, 121.896438883485 25.0565912390561, 121.896174882235 25.0566244407623, 121.895216803946 25.057162410904, 121.894803908282 25.0574513678548, 121.894494666037 25.0575800235131, 121.894072607639 25.0575986993233, 121.893786272227 25.057231407868, 121.893586410109 25.0570840759579, 121.893180386495 25.0568973169441, 121.892923829966 25.0568392140818, 121.892522387718 25.056795636917, 121.890979612517 25.056756209945, 121.890743099467 25.0567582850491, 121.890587333002 25.0567894116064, 121.890381171506 25.0568558149024, 121.890236858458 25.0569491944765, 121.890163556593 25.0570799257607, 121.890137547972 25.0574052366241, 121.89001580752 25.0575250336111, 121.889903564038 25.0575291837933, 121.889809646023 25.0574441050313, 121.889596612476 25.056924812039, 121.889601193843 25.0567313086929, 121.889660751609 25.0565383238183, 121.889647007509 25.0563826906335, 121.889463752845 25.0559858251178, 121.88936296278 25.0559126772158, 121.889232393832 25.0558379729304, 121.889084861148 25.0558354482305, 121.88840431182 25.0562286135859, 121.888253126723 25.0563676460818, 121.888092206221 25.0566192529963, 121.887934149074 25.0567250833791, 121.887762347826 25.0567499846324, 121.887411873282 25.0567541348408, 121.887262978867 25.0568122377435, 121.887164479486 25.0569159928583, 121.887134700603 25.0570451678535, 121.88711179377 25.0573751081871, 121.887043073271 25.0575099891997, 121.886873562707 25.0576438325194, 121.886729249659 25.0576894844709, 121.886209264551 25.0576002556406, 121.8860139838 25.0576313819842, 121.885725357704 25.0577434367554, 121.885546684407 25.0577600374535, 121.885468801175 25.0576977848239, 121.88537488316 25.0575712043795, 121.88538862726 25.0574695249115, 121.885493998691 25.0573528009284, 121.886108474486 25.0567650291372, 121.886206973868 25.0565969456, 121.886545994996 25.0552735390802, 121.886532250896 25.0551303550798, 121.88647269313 25.0550032532002, 121.886394809898 25.0549098721435, 121.885930675718 25.0546934816814, 121.88510400986 25.0542764354304, 121.884356674434 25.0536637470102, 121.884232977536 25.0536263941878, 121.884109280638 25.0536388451299, 121.883402604841 25.0540310491573, 121.882391840836 25.0545794063879, 121.88213757499 25.0545607301177, 121.881433189876 25.0543615163914, 121.881192693267 25.0541435306287, 121.880924085513 25.053628469345, 121.880781490478 25.0535075913854, 121.880680700413 25.0534806143138, 121.880495155066 25.0534847646329, 121.879940809708 25.0535677709853, 121.879784470573 25.0534614190862, 121.879695133925 25.0533223832935, 121.879325761243 25.0529026810075, 121.878661463087 25.0525457513566, 121.878429531403 25.0524482180736, 121.878202753756 25.0524025641697, 121.877436520194 25.0523154066697, 121.876918253098 25.0522407001918, 121.87657923197 25.0521618433046, 121.875339399635 25.0516295579891, 121.875045619502 25.0515673022457, 121.874841748689 25.051552775901, 121.874218110161 25.0516959640806, 121.873221090256 25.0515839037804, 121.872663881544 25.0514697681841, 121.872294508862 25.0511807971312, 121.871028906341 25.0500731549184, 121.870503767195 25.0494064895584, 121.869247327406 25.0478946762361, 121.868974736094 25.0474287807957, 121.868887690128 25.0472337060097, 121.868896852862 25.0470469319877, 121.868988480194 25.0468850609384, 121.869217548523 25.0466707889964, 121.869329792005 25.0464855705753, 121.869382477721 25.046228235834, 121.869352698838 25.0461198022833, 121.869156488689 25.0459610235725, 121.868757121181 25.0456487118683, 121.86879835348 25.0451812514186, 121.868736505031 25.0449607505878, 121.868578447883 25.044611580226, 121.86856928515 25.0444455553367, 121.868624261549 25.0441965175812, 121.8686036454 25.0440445005361, 121.867619796924 25.0424885200125, 121.867512134809 25.0422265073453, 121.867213773309 25.040822006139, 121.867087785728 25.0404624470936, 121.866400008068 25.0393827259333, 121.866106227935 25.0390724535102, 121.866433795646 25.0389271751828, 121.86639485403 25.0385971851997, 121.866278029182 25.0385619031992, 121.865906365817 25.0386137884905, 121.865865133518 25.0382298368157, 121.865908942836 25.0377031984422, 121.866012023584 25.036849157416, 121.866033340412 25.0366113372438, 121.866030700064 25.0365470230805, 121.865993698118 25.036472204853, 121.865773928269 25.0363313554893, 121.865524680713 25.0361896842442, 121.86483146268 25.0355561508164, 121.864492441552 25.0352365291067, 121.86486582293 25.0349039348525, 121.865028461444 25.0347228496142, 121.865874868922 25.0338563348888, 121.866337586948 25.0335533127261, 121.866713893061 25.0333254809873, 121.867102109364 25.0330712792127, 121.867404248266 25.0328723472559, 121.868116302528 25.0326250432579, 121.867649003136 25.0317310129774, 121.868914032986 25.0312910003254, 121.869361861571 25.0312017522836, 121.869829160964 25.0311581660071, 121.87006180375 25.0310992169403, 121.87031413555 25.0309636469317, 121.870441346075 25.0308442405819, 121.870516938624 25.0307072546901, 121.870537554773 25.0299730284588, 121.870418439242 25.0290374673971, 121.870443636758 25.0284038970365, 121.870574205706 25.0279944874224, 121.870784948569 25.027537337684, 121.871067275286 25.0272301487079, 121.871691486484 25.0268124327347, 121.872775552355 25.0262509787147, 121.872795023163 25.0260932314669, 121.87340119523 25.0255478603076, 121.873440136846 25.0254752131576, 121.873485950512 25.0252974869132, 121.873504275979 25.0247544473192, 121.87342868343 25.0245562229987, 121.873121731868 25.0240492446808, 121.873069046152 25.0238790406408, 121.873314149265 25.0233180921188, 121.873359962931 25.0229356493349, 121.873485950512 25.0226865679121, 121.876160074872 25.0209228208966, 121.87734689721 25.0201786011715, 121.877578256223 25.0201142537404, 121.878280350653 25.0202076612906, 121.878763684829 25.0201101022921, 121.879226975526 25.020101799395, 121.879685684856 25.0203488103426, 121.880006380518 25.0205522307497, 121.8806053942 25.0206627626153, 121.881196735866 25.020714364831, 121.881946016599 25.0208163654182, 121.882610887426 25.0211007376677, 121.882853699856 25.0212460371028, 121.883225363221 25.0216326365482, 121.883839839015 25.0219673424671, 121.883972698647 25.0219860237008, 121.884105558278 25.0219860237008, 121.884311719775 25.0219112987489, 121.885295568251 25.0212424046191, 121.885522345897 25.0211157865457, 121.885765730997 25.021063893855, 121.888369531978 25.0211320376983, 121.888877624257 25.0213129785705, 121.88937985657 25.0216513178328, 121.890074506279 25.0219486612305, 121.890274368397 25.0219652667743, 121.891046328668 25.0219299799912, 121.89162415353 25.0214084609107, 121.891960883975 25.0211946633936, 121.892280434295 25.0210597424388, 121.892898918785 25.020854247161, 121.893751625642 25.0206482326105, 121.895718749924 25.0206544597557, 121.896539959886 25.0208288196911, 121.896773609582 25.020824668267, 121.899045967413 25.0204551909547, 121.89947489786 25.0204655695461, 121.899637536374 25.0205880368579, 121.899967394769 25.0213363302366, 121.900036115268 25.0214504938739, 121.900178137632 25.0215293705068, 121.900350511551 25.0215667331046, 121.900914019642 25.0215522032068, 121.901180311575 25.0214878564958, 121.902143543901 25.0208625500072, 121.902351996081 25.0207566886764, 121.902594808511 25.0206798872617, 121.902980215976 25.0206362972481, 121.903537997359 25.020735931542, 121.904307666946 25.0209144427831, 121.904639816024 25.0209414270178, 121.90606118501 25.0208101382813, 121.906819973853 25.0206108697331, 121.907303308028 25.0204676452642, 121.907271238462 25.0204012222655, 121.906934508017 25.0205153867724, 121.906396197443 25.0206440811803, 121.906052594948 25.0207478668947, 121.904639816024 25.0208765610588, 121.904319120363 25.0208537282331, 121.90320527561 25.0205978965091, 121.902918940197 25.0205812907804, 121.902583927765 25.0206248808135, 121.902209973717 25.0207520183215, 121.901151105363 25.0214312936333, 121.900898557529 25.0215039431767, 121.900281791052 25.0215143216794, 121.900185582353 25.0214707319622, 121.900064176138 25.0213752496704, 121.899784140105 25.020700125477, 121.899678768674 25.020529916793, 121.899511548793 25.0204261308942, 121.899323140092 25.0203846165101, 121.899011607163 25.0204053737039, 121.89671691517 25.0207727754532, 121.896491855536 25.0207603211746, 121.895877379742 25.0206274754578, 121.894150777207 25.0205776582769, 121.893733300176 25.0206025668699, 121.892871430585 25.0207997597191, 121.892220303858 25.0209621841175, 121.891747850428 25.0211842848639, 121.891479840482 25.0213814767786, 121.890938666553 25.0218656334782, 121.890253179577 25.0219050716676, 121.890097413112 25.0218884661157, 121.889405054086 25.0215916414969, 121.88890053109 25.0212548588487, 121.888384554677 25.0210908780569, 121.887676160867 25.0210265311041, 121.886834334756 25.0210306825214, 121.885743396835 25.020999546888, 121.885500584406 25.0210576667306, 121.885222839056 25.0212174961559, 121.884283086233 25.0218614820891, 121.884081506103 25.0219362070713, 121.883921158272 25.0219216772172, 121.883441832792 25.0217099562911, 121.883270031545 25.021593717196, 121.882896077497 25.0211988148053, 121.882616041464 25.0210286068127, 121.882013019086 25.0207753700944, 121.881676288641 25.0207089472621, 121.880606539541 25.0206051615147, 121.8800636476 25.0205159057018, 121.87957745007 25.0202066234293, 121.879240719625 25.020048868413, 121.878788882345 25.0200550955886, 121.878275196616 25.0201381245656, 121.878109694747 25.0201318973942, 121.877580546906 25.0200550955886, 121.877456850008 25.0200675499387, 121.87734002516 25.0201049129815, 121.876184375436 25.0208417928907, 121.874907319498 25.0216834911497, 121.873653170393 25.0225210322704, 121.87342868343 25.0226538759379, 121.873300405165 25.0229263087907, 121.873238556716 25.0233378109818, 121.873043275965 25.0237181768495, 121.873008915716 25.0238344139328, 121.873011206399 25.0239195160132, 121.873045566648 25.0240585851395, 121.873368552993 25.0246050007408, 121.873434982809 25.0247861009114, 121.873416657342 25.0253159081855, 121.873343355477 25.0255151690954, 121.872728879682 25.026047567752, 121.872694519433 25.0261264414307, 121.872680775333 25.026238524992, 121.87192141382 25.0266194007736, 121.871190685848 25.0270469765369, 121.870995405097 25.0272073170641, 121.870711360368 25.0275082793003, 121.870553303221 25.0278429691961, 121.87040669949 25.0282274722752, 121.870367757874 25.0284101237882, 121.870335688308 25.0290001070735, 121.870463966572 25.030009869597, 121.870461675889 25.0306730081932, 121.870354013774 25.0308328250968, 121.870253223709 25.0309449043594, 121.870043626187 25.0310575024045, 121.869842046057 25.0310948621017, 121.869328360328 25.031142599476, 121.86898246715 25.0312090166616, 121.867602903134 25.0316744548358, 121.866498221114 25.0321040885064, 121.865114075732 25.0327459418033, 121.864688581309 25.0333810463684, 121.864496163912 25.0335055762898, 121.864364449623 25.033564209084, 121.863975033462 25.0336555309023, 121.863862789981 25.033732324197, 121.86371618625 25.0339419488917, 121.863381173818 25.0346133681513, 121.863344522885 25.0348686517897, 121.863504870716 25.0348956329563, 121.864426298072 25.0352593592564, 121.865451378847 25.0362213348865, 121.865556750279 25.0362483157555, 121.865955901844 25.0364958130654, 121.865999424826 25.0365850572559, 121.865861983828 25.0377794703467, 121.865818460846 25.0383195985987, 121.865873437245 25.0386464762127, 121.866297213655 25.0385945909353, 121.866354480737 25.03861742046, 121.866400294403 25.0389017514578, 121.866029203709 25.0390574068343, 121.866336155271 25.0394169699989, 121.867017060881 25.0404956531679, 121.867175118029 25.0409859605631, 121.867450000024 25.0423069271344, 121.867699684504 25.0427588334845, 121.86853807459 25.0440445005361, 121.86855181869 25.0442084506519, 121.868489970241 25.0444849862683, 121.868528911857 25.0447070444356, 121.868675515588 25.0450022566569, 121.868716747888 25.0451994102929, 121.868675515588 25.045637816584, 121.868741945404 25.0457332799946, 121.869289991383 25.0461592326765, 121.869315188899 25.0462380934248, 121.8692464684 25.0464959469649, 121.869141096968 25.0466598938029, 121.868857052239 25.0469525072349, 121.868824982673 25.0470879185336, 121.868820401307 25.0472539398451, 121.869191492001 25.0479377377521, 121.869812839845 25.0486687435881, 121.870961617519 25.0500939070894, 121.872447125637 25.051396617587, 121.872653859804 25.0515195728211, 121.873632554243 25.0516938888908, 121.874235576621 25.0517499190035, 121.874863796515 25.0516129564607, 121.875042469813 25.0516316331801, 121.875347703362 25.0516980392704, 121.876491326998 25.0521862266896, 121.876993559311 25.052317481849, 121.878247708416 25.0524751953724, 121.878470477367 25.0525249996008, 121.879114732044 25.0528367943624, 121.879300277391 25.0529488535173, 121.879674231439 25.0534017582244, 121.879807091071 25.0535698461435, 121.879919334552 25.0536383263407, 121.880533810347 25.0535387187684, 121.880668960661 25.0535511697194, 121.880785785509 25.0535843722491, 121.880889438929 25.0536948743536, 121.881164320924 25.0542162561785, 121.881322378072 25.0543449152329, 121.881416296087 25.0544133949971, 121.882083457597 25.0546167589199, 121.882352040214 25.0546354351816, 121.882514678728 25.0545814815289, 121.883197875021 25.0542162561785, 121.884147363248 25.0537031749771, 121.884222955797 25.0536886488855, 121.884321455179 25.0537239265335, 121.885027558305 25.0542888863065, 121.885871102429 25.0547293352321, 121.886387078842 25.0549954714483, 121.886471834124 25.0551490312633, 121.886462671391 25.0553171167862, 121.886141975729 25.0565528495722, 121.886043476347 25.0567380527826, 121.885408957074 25.0573258247031, 121.885312748375 25.057452405401, 121.885315039059 25.0575831361484, 121.88543415459 25.057744993071, 121.885603665154 25.0578238463661, 121.885718199319 25.0578176211078, 121.886171754612 25.0576557642811, 121.886635045309 25.057744993071, 121.886802265189 25.0577346176336, 121.886944287554 25.0576765151683, 121.887196262717 25.0573797771477, 121.8872122975 25.0570062597368, 121.887306215515 25.0568589275561, 121.887448237879 25.0567987495721, 121.887822191927 25.0568070499855, 121.887980249075 25.0567738483288, 121.888145178272 25.0566306660812, 121.888306098774 25.0564164111737, 121.888459574555 25.0562587027216, 121.889110701282 25.0558997077251, 121.88922752613 25.0558955574878, 121.889342060295 25.0559619612681, 121.889424524894 25.0560553415232, 121.889573991979 25.0564101858439, 121.889594608129 25.0565554434566, 121.889535050363 25.0567261209315, 121.88953963173 25.0569336312191, 121.889768700059 25.0574736750956, 121.889851164658 25.0575774296504, 121.889933629257 25.0575878051011, 121.890032128638 25.057585730011, 121.890142081437 25.0574799003713, 121.890211374606 25.0573014423406, 121.890209083923 25.0571022330691, 121.890284676472 25.0569694267082, 121.890406082687 25.0568967981687, 121.890772592014 25.0568117189677, 121.892926406984 25.0568967981687, 121.893182963514 25.0569632014065, 121.893572379674 25.0571395848322, 121.893742462909 25.0572786162947, 121.894010472855 25.057637607252, 121.894310552367 25.0576583581422, 121.8946043325 25.0575981805508, 121.894858598346 25.0574861256468, 121.895230261711 25.0572433396699, 121.896208956149 25.0566804686211, 121.896482120132 25.0566576424595, 121.896921931325 25.0566804686211, 121.897469977304 25.0564044792913, 121.897623453085 25.0563920286302, 121.897892035702 25.0565123849679, 121.8979882444 25.0566057648037, 121.898123394715 25.0568070499855, 121.898243082917 25.0568672279653, 121.898403430748 25.0568423267359, 121.898634789761 25.0567136703031, 121.898795137592 25.05654143648, 121.898994999709 25.0560345903615, 121.899359791024 25.0553046660147, 121.899382697857 25.0551096037616, 121.899240675493 25.054779657329, 121.899233803443 25.0546738252662, 121.899341465558 25.0545617676884, 121.900636274292 25.0539345546321, 121.901242160024 25.05374312172, 121.901852054452 25.0535101853344, 121.902140680547 25.0534707573055, 121.902381202293 25.0535018846978, 121.903278004804 25.053921584932, 121.903433771269 25.053956862513, 121.903759048297 25.0539527122098, 121.904171943961 25.0538697061181, 121.904595720371 25.0538365036657, 121.905004034669 25.053853104893, 121.905173545233 25.0539008334091, 121.905627673196 25.0541643774893, 121.905755951461 25.0543075626181, 121.905792602394 25.0544258458592, 121.905778858294 25.0545404974884, 121.905556662014 25.0549415179541, 121.905288652068 25.0556973834921, 121.905089362622 25.058065593652, 121.905187862003 25.0588359654053, 121.905325303001 25.0590626664738, 121.905439837166 25.05916434462, 121.905663178787 25.0592582412004, 121.906542801174 25.0595196987029, 121.906716893104 25.0596359018582, 121.907065076965 25.0598952835039, 121.907301590016 25.0599808793265, 121.908576355271 25.0600784066151, 121.908844365216 25.0600431307962, 121.909633505612 25.0598875020625, 121.910126002521 25.0598958022666, 121.91041004725 25.0598273255658, 121.910938622421 25.0595196987029, 121.911291387649 25.0593121927942, 121.911628690764 25.0590294654282, 121.911839433627 25.0587986141593, 121.911931060959 25.0586035574673, 121.91210515289 25.0575317776571, 121.912144094506 25.0574549992664, 121.912249465938 25.0573906713885, 121.912667515639 25.057232445416, 121.913253930563 25.0571017142946, 121.913928536794 25.0570436115291, 121.91512713683 25.0568298761192, 121.915480474728 25.0567945993653, 121.915744475978 25.0567173017365, 121.916038256111 25.056500971872, 121.917007787817 25.055655881044, 121.917345090932 25.0554208731668, 121.91767036796 25.055248637527, 121.91790630834 25.0551739328368, 121.918089563004 25.0551386556062, 121.918458935685 25.0551324302115, 121.91976118914 25.0552237359686, 121.920036071136 25.0552237359686, 121.920331569281 25.0551345053431, 121.920536012765 25.0549077970081, 121.920667154384 25.0546312849015, 121.920777107182 25.0543635915361, 121.920845827681 25.0542328573544, 121.920932873646 25.0541415508591, 121.921038817749 25.0540684018564, 121.922092532066 25.0536658221667, 121.922517453817 25.0535656958273, 121.923777329631 25.0534308104738, 121.924337401697 25.0548678506448, 121.924690166925 25.0556138598011, 121.925497060116 25.0552756142094, 121.926290781878 25.0548393175201, 121.926973978172 25.0544507475797, 121.927340487499 25.0550110349518)","wkt0":"LINESTRING (121.923777329631 25.0534308104738, 121.922517453817 25.0535656958273, 121.922092532066 25.0536658221667, 121.921038817749 25.0540684018564, 121.920932873646 25.0541415508591, 121.920845827681 25.0542328573544, 121.920777107182 25.0543635915361, 121.920667154384 25.0546312849015, 121.920536012765 25.0549077970081, 121.920331569281 25.0551345053431, 121.920036071136 25.0552237359686, 121.91976118914 25.0552237359686, 121.918458935685 25.0551324302115, 121.918089563004 25.0551386556062, 121.91790630834 25.0551739328368, 121.91767036796 25.055248637527, 121.917345090932 25.0554208731668, 121.917007787817 25.055655881044, 121.916038256111 25.056500971872, 121.915744475978 25.0567173017365, 121.915480474728 25.0567945993653, 121.91512713683 25.0568298761192, 121.913928536794 25.0570436115291, 121.913253930563 25.0571017142946, 121.912667515639 25.057232445416, 121.912249465938 25.0573906713885, 121.912144094506 25.0574549992664, 121.91210515289 25.0575317776571, 121.911931060959 25.0586035574673, 121.911839433627 25.0587986141593, 121.911628690764 25.0590294654282, 121.911291387649 25.0593121927942, 121.910938622421 25.0595196987029, 121.91041004725 25.0598273255658, 121.910126002521 25.0598958022666, 121.909633505612 25.0598875020625, 121.908844365216 25.0600431307962, 121.908576355271 25.0600784066151, 121.907301590016 25.0599808793265, 121.907065076965 25.0598952835039, 121.906716893104 25.0596359018582, 121.906542801174 25.0595196987029, 121.905663178787 25.0592582412004, 121.905439837166 25.05916434462, 121.905325303001 25.0590626664738, 121.905187862003 25.0588359654053, 121.905089362622 25.058065593652, 121.905288652068 25.0556973834921, 121.905556662014 25.0549415179541, 121.905778858294 25.0545404974884, 121.905792602394 25.0544258458592, 121.905755951461 25.0543075626181, 121.905627673196 25.0541643774893, 121.905173545233 25.0539008334091, 121.905004034669 25.053853104893, 121.904595720371 25.0538365036657, 121.904171943961 25.0538697061181, 121.903759048297 25.0539527122098, 121.903433771269 25.053956862513, 121.903278004804 25.053921584932, 121.902381202293 25.0535018846978, 121.902140680547 25.0534707573055, 121.901852054452 25.0535101853344, 121.901242160024 25.05374312172, 121.900636274292 25.0539345546321, 121.899341465558 25.0545617676884, 121.899233803443 25.0546738252662, 121.899240675493 25.054779657329, 121.899382697857 25.0551096037616, 121.899359791024 25.0553046660147, 121.898994999709 25.0560345903615, 121.898795137592 25.05654143648, 121.898634789761 25.0567136703031, 121.898403430748 25.0568423267359, 121.898243082917 25.0568672279653, 121.898123394715 25.0568070499855, 121.8979882444 25.0566057648037, 121.897892035702 25.0565123849679, 121.897623453085 25.0563920286302, 121.897469977304 25.0564044792913, 121.896921931325 25.0566804686211, 121.896482120132 25.0566576424595, 121.896208956149 25.0566804686211, 121.895230261711 25.0572433396699, 121.894858598346 25.0574861256468, 121.8946043325 25.0575981805508, 121.894310552367 25.0576583581422, 121.894010472855 25.057637607252, 121.893742462909 25.0572786162947, 121.893572379674 25.0571395848322, 121.893182963514 25.0569632014065, 121.892926406984 25.0568967981687, 121.890772592014 25.0568117189677, 121.890406082687 25.0568967981687, 121.890284676472 25.0569694267082, 121.890209083923 25.0571022330691, 121.890211374606 25.0573014423406, 121.890142081437 25.0574799003713, 121.890032128638 25.057585730011, 121.889933629257 25.0575878051011, 121.889851164658 25.0575774296504, 121.889768700059 25.0574736750956, 121.88953963173 25.0569336312191, 121.889535050363 25.0567261209315, 121.889594608129 25.0565554434566, 121.889573991979 25.0564101858439, 121.889424524894 25.0560553415232, 121.889342060295 25.0559619612681, 121.88922752613 25.0558955574878, 121.889110701282 25.0558997077251, 121.888459574555 25.0562587027216, 121.888306098774 25.0564164111737, 121.888145178272 25.0566306660812, 121.887980249075 25.0567738483288, 121.887822191927 25.0568070499855, 121.887448237879 25.0567987495721, 121.887306215515 25.0568589275561, 121.8872122975 25.0570062597368, 121.887196262717 25.0573797771477, 121.886944287554 25.0576765151683, 121.886802265189 25.0577346176336, 121.886635045309 25.057744993071, 121.886171754612 25.0576557642811, 121.885718199319 25.0578176211078, 121.885603665154 25.0578238463661, 121.88543415459 25.057744993071, 121.885315039059 25.0575831361484, 121.885312748375 25.057452405401, 121.885408957074 25.0573258247031, 121.886043476347 25.0567380527826, 121.886141975729 25.0565528495722, 121.886462671391 25.0553171167862, 121.886471834124 25.0551490312633, 121.886387078842 25.0549954714483, 121.885871102429 25.0547293352321, 121.885027558305 25.0542888863065, 121.884324962294 25.0536881313421, 121.884136921141 25.0536791770015, 121.882514678728 25.0545814815289, 121.882352040214 25.0546354351816, 121.882083457597 25.0546167589199, 121.881416296087 25.0544133949971, 121.881322378072 25.0543449152329, 121.881164320924 25.0542162561785, 121.880889438929 25.0536948743536, 121.880785785509 25.0535843722491, 121.880668960661 25.0535511697194, 121.880533810347 25.0535387187684, 121.879919334552 25.0536383263407, 121.879807091071 25.0535698461435, 121.879674231439 25.0534017582244, 121.879300277391 25.0529488535173, 121.879114732044 25.0528367943624, 121.878470477367 25.0525249996008, 121.878247708416 25.0524751953724, 121.876993559311 25.052317481849, 121.876491326998 25.0521862266896, 121.875347703362 25.0516980392704, 121.875042469813 25.0516316331801, 121.874863796515 25.0516129564607, 121.874235576621 25.0517499190035, 121.873632554243 25.0516938888908, 121.872653859804 25.0515195728211, 121.872447125637 25.051396617587, 121.870961617519 25.0500939070894, 121.869812839845 25.0486687435881, 121.869191492001 25.0479377377521, 121.868820401307 25.0472539398451, 121.868824982673 25.0470879185336, 121.868857052239 25.0469525072349, 121.869141096968 25.0466598938029, 121.8692464684 25.0464959469649, 121.869315188899 25.0462380934248, 121.869289991383 25.0461592326765, 121.868741945404 25.0457332799946, 121.868675515588 25.045637816584, 121.868716747888 25.0451994102929, 121.868675515588 25.0450022566569, 121.868528911857 25.0447070444356, 121.868489970241 25.0444849862683, 121.86855181869 25.0442084506519, 121.86853807459 25.0440445005361, 121.867699684504 25.0427588334845, 121.867450000024 25.0423069271344, 121.867175118029 25.0409859605631, 121.867017060881 25.0404956531679, 121.866336155271 25.0394169699989, 121.866029203709 25.0390574068343, 121.86592391207 25.0388274941927, 121.865890064423 25.038618767038, 121.866290594909 25.0385736368424, 121.866378974875 25.0386037236395, 121.866418463797 25.0389102328846, 121.866051780957 25.0390832319678, 121.86592391207 25.0388218529182, 121.865886303573 25.0386225278876, 121.865818460846 25.0383195985987, 121.865861983828 25.0377794703467, 121.865999424826 25.0365850572559, 121.865955901844 25.0364958130654, 121.865556750279 25.0362483157555, 121.865451378847 25.0362213348865, 121.864407523986 25.0352302505546, 121.864956723544 25.0347526857218, 121.865876035847 25.0338154647375, 121.867362456389 25.0328722741927, 121.868069849298 25.0325917048534, 121.867613177926 25.0316932860117, 121.86898246715 25.0312090166616, 121.869328360328 25.031142599476, 121.869842046057 25.0310948621017, 121.870043626187 25.0310575024045, 121.870253223709 25.0309449043594, 121.870354013774 25.0308328250968, 121.870461675889 25.0306730081932, 121.870463966572 25.030009869597, 121.870335688308 25.0290001070735, 121.870367757874 25.0284101237882, 121.87040669949 25.0282274722752, 121.870553303221 25.0278429691961, 121.870711360368 25.0275082793003, 121.870995405097 25.0272073170641, 121.871190685848 25.0270469765369, 121.87192141382 25.0266194007736, 121.872680775333 25.026238524992, 121.872694519433 25.0261264414307, 121.872728879682 25.026047567752, 121.873343355477 25.0255151690954, 121.873416657342 25.0253159081855, 121.873434982809 25.0247861009114, 121.873368552993 25.0246050007408, 121.873045566648 25.0240585851395, 121.873011206399 25.0239195160132, 121.873008915716 25.0238344139328, 121.873043275965 25.0237181768495, 121.873238556716 25.0233378109818, 121.873300405165 25.0229263087907, 121.87342868343 25.0226538759379, 121.873653170393 25.0225210322704, 121.874907319498 25.0216834911497, 121.876188451455 25.0208734577687, 121.877382363537 25.0201093540362, 121.877582343811 25.0200735366738, 121.878109694747 25.0201318973942, 121.878275196616 25.0201381245656, 121.878788882345 25.0200550955886, 121.879240719625 25.020048868413, 121.87957745007 25.0202066234293, 121.880059711381 25.0205361776055, 121.880605926158 25.0206197514513, 121.881680447032 25.0207301883188, 121.882005788075 25.0207958534834, 121.882616041464 25.0210286068127, 121.882896077497 25.0211988148053, 121.883270031545 25.021593717196, 121.883441832792 25.0217099562911, 121.883921158272 25.0219216772172, 121.884081506103 25.0219362070713, 121.884283086233 25.0218614820891, 121.885222839056 25.0212174961559, 121.885500584406 25.0210576667306, 121.885743396835 25.020999546888, 121.886834334756 25.0210306825214, 121.887676160867 25.0210265311041, 121.888384554677 25.0210908780569, 121.88890053109 25.0212548588487, 121.889405054086 25.0215916414969, 121.890097413112 25.0218884661157, 121.890253179577 25.0219050716676, 121.890938666553 25.0218656334782, 121.891479840482 25.0213814767786, 121.891747850428 25.0211842848639, 121.892220303858 25.0209621841175, 121.892871430585 25.0207997597191, 121.893733300176 25.0206025668699, 121.894150777207 25.0205776582769, 121.895877379742 25.0206274754578, 121.896491855536 25.0207603211746, 121.89671691517 25.0207727754532, 121.899011607163 25.0204053737039, 121.899323140092 25.0203846165101, 121.899511548793 25.0204261308942, 121.899678768674 25.020529916793, 121.899784140105 25.020700125477, 121.900064176138 25.0213752496704, 121.900185582353 25.0214707319622, 121.900281791052 25.0215143216794, 121.900898557529 25.0215039431767, 121.901151105363 25.0214312936333, 121.902209973717 25.0207520183215, 121.902583927765 25.0206248808135, 121.902918940197 25.0205812907804, 121.90320527561 25.0205978965091, 121.904319120363 25.0208537282331, 121.904639816024 25.0208765610588, 121.906052594948 25.0207478668947, 121.906928702786 25.0205197613144, 121.907261505779 25.0204167863973, 121.907289861191 25.0204720048311, 121.907066002676 25.020557071067)","wkt1":"LINESTRING (121.907303308028 25.0204676452642, 121.906819973853 25.0206108697331, 121.90606118501 25.0208101382813, 121.904639816024 25.0209414270178, 121.904307666946 25.0209144427831, 121.903537997359 25.020735931542, 121.902980215976 25.0206362972481, 121.902594808511 25.0206798872617, 121.902351996081 25.0207566886764, 121.902143543901 25.0208625500072, 121.901180311575 25.0214878564958, 121.900914019642 25.0215522032068, 121.900350511551 25.0215667331046, 121.900178137632 25.0215293705068, 121.900036115268 25.0214504938739, 121.899967394769 25.0213363302366, 121.899637536374 25.0205880368579, 121.89947489786 25.0204655695461, 121.899045967413 25.0204551909547, 121.896773609582 25.020824668267, 121.896539959886 25.0208288196911, 121.895718749924 25.0206544597557, 121.893751625642 25.0206482326105, 121.892898918785 25.020854247161, 121.892280434295 25.0210597424388, 121.891960883975 25.0211946633936, 121.89162415353 25.0214084609107, 121.891060118826 25.0219017145493, 121.890274368397 25.0219652667743, 121.890074506279 25.0219486612305, 121.88937985657 25.0216513178328, 121.888877624257 25.0213129785705, 121.888369531978 25.0211320376983, 121.885765730997 25.021063893855, 121.885522345897 25.0211157865457, 121.885295568251 25.0212424046191, 121.884311719775 25.0219112987489, 121.884105558278 25.0219860237008, 121.883972698647 25.0219860237008, 121.883839839015 25.0219673424671, 121.883225363221 25.0216326365482, 121.882853699856 25.0212460371028, 121.882610887426 25.0211007376677, 121.881946016599 25.0208163654182, 121.881196735866 25.020714364831, 121.8806053942 25.0206627626153, 121.880006380518 25.0205522307497, 121.879685684856 25.0203488103426, 121.879226975526 25.020101799395, 121.878763684829 25.0201101022921, 121.878280350653 25.0202076612906, 121.877578256223 25.0201142537404, 121.87734689721 25.0201786011715, 121.876160074872 25.0209228208966, 121.873485950512 25.0226865679121, 121.873359962931 25.0229356493349, 121.873314149265 25.0233180921188, 121.873046970289 25.0238448064627, 121.873097711553 25.0240597106375, 121.873476778639 25.0247312861836, 121.873485950512 25.0252974869132, 121.873440136846 25.0254752131576, 121.87340119523 25.0255478603076, 121.872795023163 25.0260932314669, 121.872685811885 25.0262833718902, 121.871691486484 25.0268124327347, 121.871067275286 25.0272301487079, 121.870784948569 25.027537337684, 121.870574205706 25.0279944874224, 121.870443636758 25.0284038970365, 121.870418439242 25.0290374673971, 121.870537554773 25.0299730284588, 121.870516938624 25.0307072546901, 121.870441346075 25.0308442405819, 121.87031413555 25.0309636469317, 121.87006180375 25.0310992169403, 121.869829160964 25.0311581660071, 121.869361861571 25.0312017522836, 121.868914032986 25.0312910003254, 121.867649003136 25.0317310129774, 121.866555073344 25.0321216019711, 121.865170135329 25.0327484058142, 121.864734357419 25.0334110270197, 121.864292609948 25.0336139920736, 121.863904588522 25.0337333832818, 121.863391206326 25.0347899954744, 121.864474681541 25.0352406972853, 121.86483146268 25.0355561508164, 121.865524680713 25.0361896842442, 121.865773928269 25.0363313554893, 121.865993698118 25.036472204853, 121.866030700064 25.0365470230805, 121.866033340412 25.0366113372438, 121.866012023584 25.036849157416, 121.865908942836 25.0377031984422, 121.865865133518 25.0382298368157, 121.865906365817 25.0386137884905, 121.866278029182 25.0385619031992, 121.86639485403 25.0385971851997, 121.866433795646 25.0389271751828, 121.866106227935 25.0390724535102, 121.866400008068 25.0393827259333, 121.867087785728 25.0404624470936, 121.867213773309 25.040822006139, 121.867512134809 25.0422265073453, 121.867619796924 25.0424885200125, 121.8686036454 25.0440445005361, 121.868624261549 25.0441965175812, 121.86856928515 25.0444455553367, 121.868578447883 25.044611580226, 121.868736505031 25.0449607505878, 121.86879835348 25.0451812514186, 121.868757121181 25.0456487118683, 121.869156488689 25.0459610235725, 121.869352698838 25.0461198022833, 121.869382477721 25.046228235834, 121.869329792005 25.0464855705753, 121.869217548523 25.0466707889964, 121.868988480194 25.0468850609384, 121.868896852862 25.0470469319877, 121.868887690128 25.0472337060097, 121.868974736094 25.0474287807957, 121.869247327406 25.0478946762361, 121.870503767195 25.0494064895584, 121.871028906341 25.0500731549184, 121.872294508862 25.0511807971312, 121.872663881544 25.0514697681841, 121.873221090256 25.0515839037804, 121.874218110161 25.0516959640806, 121.874841748689 25.051552775901, 121.875045619502 25.0515673022457, 121.875339399635 25.0516295579891, 121.87657923197 25.0521618433046, 121.876918253098 25.0522407001918, 121.877436520194 25.0523154066697, 121.878397188807 25.0525106355513, 121.879274714187 25.0529643221425, 121.879838837646 25.0536478368094, 121.880499966461 25.0535194912606, 121.880781490478 25.0535075913854, 121.880924085513 25.053628469345, 121.881192693267 25.0541435306287, 121.881433189876 25.0543615163914, 121.88213757499 25.0545607301177, 121.882429626864 25.054573118673, 121.884086179878 25.0536687302709, 121.884232977536 25.0536263941878, 121.884356674434 25.0536637470102, 121.88510400986 25.0542764354304, 121.885930675718 25.0546934816814, 121.886394809898 25.0549098721435, 121.88647269313 25.0550032532002, 121.886532250896 25.0551303550798, 121.886545994996 25.0552735390802, 121.886206973868 25.0565969456, 121.886108474486 25.0567650291372, 121.885493998691 25.0573528009284, 121.88538862726 25.0574695249115, 121.88537488316 25.0575712043795, 121.885468801175 25.0576977848239, 121.885546684407 25.0577600374535, 121.885725357704 25.0577434367554, 121.8860139838 25.0576313819842, 121.886209264551 25.0576002556406, 121.886729249659 25.0576894844709, 121.886873562707 25.0576438325194, 121.887043073271 25.0575099891997, 121.88711179377 25.0573751081871, 121.887134700603 25.0570451678535, 121.887164479486 25.0569159928583, 121.887262978867 25.0568122377435, 121.887411873282 25.0567541348408, 121.887762347826 25.0567499846324, 121.887934149074 25.0567250833791, 121.888092206221 25.0566192529963, 121.888253126723 25.0563676460818, 121.888418588345 25.0562326564669, 121.88907822477 25.0558506046007, 121.889232393832 25.0558379729304, 121.88936296278 25.0559126772158, 121.889463752845 25.0559858251178, 121.889647007509 25.0563826906335, 121.889660751609 25.0565383238183, 121.889601193843 25.0567313086929, 121.889596612476 25.056924812039, 121.889809646023 25.0574441050313, 121.889903564038 25.0575291837933, 121.89001580752 25.0575250336111, 121.890137547972 25.0574052366241, 121.890163556593 25.0570799257607, 121.890236858458 25.0569491944765, 121.890381171506 25.0568558149024, 121.890587333002 25.0567894116064, 121.890743099467 25.0567582850491, 121.890979612517 25.056756209945, 121.892522387718 25.056795636917, 121.892923829966 25.0568392140818, 121.893180386495 25.0568973169441, 121.893586410109 25.0570840759579, 121.893786272227 25.057231407868, 121.894072607639 25.0575986993233, 121.894494666037 25.0575800235131, 121.894803908282 25.0574513678548, 121.895216803946 25.057162410904, 121.896174882235 25.0566244407623, 121.896438883485 25.0565912390561, 121.896906755549 25.056618215443, 121.897298462392 25.0564086295114, 121.897461100906 25.0563380757508, 121.897626030104 25.056331850417, 121.897924391603 25.0564459814858, 121.898034344402 25.0565476618031, 121.898197555586 25.0567743671047, 121.898307508385 25.056805493658, 121.898522832615 25.0567224894983, 121.898741020199 25.0565040845346, 121.898917402813 25.0560366654778, 121.899281621457 25.0553072599255, 121.899306818973 25.0551184230722, 121.899169377975 25.0548066341146, 121.899185412758 25.0546240219109, 121.899281621457 25.054532715707, 121.899838830169 25.054260353047, 121.900654886094 25.0538556988346, 121.901216676172 25.0536834609952, 121.901844896066 25.0534442990158, 121.902150129616 25.0534069461265, 121.902415848878 25.0534525996563, 121.90343176692 25.053905502502, 121.903757043949 25.0538889012818, 121.90412641663 25.0538162709168, 121.904554774407 25.0537747678318, 121.904992867588 25.0537981133188, 121.905173444243 25.0538392122715, 121.905538622883 25.0540429812707, 121.905786016679 25.0542255943402, 121.905870771961 25.054370854542, 121.905877644011 25.0544917316502, 121.905763109846 25.0547516429683, 121.905621087482 25.054984058211, 121.905354795548 25.0557378483654, 121.905288365733 25.0563069490788, 121.905150924735 25.0581143580681, 121.905249424117 25.0588333715691, 121.905359376915 25.0590056021711, 121.905542631579 25.0591617507907, 121.906534711799 25.0594696505992, 121.906677665153 25.0595228112888, 121.907129502433 25.0598574138178, 121.9073499807 25.0599258905018, 121.90828744284 25.0600047423936, 121.908594394401 25.0600213427854, 121.909201998146 25.0599004711311, 121.909651544743 25.0598236942245, 121.910117126123 25.0598340694849, 121.910378264019 25.0597655927496, 121.910862743536 25.0594973918345, 121.911270485163 25.0592400844087, 121.911639857845 25.0589428314074, 121.91177500816 25.058789276346, 121.911864344808 25.0585106979224, 121.912022401956 25.0575348902935, 121.912065924938 25.0574394360732, 121.912160415624 25.0573559135694, 121.91246278582 25.05723555806, 121.912834347944 25.0571337227193, 121.913233028078 25.0570420552046, 121.913872128718 25.0569901777116, 121.915110815711 25.0567842238474, 121.915466444293 25.0567344213497, 121.915709256722 25.056668017988, 121.915954359835 25.0564916338836, 121.916967987194 25.0556071156496, 121.917309299006 25.0553643259503, 121.917625985971 25.0552019471009, 121.917837301506 25.0551251672506, 121.918020556169 25.0550878148736, 121.918447195933 25.0550691386808, 121.919992261817 25.0551811957948, 121.920302076733 25.0550836646088, 121.920478459347 25.0548777075408, 121.920708100348 25.0543127504819, 121.920856994762 25.0541052357568, 121.921012761226 25.0540263800691, 121.922053304114 25.0536087553511, 121.922512013444 25.0535049974365, 121.923828010998 25.0533493603999, 121.924419007289 25.0548937898432, 121.924745429659 25.0555464182698, 121.925391402349 25.0552808020322, 121.925717252048 25.0551142728085, 121.926989153949 25.054387455697, 121.92738167453 25.0549936404749)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454081100'=='0100020200' || '0454081100'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
