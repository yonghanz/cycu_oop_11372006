
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493187</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0162002100">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0162002100">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0162002100" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0162002100" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0162002100" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0162002100',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="t3RYs55pQyQRAlIrv77GXb8zfvDMzJFlidSm57RqTiv3SpX48_1XlSV5vkIBDeDgJaU650LCEOpQ1ZGYhUr92YotVEo1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">貓空左線(指南宮) </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0162002100" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0162002100" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">貓空纜車站 - 貓纜指南宮站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0900 - 1720 <br>
                        [假日] 1320 - 1550
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 貓空左線-指南宮線延駛貓纜站班表:0900 1000 1100 1400 1450 1540 1630 1720<br>
[假日]<br /> 貓空左線-指南宮線班表:1320 1400 1440 1515 1550<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">欣欣客運富德站:02-2239-1333</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">接獲貓空山區落雷時：如應貓纜通報須至貓纜指南宮站協助疏運人潮，疏運時段本線暫停營運；僅平常日班次延駛貓空纜車站，例假日不延駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 貓纜指南宮站</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 貓空纜車站</a>
                </p>


            <p> 
<a style="color:#4CAF50; word-spacing:20px;margin-top:5px;box-shadow: 0 1px;padding-bottom:3px;" href="./StopsOfRoute?routeid=0162002102" >①延駛貓纜站</a> </p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">貓空纜車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166600040" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.968307" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.588052" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">天恩宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166600200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970627" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.592291" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">茶推廣中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.969327" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5934956" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">貓空壺穴站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9688" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5953918" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">貓空站(小天空步道)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166603040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.96784" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.59534" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">涼亭站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.96582" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.59729" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">圓山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166602200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970103" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.60048" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">草湳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970449" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.605524" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">岐山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166603760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972478" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.598729" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">貓纜指南宮站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166603160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.978889" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5899016" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">草湳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970388" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6054195" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">圓山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166602240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970251" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.600402" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">涼亭站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.966031" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5972576" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">貓空站(小天空步道)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166603000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.96796" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.59539" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">貓空壺穴站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9688" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5953918" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">茶推廣中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166601200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.969358" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5937926" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">天恩宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166600240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970575" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5919699" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">貓空纜車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1166603300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9685" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5881" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0162002100";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 10;
        var existBackNum = 8;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0162002100',
                        url: './StopStatusRecent3OfRoute?routeid=0162002100&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0162002100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0162002100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0162002100');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0162002100","Name":"貓空左線(指南宮)","BeginStop":"貓空纜車站","GoDirStops":[{"UniStopId":"1166600040","Name":"貓空纜車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.588052,"Latitude":24.968307,"PublicId":"1166600040"},{"UniStopId":"1166600200","Name":"天恩宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.592291,"Latitude":24.970627,"PublicId":"1166600200"},{"UniStopId":"1166601240","Name":"茶推廣中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5934956,"Latitude":24.969327,"PublicId":"1166601240"},{"UniStopId":"1166601340","Name":"貓空壺穴站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5953918,"Latitude":24.9688,"PublicId":"1166601340"},{"UniStopId":"1166603040","Name":"貓空站(小天空步道)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.59534,"Latitude":24.96784,"PublicId":"1166603040"},{"UniStopId":"1166601940","Name":"涼亭站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.59729,"Latitude":24.96582,"PublicId":"1166601940"},{"UniStopId":"1166602200","Name":"圓山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.60048,"Latitude":24.970103,"PublicId":"1166602200"},{"UniStopId":"1166601500","Name":"草湳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.605524,"Latitude":24.970449,"PublicId":"1166601500"},{"UniStopId":"1166603760","Name":"岐山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.598729,"Latitude":24.972478,"PublicId":"1166603760"},{"UniStopId":"1166603160","Name":"貓纜指南宮站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5899016,"Latitude":24.978889,"PublicId":"1166603160"}],"LastStop":"貓纜指南宮站","BackDirStops":[{"UniStopId":"1166601540","Name":"草湳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6054195,"Latitude":24.970388,"PublicId":"1166601540"},{"UniStopId":"1166602240","Name":"圓山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.600402,"Latitude":24.970251,"PublicId":"1166602240"},{"UniStopId":"1166601900","Name":"涼亭站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5972576,"Latitude":24.966031,"PublicId":"1166601900"},{"UniStopId":"1166603000","Name":"貓空站(小天空步道)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.59539,"Latitude":24.96796,"PublicId":"1166603000"},{"UniStopId":"1166601340","Name":"貓空壺穴站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5953918,"Latitude":24.9688,"PublicId":"1166601340"},{"UniStopId":"1166601200","Name":"茶推廣中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5937926,"Latitude":24.969358,"PublicId":"1166601200"},{"UniStopId":"1166600240","Name":"天恩宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5919699,"Latitude":24.970575,"PublicId":"1166600240"},{"UniStopId":"1166603300","Name":"貓空纜車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5881,"Latitude":24.9685,"PublicId":"1166603300"}],"RouteMapUrl":"../MapOverview?nid=0162002100","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"0900 - 1720","HeadwayDesc":"貓空左線-指南宮線延駛貓纜站班表:0900 1000 1100 1400 1450 1540 1630 1720","HolidayBusTimeDesc":"1320 - 1550","HolidayHeadwayDesc":"貓空左線-指南宮線班表:1320 1400 1440 1515 1550","RouteNote":"接獲貓空山區落雷時：如應貓纜通報須至貓纜指南宮站協助疏運人潮，疏運時段本線暫停營運；僅平常日班次延駛貓空纜車站，例假日不延駛","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"欣欣客運富德站:02-2239-1333","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.595342568687 24.9688683243106, 121.595427585788 24.9688314406381, 121.595471280068 24.968808116335, 121.595505825765 24.9687761410548, 121.595523065742 24.9687322351133, 121.595519611438 24.9686862598849, 121.595320912897 24.9682202854038, 121.595285114185 24.9680497481659, 121.595293619989 24.9679417673144, 121.595321220523 24.9678838693706, 121.595357507782 24.9678449371533, 121.595433981388 24.9678075609326, 121.595489274386 24.9678011822251, 121.595648255147 24.9677790167766, 121.595736345998 24.9677554356565, 121.595851231427 24.9677289778623, 121.5960833186 24.9677015296939, 121.596175314269 24.9676603711659, 121.596199206418 24.9676185102011, 121.596251286823 24.9674621432798, 121.596275786613 24.9672746829551, 121.596290194894 24.9672302936078, 121.596311267339 24.967178968428, 121.596363498895 24.9671200254975, 121.596527306974 24.9670179469735, 121.596628110127 24.966960205879, 121.59668503304 24.966905191366, 121.596936832225 24.9664700842881, 121.596991859402 24.9664029782063, 121.59705938669 24.9662423226383, 121.5970939829 24.9661929562024, 121.59717767718 24.9660921451957, 121.597242239977 24.9659443018341, 121.597278859966 24.9658404618923, 121.597329561478 24.9657984026619, 121.597415260308 24.9657685824802, 121.597584948699 24.9658738407944, 121.597796387661 24.9662636550165, 121.598095593678 24.9665851497452, 121.598146093483 24.966624141346, 121.598208411513 24.9666410141155, 121.598290170435 24.9666431193762, 121.598643140034 24.966612462169, 121.598769314269 24.9666266729072, 121.59897899411 24.9665700187002, 121.599383239407 24.9663427726535, 121.599432296599 24.9663322160934, 121.599479728861 24.9663350051143, 121.599530694281 24.9663566981433, 121.599557289076 24.9663883412297, 121.59957340611 24.9664480859059, 121.599569751473 24.9664953962723, 121.599376124072 24.9670194457525, 121.599345148584 24.9670890691956, 121.599285087754 24.9671698234543, 121.599245325326 24.9672385043004, 121.599199564551 24.9673775055803, 121.599175174235 24.9674212768815, 121.599089491165 24.9674984317374, 121.598818021768 24.9677647257275, 121.598809647383 24.9677958386835, 121.598826428653 24.967834188383, 121.598920511495 24.9679090941788, 121.598984443093 24.9679411163429, 121.599181511495 24.9680114210105, 121.599239642979 24.968045254872, 121.599293071632 24.968102665249, 121.59934632871 24.9682382496928, 121.599379957249 24.968373113796, 121.599387354361 24.9684476954907, 121.59938167718 24.9685293242393, 121.599355768573 24.9685850915782, 121.59926799145 24.9686531856454, 121.599117842865 24.9687238366432, 121.598950031541 24.9687600000001, 121.598802678315 24.9687688852173, 121.59862832282 24.9687889529847, 121.598572340509 24.9688215509334, 121.59854733137 24.9688817626171, 121.598555582484 24.9689634425107, 121.598573264949 24.9690465267039, 121.598617738296 24.9690955222207, 121.598659091393 24.9691265816608, 121.598726905991 24.96914138168, 121.59921066185 24.9691570430906, 121.599278426184 24.969170217378, 121.599339957249 24.9691905100586, 121.59940566008 24.96923892842, 121.599514292583 24.9694817331913, 121.599625568687 24.9697561592263, 121.599707065742 24.9699312082079, 121.599810140034 24.970071557208, 121.599882212698 24.9701077135284, 121.600171248527 24.9701189756037, 121.600262176358 24.9701377927384, 121.600392881425 24.970185919611, 121.600505507504 24.9701886105764, 121.600565847424 24.9701997738005, 121.60062633403 24.9702180206879, 121.600821809051 24.9703374190165, 121.600876843535 24.9703524936981, 121.601100642979 24.9703654391088, 121.601344699704 24.9702866237251, 121.601431260016 24.9702704825524, 121.601499275828 24.9702931305376, 121.601574080806 24.9702944167579, 121.601643345999 24.9702846142701, 121.601714114383 24.9702658592978, 121.602080646112 24.970092561992, 121.602136063676 24.9700746982347, 121.602189602888 24.9700691838357, 121.602303066792 24.9700765050894, 121.602701266198 24.9701783245832, 121.603314541491 24.9702438631645, 121.603680076952 24.970236697932, 121.603791289369 24.9702234945456, 121.604024619989 24.9701698142582, 121.604079108491 24.9701651678026, 121.604378345238 24.9701685167709, 121.604437993981 24.9701533150298, 121.604470562797 24.9701362307696, 121.604522912861 24.9700823133366, 121.604634217434 24.9699116511497, 121.604675119131 24.969877156217, 121.604722720822 24.9698545522612, 121.604798747241 24.9698469243631, 121.60520434581 24.9698722795792, 121.605367998899 24.9699076051404, 121.605453936206 24.9699390006797, 121.605497712328 24.969970927505, 121.605526375095 24.9700168055444, 121.605529704166 24.9700747074368, 121.605446573619 24.9705446717798, 121.605324908617 24.9705484180965, 121.605248219219 24.9705599934908, 121.605183172337 24.9705884070333, 121.604873437404 24.9708038106665, 121.604827747023 24.9708270002792, 121.604647259871 24.9708808646981, 121.604306560137 24.9709518594842, 121.604245902146 24.9709895909852, 121.604047614772 24.9711306377131, 121.603834734372 24.9712763489379, 121.603744244524 24.9713266111216, 121.603541708776 24.9713963240393, 121.603335271518 24.9714963957274, 121.602828140034 24.9716010227375, 121.602756251187 24.9716374601767, 121.602396702831 24.9719232781899, 121.60231932548 24.9719521379362, 121.601847848756 24.9720018608958, 121.601680288807 24.9720562038706, 121.601557635771 24.9721083090497, 121.600768478524 24.972303939411, 121.600559611438 24.9723255576384, 121.600202847376 24.9723170600747, 121.599913289496 24.972298049528, 121.599452148585 24.9723073250286, 121.599254639234 24.9723723125577, 121.599162150512 24.9723914643478, 121.598521917157 24.972415139167, 121.598452552038 24.972594794999, 121.598434537309 24.9726485979906, 121.598387860179 24.9726962132714, 121.598342842865 24.972714814097, 121.598214 24.972697, 121.598068836975 24.9726458608036, 121.597862476049 24.9725969344664, 121.597762889778 24.9725905257059, 121.597723964193 24.9725984881795, 121.597643 24.972642, 121.597467562797 24.9727434185033, 121.597324157142 24.9728345802395, 121.597185 24.9729946281585, 121.59715233194 24.9730229206437, 121.597081519105 24.9730556908835, 121.596860917157 24.9731405814787, 121.596829559146 24.9731719750136, 121.596808763823 24.9732160398288, 121.596793471404 24.9732742792391, 121.596787602547 24.9733688509492, 121.596790314269 24.9734959539503, 121.596767639503 24.9735639294389, 121.596698148584 24.9736790927339, 121.596488956587 24.9738945866935, 121.596325502945 24.9740306511373, 121.596225411046 24.974106517276, 121.595935314269 24.9742874185738, 121.595748637089 24.9743926974863, 121.5955939519 24.9745606087062, 121.595475851397 24.9746909619992, 121.59540600855 24.9748011394633, 121.595361898186 24.974898924432, 121.5953359772 24.9749730755897, 121.595304645639 24.9750186279235, 121.595252786816 24.9750725149651, 121.595187411882 24.9751318814755, 121.595031760023 24.9752231395724, 121.594962274836 24.9752582187724, 121.594806974349 24.9753116511721, 121.594658811324 24.9753167906253, 121.594468514155 24.9752888837238, 121.59435300532 24.975294512226, 121.59396033403 24.9754742560934, 121.593711722973 24.9756032735322, 121.593597728459 24.9756398111433, 121.593374048641 24.9756834414672, 121.593276531256 24.9757165352152, 121.592996174235 24.9758800471779, 121.592865456964 24.9759347678458, 121.592560851416 24.9760088143002, 121.592486511356 24.9760480505257, 121.592417545696 24.9761193492621, 121.592371514155 24.9761822111082, 121.592320084021 24.9763155753489, 121.592277326561 24.9764733311919, 121.592263546463 24.9767780766165, 121.592269628539 24.9771449799193, 121.592268680142 24.9772913395658, 121.592243976328 24.9774159531792, 121.592171382956 24.9775421049537, 121.592043705491 24.9777194457466, 121.591874409913 24.977887303895, 121.59171272136 24.9780382818065, 121.591655222877 24.9781419537474, 121.591658894543 24.9782214100543, 121.591714605194 24.9782999438777, 121.591786191109 24.9783613345411, 121.591807537146 24.9783958850981, 121.591805429948 24.9784923902941, 121.591784248527 24.978570211515, 121.591754052775 24.9786142073078, 121.591632090889 24.9787204001592, 121.591481900057 24.9788270939021, 121.591369364233 24.9788849938445, 121.591214834315 24.9789422340456, 121.591064157138 24.9789692896464, 121.590973058824 24.9789721465218, 121.590876432038 24.9789661050104, 121.590771077525 24.9789335698723, 121.590718717272 24.9789060015476, 121.59063597005 24.9788457771414, 121.590539777123 24.9787991862896, 121.590445667296 24.9787789954767, 121.590077754133 24.9787578137124, 121.589779457676 24.978811947413, 121.589724195718 24.9788266103315, 121.589723384508 24.9788163035701, 121.589775284725 24.9788030011913, 121.590080159177 24.9787490861136, 121.590454428296 24.9787684162845, 121.590555390809 24.9787971645572, 121.590645051908 24.978838468857, 121.590725651145 24.978900258616, 121.59077952067 24.9789293965712, 121.590882808115 24.9789595335193, 121.59098042004 24.9789640031063, 121.591062289897 24.9789595419003, 121.591216210624 24.978932745931, 121.59136512169 24.9788778564356, 121.591484073725 24.9788174805351, 121.591626960531 24.9787145757643, 121.591750299617 24.9786044662332, 121.591779616191 24.9785562791258, 121.591795486081 24.9784933031141, 121.591798087595 24.9783910745292, 121.591781067733 24.978367715785, 121.591707952781 24.9783096206709, 121.591645390654 24.9782158234647, 121.591648395261 24.9781423407185, 121.591674028342 24.9780854404205, 121.59170651862 24.9780298813082, 121.591882893353 24.9778682120139, 121.592037477382 24.9777113169444, 121.592169422747 24.9775315781387, 121.592235987267 24.9774118104715, 121.592259315081 24.9772897311622, 121.592261886961 24.9771414581129, 121.592252661071 24.9767773422557, 121.592268371458 24.9764681599698, 121.592312200657 24.976310208681, 121.592363443697 24.9761811747666, 121.592417495347 24.9761038610625, 121.59248479937 24.9760373204621, 121.592552002253 24.9760064598371, 121.592869158102 24.9759249561215, 121.59299559207 24.9758685943992, 121.593273474831 24.9757113299468, 121.593375166283 24.9756740848696, 121.593600896639 24.9756327947358, 121.593716262924 24.9755939719855, 121.593960473306 24.975463121113, 121.59435312203 24.9752861062452, 121.594469380678 24.9752825897881, 121.594658999924 24.9753073048249, 121.594811731133 24.9753055686431, 121.594961635012 24.9752513666784, 121.595028444047 24.9752130458908, 121.595187094245 24.9751199131537, 121.595246479473 24.9750685696545, 121.595299034392 24.9750143779075, 121.595326125785 24.9749708430317, 121.595353217177 24.9748938197523, 121.595397548547 24.9747933545326, 121.595469930042 24.974685789424, 121.595587188297 24.9745567028022, 121.595742940114 24.9743843098064, 121.595933061587 24.9742782976721, 121.596225803232 24.9740951254879, 121.596324813035 24.9740208858812, 121.596490915839 24.9738834393321, 121.596691167445 24.9736764282324, 121.596760788362 24.9735625176316, 121.596781680969 24.9734898481029, 121.596780931236 24.9733757468699, 121.596786117084 24.9732723794602, 121.596801375262 24.9732104583537, 121.596823540947 24.9731680391346, 121.596855558047 24.9731334339721, 121.597080143328 24.9730456363464, 121.597150818559 24.9730152861365, 121.597172723513 24.9729910486669, 121.597314359919 24.9728287886124, 121.5974656464 24.9727350143012, 121.597644336399 24.9726329159096, 121.597708936918 24.9725931456489, 121.597767510429 24.9725843004813, 121.59786810192 24.9725864531109, 121.598069497082 24.9726375762864, 121.59822370372 24.9726931127189, 121.598334098436 24.9727051491918, 121.598395261301 24.9726817627933, 121.598428530363 24.9726412761214, 121.598444204427 24.9725901410666, 121.598517481423 24.9724016344637, 121.599167518248 24.9723812544292, 121.599257717804 24.9723604326567, 121.599454096577 24.97229231859, 121.599908106985 24.9722860193894, 121.600200410761 24.9723044311313, 121.600568227009 24.9723144104618, 121.600775717877 24.9722908191284, 121.601556571934 24.9720970209483, 121.601679958198 24.9720417657798, 121.60184911386 24.971987716045, 121.602318261337 24.9719416085739, 121.602399000144 24.9719136988058, 121.60275427735 24.9716231879545, 121.602821614635 24.9715908313691, 121.603331632337 24.9714846541213, 121.603541704039 24.9713841325281, 121.603737542596 24.9713152932852, 121.603834992953 24.9712619613728, 121.604042145132 24.9711158391614, 121.604241388978 24.9709775682548, 121.604300277543 24.9709427227296, 121.60465204839 24.9708690936396, 121.604821749485 24.9708159796168, 121.604870916015 24.9707914232258, 121.605181952045 24.9705741746176, 121.605252474054 24.9705437329647, 121.605318070328 24.9705346899162, 121.605434909554 24.9705335537318, 121.605517704212 24.9700719764992, 121.605511392655 24.970011183678, 121.60548909234 24.9699742764781, 121.605453380958 24.969948601015, 121.605363486791 24.9699173439206, 121.605207542803 24.9698827933065, 121.604793336117 24.9698581786858, 121.604726206533 24.9698664290105, 121.604674254695 24.969890718647, 121.604642573799 24.96991792681, 121.604534366668 24.9700886269514, 121.604478018623 24.9701467831407, 121.604437453731 24.9701651678026, 121.604379142251 24.9701766195809, 121.604077018754 24.9701770703482, 121.604026157132 24.9701819126415, 121.603790259536 24.9702341530182, 121.603683435491 24.97024513717, 121.603318655666 24.9702540156375, 121.602696008457 24.970189039784, 121.602303780166 24.9700865280077, 121.602184635955 24.9700796141026, 121.602136134452 24.9700851104783, 121.602077125548 24.9701063577668, 121.601715671609 24.9702754238269, 121.601642957012 24.9702973219432, 121.601567794906 24.9703060031802, 121.601502113132 24.9703055364171, 121.601427999132 24.9702799080844, 121.601343876497 24.9702968660726, 121.601105556614 24.970373892403, 121.600880044101 24.9703588794641, 121.600820551116 24.9703460913412, 121.600617523576 24.9702256541506, 121.600564531742 24.9702083783857, 121.600509201785 24.9701986574781, 121.600390625614 24.9701949164234, 121.60025985392 24.9701471987647, 121.60017302223 24.970127212826, 121.599871723707 24.9701165389251, 121.59979436668 24.9700724164441, 121.599700154284 24.9699419030565, 121.59961179543 24.9697492268569, 121.599506340084 24.9694894046865, 121.599395679962 24.9692427057487, 121.599336506113 24.9692013318959, 121.599275466124 24.9691779385343, 121.599206981244 24.9691651445884, 121.598723024705 24.9691519266113, 121.598655904237 24.9691381466613, 121.598610861168 24.969105040691, 121.598564760125 24.9690478918285, 121.598544575912 24.9689612823469, 121.598539402682 24.96888493163, 121.598560614398 24.968811516343, 121.59862634999 24.9687786872366, 121.598802444043 24.9687585932005, 121.598950407187 24.9687502094237, 121.599114657516 24.9687163150591, 121.599263401455 24.9686462151546, 121.599348275171 24.9685797347874, 121.599370461623 24.9685262425941, 121.599372638533 24.9684457107266, 121.599368206646 24.9683732484681, 121.599334375961 24.9682418955247, 121.59928236055 24.9681019438719, 121.599230379463 24.9680489874954, 121.599173893752 24.968018491376, 121.598982041255 24.9679488549046, 121.598913272468 24.9679124080351, 121.598815989739 24.967837613025, 121.598801146708 24.9677989038028, 121.598804543162 24.9677674612221, 121.59908721517 24.9674883284365, 121.599169329925 24.9674126172344, 121.599194961644 24.9673610648758, 121.599235201115 24.9672370568529, 121.599277447831 24.9671624907886, 121.599338114763 24.9670784969085, 121.599366143553 24.9670110436576, 121.599562234466 24.9664801314799, 121.599556999319 24.9664284853481, 121.599540068781 24.966374077617, 121.599474273983 24.9663425791958, 121.599419391114 24.9663416408909, 121.59937005457 24.9663544944776, 121.598984026 24.9665775443713, 121.598768526399 24.9666359679167, 121.598644821394 24.9666230249914, 121.598285699614 24.9666492505876, 121.598205235358 24.9666486147525, 121.598138719001 24.9666334706474, 121.598089781527 24.9665922969386, 121.597780896676 24.9662582028795, 121.597575491419 24.9658782980739, 121.597413184956 24.9657774402422, 121.597332312947 24.9658053330259, 121.597287729253 24.9658472515223, 121.59724962294 24.9659479947607, 121.597186105285 24.9660974977906, 121.597098124539 24.9662047421321, 121.59706616494 24.9662489489864, 121.596999634999 24.9664131501091, 121.596947447761 24.9664736981731, 121.596691672934 24.9669159355469, 121.596628094061 24.9669727935, 121.596532924188 24.9670237957138, 121.596375841781 24.9671241314814, 121.596316578023 24.9671845495171, 121.596298169772 24.9672370887316, 121.596287878207 24.9672733251834, 121.596259547407 24.9674681026763, 121.596216988631 24.9676194152168, 121.596178187325 24.9676693429663, 121.596085216922 24.9677095598598, 121.595844716281 24.9677388347792, 121.595738992542 24.9677637289878, 121.59565014678 24.9677896290375, 121.595488674141 24.9678097044263, 121.59543110782 24.9678186470816, 121.595365531447 24.9678487764615, 121.595329037674 24.9678955115674, 121.595303914134 24.9679513372067, 121.595294004781 24.9680629359076, 121.595332750681 24.9682224077766, 121.59553150053 24.9686875422382, 121.595530961934 24.9687393147492, 121.595514048378 24.9687773321683, 121.595475336789 24.9688162569957, 121.595427102794 24.9688434346639, 121.595346940179 24.9688844229511, 121.595288698369 24.9689061720002, 121.59527583918 24.9688946856551, 121.595327863764 24.968873190195)","wkt0":"LINESTRING (121.58805200129 24.9683070552071, 121.588240136294 24.968281028927, 121.588388635677 24.9681971420132, 121.589117280038 24.9675747696512, 121.589231979188 24.9674582314579, 121.589348894747 24.9673562604482, 121.589423144438 24.9671302160368, 121.58944142981 24.9669006549541, 121.589483541575 24.9667836137996, 121.589537843588 24.9667062560655, 121.5896425689 24.9666354284872, 121.589741753189 24.9666520051581, 121.589849249011 24.9666851584933, 121.589899118207 24.9667208234348, 121.590095270377 24.9668303298102, 121.590187251338 24.9669287850004, 121.590273137175 24.9669875566835, 121.590380632997 24.9670116681351, 121.590744678126 24.9670026263413, 121.59120679934 24.9671136394303, 121.591433981232 24.9671749226312, 121.59156087063 24.9672527823915, 121.591608523417 24.9673532465255, 121.591620159562 24.9675571884653, 121.591616280847 24.9677063773058, 121.591633458015 24.9677912691915, 121.591800796871 24.9682297926152, 121.591898872956 24.9684668859574, 121.59189222373 24.9685653398382, 121.591866180928 24.9686477195554, 121.591855652987 24.9688124788244, 121.591885020402 24.9691404897611, 121.591877817074 24.9692565240485, 121.59184623325 24.9693926507136, 121.591735412815 24.9696116586117, 121.591562532936 24.9699090265098, 121.591520975273 24.9700295808583, 121.591495486573 24.9701928313504, 121.591520975273 24.9702435645361, 121.591771429456 24.9703430216117, 121.591912171409 24.9704073170522, 121.592148218935 24.9705906593346, 121.592304475749 24.9707202545366, 121.592381495951 24.9707378352705, 121.592499519714 24.9707142268558, 121.592577094019 24.9706403877422, 121.592655776528 24.9705580093591, 121.592680157023 24.9705338986024, 121.592777124904 24.9705354055248, 121.592950558885 24.9705941754853, 121.593074677772 24.9706318485222, 121.593200458966 24.9706298392938, 121.593426532653 24.9705625301255, 121.593498565936 24.970513303994, 121.593524054636 24.9704505155324, 121.593488592097 24.9703063531033, 121.593441493412 24.9701375773619, 121.593439277003 24.9699808568233, 121.593509093877 24.9696483273271, 121.593594425612 24.9693760744119, 121.59363986199 24.9693188108069, 121.593688622982 24.9693037414328, 121.5938204993 24.9692856581813, 121.593984513543 24.9692987183076, 121.594074278096 24.9693027368078, 121.594162934444 24.9692846535562, 121.594509802405 24.9691249180519, 121.595340124515 24.968851910507, 121.595436196331 24.9688034002817, 121.595483921359 24.9687605119478, 121.595501351369 24.9687179998125, 121.595492221363 24.968628084717, 121.595449476338 24.9685028054158, 121.595405071313 24.968403484798, 121.595355686284 24.9683135694727, 121.595300076251 24.9682029622459, 121.595278496239 24.9680912262731, 121.595267706232 24.9679983009927, 121.595284721242 24.9679512740023, 121.595327466267 24.9678835551045, 121.595381831299 24.9678335183393, 121.595451136339 24.9678083118409, 121.595605516429 24.9677793431722, 121.595715076493 24.9677390879978, 121.595825051557 24.9677127528299, 121.595937516623 24.967704099845, 121.596023421673 24.9676954468594, 121.596076956704 24.9676826554883, 121.596145431744 24.9676525581392, 121.596191081771 24.9676010164119, 121.596230921794 24.9675050810226, 121.5962417118 24.9674384905319, 121.596252501806 24.9673312684796, 121.596248351804 24.9672906369407, 121.596226771791 24.9672639254587, 121.596222206789 24.9672161457511, 121.596231751794 24.9671819098862, 121.596315166843 24.9671431593903, 121.596472451935 24.9670340559867, 121.596648827037 24.966914042131, 121.596689082061 24.9668794299628, 121.596738052089 24.9668124629141, 121.59677249711 24.9667391000941, 121.596811922133 24.9666224719314, 121.596855497158 24.966544970575, 121.596933102203 24.9664501630241, 121.596992032238 24.966375295105, 121.597025647257 24.9662763489911, 121.59709260063 24.9661774027978, 121.597165640672 24.9660896177688, 121.597214334034 24.965986783798, 121.597234807379 24.9659080279671, 121.597240894049 24.9658483340235, 121.597240894049 24.9658077019949, 121.597264687397 24.9657846270097, 121.597352667448 24.9657575389781, 121.597436774163 24.9657700797343, 121.597533607553 24.9658187378559, 121.597712887658 24.9660830965927, 121.59781912772 24.9662737154433, 121.597915407776 24.9663645101079, 121.598166067922 24.9666108091091, 121.598231361293 24.9666208416445, 121.598855521657 24.9665756952286, 121.59896342172 24.96654710249, 121.599120015145 24.9664573112151, 121.599242301883 24.9663875849843, 121.599360161951 24.9663389270876, 121.599474148684 24.9663354156923, 121.59959311542 24.9664317282141, 121.599566555405 24.9665832196324, 121.599450355337 24.9668831921555, 121.599366248621 24.9671129365031, 121.599248941886 24.9673236187156, 121.599146021826 24.9675042031821, 121.598932435035 24.9676888003628, 121.598871568333 24.9677650469436, 121.598900341683 24.9678232350919, 121.59904974177 24.9679105172627, 121.59919803519 24.9679516502183, 121.599292101912 24.9679967961294, 121.599414941983 24.9682576388467, 121.599469168681 24.9684432381357, 121.599442608666 24.9685435619592, 121.599359608618 24.9686448889379, 121.599038675097 24.9687572514306, 121.598935755037 24.9687933679243, 121.598765328271 24.9687753096787, 121.598634741528 24.9688034002817, 121.598578301496 24.9688625911742, 121.598576088161 24.9689528823113, 121.598601541509 24.9691154061911, 121.59867126155 24.9691876389577, 121.598853861656 24.9691535290454, 121.599023181755 24.969149516114, 121.599277715237 24.9691465064153, 121.599409408647 24.969199677748, 121.599483555357 24.9693180591232, 121.599682755473 24.9697935899406, 121.599813342215 24.9700343643371, 121.599908515604 24.9700935546374, 121.600269289148 24.9701236513894, 121.600539315972 24.970187857769, 121.600646662701 24.9702049125829, 121.60078720945 24.9702931962879, 121.600865782829 24.9703222897677, 121.601185609682 24.9703463671251, 121.601402516475 24.9702600899059, 121.601529783216 24.9702811576045, 121.601694676645 24.9702600899059, 121.601912690106 24.9701527449093, 121.602074263533 24.9700785062587, 121.602186036932 24.9700604482018, 121.602317730342 24.9700524223978, 121.602700637232 24.9701577610327, 121.602985060057 24.9701751491269, 121.603210810862 24.9702179544978, 121.603450957669 24.9702340060836, 121.603743117839 24.9702079222557, 121.604015357998 24.9701517416846, 121.604172504756 24.9701447191114, 121.604379451544 24.9701497352351, 121.60450450495 24.9701055933391, 121.604556518313 24.9700253353057, 121.604595251669 24.9699240094638, 121.604650585035 24.9698698352171, 121.604774531774 24.9698327158121, 121.60492835853 24.969826696448, 121.605190638683 24.9698467609937, 121.605365492118 24.9698858868483, 121.605510465536 24.9699400610879, 121.605569118904 24.9700193159511, 121.605494972194 24.9704697635077, 121.60534003877 24.9705640663509, 121.605228265372 24.9705730953428, 121.605103211965 24.9706473336949, 121.604948278542 24.9707968134843, 121.604871918497 24.9708379454751, 121.604439211578 24.9709653542371, 121.604311944838 24.9709663574552, 121.604222304785 24.9710215344367, 121.603978837977 24.971210139205, 121.603712131155 24.9713826922503, 121.603573797741 24.9713977404696, 121.603210810862 24.9715351807866, 121.602883237338 24.9715803253829, 121.602782530613 24.971593367152, 121.602547917143 24.9718160802272, 121.602411797063 24.9719324526647, 121.602013396831 24.9719745874856, 121.601849610069 24.9720036805678, 121.60153199655 24.9721170432018, 121.601291849744 24.972180245333, 121.601209403029 24.9722108431785, 121.600967596222 24.9722725404503, 121.600649429369 24.9723237040181, 121.600549275978 24.972336244105, 121.600203995776 24.9723221992076, 121.600041869015 24.9723036398764, 121.599898002265 24.9722916013898, 121.599502922034 24.9723101607228, 121.599427668657 24.9723221992076, 121.599267201897 24.9723778771843, 121.599170368507 24.972409478187, 121.598840581648 24.9724029573458, 121.598607628179 24.972406468568, 121.5985866015 24.9724260310899, 121.598493088112 24.9725880487794, 121.59839736139 24.9727114429138, 121.598327088016 24.9727375262109, 121.598186541267 24.9727134493215, 121.598007261163 24.9726447298403, 121.597883867757 24.9726061064653, 121.597762134353 24.972600087237, 121.597635420946 24.9726527554751, 121.597518667545 24.9727480598486, 121.597291800746 24.9728860002583, 121.597156787334 24.9730289565198, 121.597016240585 24.9730836309759, 121.596926047199 24.9731137269964, 121.596871267167 24.9731438230096, 121.596824233806 24.9732110374124, 121.596803760461 24.9734412715435, 121.596795460456 24.9735240353416, 121.596779967114 24.9735927543316, 121.596713567075 24.9736925723583, 121.596591833671 24.9738064350335, 121.596528200301 24.9738912049743, 121.596103240053 24.9742092171313, 121.595963799972 24.9742919804127, 121.595873053252 24.9743200697562, 121.59575463985 24.9744083505081, 121.595574806411 24.9745934389245, 121.595456946343 24.9747689967857, 121.595293159581 24.9750433681413, 121.595214032868 24.9751206133485, 121.595144312827 24.9751757884669, 121.594845512653 24.9753147293371, 121.594763619272 24.9753453264029, 121.594584339168 24.975325262754, 121.59446205243 24.9753006847797, 121.594398419059 24.9753062022846, 121.594324825683 24.9753463295853, 121.59421692562 24.9754085268755, 121.593948558797 24.9754932957123, 121.593744378678 24.9756332394039, 121.593637585282 24.9756693538791, 121.59350699854 24.9756693538791, 121.5933813918 24.975684401574, 121.593286218411 24.9757109858305, 121.593093104965 24.975849424507, 121.592964178223 24.9759246628528, 121.592756678102 24.9759823455535, 121.59255194465 24.9760375202853, 121.592494397949 24.9760560790531, 121.592356064535 24.9762567142027, 121.592331164521 24.9763189110326, 121.592311797843 24.9764839331143, 121.592328397853 24.9768656398776, 121.592318437847 24.9772187551978, 121.592311244509 24.9773085386189, 121.592265317816 24.9774429628365, 121.592109277725 24.9776842238436, 121.591950470966 24.9778723168161, 121.591749610849 24.9780478699976, 121.591714197495 24.9781045485426, 121.591705344156 24.9781903186806, 121.591735777507 24.9782821077095, 121.591837037566 24.9783648682505, 121.591848657573 24.978540922307, 121.591778384199 24.9786046227156, 121.591494524033 24.9788373546363, 121.591286470579 24.9789386731366, 121.591120470482 24.9789742850649, 121.591034150432 24.9789838150158, 121.590836610316 24.978966761419, 121.5907508436 24.9789231242633, 121.590680570225 24.9788824965527, 121.590605316848 24.978828827828, 121.590544450146 24.9788097679015, 121.590303750006 24.9787937174347, 121.590132769906 24.9787766638115, 121.590007163166 24.9787977300516, 121.589901597492 24.9788899038433)","wkt1":"LINESTRING (121.589901597492 24.9788899038433, 121.589825962588 24.978913587643, 121.58975838487 24.978911683289, 121.589646689056 24.978939613811, 121.58960642254 24.9789002571645, 121.589624630008 24.9788523309088, 121.589689406577 24.9788101177011, 121.589999983967 24.9787615566248, 121.590123584664 24.9787434652385, 121.590387592952 24.9787675870863, 121.590537104277 24.9787704436206, 121.590600480272 24.9787850436837, 121.590703072353 24.9788539178712, 121.590759445475 24.9788907353934, 121.590832275348 24.9789351703192, 121.591038159795 24.9789465964404, 121.59111694211 24.9789389790264, 121.591279058605 24.9789075571886, 121.591487394058 24.9788053568121, 121.591736346171 24.9785904818306, 121.591771360532 24.9785374771614, 121.591779413836 24.9784425765291, 121.591769959958 24.9783651324806, 121.591714287123 24.9783086363816, 121.591650911128 24.9782238921845, 121.591640756963 24.9781975484709, 121.591652661846 24.9781175651131, 121.591705883676 24.9780353599411, 121.591780464266 24.9779544242934, 121.591927174443 24.9778439708529, 121.592017511496 24.9777452609415, 121.592141112194 24.9775770412957, 121.592224796518 24.9774418306211, 121.592255609157 24.9773704164725, 121.592256309444 24.9770857116544, 121.592270665332 24.9767664098146, 121.592258760449 24.9765505790757, 121.592279769066 24.9764007669284, 121.592305679694 24.9762738073387, 121.592344895779 24.9762058839043, 121.59246884662 24.9760433753485, 121.592543077067 24.9760002089773, 121.592964649984 24.9758954669842, 121.593157929262 24.975767872072, 121.593272776368 24.975691695942, 121.593385522614 24.9756523382563, 121.593512974891 24.9756434510352, 121.593643228317 24.975639642226, 121.593730063934 24.9756091717478, 121.593920542062 24.9754853853528, 121.594224466723 24.9753654076511, 121.594378529915 24.9752682827592, 121.594439454905 24.9752676479558, 121.594639036768 24.9753089101743, 121.594770690768 24.975313353797, 121.595106828642 24.9751648097509, 121.595225877472 24.975073397941, 121.595273497004 24.9750061086486, 121.595326018547 24.9748988265876, 121.595458372835 24.9747191765361, 121.595562015346 24.9745604748589, 121.595634144931 24.9744804891361, 121.595756695198 24.9743789198892, 121.595871542305 24.9742938555804, 121.595996193433 24.9742227570085, 121.596177567827 24.9741142046454, 121.596335832743 24.9740151743359, 121.596473089041 24.9738913863369, 121.596716088712 24.9736196871125, 121.596758105946 24.9735390659655, 121.596773512266 24.9733270384449, 121.596786117436 24.9732127719649, 121.596819731223 24.9731442120259, 121.596888359373 24.973092157232, 121.59704102199 24.9730362935261, 121.597134160193 24.9729969349908, 121.597326038896 24.9728134732652, 121.597564136556 24.9726776225377, 121.597651672461 24.9726211238265, 121.597749012387 24.9725665295415, 121.597854755759 24.9725563724626, 121.598050135899 24.9726293764488, 121.598238513165 24.972676352904, 121.598341455389 24.9726795269882, 121.598410783826 24.9726192193751, 121.598456302496 24.9725297101264, 121.598471008528 24.9724751158009, 121.598490616571 24.9723900501757, 121.598619469422 24.9723786234455, 121.599143984563 24.9723856064474, 121.599272137127 24.9723583092557, 121.599419197447 24.9723011755791, 121.599548050298 24.9722897488406, 121.599802954853 24.9722757828254, 121.600046654811 24.9722757828254, 121.600204919727 24.9722929229347, 121.600549461047 24.9723056193104, 121.600654504133 24.9722999059415, 121.600950725634 24.9722465811522, 121.601528462604 24.9720872414654, 121.601851295021 24.9719824961405, 121.602005358213 24.9719564685005, 121.602385614182 24.9719152051575, 121.602459144342 24.9718568016329, 121.60275116412 24.9715920809621, 121.602786178482 24.9715692273523, 121.60289052128 24.9715546264327, 121.603207751398 24.9715146326006, 121.603563497315 24.9713743366741, 121.603707056198 24.9713629098495, 121.603968263338 24.9711870635816, 121.604132830838 24.9710664468627, 121.604204960424 24.9709991553786, 121.604303000637 24.9709394817676, 121.604440957223 24.9709331335094, 121.60487233416 24.9707998200118, 121.604977377246 24.9707204666707, 121.605099927512 24.9706106415623, 121.605218276056 24.9705395408618, 121.605349930056 24.9704855804814, 121.605426961652 24.9704373335329, 121.605499791525 24.9700976998735, 121.605507494684 24.9700139022657, 121.605461976014 24.9699694641172, 121.605366036663 24.9699294697698, 121.604947965182 24.969859003507, 121.604722472692 24.9699085203445, 121.604663648564 24.9699402618965, 121.604542498872 24.9701084919855, 121.604425550903 24.9701808625945, 121.604211263009 24.9701795929351, 121.604060000966 24.9701834019134, 121.603820502731 24.9702291096436, 121.603489266868 24.9702538679903, 121.603347808846 24.9702564073077, 121.603160131866 24.9702348231086, 121.602907328174 24.9701967333364, 121.602806486812 24.9702037164622, 121.602692339992 24.9701802277648, 121.602381412459 24.9701078571554, 121.602269366501 24.9700856381001, 121.602148917096 24.9700907167417, 121.601967542702 24.9701567390629, 121.601763759116 24.9702671994058, 121.601615298222 24.9702995756943, 121.601465436753 24.9702983060361, 121.601398209178 24.9702983060361, 121.601282661784 24.9703319519744, 121.601158710943 24.9703795641355, 121.600878596048 24.9703617889308, 121.600798063016 24.9703338564612, 121.600702123665 24.9702735476983, 121.600628593505 24.9702322837908, 121.600438115376 24.9701935591882, 121.600180409673 24.970146581785, 121.600030548205 24.9701326155266, 121.59992270397 24.9701338851865, 121.599838669502 24.9701040481748, 121.599751133597 24.9700119977739, 121.599637687065 24.9698152001341, 121.599545949437 24.969570789724, 121.599457713245 24.9693473283527, 121.599405191702 24.9692546425512, 121.599345667287 24.9692108389632, 121.599256730808 24.9691822713974, 121.598910788913 24.9691778275532, 121.598723111933 24.9692254401609, 121.59865308321 24.9692279794995, 121.598621570284 24.9692006816072, 121.598573250464 24.9690927596482, 121.598527731794 24.9688838986471, 121.598520728922 24.9688127969487, 121.598578152475 24.9687740718993, 121.598686696997 24.9687486784177, 121.598816950423 24.9687391558607, 121.598946503562 24.9687378861864, 121.599057148945 24.9687099533481, 121.599302949765 24.9686140928776, 121.599361773893 24.9685226762003, 121.599379981361 24.9684439562293, 121.599359673032 24.9683246064999, 121.599294546318 24.9681385984461, 121.599255330233 24.9680427375304, 121.599148186286 24.9679925851011, 121.598976615913 24.9679398932862, 121.598827454731 24.9678319702214, 121.598807846689 24.9677907054952, 121.598834457604 24.9677253167468, 121.599151687722 24.9674402721853, 121.599209811563 24.9673336183711, 121.599267235116 24.9671831601547, 121.599401690266 24.9669431884415, 121.599479422149 24.9667190874508, 121.599545949437 24.9665457739401, 121.599540347139 24.966481019379, 121.599501131053 24.9664188041804, 121.599462615255 24.9663857920213, 121.599375079351 24.9663997587051, 121.59929174517 24.9664137253872, 121.599076056701 24.9665413300008, 121.598982918498 24.9665857693873, 121.598798742955 24.9666251299735, 121.598422688709 24.9666467148057, 121.598232910867 24.9666632208513, 121.598150977261 24.966640366326, 121.598064841931 24.9665654542412, 121.597810637663 24.966321037376, 121.597777023876 24.9662785024434, 121.597694389982 24.9661178853265, 121.597572540003 24.96590330561, 121.597491306683 24.9658417249714, 121.597405871641 24.9658176005891, 121.597365955268 24.9658144263279, 121.597308531715 24.9658341067459, 121.597204889204 24.9661121716703, 121.597115952724 24.9662042249885, 121.597062030607 24.9662746933443, 121.597033318831 24.9663699207879, 121.596971693554 24.9664581648199, 121.596868051043 24.9665940224145, 121.596825333521 24.9666924238496, 121.596765809106 24.9668327251146, 121.596704183829 24.9669190642751, 121.596421267785 24.9670936469513, 121.596320426423 24.9671825253095, 121.596291714647 24.9672777520506, 121.596248296838 24.9675418471604, 121.59619717587 24.9676472311085, 121.596098435369 24.9677024624188, 121.595896052358 24.9677297606434, 121.595734286006 24.9677595982308, 121.595599830857 24.9678046720195, 121.595439465079 24.9678307005377, 121.595396747558 24.9678605381007, 121.595340024292 24.9679487810638, 121.595307811079 24.9680446420527, 121.595327419121 24.9681735146551, 121.595386943537 24.9683049264802, 121.595534704143 24.9686496437893, 121.595552211324 24.968750582929, 121.595471678292 24.9688340639789, 121.59541145359 24.9688689799906, 121.595213650693 24.9689440851552, 121.595080943222 24.9689712101066, 121.594928565124 24.9690073766992, 121.594672569919 24.9690837283599, 121.594489716201 24.9691620892255, 121.594344541432 24.9692299014727, 121.594109048007 24.9693263454933, 121.593900151487 24.9693208200567, 121.593807616424 24.9693142899949, 121.59373779955 24.9693233316188, 121.593656900632 24.9693866229678, 121.593607031437 24.969482062242, 121.593554945832 24.9696598804818, 121.593487899469 24.9699035010993, 121.593470722301 24.9700215439054, 121.593464627178 24.9701420981437, 121.593522253804 24.9703174038878, 121.593555499934 24.9704469993776, 121.593533335847 24.9705469585962, 121.593474046915 24.970570567043, 121.593223592731 24.9706549546457, 121.593153221755 24.9706629915572, 121.593085067188 24.9706554569527, 121.592998073146 24.9706373738999, 121.592936013703 24.9706117562373, 121.592862872215 24.9705906593346, 121.592785297911 24.9705755901162, 121.592709385913 24.9705770970382, 121.592661733126 24.9705931708708, 121.592590253945 24.9706524431107, 121.592518220663 24.9707458721766, 121.592445633278 24.9707760105699, 121.592342016171 24.9707704851983, 121.592281619034 24.9707343191239, 121.592145309899 24.9706313462151, 121.591934751072 24.9704625709195, 121.591830025761 24.9704032985881, 121.591667119722 24.9703319708295, 121.591474846267 24.9702606430295, 121.591464872428 24.9702224675703, 121.591479833186 24.9700933741533, 121.591543554937 24.9698949618281, 121.591649388452 24.9697086046439, 121.591818389615 24.9693836090948, 121.591852189848 24.9692424592922, 121.591861609585 24.9691409920743, 121.591836674987 24.9689039000309, 121.5918145109 24.9688129811389, 121.591837783192 24.9685854324572, 121.591836674987 24.9684357423665, 121.591795117324 24.9682971030596, 121.591715326611 24.9680660372011, 121.591607276687 24.9677631393424, 121.591579017476 24.967653633797, 121.591581233885 24.9674416548956, 121.59155463698 24.9673477210002, 121.591505321887 24.9672839262818, 121.591455452691 24.967239722048, 121.591372337365 24.9672000386882, 121.591109692934 24.9671206719303, 121.590934596646 24.967069937457, 121.590731241148 24.9670362819037, 121.590450865447 24.9670538631641, 121.590379386267 24.967065918884, 121.59028851351 24.9670548678074, 121.590202627673 24.9670006170537, 121.589936104527 24.9667976788369, 121.589838028442 24.9667353908022, 121.589736627744 24.9667012328344, 121.589651296009 24.9667017351575, 121.589550449413 24.9667529721055, 121.589488944072 24.9668217903257, 121.589462901269 24.9669242641005, 121.589442399489 24.967148299605, 121.589406382847 24.9673000005447, 121.589365379287 24.9673788648665, 121.58926951961 24.9674682778582, 121.58908611179 24.967647605966, 121.588860592205 24.9678279384495, 121.588458314026 24.9681835794529, 121.58834971 24.968261438575, 121.588172397304 24.968350348609, 121.58810258043 24.9683764690587, 121.588057421102 24.9683573810383, 121.588051999667 24.9683070601125)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0162002100'=='0100020200' || '0162002100'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
