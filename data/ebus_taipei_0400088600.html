
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492323</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400088600">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400088600">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400088600" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400088600" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400088600" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400088600',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="pY6nY0MbEwnlSh-jRCGKTmGS3TS2i4J65IG1knbN7RQg0TwkCu0_Ax-SfsJmOGJvrcZX2Zh2EwhX35LOOffrLy3RMpU1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">886 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0400088600" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400088600" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">瑞芳 - 和美國小</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0535 - 1600 <br>
                        [假日] 0625 - 1135
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 886和美國小班表:0600 0650 1110 1210 1530 1625<br/>886瑞芳班表:0535 0625 0725 1135 1500 1600<br/>886繞威遠廟瑞芳班表:0915<br/>886繞水湳洞遊客中心和美國小班表:0755 0945<br/>886繞水湳洞遊客中心瑞芳班表:1035<br>
[假日]<br /> 886和美國小班表:0650 1110 1210<br/>886瑞芳班表:0625 0725<br/>886繞威遠廟瑞芳班表:0915<br/>886繞水湳洞遊客中心和美國小班表:0755 0945<br/>886繞水湳洞遊客中心瑞芳班表:1035 1135<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">陰陽海</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">二段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">基隆客運瑞芳站:02-2497-2055</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 和美國小</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 瑞芳</a>
                </p>


            <p> 
<a style="color:#4CAF50; word-spacing:20px;margin-top:5px;box-shadow: 0 1px;padding-bottom:3px;" href="./StopsOfRoute?routeid=0400088601" >①原行駛路線</a> <a style="color:#4CAF50; word-spacing:20px;margin-top:5px;box-shadow: 0 1px;padding-bottom:3px;" href="./StopsOfRoute?routeid=0400088605" >②繞威遠廟瑞芳</a> <a style="color:#4CAF50; word-spacing:20px;margin-top:5px;box-shadow: 0 1px;padding-bottom:3px;" href="./StopsOfRoute?routeid=0400088604" >③繞水湳洞遊客中心和美國小</a> <a style="color:#4CAF50; word-spacing:20px;margin-top:5px;box-shadow: 0 1px;padding-bottom:3px;" href="./StopsOfRoute?routeid=0400088603" >④繞水湳洞遊客中心瑞芳</a> </p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100120" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.107574" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.808298" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">瑞芳區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109016" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8097838" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">簡易法庭一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245101120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.118969" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.820442" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">簡易法庭二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245101320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11957" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.821531" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">磅磅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244701620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.12103" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8258508" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">舊漁會站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244701920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121882" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.82954" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">海濱</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244700800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.123568" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8310838" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">海濱路三巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.125877" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8320857" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">玄明宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.124548" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8612" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">水湳洞</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122114" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.863542" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">水湳洞遊客中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121971" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.861545" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">水湳洞</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122322" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.863856" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">陰陽海</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122354" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8639509" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">船塢</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121825" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8667539" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">威遠廟</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245101540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.12086" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.86865" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">台金公司</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122954" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8759941" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">南雅南新宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.120618" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8881135" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">鼻頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.124021" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.913918" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">鼻頭角</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121407" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.916875" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">龍洞灣公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284202540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.117598" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.916118" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">龍洞</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284201840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.114388" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.9125304" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">龍洞漁港</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284200221" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.111658" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.915339" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">和美國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.112353" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.919128" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">和美國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.112353" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.919128" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">龍洞漁港</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284200260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.111728" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.915468" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">龍洞</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284201800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.114295" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.912696" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">龍洞灣公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2284202500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.117436" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.9161432" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">鼻頭角</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121682" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.916867" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">鼻頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.124044" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.9135846" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">南雅南新宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.120829" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8880157" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">台金公司</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.123363" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8756441" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">船塢</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122009" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8667458" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">水湳洞</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244500140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122114" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.863542" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">水湳洞遊客中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121971" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.861545" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">水湳洞</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122322" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.863856" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">陰陽海</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245100060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122859" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8632641" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">第一泵浦</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244702170" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.123833" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.858222" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">海濱路三巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244501760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.126" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.831954" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">海濱</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244700840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.1235" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8309551" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">舊漁會站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244701960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122058" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8294021" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">磅磅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244701660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.12118" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8257234" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">簡易法庭一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245101160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.119062" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8202511" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">瑞芳區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109026" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8095799" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107778" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.807937" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">瑞芳火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108227" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8058805" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400088600";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 23;
        var existBackNum = 22;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400088600',
                        url: './StopStatusRecent3OfRoute?routeid=0400088600&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400088600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400088600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400088600');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400088600","Name":"886","BeginStop":"瑞芳","GoDirStops":[{"UniStopId":"2244100120","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.808298,"Latitude":25.107574,"PublicId":"2244100120"},{"UniStopId":"2245002400","Name":"瑞芳區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8097838,"Latitude":25.109016,"PublicId":"2245002400"},{"UniStopId":"2245101120","Name":"簡易法庭一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.820442,"Latitude":25.118969,"PublicId":"2245101120"},{"UniStopId":"2245101320","Name":"簡易法庭二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.821531,"Latitude":25.11957,"PublicId":"2245101320"},{"UniStopId":"2244701620","Name":"磅磅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8258508,"Latitude":25.12103,"PublicId":"2244701620"},{"UniStopId":"2244701920","Name":"舊漁會站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.82954,"Latitude":25.121882,"PublicId":"2244701920"},{"UniStopId":"2244700800","Name":"海濱","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8310838,"Latitude":25.123568,"PublicId":"2244700800"},{"UniStopId":"2244501720","Name":"海濱路三巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8320857,"Latitude":25.125877,"PublicId":"2244501720"},{"UniStopId":"2244500320","Name":"玄明宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8612,"Latitude":25.124548,"PublicId":"2244500320"},{"UniStopId":"2244500140","Name":"水湳洞","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.863542,"Latitude":25.122114,"PublicId":"2244500140"},{"UniStopId":"2244501300","Name":"水湳洞遊客中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.861545,"Latitude":25.121971,"PublicId":"2244501300"},{"UniStopId":"2245100100","Name":"水湳洞","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.863856,"Latitude":25.122322,"PublicId":"2245100100"},{"UniStopId":"2244500020","Name":"陰陽海","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8639509,"Latitude":25.122354,"PublicId":"2244500020"},{"UniStopId":"2244501020","Name":"船塢","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8667539,"Latitude":25.121825,"PublicId":"2244501020"},{"UniStopId":"2245101540","Name":"威遠廟","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.86865,"Latitude":25.12086,"PublicId":"2245101540"},{"UniStopId":"2245100220","Name":"台金公司","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8759941,"Latitude":25.122954,"PublicId":"2245100220"},{"UniStopId":"2245100420","Name":"南雅南新宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8881135,"Latitude":25.120618,"PublicId":"2245100420"},{"UniStopId":"2245100620","Name":"鼻頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.913918,"Latitude":25.124021,"PublicId":"2245100620"},{"UniStopId":"2245100720","Name":"鼻頭角","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.916875,"Latitude":25.121407,"PublicId":"2245100720"},{"UniStopId":"2284202540","Name":"龍洞灣公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.916118,"Latitude":25.117598,"PublicId":"2284202540"},{"UniStopId":"2284201840","Name":"龍洞","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.9125304,"Latitude":25.114388,"PublicId":"2284201840"},{"UniStopId":"2284200221","Name":"龍洞漁港","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.915339,"Latitude":25.111658,"PublicId":"2284200221"},{"UniStopId":"2284200920","Name":"和美國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.919128,"Latitude":25.112353,"PublicId":"2284200920"}],"LastStop":"和美國小","BackDirStops":[{"UniStopId":"2284200920","Name":"和美國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.919128,"Latitude":25.112353,"PublicId":"2284200920"},{"UniStopId":"2284200260","Name":"龍洞漁港","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.915468,"Latitude":25.111728,"PublicId":"2284200260"},{"UniStopId":"2284201800","Name":"龍洞","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.912696,"Latitude":25.114295,"PublicId":"2284201800"},{"UniStopId":"2284202500","Name":"龍洞灣公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.9161432,"Latitude":25.117436,"PublicId":"2284202500"},{"UniStopId":"2245100760","Name":"鼻頭角","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.916867,"Latitude":25.121682,"PublicId":"2245100760"},{"UniStopId":"2245100660","Name":"鼻頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.9135846,"Latitude":25.124044,"PublicId":"2245100660"},{"UniStopId":"2245100360","Name":"南雅南新宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8880157,"Latitude":25.120829,"PublicId":"2245100360"},{"UniStopId":"2245100260","Name":"台金公司","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8756441,"Latitude":25.123363,"PublicId":"2245100260"},{"UniStopId":"2244501060","Name":"船塢","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8667458,"Latitude":25.122009,"PublicId":"2244501060"},{"UniStopId":"2244500140","Name":"水湳洞","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.863542,"Latitude":25.122114,"PublicId":"2244500140"},{"UniStopId":"2244501300","Name":"水湳洞遊客中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.861545,"Latitude":25.121971,"PublicId":"2244501300"},{"UniStopId":"2245100100","Name":"水湳洞","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.863856,"Latitude":25.122322,"PublicId":"2245100100"},{"UniStopId":"2245100060","Name":"陰陽海","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8632641,"Latitude":25.122859,"PublicId":"2245100060"},{"UniStopId":"2244702170","Name":"第一泵浦","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.858222,"Latitude":25.123833,"PublicId":"2244702170"},{"UniStopId":"2244501760","Name":"海濱路三巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.831954,"Latitude":25.126,"PublicId":"2244501760"},{"UniStopId":"2244700840","Name":"海濱","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8309551,"Latitude":25.1235,"PublicId":"2244700840"},{"UniStopId":"2244701960","Name":"舊漁會站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8294021,"Latitude":25.122058,"PublicId":"2244701960"},{"UniStopId":"2244701660","Name":"磅磅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8257234,"Latitude":25.12118,"PublicId":"2244701660"},{"UniStopId":"2245101160","Name":"簡易法庭一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8202511,"Latitude":25.119062,"PublicId":"2245101160"},{"UniStopId":"2245002440","Name":"瑞芳區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8095799,"Latitude":25.109026,"PublicId":"2245002440"},{"UniStopId":"2244100160","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.807937,"Latitude":25.107778,"PublicId":"2244100160"},{"UniStopId":"2244100460","Name":"瑞芳火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8058805,"Latitude":25.108227,"PublicId":"2244100460"}],"RouteMapUrl":"../MapOverview?nid=0400088600","RouteTracks":null,"StopDirection":null,"TicketPrice":"二段票","BusTimeDesc":"0535 - 1600","HeadwayDesc":"886和美國小班表:0600 0650 1110 1210 1530 1625;886瑞芳班表:0535 0625 0725 1135 1500 1600;886繞威遠廟瑞芳班表:0915;886繞水湳洞遊客中心和美國小班表:0755 0945;886繞水湳洞遊客中心瑞芳班表:1035","HolidayBusTimeDesc":"0625 - 1135","HolidayHeadwayDesc":"886和美國小班表:0650 1110 1210;886瑞芳班表:0625 0725;886繞威遠廟瑞芳班表:0915;886繞水湳洞遊客中心和美國小班表:0755 0945;886繞水湳洞遊客中心瑞芳班表:1035 1135","RouteNote":"","SegmentBuffer":"陰陽海","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"基隆客運瑞芳站:02-2497-2055","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.805762399571 25.1081821842472, 121.80736294966 25.1078115435904, 121.808364199966 25.107579611409, 121.809345040725 25.1073662392383, 121.810170461424 25.1109037565187, 121.810545164579 25.1112757153154, 121.810767873484 25.11133191553, 121.811703433433 25.1114211746411, 121.812906426616 25.1115674602656, 121.813435816636 25.1117955663138, 121.813877583481 25.1120864835548, 121.814809492464 25.1126889775711, 121.815734099516 25.1132716335691, 121.816132054773 25.1134633722405, 121.81647889651 25.1135691589649, 121.818025080465 25.113608828963, 121.818357318339 25.1136286639572, 121.818869366272 25.1137485003121, 121.81927462346 25.1138708159186, 121.819983823539 25.1143104899261, 121.820542421284 25.1147377655948, 121.820827196605 25.1151410727861, 121.820947678472 25.11557826289, 121.820900215918 25.1161047071212, 121.820408309748 25.1168987217966, 121.820162720856 25.1173203962031, 121.820082399611 25.1177831978422, 121.820001390399 25.1183089593588, 121.820281022717 25.1189187599566, 121.820628036317 25.1191815469546, 121.821688978744 25.1196816667655, 121.821852205213 25.1198418174681, 121.822038252106 25.1202508977021, 121.822082216049 25.1208599577539, 121.824500980795 25.1207773168133, 121.825468486694 25.1208864028431, 121.825787033447 25.1210062320819, 121.826195941601 25.1213962961003, 121.826509924647 25.1215880220258, 121.827051180305 25.1216607455741, 121.827789588109 25.1215483546176, 121.828252228322 25.1215904277693, 121.830142273269 25.1221328470856, 121.830401854035 25.1222607131955, 121.830898385365 25.1229524077477, 121.831062678819 25.1233788268109, 121.830964324904 25.1241273330189, 121.831348366882 25.1248853303057, 121.831899662695 25.1258604570583, 121.832079861276 25.1260063059968, 121.833811855957 25.126333969191, 121.834073812743 25.1264632963567, 121.834679873042 25.127000849658, 121.8350855866 25.1271334815845, 121.836258459317 25.1271731471794, 121.837683705035 25.1274512191654, 121.839580381692 25.1276164919627, 121.840271326943 25.1276892119227, 121.840974689573 25.1275874146497, 121.841597540217 25.1274677464552, 121.842395067914 25.1269549736441, 121.84287811642 25.1267124470279, 121.8433427018 25.1266893086785, 121.843839233129 25.1267785565734, 121.844362233959 25.1267289744176, 121.845640071938 25.126398426198, 121.846082751524 25.1263554548638, 121.846378479742 25.1263885097376, 121.847317690657 25.1267620291904, 121.847650841273 25.1267983894301, 121.848070702323 25.1267587237135, 121.848553542531 25.1265637004196, 121.850019405242 25.1259373099376, 121.851647735924 25.1254414840598, 121.852160696598 25.1253447977791, 121.852825172348 25.1252985205579, 121.853954233476 25.1247225329626, 121.855875554152 25.1242597576045, 121.857889061711 25.1237870638221, 121.859264563022 25.1236407928231, 121.859903482011 25.1235581537632, 121.860414617203 25.123680459552, 121.860612088777 25.1238544388287, 121.861157877157 25.1245417279003, 121.861410556963 25.1247169192323, 121.86174904515 25.1247464980673, 121.862055726265 25.1246308044149, 121.86227843517 25.1244423888034, 121.862478286255 25.1235818996526, 121.862648095443 25.123270569399, 121.863119070012 25.122787955037, 121.863814578969 25.1224557433581, 121.863116331788 25.1213442325428, 121.862868066123 25.1211756456327, 121.862703772669 25.1211591174917, 121.862532177283 25.1212814256819, 121.862377923984 25.1212285356687, 121.861979968728 25.1207426076016, 121.861752696116 25.1200740401469, 121.861759998047 25.1195988509189, 121.861668723906 25.1195856282357, 121.861630388766 25.1198038023256, 121.861697931631 25.1200740401469, 121.861686978734 25.1207087247902, 121.861803809635 25.1209665644848, 121.861540940108 25.1217640459943, 121.861537289142 25.1219524657359, 121.861481611916 25.1220160986532, 121.861508081417 25.1219499865307, 121.861522685279 25.1217673516063, 121.86177460191 25.1209442514558, 121.861668723906 25.1207260794021, 121.861683327768 25.1200740401469, 121.861608482972 25.1198021494931, 121.861628563283 25.1195616621187, 121.861730790322 25.1195385224152, 121.861789205772 25.1195616621187, 121.861811111566 25.1200674288312, 121.862015565643 25.120695502227, 121.862407131709 25.1211888681438, 121.862527613576 25.1212219244155, 121.862684605099 25.1211194499443, 121.862852549519 25.1211260612031, 121.863089862287 25.1212450638003, 121.863460435301 25.1217177674169, 121.863836484763 25.1224524377647, 121.864687159761 25.1222045180062, 121.866298148356 25.1218805687636, 121.866626735265 25.1218772631546, 121.868044222681 25.122095433153, 121.868406581022 25.1221879900044, 121.868585478339 25.1222607131955, 121.868855649798 25.1225094592381, 121.869290114711 25.1230714085663, 121.869561198911 25.1232176802469, 121.869899737447 25.123251546599, 121.870099488867 25.1231070835181, 121.87028140534 25.1229679709217, 121.870406249977 25.1226879622341, 121.870372363576 25.1223758506397, 121.87032599271 25.1223366137535, 121.870268920876 25.1223348302587, 121.870015664611 25.1227057971824, 121.869839098623 25.1228449097788, 121.869717820975 25.1229376515097, 121.869617499391 25.1229590534476, 121.869512273196 25.1229537029631, 121.869273284889 25.1228092398823, 121.868830532299 25.1221118934055, 121.868753842021 25.1218916317946, 121.868736007073 25.1215732779682, 121.868798429392 25.1211719916325, 121.868782377939 25.1209651062327, 121.86871282164 25.1208331276156, 121.868626322141 25.1205825465926, 121.868691419703 25.1205968145513, 121.86876810998 25.120829560626, 121.868832315794 25.1209758072017, 121.868839449773 25.1211505896946, 121.868778810949 25.1215643604941, 121.868787728423 25.121896982279, 121.86886798569 25.1221101099107, 121.869326789734 25.1227985389133, 121.869503801596 25.1229100073399, 121.869592976337 25.1229171413192, 121.869708903501 25.1229135743295, 121.869978211219 25.1227013384453, 121.870213632536 25.1223214540475, 121.870267137381 25.1222911346355, 121.870333126689 25.1222929181303, 121.870400899493 25.1223589074388, 121.870443703369 25.1226763695178, 121.870559630532 25.1231659388474, 121.870227900495 25.1232319281559, 121.869999613157 25.1232604640731, 121.869924706374 25.1232461961145, 121.870004963642 25.123251546599, 121.870227900495 25.1232283611662, 121.870792487078 25.1231251241755, 121.871212348128 25.1231119018739, 121.871728047027 25.1233069306779, 121.873065213198 25.1241597648416, 121.873468644903 25.1242622367629, 121.874019940717 25.1242490145844, 121.874269119123 25.1241498481994, 121.874696282104 25.1238292096707, 121.876025672326 25.1229816853903, 121.876257069922 25.1228466291451, 121.876885036015 25.1226846554824, 121.878020950884 25.1226121236446, 121.878189343495 25.1226086269544, 121.878467729626 25.1224557433581, 121.879059186062 25.1222772411875, 121.879702668759 25.1222904635794, 121.880243924417 25.1224954104717, 121.88103983493 25.122703662607, 121.882224116915 25.1228739001999, 121.883483243695 25.1230842176752, 121.884277785096 25.1230594258502, 121.884736437656 25.1229784391867, 121.885052702556 25.1228329936155, 121.885423731941 25.1225478867377, 121.887336837944 25.1209471438858, 121.887660895688 25.1207568785308, 121.888247753875 25.120652528887, 121.888539831127 25.120516997485, 121.889307446656 25.1198352061398, 121.889617272904 25.1195721393224, 121.889847333202 25.1195389356242, 121.8903365626 25.1195637281635, 121.890660129431 25.1195389356242, 121.89142728859 25.1192691098295, 121.891677379737 25.1192079547427, 121.891867229951 25.1192096075833, 121.893107645532 25.1194261295068, 121.894143607037 25.1194955486683, 121.894421993168 25.1195517451035, 121.894754231043 25.1197186814202, 121.895012080492 25.119839751428, 121.895285902916 25.1199091703545, 121.895537819547 25.1199009061987, 121.896018834272 25.1196876907846, 121.896347421181 25.1194910033673, 121.897102918919 25.1192178470049, 121.897663137928 25.1191001068461, 121.898095777359 25.1190852312667, 121.899269106446 25.1193315045149, 121.900231135896 25.1198802458066, 121.900537817011 25.1200124722555, 121.901224344596 25.1203352279857, 121.901946176212 25.1210731154848, 121.902621438046 25.1216423399398, 121.903318940099 25.1220181646565, 121.90360371542 25.122120638374, 121.90385563205 25.1221536943935, 121.904081991921 25.1221239439763, 121.904315653723 25.1219355244991, 121.904845043743 25.1215355453477, 121.905517734165 25.1211851493127, 121.905857273971 25.1210859804412, 121.906936134322 25.1211454817738, 121.907363297303 25.1211785380571, 121.90783883558 25.1213900980589, 121.908238917959 25.1217477515849, 121.908540733727 25.1218165225744, 121.909511890591 25.1218470994689, 121.909979214195 25.1219908934107, 121.910338834312 25.1222602999957, 121.910605811176 25.1226755651174, 121.910863204254 25.1228838169455, 121.911042557942 25.1229652168692, 121.911928373484 25.1231255373724, 121.912265175066 25.1233594065953, 121.912475105591 25.1236238518204, 121.912686332107 25.1237505555639, 121.912989243442 25.1238948675976, 121.914121248972 25.1240751125257, 121.914421095675 25.1240633208014, 121.914843913216 25.1238999211937, 121.915169974615 25.1236833519171, 121.915425998582 25.1234498965102, 121.915995549224 25.1224859068936, 121.91683846592 25.1215541394488, 121.917664496899 25.1204922051391, 121.917923715461 25.1197476060063, 121.917931017392 25.1191550638321, 121.917876252907 25.1189790361055, 121.91755496793 25.1186517726159, 121.916604804118 25.1177914621412, 121.915335796571 25.1171028344194, 121.914257696067 25.1161864489906, 121.912736563636 25.1144379047349, 121.912056613653 25.1137906496228, 121.912478300186 25.113543538751, 121.912699183608 25.1131513835161, 121.913241256766 25.11263207414, 121.913667145878 25.1123559119731, 121.914198817751 25.112148881907, 121.914666597726 25.1118856515562, 121.915137216533 25.1117266852586, 121.915494454188 25.1116703559813, 121.91564414378 25.1116042382623, 121.915958583197 25.1115910147142, 121.916424537689 25.1116769677513, 121.916636750067 25.1116868854055, 121.917111375602 25.1116323382972, 121.917551773335 25.1116687030388, 121.918202101592 25.1117100265956, 121.918351791184 25.1117629207279, 121.918706391223 25.1121038393911, 121.919208855371 25.1124327733455, 121.919186949577 25.1124674849172, 121.918666230601 25.1121302863749, 121.918311630562 25.1117976324898, 121.918192974178 25.1117596148453, 121.917486055953 25.1117067207116, 121.917111375602 25.1116786206937, 121.91663857555 25.1117166383634, 121.916411759309 25.1117166383634, 121.915964059645 25.1116339912403, 121.915681109807 25.111643908898, 121.915485326774 25.1117100265956, 121.915154458011 25.111756722198, 121.914677550623 25.1119269750397, 121.914217072579 25.1121687171381, 121.91368174974 25.1123856647681, 121.913216251619 25.112693109893, 121.91274527705 25.1131724582762, 121.912481951152 25.1135881675073, 121.912131816635 25.1137859908361, 121.912780361469 25.1144311666067, 121.914274541387 25.1161561274139, 121.915354326424 25.1170910426951, 121.916621478658 25.1176998791167, 121.917506304509 25.118501031185, 121.917923715461 25.1189129223398, 121.918014989602 25.1191451467838, 121.918007687671 25.1197476060063, 121.917716040342 25.120519065393, 121.916900726835 25.1215634752567, 121.916058460816 25.1225270275825, 121.915485783145 25.1234982404098, 121.915204658789 25.1237411992056, 121.914860758537 25.1239504571549, 121.914415137466 25.1241283621388, 121.914121234731 25.1241333204608, 121.912977113369 25.123941185335, 121.912652177425 25.1238254909199, 121.912427643038 25.1236850046972, 121.912217256142 25.1234217991922, 121.911888824596 25.1231813409301, 121.911007873769 25.1230280228646, 121.910793835907 25.1229201783395, 121.910532791863 25.1227185377459, 121.91027311693 25.122309883965, 121.909926275193 25.1220536999069, 121.909521018005 25.1219280868822, 121.908518827933 25.1218793291602, 121.908182026352 25.1217933832978, 121.907805976889 25.1214396823814, 121.907348693441 25.1212611787264, 121.906830256318 25.1212148999585, 121.905894696369 25.1211520930311, 121.905485788215 25.1212512618491, 121.904996496911 25.121579092909, 121.904367804858 25.121979656884, 121.904122152543 25.1221636111976, 121.903895792672 25.1222198064058, 121.903566293022 25.1221999728059, 121.90271926899 25.1218099113529, 121.902043840344 25.1212901029475, 121.901195903571 25.1204198941015, 121.900380267304 25.119997906502, 121.899276408377 25.1194141464333, 121.898750324945 25.1192810952577, 121.898168202675 25.1191545987193, 121.897632650186 25.1191545987193, 121.896477030461 25.1195273657708, 121.895550597926 25.1199620609387, 121.895289553882 25.1199769364114, 121.894960966973 25.1198959477049, 121.894383658029 25.1196195113585, 121.894160492753 25.1195666206261, 121.893034626219 25.119480673137, 121.891907390573 25.1192740683487, 121.891576978181 25.1192988609417, 121.890677927889 25.1195967848747, 121.89032378422 25.1196331472468, 121.889829991116 25.1196083547216, 121.889618235108 25.1196562869325, 121.889416975626 25.1198302476434, 121.888653011062 25.1205186503079, 121.888399268949 25.1206657514548, 121.888116319111 25.1207351699121, 121.887759856474 25.1207990435053, 121.88740529355 25.1209719361394, 121.886188609245 25.1220375850853, 121.885398175181 25.1226404432463, 121.885085104876 25.1228974524695, 121.884752867001 25.1230395923866, 121.884285087027 25.1231271901601, 121.88347365991 25.1231519819713, 121.88081347506 25.1227565519816, 121.880168982063 25.1225488771159, 121.879724574553 25.1223499643255, 121.879150460204 25.1223433531329, 121.878591862458 25.1224921048794, 121.878167437701 25.1226912666565, 121.87790821914 25.1227276281077, 121.876950753396 25.122760683963, 121.876417712411 25.122856545893, 121.876069957932 25.1230185193279, 121.874912417958 25.1238138014706, 121.874258166226 25.1242324868591, 121.874005336854 25.1243250420916, 121.87345404104 25.1243217365488, 121.873017750645 25.1242093480401, 121.87171709413 25.1233631253602, 121.871231515698 25.1231945412356, 121.870869157357 25.1232011523822, 121.869944550304 25.1233432919459, 121.869521038288 25.1232837916835, 121.869224397329 25.1231077699044, 121.868600082202 25.1223466587293, 121.868410231988 25.1222673243926, 121.867989458196 25.1221516283926, 121.866637688162 25.1219466809236, 121.86627372346 25.1219374923169, 121.864727320383 25.1222541019981, 121.863880296351 25.122521855207, 121.863869343454 25.1225284663899, 121.863073749662 25.1229283557973, 121.862688256065 25.1233003195371, 121.862531264542 25.12366475814, 121.862329548689 25.1245151106528, 121.862011914677 25.1247233593456, 121.861730790322 25.1247993865577, 121.861394901482 25.1247597201921, 121.861087307625 25.1245275064183, 121.860590776296 25.123896147165, 121.860345248856 25.123730042945, 121.859918085874 25.1236374872617, 121.859235355297 25.1237002929116, 121.857921920402 25.1238597860615, 121.856045835163 25.1242776037862, 121.853887603353 25.1248258307943, 121.852915193221 25.1253416099575, 121.851647735924 25.1255009832854, 121.850209255456 25.1259472264346, 121.849437988961 25.1262381099894, 121.848734379443 25.1265755074692, 121.848078004255 25.1268281387091, 121.84763623741 25.1268545825066, 121.847299435829 25.1267983894301, 121.846367526845 25.126448008488, 121.846115610215 25.1264215646025, 121.845860042619 25.1264281755744, 121.84431750963 25.1268016949059, 121.843791770576 25.126824833234, 121.842921928008 25.1267653346672, 121.841923388902 25.1273884154438, 121.84158658732 25.1275371610479, 121.840513203417 25.1277586263896, 121.839408786307 25.127675990115, 121.837647195378 25.1275041064849, 121.836231077075 25.1272442146714, 121.835065506289 25.1272028963671, 121.834665269179 25.1270719172502, 121.83402635019 25.1265227950706, 121.833787211939 25.1263971866405, 121.83212876079 25.1260860573085, 121.831841247245 25.1259034285666, 121.831271696603 25.1249018579426, 121.830902949072 25.1241077024614, 121.831024968057 25.123426567691, 121.830829017017 25.1229614980921, 121.830328834722 25.122323519553, 121.830115320757 25.12215306147, 121.828962460826 25.1218334638276, 121.828260562679 25.1216210781895, 121.827877211285 25.1216078557251, 121.827018321615 25.121733469079, 121.826484367888 25.121647523114, 121.826111969391 25.1214359635579, 121.825947675936 25.121217792382, 121.825750523791 25.1210525109288, 121.825408740054 25.1209255383415, 121.823758922026 25.1209492099071, 121.822027451564 25.1210087113063, 121.821998243839 25.1204070847132, 121.821932526457 25.1201624664602, 121.8217791859 25.1198616514507, 121.821477981233 25.1196294283683, 121.820601749476 25.1192129132643, 121.820264947894 25.1189344093175, 121.819969219676 25.1183187232658, 121.820002078367 25.1178327836281, 121.820086050577 25.1173856843976, 121.820283202722 25.1169319720462, 121.82063004446 25.1164328038704, 121.820823545639 25.1160815667631, 121.820852753365 25.1157766094914, 121.820838149502 25.1154485109808, 121.820754177292 25.1151311554122, 121.820498609696 25.114803881619, 121.820294155619 25.1146352856867, 121.819976521607 25.1143898294282, 121.819219858975 25.113933626588, 121.818851111444 25.1138212285253, 121.818364620271 25.1136947805813, 121.818027429661 25.1136729562897, 121.816442386853 25.1136319697892, 121.815726797585 25.1133575854245, 121.815214749652 25.1130261745723, 121.814479992814 25.1125699666428, 121.813826469961 25.1121294599067, 121.813465024361 25.1118749074482, 121.81295388917 25.1116401897764, 121.811659621845 25.1114905983491, 121.810778826381 25.1114145628573, 121.810574372304 25.1113352214241, 121.81027499312 25.1111104204172, 121.810116556399 25.1109037565187, 121.809321457277 25.1074032989432, 121.807329576578 25.1078648098148, 121.805784305365 25.1082218559933)","wkt0":"LINESTRING (121.808163583823 25.1076752398589, 121.809385079949 25.1074301463492, 121.810170461424 25.1109037565187, 121.810545164579 25.1112757153154, 121.810767873484 25.11133191553, 121.811703433433 25.1114211746411, 121.812906426616 25.1115674602656, 121.813435816636 25.1117955663138, 121.813877583481 25.1120864835548, 121.814809492464 25.1126889775711, 121.815734099516 25.1132716335691, 121.816132054773 25.1134633722405, 121.81647889651 25.1135691589649, 121.818025080465 25.113608828963, 121.818357318339 25.1136286639572, 121.818869366272 25.1137485003121, 121.81927462346 25.1138708159186, 121.819983823539 25.1143104899261, 121.820542421284 25.1147377655948, 121.820827196605 25.1151410727861, 121.820947678472 25.11557826289, 121.820900215918 25.1161047071212, 121.820408309748 25.1168987217966, 121.820162720856 25.1173203962031, 121.820082399611 25.1177831978422, 121.820001390399 25.1183089593588, 121.820281022717 25.1189187599566, 121.820628036317 25.1191815469546, 121.821688978744 25.1196816667655, 121.821852205213 25.1198418174681, 121.822038252106 25.1202508977021, 121.822082216049 25.1208599577539, 121.824500980795 25.1207773168133, 121.825468486694 25.1208864028431, 121.825787033447 25.1210062320819, 121.826195941601 25.1213962961003, 121.826509924647 25.1215880220258, 121.827051180305 25.1216607455741, 121.827789588109 25.1215483546176, 121.828252228322 25.1215904277693, 121.830142273269 25.1221328470856, 121.830401854035 25.1222607131955, 121.830898385365 25.1229524077477, 121.831062678819 25.1233788268109, 121.830964324904 25.1241273330189, 121.831348366882 25.1248853303057, 121.831899662695 25.1258604570583, 121.832079861276 25.1260063059968, 121.833811855957 25.126333969191, 121.834073812743 25.1264632963567, 121.834679873042 25.127000849658, 121.8350855866 25.1271334815845, 121.836258459317 25.1271731471794, 121.837683705035 25.1274512191654, 121.839580381692 25.1276164919627, 121.840271326943 25.1276892119227, 121.840974689573 25.1275874146497, 121.841597540217 25.1274677464552, 121.842395067914 25.1269549736441, 121.84287811642 25.1267124470279, 121.8433427018 25.1266893086785, 121.843839233129 25.1267785565734, 121.844362233959 25.1267289744176, 121.845640071938 25.126398426198, 121.846082751524 25.1263554548638, 121.846378479742 25.1263885097376, 121.847317690657 25.1267620291904, 121.847650841273 25.1267983894301, 121.848070702323 25.1267587237135, 121.848553542531 25.1265637004196, 121.850019405242 25.1259373099376, 121.851647735924 25.1254414840598, 121.852160696598 25.1253447977791, 121.852825172348 25.1252985205579, 121.853954233476 25.1247225329626, 121.855875554152 25.1242597576045, 121.857889061711 25.1237870638221, 121.859264563022 25.1236407928231, 121.859903482011 25.1235581537632, 121.860414617203 25.123680459552, 121.860612088777 25.1238544388287, 121.861157877157 25.1245417279003, 121.861410556963 25.1247169192323, 121.86174904515 25.1247464980673, 121.862055726265 25.1246308044149, 121.86227843517 25.1244423888034, 121.862478286255 25.1235818996526, 121.862648095443 25.123270569399, 121.863119070012 25.122787955037, 121.863814578969 25.1224557433581, 121.863116331788 25.1213442325428, 121.862868066123 25.1211756456327, 121.862703772669 25.1211591174917, 121.862532177283 25.1212814256819, 121.862377923984 25.1212285356687, 121.861979968728 25.1207426076016, 121.861752696116 25.1200740401469, 121.861759998047 25.1195988509189, 121.861668723906 25.1195856282357, 121.861630388766 25.1198038023256, 121.861697931631 25.1200740401469, 121.861686978734 25.1207087247902, 121.861803809635 25.1209665644848, 121.861540940108 25.1217640459943, 121.861537289142 25.1219524657359, 121.861481611916 25.1220160986532, 121.861508081417 25.1219499865307, 121.861522685279 25.1217673516063, 121.86177460191 25.1209442514558, 121.861668723906 25.1207260794021, 121.861683327768 25.1200740401469, 121.861608482972 25.1198021494931, 121.861628563283 25.1195616621187, 121.861730790322 25.1195385224152, 121.861789205772 25.1195616621187, 121.861811111566 25.1200674288312, 121.862015565643 25.120695502227, 121.862407131709 25.1211888681438, 121.862527613576 25.1212219244155, 121.862684605099 25.1211194499443, 121.862852549519 25.1211260612031, 121.863089862287 25.1212450638003, 121.863460435301 25.1217177674169, 121.863836484763 25.1224524377647, 121.864687159761 25.1222045180062, 121.866298148356 25.1218805687636, 121.866626735265 25.1218772631546, 121.868044222681 25.122095433153, 121.868406581022 25.1221879900044, 121.868585478339 25.1222607131955, 121.868855649798 25.1225094592381, 121.869290114711 25.1230714085663, 121.869561198911 25.1232176802469, 121.869899737447 25.123251546599, 121.870099488867 25.1231070835181, 121.87028140534 25.1229679709217, 121.870406249977 25.1226879622341, 121.870372363576 25.1223758506397, 121.87032599271 25.1223366137535, 121.870268920876 25.1223348302587, 121.870015664611 25.1227057971824, 121.869839098623 25.1228449097788, 121.869717820975 25.1229376515097, 121.869617499391 25.1229590534476, 121.869512273196 25.1229537029631, 121.869273284889 25.1228092398823, 121.868830532299 25.1221118934055, 121.868753842021 25.1218916317946, 121.868736007073 25.1215732779682, 121.868798429392 25.1211719916325, 121.868782377939 25.1209651062327, 121.86871282164 25.1208331276156, 121.868626322141 25.1205825465926, 121.868691419703 25.1205968145513, 121.86876810998 25.120829560626, 121.868832315794 25.1209758072017, 121.868839449773 25.1211505896946, 121.868778810949 25.1215643604941, 121.868787728423 25.121896982279, 121.86886798569 25.1221101099107, 121.869326789734 25.1227985389133, 121.869503801596 25.1229100073399, 121.869592976337 25.1229171413192, 121.869708903501 25.1229135743295, 121.869978211219 25.1227013384453, 121.870213632536 25.1223214540475, 121.870267137381 25.1222911346355, 121.870333126689 25.1222929181303, 121.870400899493 25.1223589074388, 121.870443703369 25.1226763695178, 121.870559630532 25.1231659388474, 121.870227900495 25.1232319281559, 121.869999613157 25.1232604640731, 121.869924706374 25.1232461961145, 121.870004963642 25.123251546599, 121.870227900495 25.1232283611662, 121.870792487078 25.1231251241755, 121.871212348128 25.1231119018739, 121.871728047027 25.1233069306779, 121.873065213198 25.1241597648416, 121.873468644903 25.1242622367629, 121.874019940717 25.1242490145844, 121.874269119123 25.1241498481994, 121.874696282104 25.1238292096707, 121.876025672326 25.1229816853903, 121.876257069922 25.1228466291451, 121.876885036015 25.1226846554824, 121.878020950884 25.1226121236446, 121.878189343495 25.1226086269544, 121.878467729626 25.1224557433581, 121.879059186062 25.1222772411875, 121.879702668759 25.1222904635794, 121.880243924417 25.1224954104717, 121.88103983493 25.122703662607, 121.882224116915 25.1228739001999, 121.883483243695 25.1230842176752, 121.884277785096 25.1230594258502, 121.884736437656 25.1229784391867, 121.885052702556 25.1228329936155, 121.885423731941 25.1225478867377, 121.887336837944 25.1209471438858, 121.887660895688 25.1207568785308, 121.888247753875 25.120652528887, 121.888539831127 25.120516997485, 121.889307446656 25.1198352061398, 121.889617272904 25.1195721393224, 121.889847333202 25.1195389356242, 121.8903365626 25.1195637281635, 121.890660129431 25.1195389356242, 121.89142728859 25.1192691098295, 121.891677379737 25.1192079547427, 121.891867229951 25.1192096075833, 121.893107645532 25.1194261295068, 121.894143607037 25.1194955486683, 121.894421993168 25.1195517451035, 121.894754231043 25.1197186814202, 121.895012080492 25.119839751428, 121.895285902916 25.1199091703545, 121.895537819547 25.1199009061987, 121.896018834272 25.1196876907846, 121.896347421181 25.1194910033673, 121.897102918919 25.1192178470049, 121.897663137928 25.1191001068461, 121.898095777359 25.1190852312667, 121.899269106446 25.1193315045149, 121.900231135896 25.1198802458066, 121.900537817011 25.1200124722555, 121.901224344596 25.1203352279857, 121.901946176212 25.1210731154848, 121.902621438046 25.1216423399398, 121.903318940099 25.1220181646565, 121.90360371542 25.122120638374, 121.90385563205 25.1221536943935, 121.904081991921 25.1221239439763, 121.904315653723 25.1219355244991, 121.904845043743 25.1215355453477, 121.905517734165 25.1211851493127, 121.905857273971 25.1210859804412, 121.906936134322 25.1211454817738, 121.907363297303 25.1211785380571, 121.90783883558 25.1213900980589, 121.908238917959 25.1217477515849, 121.908540733727 25.1218165225744, 121.909511890591 25.1218470994689, 121.909979214195 25.1219908934107, 121.910338834312 25.1222602999957, 121.910605811176 25.1226755651174, 121.910863204254 25.1228838169455, 121.911042557942 25.1229652168692, 121.911928373484 25.1231255373724, 121.912265175066 25.1233594065953, 121.912475105591 25.1236238518204, 121.912686332107 25.1237505555639, 121.912989243442 25.1238948675976, 121.914121248972 25.1240751125257, 121.914421095675 25.1240633208014, 121.914843913216 25.1238999211937, 121.915169974615 25.1236833519171, 121.915425998582 25.1234498965102, 121.915995549224 25.1224859068936, 121.91683846592 25.1215541394488, 121.917664496899 25.1204922051391, 121.917923715461 25.1197476060063, 121.917931017392 25.1191550638321, 121.917876252907 25.1189790361055, 121.91755496793 25.1186517726159, 121.916604804118 25.1177914621412, 121.915335796571 25.1171028344194, 121.914257696067 25.1161864489906, 121.912736563636 25.1144379047349, 121.912056613653 25.1137906496228, 121.912478300186 25.113543538751, 121.912699183608 25.1131513835161, 121.913241256766 25.11263207414, 121.913667145878 25.1123559119731, 121.914198817751 25.112148881907, 121.914666597726 25.1118856515562, 121.915137216533 25.1117266852586, 121.915494454188 25.1116703559813, 121.91564414378 25.1116042382623, 121.915958583197 25.1115910147142, 121.916424537689 25.1116769677513, 121.916636750067 25.1116868854055, 121.917111375602 25.1116323382972, 121.917551773335 25.1116687030388, 121.918202101592 25.1117100265956, 121.918351791184 25.1117629207279, 121.918706391223 25.1121038393911, 121.919208855371 25.1124327733455)","wkt1":"LINESTRING (121.919017890648 25.1123390622522, 121.919194871264 25.1124517668701, 121.919186949577 25.1124674849172, 121.918666230601 25.1121302863749, 121.918311630562 25.1117976324898, 121.918192974178 25.1117596148453, 121.917486055953 25.1117067207116, 121.917111375602 25.1116786206937, 121.91663857555 25.1117166383634, 121.916411759309 25.1117166383634, 121.915964059645 25.1116339912403, 121.915681109807 25.111643908898, 121.915485326774 25.1117100265956, 121.915154458011 25.111756722198, 121.914677550623 25.1119269750397, 121.914217072579 25.1121687171381, 121.91368174974 25.1123856647681, 121.913216251619 25.112693109893, 121.91274527705 25.1131724582762, 121.912481951152 25.1135881675073, 121.912131816635 25.1137859908361, 121.912780361469 25.1144311666067, 121.914274541387 25.1161561274139, 121.915354326424 25.1170910426951, 121.916621478658 25.1176998791167, 121.917506304509 25.118501031185, 121.917923715461 25.1189129223398, 121.918014989602 25.1191451467838, 121.918007687671 25.1197476060063, 121.917716040342 25.120519065393, 121.916900726835 25.1215634752567, 121.916058460816 25.1225270275825, 121.915485783145 25.1234982404098, 121.915204658789 25.1237411992056, 121.914860758537 25.1239504571549, 121.914415137466 25.1241283621388, 121.914121234731 25.1241333204608, 121.912977113369 25.123941185335, 121.912652177425 25.1238254909199, 121.912427643038 25.1236850046972, 121.912217256142 25.1234217991922, 121.911888824596 25.1231813409301, 121.911007873769 25.1230280228646, 121.910793835907 25.1229201783395, 121.910532791863 25.1227185377459, 121.91027311693 25.122309883965, 121.909926275193 25.1220536999069, 121.909521018005 25.1219280868822, 121.908518827933 25.1218793291602, 121.908182026352 25.1217933832978, 121.907805976889 25.1214396823814, 121.907348693441 25.1212611787264, 121.906830256318 25.1212148999585, 121.905894696369 25.1211520930311, 121.905485788215 25.1212512618491, 121.904996496911 25.121579092909, 121.904367804858 25.121979656884, 121.904122152543 25.1221636111976, 121.903895792672 25.1222198064058, 121.903566293022 25.1221999728059, 121.90271926899 25.1218099113529, 121.902043840344 25.1212901029475, 121.901195903571 25.1204198941015, 121.900380267304 25.119997906502, 121.899276408377 25.1194141464333, 121.898750324945 25.1192810952577, 121.898168202675 25.1191545987193, 121.897632650186 25.1191545987193, 121.896477030461 25.1195273657708, 121.895550597926 25.1199620609387, 121.895289553882 25.1199769364114, 121.894960966973 25.1198959477049, 121.894383658029 25.1196195113585, 121.894160492753 25.1195666206261, 121.893034626219 25.119480673137, 121.891907390573 25.1192740683487, 121.891576978181 25.1192988609417, 121.890677927889 25.1195967848747, 121.89032378422 25.1196331472468, 121.889829991116 25.1196083547216, 121.889618235108 25.1196562869325, 121.889416975626 25.1198302476434, 121.888653011062 25.1205186503079, 121.888399268949 25.1206657514548, 121.888116319111 25.1207351699121, 121.887759856474 25.1207990435053, 121.88740529355 25.1209719361394, 121.886188609245 25.1220375850853, 121.885398175181 25.1226404432463, 121.885085104876 25.1228974524695, 121.884752867001 25.1230395923866, 121.884285087027 25.1231271901601, 121.88347365991 25.1231519819713, 121.88081347506 25.1227565519816, 121.880168982063 25.1225488771159, 121.879724574553 25.1223499643255, 121.879150460204 25.1223433531329, 121.878591862458 25.1224921048794, 121.878167437701 25.1226912666565, 121.87790821914 25.1227276281077, 121.876950753396 25.122760683963, 121.876417712411 25.122856545893, 121.876069957932 25.1230185193279, 121.874912417958 25.1238138014706, 121.874258166226 25.1242324868591, 121.874005336854 25.1243250420916, 121.87345404104 25.1243217365488, 121.873017750645 25.1242093480401, 121.87171709413 25.1233631253602, 121.871231515698 25.1231945412356, 121.870869157357 25.1232011523822, 121.869944550304 25.1233432919459, 121.869521038288 25.1232837916835, 121.869224397329 25.1231077699044, 121.868600082202 25.1223466587293, 121.868410231988 25.1222673243926, 121.867989458196 25.1221516283926, 121.866637688162 25.1219466809236, 121.86627372346 25.1219374923169, 121.864727320383 25.1222541019981, 121.86387355337 25.1225236585188, 121.863221639471 25.1213777555998, 121.86298917405 25.1211857189474, 121.862749128234 25.1211023346115, 121.862516662813 25.1212008797358, 121.862387796112 25.1211756117552, 121.861978454827 25.1206197161826, 121.861811686155 25.1200802447973, 121.861801578963 25.119669640113, 121.861756096598 25.1195331930179, 121.861670185464 25.1195938361713, 121.861614595907 25.1198136676023, 121.861680292656 25.1200486598216, 121.861656288075 25.1206803593359, 121.861781364579 25.1209330391417, 121.861561533148 25.1216759177705, 121.861796525367 25.1209355659397, 121.861677765858 25.1206803593359, 121.861703033839 25.1200461330235, 121.86164997108 25.1198136676023, 121.861697980243 25.1196089969596, 121.861751043002 25.1195736217868, 121.861768730588 25.1196595329208, 121.861776310982 25.1200739278022, 121.861955713644 25.1206348769709, 121.862375162122 25.1212160405241, 121.862511609217 25.1212463621008, 121.862759235427 25.1211503437746, 121.862979066858 25.1212210941202, 121.863206478683 25.1214143941716, 121.863869343454 25.1225284663899, 121.863217849274 25.122796552709, 121.862688256065 25.1233003195371, 121.862531264542 25.12366475814, 121.862329548689 25.1245151106528, 121.862011914677 25.1247233593456, 121.861730790322 25.1247993865577, 121.861394901482 25.1247597201921, 121.861087307625 25.1245275064183, 121.860590776296 25.123896147165, 121.860345248856 25.123730042945, 121.859918085874 25.1236374872617, 121.859235355297 25.1237002929116, 121.857921920402 25.1238597860615, 121.856045835163 25.1242776037862, 121.853887603353 25.1248258307943, 121.852915193221 25.1253416099575, 121.851647735924 25.1255009832854, 121.850209255456 25.1259472264346, 121.849437988961 25.1262381099894, 121.848734379443 25.1265755074692, 121.848078004255 25.1268281387091, 121.84763623741 25.1268545825066, 121.847299435829 25.1267983894301, 121.846367526845 25.126448008488, 121.846115610215 25.1264215646025, 121.845860042619 25.1264281755744, 121.84431750963 25.1268016949059, 121.843791770576 25.126824833234, 121.842921928008 25.1267653346672, 121.841923388902 25.1273884154438, 121.84158658732 25.1275371610479, 121.840513203417 25.1277586263896, 121.839408786307 25.127675990115, 121.837647195378 25.1275041064849, 121.836231077075 25.1272442146714, 121.835065506289 25.1272028963671, 121.834665269179 25.1270719172502, 121.83402635019 25.1265227950706, 121.833787211939 25.1263971866405, 121.83212876079 25.1260860573085, 121.831841247245 25.1259034285666, 121.831271696603 25.1249018579426, 121.830902949072 25.1241077024614, 121.831024968057 25.123426567691, 121.830829017017 25.1229614980921, 121.830328834722 25.122323519553, 121.830115320757 25.12215306147, 121.828962460826 25.1218334638276, 121.828260562679 25.1216210781895, 121.827877211285 25.1216078557251, 121.827018321615 25.121733469079, 121.826484367888 25.121647523114, 121.826111969391 25.1214359635579, 121.825947675936 25.121217792382, 121.825750523791 25.1210525109288, 121.825408740054 25.1209255383415, 121.823758922026 25.1209492099071, 121.822027451564 25.1210087113063, 121.821998243839 25.1204070847132, 121.821932526457 25.1201624664602, 121.8217791859 25.1198616514507, 121.821477981233 25.1196294283683, 121.820601749476 25.1192129132643, 121.820264947894 25.1189344093175, 121.819969219676 25.1183187232658, 121.820002078367 25.1178327836281, 121.820086050577 25.1173856843976, 121.820283202722 25.1169319720462, 121.82063004446 25.1164328038704, 121.820823545639 25.1160815667631, 121.820852753365 25.1157766094914, 121.820838149502 25.1154485109808, 121.820754177292 25.1151311554122, 121.820498609696 25.114803881619, 121.820294155619 25.1146352856867, 121.819976521607 25.1143898294282, 121.819219858975 25.113933626588, 121.818851111444 25.1138212285253, 121.818364620271 25.1136947805813, 121.818027429661 25.1136729562897, 121.816442386853 25.1136319697892, 121.815726797585 25.1133575854245, 121.815214749652 25.1130261745723, 121.814479992814 25.1125699666428, 121.813826469961 25.1121294599067, 121.813465024361 25.1118749074482, 121.81295388917 25.1116401897764, 121.811659621845 25.1114905983491, 121.810778826381 25.1114145628573, 121.810574372304 25.1113352214241, 121.81027499312 25.1111104204172, 121.810116556399 25.1109037565187, 121.809321457277 25.1074032989432, 121.807329576578 25.1078648098148, 121.805784305365 25.1082218559933)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400088600'=='0100020200' || '0400088600'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
