
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492547</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152005000">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152005000">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152005000" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0152005000" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152005000" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152005000',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="Aoh8Btm8f-www7f_Yak8x1eVI8NOFrUSA5zQ9f-qzOhz9EmO80yl653zpGgLtGStBeiZrvRLIlggIrYC_eDUb4YTAy01" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">通勤26 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0152005000" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0152005000" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">雙溪 - 士林市場</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0920 - 1050 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 通勤26去程半週三班表:0920<br/>通勤26返程半週三班表:1050<br/>僅周三行駛:大崙山:0920/士林市場(銘傳會館):1050<br>
[假日]<br /> 例假日停駛<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">三段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">首都客運士林站:02-2834-5022</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">本路線自111年6月29日起實施</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 士林市場</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 雙溪</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">大崙尾山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400040" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.106839" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.5698963" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">大崙尾山步道口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106015" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5677603" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">雙溪社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10586" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.566212" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">雙溪站一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10655" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56714" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">雙溪站二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114402000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106714" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5681927" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">翠山街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107544" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5686968" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">明溪街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10771" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5661627" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">雙溪國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114402100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107052" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5626717" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">中社路17巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108548" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.561631" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中央站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107506" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5614042" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">中社路一段61巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107004" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.560788" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">翠山派出所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401270" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107994" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5605355" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">社區發展協會</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10937" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.560057" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">中社路11巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110758" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5599722" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">翠山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114303760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11139" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56215" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">福林國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0962" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.52976" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">陽明戲院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1116301240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.087704" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5259209" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">捷運劍潭站(北藝中心)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114100440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084849" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.524748" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">士林市場(銘傳會館)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1116200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.088164" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.523626" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">陽明戲院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1116301200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.087439" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5260219" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">福林國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114303520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09592" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.52906" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">翠山莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.1111" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56179" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">中社路11巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11119" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56021" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">社區發展協會</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109359" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5598701" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">翠山派出所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107977" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5603366" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">中社路一段61巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106898" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5607175" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">中央站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10754" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56162" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中社路17巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107687" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5622677" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">雙溪國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114402140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106783" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5627429" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">明溪街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107544" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5662395" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">翠山街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.1073" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56843" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">雙溪站二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114402040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10687" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56821" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">雙溪站一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106628" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5668822" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">雙溪站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106289" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5661456" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">雙溪社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114401720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10558" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56627" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">大崙尾山步道口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.105968" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5678312" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">大崙尾山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114400020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10657" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.569807" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0152005000";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 18;
        var existBackNum = 19;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0152005000',
                        url: './StopStatusRecent3OfRoute?routeid=0152005000&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0152005000',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0152005000',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0152005000');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0152005000","Name":"通勤26","BeginStop":"雙溪","GoDirStops":[{"UniStopId":"1114400040","Name":"大崙尾山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5698963,"Latitude":25.106839,"PublicId":"1114400040"},{"UniStopId":"1114400140","Name":"大崙尾山步道口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5677603,"Latitude":25.106015,"PublicId":"1114400140"},{"UniStopId":"1114401760","Name":"雙溪社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.566212,"Latitude":25.10586,"PublicId":"1114401760"},{"UniStopId":"1114401920","Name":"雙溪站一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56714,"Latitude":25.10655,"PublicId":"1114401920"},{"UniStopId":"1114402000","Name":"雙溪站二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5681927,"Latitude":25.106714,"PublicId":"1114402000"},{"UniStopId":"1114401440","Name":"翠山街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5686968,"Latitude":25.107544,"PublicId":"1114401440"},{"UniStopId":"1114400960","Name":"明溪街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5661627,"Latitude":25.10771,"PublicId":"1114400960"},{"UniStopId":"1114402100","Name":"雙溪國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5626717,"Latitude":25.107052,"PublicId":"1114402100"},{"UniStopId":"1114400500","Name":"中社路17巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.561631,"Latitude":25.108548,"PublicId":"1114400500"},{"UniStopId":"1114400340","Name":"中央站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5614042,"Latitude":25.107506,"PublicId":"1114400340"},{"UniStopId":"1114400600","Name":"中社路一段61巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.560788,"Latitude":25.107004,"PublicId":"1114400600"},{"UniStopId":"1114401270","Name":"翠山派出所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5605355,"Latitude":25.107994,"PublicId":"1114401270"},{"UniStopId":"1114401100","Name":"社區發展協會","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.560057,"Latitude":25.10937,"PublicId":"1114401100"},{"UniStopId":"1114400420","Name":"中社路11巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5599722,"Latitude":25.110758,"PublicId":"1114400420"},{"UniStopId":"1114303760","Name":"翠山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56215,"Latitude":25.11139,"PublicId":"1114303760"},{"UniStopId":"1114500860","Name":"福林國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.52976,"Latitude":25.0962,"PublicId":"1114500860"},{"UniStopId":"1116301240","Name":"陽明戲院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5259209,"Latitude":25.087704,"PublicId":"1116301240"},{"UniStopId":"1114100440","Name":"捷運劍潭站(北藝中心)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.524748,"Latitude":25.084849,"PublicId":"1114100440"}],"LastStop":"士林市場","BackDirStops":[{"UniStopId":"1116200140","Name":"士林市場(銘傳會館)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.523626,"Latitude":25.088164,"PublicId":"1116200140"},{"UniStopId":"1116301200","Name":"陽明戲院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5260219,"Latitude":25.087439,"PublicId":"1116301200"},{"UniStopId":"1114303520","Name":"福林國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.52906,"Latitude":25.09592,"PublicId":"1114303520"},{"UniStopId":"1114401320","Name":"翠山莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56179,"Latitude":25.1111,"PublicId":"1114401320"},{"UniStopId":"1114400460","Name":"中社路11巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56021,"Latitude":25.11119,"PublicId":"1114400460"},{"UniStopId":"1114401140","Name":"社區發展協會","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5598701,"Latitude":25.109359,"PublicId":"1114401140"},{"UniStopId":"1114401240","Name":"翠山派出所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5603366,"Latitude":25.107977,"PublicId":"1114401240"},{"UniStopId":"1114400640","Name":"中社路一段61巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5607175,"Latitude":25.106898,"PublicId":"1114400640"},{"UniStopId":"1114400300","Name":"中央站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56162,"Latitude":25.10754,"PublicId":"1114400300"},{"UniStopId":"1114400540","Name":"中社路17巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5622677,"Latitude":25.107687,"PublicId":"1114400540"},{"UniStopId":"1114402140","Name":"雙溪國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5627429,"Latitude":25.106783,"PublicId":"1114402140"},{"UniStopId":"1114400920","Name":"明溪街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5662395,"Latitude":25.107544,"PublicId":"1114400920"},{"UniStopId":"1114401400","Name":"翠山街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56843,"Latitude":25.1073,"PublicId":"1114401400"},{"UniStopId":"1114402040","Name":"雙溪站二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56821,"Latitude":25.10687,"PublicId":"1114402040"},{"UniStopId":"1114401960","Name":"雙溪站一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5668822,"Latitude":25.106628,"PublicId":"1114401960"},{"UniStopId":"1114401860","Name":"雙溪站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5661456,"Latitude":25.106289,"PublicId":"1114401860"},{"UniStopId":"1114401720","Name":"雙溪社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56627,"Latitude":25.10558,"PublicId":"1114401720"},{"UniStopId":"1114400100","Name":"大崙尾山步道口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5678312,"Latitude":25.105968,"PublicId":"1114400100"},{"UniStopId":"1114400020","Name":"大崙尾山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.569807,"Latitude":25.10657,"PublicId":"1114400020"}],"RouteMapUrl":"../MapOverview?nid=0152005000","RouteTracks":null,"StopDirection":null,"TicketPrice":"三段票","BusTimeDesc":"0920 - 1050","HeadwayDesc":"通勤26去程半週三班表:0920;通勤26返程半週三班表:1050;僅周三行駛:大崙山:0920/士林市場(銘傳會館):1050","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"例假日停駛","RouteNote":"本路線自111年6月29日起實施","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"首都客運士林站:02-2834-5022","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.566092022838 25.1057595737363, 121.566044662113 25.1057647670852, 121.565998003806 25.1057887212154, 121.565937999671 25.1058508179008, 121.56592062116 25.1059005972012, 121.565909092888 25.1059576036195, 121.565926898018 25.1060191378774, 121.565979110384 25.1061085900222, 121.566041458951 25.1061611869642, 121.566120320904 25.1062144587784, 121.566560946711 25.1064742623314, 121.566730049483 25.106558139342, 121.56692808356 25.1066156158878, 121.567159190317 25.106648565561, 121.567494688316 25.1066542318555, 121.567776315955 25.1066391956935, 121.567849681584 25.1066406208219, 121.567936927679 25.1066588360254, 121.569027393311 25.1071928698295, 121.569149034257 25.1072961309809, 121.56919919835 25.1074295469925, 121.569188045676 25.1075365738155, 121.569104022838 25.1076517047182, 121.56902912103 25.1076828481481, 121.568966870345 25.1076845553041, 121.568891019032 25.1076377130902, 121.568210034257 25.107224721406, 121.5680863341 25.1071867517968, 121.56790208374 25.1071588606984, 121.567748113869 25.1071612106852, 121.56762704187 25.107182, 121.567189011419 25.1073392869033, 121.567053923693 25.1073779981849, 121.566787797232 25.107428872893, 121.566624992387 25.1074771476257, 121.5660637602 25.1077146157724, 121.565822488101 25.1077985273114, 121.565657927679 25.107820590636, 121.565512141657 25.1077953564634, 121.565086038063 25.107602721455, 121.564792955525 25.1075195530664, 121.564607072321 25.1074454512171, 121.564568957753 25.1074071992276, 121.564532 25.107346, 121.564450057095 25.1068927626883, 121.564433963808 25.1068307818321, 121.564412872762 25.1067709346637, 121.564163543494 25.1064490037121, 121.563989942905 25.1062732787216, 121.563831539105 25.1061959213204, 121.563683954324 25.1061871312241, 121.563494897229 25.106224557461, 121.563270935292 25.1063298524759, 121.563121014266 25.1064673112204, 121.562671475793 25.1070480398652, 121.562513492602 25.1073273605743, 121.562429984709 25.1075365011188, 121.562270171286 25.1080345032295, 121.562201943276 25.1081741980963, 121.562129125609 25.1082763838526, 121.561586403473 25.1085903411239, 121.561481003806 25.1086104176165, 121.561415202115 25.1085908747025, 121.561340923873 25.1085498352657, 121.561308300136 25.1085098973414, 121.561294360822 25.108445178018, 121.561298808444 25.1083623515137, 121.561330942905 25.1082941392238, 121.561672988581 25.1080487046484, 121.561734473575 25.1079670392055, 121.561776939098 25.1078499831976, 121.561761898405 25.1077801282553, 121.561716764162 25.1077007967329, 121.561444011419 25.1073994511929, 121.561389097754 25.1072988436658, 121.561316954324 25.1071381558896, 121.561304090599 25.1070662262396, 121.561309 25.1070052373265, 121.56136992721 25.1068019882766, 121.561539878197 25.1063781884408, 121.56160991626 25.1062563195226, 121.56194088581 25.105863187999, 121.561961795938 25.1058132145902, 121.561972923873 25.1057557292905, 121.561950580997 25.1057070325991, 121.561903942905 25.1056685737325, 121.561853703456 25.1056481876658, 121.561787203346 25.1056376295823, 121.561729357807 25.1056407930401, 121.561664045676 25.1056609919397, 121.56163292081 25.1057077314583, 121.561605250576 25.1057492832339, 121.561556022838 25.1059262302076, 121.561473072321 25.106103508788, 121.561068384441 25.1066732216811, 121.56095531292 25.1067996276016, 121.560901289191 25.1068508839871, 121.560651792522 25.1070289318744, 121.560578874349 25.1071075097088, 121.560537797978 25.1071663765363, 121.560507045676 25.1072389584953, 121.560505019032 25.1075847130914, 121.560509011419 25.1079147046725, 121.560476969549 25.1080423122301, 121.560411317481 25.1081650397805, 121.560265300962 25.1083175198302, 121.559945501517 25.1086062121407, 121.559886007613 25.1086834432022, 121.559876819554 25.1087167425425, 121.559882951637 25.1087727440747, 121.560035034257 25.1092939299436, 121.560045826735 25.1094290814069, 121.560013968469 25.1095976847618, 121.559881456491 25.1099307989607, 121.559800996194 25.1101492869655, 121.559772525307 25.11028925372, 121.559764253801 25.110370863522, 121.559780973356 25.1104897659514, 121.559824737614 25.1106466303395, 121.559889495608 25.110802440008, 121.559981855359 25.1109467477677, 121.560053951956 25.1110106159869, 121.560129920067 25.111052, 121.560275098965 25.1111205828851, 121.5603709051 25.1111349037029, 121.560454810588 25.1111336536162, 121.560564106437 25.1111124595319, 121.560668954324 25.1110782780835, 121.560969912454 25.1109211479309, 121.561227805876 25.1108093047112, 121.561473110384 25.1107624171905, 121.561687279791 25.1107526180442, 121.561900171286 25.1107824348994, 121.562569992387 25.1109842869843, 121.562850034257 25.1111054438472, 121.562968054376 25.1112120485081, 121.563025 25.111329, 121.56302 25.1114468430648, 121.562999580132 25.1115029071788, 121.562947015225 25.1115581390094, 121.562879984003 25.1115948907747, 121.562817969549 25.1116121390059, 121.562731871127 25.1116049238764, 121.562648655855 25.1115770991596, 121.562229224574 25.1112957666895, 121.562056977162 25.1112051479566, 121.561901240074 25.1111635014003, 121.561734011419 25.1111584260239, 121.561509897229 25.1111855650562, 121.561307783038 25.1112291479597, 121.56105484394 25.1113360178953, 121.560905734314 25.1114421481482, 121.560656977162 25.1116781300057, 121.5605490998 25.1117570306732, 121.560412878197 25.1118229999984, 121.560306558019 25.1118543824349, 121.560140782255 25.1118476213903, 121.559939098965 25.111797870025, 121.559592003806 25.1116705650026, 121.559494403452 25.1116538149261, 121.559365030451 25.1116718609991, 121.55922032172 25.1117491466189, 121.558606988581 25.1121394532008, 121.558550887646 25.1121136663269, 121.558503077157 25.1120589580404, 121.558363730559 25.1119028656091, 121.557205019032 25.1103245711032, 121.557092422664 25.1101364922317, 121.557035022838 25.1098767130402, 121.557032087546 25.109574635126, 121.557401980968 25.1080591608477, 121.557421072321 25.1076649110289, 121.557305045676 25.1057953939468, 121.557263064708 25.1055308766842, 121.55709419793 25.1050599884479, 121.556892946711 25.1047103631004, 121.556709431531 25.1045325001382, 121.556208221485 25.1042163438498, 121.555731011419 25.1039735580517, 121.554411262638 25.1034105967855, 121.553727030451 25.1032058527543, 121.553590665408 25.1031662984569, 121.55343895813 25.1030696978767, 121.553165040765 25.1027754280601, 121.55238530479 25.1016222128755, 121.552112209349 25.101376610561, 121.55196904187 25.1012559852383, 121.550376495894 25.1002886959435, 121.549972064708 25.100069, 121.549849162937 25.1002325951602, 121.549733354159 25.1002401554415, 121.54939095813 25.1001242651449, 121.54934525307 25.1000365503053, 121.549368007613 25.0997284193929, 121.548727384441 25.0993433292695, 121.547473980303 25.0987195982248, 121.545268728045 25.0976789465358, 121.544395924392 25.097218691307, 121.544237909013 25.0971790457867, 121.544025137028 25.097159279936, 121.539893798264 25.097473573369, 121.538050769116 25.0979794731766, 121.537745182705 25.0981638187495, 121.536920206219 25.0989879073966, 121.536508927679 25.0993392796465, 121.536250992892 25.099109451417, 121.535588561453 25.0987152175868, 121.532951247516 25.0970026797255, 121.532512469735 25.096745159953, 121.532193988581 25.0966014200131, 121.529509533455 25.09612684605, 121.52718759379 25.0956611726502, 121.524602841573 25.0950733174466, 121.524958383741 25.0936551187176, 121.526084719614 25.0921779133077, 121.526609890678 25.0914307011168, 121.52705228284 25.0901329006774, 121.527067210183 25.0900898862226, 121.527053639872 25.0898846456159, 121.526923364879 25.0895872304732, 121.525087301702 25.085863335066, 121.52344732953 25.0886783892252, 121.525079159515 25.0858805414439, 121.525088658733 25.0858602624982, 121.524780612657 25.084622011417, 121.525090015764 25.0858584189575, 121.52593001806 25.0873467617656, 121.526533896932 25.0886482787506, 121.526810731292 25.0892209909994, 121.52710927815 25.0898993934554, 121.527126919555 25.0900136891513, 121.527103850025 25.090150106455, 121.5267632352 25.0911922804773, 121.526653315675 25.0914847758364, 121.526476901623 25.0917109062231, 121.524985524364 25.0937313135213, 121.524673407194 25.0949774605116, 121.529529141783 25.0960364873744, 121.532239912454 25.0965279867119, 121.532526926442 25.0966672745011, 121.532968536401 25.0969549396069, 121.535644525276 25.0987052448769, 121.536061561926 25.0989602753635, 121.536404289427 25.0989520500992, 121.536770587993 25.098884758446, 121.537610501496 25.0980536768366, 121.537824 25.097912, 121.539897779232 25.0972968803463, 121.54405315606 25.0970053001145, 121.544250140188 25.097036792646, 121.544408498099 25.0970808510687, 121.54555390268 25.0976224950223, 121.546541556639 25.098093480115, 121.547574715011 25.0985745088846, 121.548769392054 25.0992112247617, 121.549148308314 25.0994230924489, 121.550424503506 25.10021442334, 121.551988064708 25.1011704338334, 121.552179178898 25.1012969120944, 121.552473361373 25.101586672379, 121.553314318973 25.1027703909859, 121.553475965743 25.1029705812587, 121.553608381621 25.1030690284769, 121.553738022838 25.1031234417213, 121.554439255025 25.1033398912711, 121.55547135399 25.1037487753821, 121.556285399967 25.1041579410491, 121.556746152254 25.1044423025918, 121.556989796471 25.1046845128234, 121.557190973356 25.1050538605576, 121.557359046304 25.105537860389, 121.557404980968 25.1057586808388, 121.557515034257 25.1076776325329, 121.557504912454 25.1081365786661, 121.557172984775 25.1095312263734, 121.557157961937 25.1098297304672, 121.557200819547 25.1100584435373, 121.557287873929 25.110262878468, 121.558410273035 25.1118574128299, 121.55854394981 25.1119714255247, 121.558619582837 25.1120303938023, 121.558682272586 25.1120568576142, 121.559208677152 25.1117191659181, 121.559351022838 25.1116461390043, 121.559491567907 25.1116263668809, 121.559606 25.1116411300152, 121.559931129416 25.1117720090128, 121.560137980025 25.111820534038, 121.560297522559 25.1118298430856, 121.560411859165 25.1117967129981, 121.560531201244 25.1117311461443, 121.560645950518 25.1116491300138, 121.560883442117 25.1114172957746, 121.561039828714 25.1113138788631, 121.561309752588 25.1112040089256, 121.561498923873 25.1111547040965, 121.561730057095 25.1111307130127, 121.561923332459 25.1111372181984, 121.562052961937 25.1111715739768, 121.562232220768 25.1112699056813, 121.562667540095 25.1115572695692, 121.562748313829 25.1115832439221, 121.562809977162 25.1115832869974, 121.562877122928 25.1115620376563, 121.562925015225 25.111538, 121.56297609337 25.1114797711365, 121.562994977162 25.1114324260114, 121.562997973356 25.1113398520331, 121.562943504628 25.1112309532866, 121.562844007613 25.1111344438589, 121.562562980968 25.1110105739702, 121.561919159866 25.1108147218829, 121.56168986038 25.110780496373, 121.561482106578 25.1107868432254, 121.561240809683 25.1108410177379, 121.560984942905 25.1109457130164, 121.560678996194 25.1111088431456, 121.560558194792 25.1111470558066, 121.560460073258 25.1111635171831, 121.560363123649 25.1111624793975, 121.560276117997 25.1111487308452, 121.560126931486 25.1110847130137, 121.560028247154 25.1110296704844, 121.559960840134 25.110969677492, 121.559863735665 25.1108295288416, 121.559794160666 25.11066112699, 121.559745942905 25.1104949050247, 121.559732015768 25.1103707069419, 121.559735570763 25.1102844328616, 121.559760984775 25.1101465739316, 121.559843939195 25.1099251118988, 121.559983015225 25.1095911044703, 121.560009908283 25.1094289622183, 121.560003363183 25.1092992821643, 121.559846758313 25.1087632708382, 121.559840350838 25.1087097613766, 121.559855977162 25.1086567301229, 121.559929623045 25.1085675163395, 121.560257086156 25.1082820911401, 121.56038330599 25.1081445386357, 121.560452939098 25.1080408776308, 121.560480984775 25.1079228439224, 121.560471011419 25.1075927130912, 121.560475030451 25.107229958505, 121.560501463339 25.1071518348037, 121.560546946767 25.1070959885081, 121.560634636277 25.1070056346043, 121.560879515449 25.1068341318446, 121.560918390582 25.1067933717415, 121.561050380635 25.1066459267494, 121.561447026644 25.1060910987614, 121.561535979474 25.1058884913538, 121.561569973356 25.1057385737357, 121.561599865384 25.1056794296114, 121.561648079933 25.1056345576206, 121.561728765222 25.1056062467915, 121.561788301505 25.1056052046262, 121.561861037375 25.1056107524411, 121.561912973356 25.1056408605969, 121.561970721034 25.1056952220452, 121.562000950517 25.1057470080743, 121.561997100489 25.1058145945638, 121.561970882003 25.1058776142648, 121.561626935292 25.1062857376144, 121.561569874391 25.1063863359886, 121.561398709734 25.1068104757653, 121.561349996194 25.107006089754, 121.561348876662 25.1071189462908, 121.561405112159 25.1072602969123, 121.561461038063 25.1073708857094, 121.561740019032 25.1076694764703, 121.561789265278 25.1077620836996, 121.56180495813 25.1078419196257, 121.561742814445 25.1080098709207, 121.561683878197 25.1080838860967, 121.561356950518 25.1083041476972, 121.56133032835 25.1083560403133, 121.561322205232 25.1084415271135, 121.561333611506 25.1084998400264, 121.561377931486 25.108534835271, 121.561419162027 25.1085622709035, 121.561476988581 25.108579556837, 121.561586376828 25.1085550627443, 121.56210511419 25.1082518100278, 121.562179010687 25.1081551056532, 121.562234182705 25.1080280687438, 121.562404692294 25.1075287919552, 121.562489610893 25.1073162380233, 121.56265204187 25.1070235324487, 121.563105889616 25.106447, 121.563245946711 25.10631, 121.563489889616 25.1061997049772, 121.563673946711 25.106161704984, 121.563835950152 25.1061689520996, 121.563986946711 25.1062315656068, 121.56417106023 25.1064126860721, 121.56444031671 25.106760072068, 121.564467506248 25.1068182312834, 121.564484060902 25.1068913281979, 121.564559 25.107321, 121.564581124354 25.1073749475284, 121.564626068514 25.1074168773924, 121.564805489422 25.1074918803196, 121.565095034257 25.1075745738169, 121.565517587726 25.107774871147, 121.565664912454 25.1077964429654, 121.565815712779 25.1077763811249, 121.566050756394 25.1076968942754, 121.566619 25.107449, 121.566787815444 25.1074005619742, 121.5670509275 25.1073508672238, 121.567181022838 25.1073107130975, 121.567617007613 25.1071552868991, 121.567741032723 25.1071346968682, 121.567899087546 25.1071325737974, 121.568101508529 25.1071636734694, 121.568220049482 25.1072001476007, 121.568906007613 25.1076064261816, 121.56897612698 25.1076509281641, 121.569047081068 25.1076431656186, 121.569100111919 25.1076071012482, 121.569163022838 25.1075202869075, 121.569167186663 25.1074215795899, 121.569125030451 25.10730885239, 121.569015418541 25.107222658813, 121.567932920067 25.1066888442257, 121.567849571481 25.1066727770253, 121.567775867958 25.10666522914, 121.56749148601 25.1066845479817, 121.567149258831 25.1066812868888, 121.566894133723 25.1066407021318, 121.566691057095 25.1065762868865, 121.566527950518 25.106490122972, 121.56609270529 25.106235203718, 121.566021235375 25.1061921221323, 121.565964095159 25.1061330162787, 121.565902922478 25.1060448876762, 121.565873969549 25.1059595575339, 121.565887957411 25.1059037146613, 121.565902773313 25.1058445660568, 121.565941218161 25.1057937967646, 121.565988988581 25.1057628606036, 121.566047041092 25.1057350018809, 121.566092022838 25.1057282868674, 121.566224954175 25.1057350524737, 121.56638665402 25.1057638145479, 121.567416977162 25.1060035656307, 121.567625370957 25.1060169876181, 121.568109973356 25.1059818606182, 121.56899615354 25.1061605862964, 121.569127834784 25.1062124971143, 121.569207523804 25.1062582721248, 121.569689666997 25.1065955538018, 121.569829936322 25.1067472468132, 121.569898929612 25.1068105687654, 121.569994134402 25.1068627081327, 121.570728015225 25.1072477297053, 121.570851577146 25.1073419175466, 121.570951061769 25.1074189478813, 121.571136015225 25.1076232785414, 121.571289969549 25.1078169916039, 121.571241832521 25.1078388691411, 121.571099992387 25.1076609916272, 121.570922403913 25.1074573753192, 121.570822732279 25.1073736207249, 121.570703969549 25.1072871559277, 121.569978852354 25.1069044855667, 121.569884047947 25.1068499557294, 121.56980612364 25.1067824949452, 121.569665757981 25.1066301652523, 121.569196171286 25.1062964588963, 121.569105915912 25.1062470846598, 121.568972125609 25.1061914425347, 121.568103954324 25.1060262868757, 121.567611710935 25.1060593042602, 121.567413988581 25.1060498525005, 121.566404241673 25.1058067442427, 121.56623742112 25.1057679905995, 121.566091865272 25.1057592547373)","wkt0":"LINESTRING (121.569879534848 25.1068611424186, 121.569846386176 25.106845064164, 121.569765609201 25.1067623396015, 121.569680795339 25.1066523279671, 121.569533173373 25.1065236349772, 121.569136152808 25.1062579458328, 121.568958731378 25.1062077139004, 121.56840904586 25.1061001926089, 121.568128013982 25.1060487152003, 121.567963887698 25.1060470546384, 121.567510935829 25.1060711327841, 121.566325834025 25.1058253694186, 121.566213512965 25.1058199725824, 121.566070017079 25.1058141606047, 121.566001249083 25.1058390690787, 121.565970074258 25.1059345515153, 121.565982910951 25.1060059557235, 121.566165375367 25.1061960899816, 121.566630247023 25.1064667609482, 121.566949330525 25.1065763576109, 121.567138213289 25.1065979448207, 121.567515978815 25.1066112292556, 121.567868987863 25.1066095687014, 121.568045033933 25.1066452706136, 121.568376037222 25.1068428763579, 121.569123545342 25.1071748823482, 121.569256496802 25.1073218406368, 121.569275408 25.107378921845, 121.569287671627 25.1075110387939, 121.569273918027 25.1075743469434, 121.569220508217 25.1076523923548, 121.569090307477 25.1077686301092, 121.568952313031 25.1077621955221, 121.568925035059 25.1077242106947, 121.568807900239 25.1076146150608, 121.568621309742 25.1074755447022, 121.568459934178 25.1073786104931, 121.568268300695 25.1072887335238, 121.568131910835 25.1072395398661, 121.568021652815 25.1072152543821, 121.567901538048 25.1072028002859, 121.56779999064 25.1072023851494, 121.5676732283 25.1072262554994, 121.567476781057 25.1072771097078, 121.567205835152 25.1073727985894, 121.566780848934 25.1074767901091, 121.566707954858 25.1074931879655, 121.566567668146 25.1075403058441, 121.566252481496 25.1076835274784, 121.566124573023 25.1077289847447, 121.565853627117 25.1078215597643, 121.565669787341 25.1078472980981, 121.565539586601 25.1078236354366, 121.565363998984 25.1077638560607, 121.565164113341 25.1076517696523, 121.565010989936 25.1075886691104, 121.564690989527 25.1075014906767, 121.564550702814 25.1074408808718, 121.56450302367 25.1073968764741, 121.564478267191 25.1072017624445, 121.564434255674 25.1069510197025, 121.564407665382 25.1068131939988, 121.564117005984 25.1064096793238, 121.563943710633 25.1062718530024, 121.563718151605 25.1062021095135, 121.563466002286 25.106261059371, 121.563274368803 25.1063465781313, 121.563072649347 25.1065499963013, 121.562838838159 25.1068746343942, 121.562672878061 25.1071270378401, 121.562566516894 25.1073263033504, 121.562330871893 25.1079357216875, 121.562184166834 25.1082761311531, 121.561601014226 25.1085999343993, 121.561406630023 25.1086115580897, 121.561305770295 25.1085517790991, 121.561261758777 25.1084488263245, 121.561280096909 25.1083292681549, 121.561382790451 25.1082180125309, 121.561617518545 25.1080436564987, 121.561714710646 25.1078859055887, 121.561714710646 25.1077746495613, 121.561340612746 25.1072897713645, 121.561299581175 25.1072021775811, 121.561285139896 25.1071253772928, 121.561290641336 25.1069452077786, 121.561542790655 25.1063017430605, 121.561615226278 25.1061954672716, 121.561910470209 25.1058450886258, 121.561921473088 25.1057753448893, 121.561897633516 25.1056815228952, 121.561810527388 25.1056516326873, 121.561717919819 25.1056624263744, 121.561652819449 25.1057064313963, 121.561574882387 25.1060069935751, 121.561431844955 25.1062079214704, 121.561192532328 25.1065176154724, 121.560965139486 25.1068214967602, 121.560765253844 25.1070008361823, 121.560635053104 25.1070921663424, 121.560541528629 25.1072515788221, 121.560558032948 25.1079141347139, 121.560442502714 25.1081914440088, 121.560044565242 25.1085617422662, 121.559936370262 25.1086597133664, 121.559923533569 25.1088672789974, 121.560084909134 25.1093737376581, 121.560066571001 25.1095729995068, 121.559819006215 25.1101923696799, 121.559802501895 25.1103833276795, 121.559831842907 25.1106340633825, 121.559952874581 25.1108565701321, 121.560101413453 25.1110060147365, 121.560299465282 25.1111156073303, 121.560528691936 25.1111064746179, 121.560712990167 25.1110516783292, 121.560853276879 25.1109586906315, 121.560923878689 25.1109088757644, 121.561168692755 25.1108192089524, 121.561507031297 25.1107378445661, 121.561781186376 25.1107287118255, 121.561846286746 25.110737014317, 121.562196545074 25.1108324929287, 121.562943823967 25.1110873789443, 121.563024511749 25.111168743098, 121.563112534784 25.111355548348, 121.563106116438 25.1115191064881, 121.563001589084 25.1116785131957, 121.562898895543 25.1116793434385, 121.562663250542 25.1116195659478, 121.562045255482 25.1112177276134, 121.561871043224 25.1111928202351, 121.56157946692 25.111189499251, 121.561010984817 25.1113455854085, 121.560816600614 25.1114800850227, 121.560556199135 25.1117324789611, 121.560356313492 25.1118420709037, 121.560139923531 25.1118536942858, 121.559578776681 25.1117158741128, 121.559399062984 25.1117274975069, 121.559259693178 25.1117623676825, 121.558768231231 25.1120961245745, 121.558577514654 25.112149259916, 121.558295107416 25.1118536942858, 121.557260836752 25.1104007629602, 121.557143472705 25.1102015024606, 121.557079289241 25.1100503963651, 121.557055449669 25.1098992900829, 121.55704994823 25.1095821323338, 121.557126968386 25.1093214313689, 121.557383702238 25.1082952272657, 121.557427713756 25.1077422690567, 121.557345192161 25.1060651132481, 121.557308515896 25.1057413032891, 121.557196653288 25.1052829861891, 121.557020607218 25.1049359260828, 121.556866566906 25.1046253977843, 121.556600663987 25.1044360913759, 121.555839631495 25.1039893935138, 121.55449361258 25.1034480400144, 121.554192867209 25.1033301375541, 121.553653726118 25.1032089137792, 121.553369485067 25.1030129627657, 121.553098080708 25.1026924659398, 121.552432406504 25.1016828124174, 121.5520161309 25.1012975476921, 121.550646272413 25.1004207337933, 121.550127303268 25.1001367643081, 121.549353434082 25.0997216030555, 121.548827129684 25.0994010976047, 121.547710337424 25.0988663664339, 121.545944375279 25.0980443372491, 121.544339788698 25.0972870691116, 121.544130733989 25.0972422307197, 121.539986316078 25.0975423985305, 121.53963880847 25.0976171289913, 121.539548951622 25.0976544942046, 121.538015883757 25.0980787961592, 121.537938863601 25.0981252949141, 121.537369464592 25.0986650113111, 121.536804650116 25.0992047253268, 121.536558002235 25.0993027039235, 121.536414964803 25.0993525235188, 121.536128889938 25.0991167105883, 121.535873989899 25.0989556268463, 121.535551238769 25.0987928822316, 121.534623329273 25.0981717936513, 121.53368074927 25.0975440592079, 121.532369572807 25.0967103963167, 121.531817595023 25.0965559521693, 121.528120021641 25.0958553367512, 121.524869387933 25.0951445427353, 121.524657468834 25.095099161131, 121.524606753152 25.0950384700434, 121.52461399825 25.0948831882049, 121.524951499038 25.0936245232124, 121.525165229411 25.0933970654292, 121.525892154186 25.0923888099717, 121.5265997587 25.0913969496958, 121.5267410381 25.0909824875074, 121.526945108343 25.0904105492536, 121.527065859967 25.0900966928999, 121.527063444935 25.0899260946836, 121.526929410632 25.0896494188656, 121.526202485858 25.0881063655775, 121.525528691798 25.0867043683287, 121.525201454898 25.0861269420154, 121.524939423875 25.0853865637603, 121.524824709833 25.0849130255414)","wkt1":"LINESTRING (121.523686022022 25.0881807300376, 121.524441323428 25.0869329321584, 121.524924329922 25.085948682963, 121.524920707373 25.0858163555231, 121.525292622374 25.0859803977827, 121.525599331498 25.086726240484, 121.526273125558 25.0880932424328, 121.527117179407 25.0898254853676, 121.527141329732 25.090027797495, 121.527102689212 25.0902235478297, 121.526850318319 25.0909409318544, 121.526681266046 25.0914505344145, 121.526550854292 25.0916451889095, 121.525937436044 25.0924511427084, 121.525222586432 25.0934495557244, 121.525070439387 25.093636552218, 121.524965385474 25.0939055642163, 121.52469731687 25.0949214619158, 121.524734749873 25.094973951557, 121.526727151663 25.095437609076, 121.528487710335 25.0958312791751, 121.531286732971 25.0963332067141, 121.532191162632 25.0965103571186, 121.532420590716 25.096567220157, 121.535887369831 25.0988417200189, 121.536146985821 25.0989784073654, 121.536427129588 25.0991708628902, 121.537116621359 25.0985563163471, 121.537697436669 25.0980281537727, 121.537979995468 25.0978531925827, 121.539436260049 25.0974190690491, 121.539988094969 25.0972878475267, 121.541217346497 25.0971839637216, 121.542812475445 25.0970549289777, 121.544034481876 25.096981663427, 121.544347228581 25.0970100948399, 121.545050003031 25.0973239334594, 121.546336007822 25.0979406732089, 121.547597862289 25.0985202307779, 121.547689633523 25.0986284874534, 121.548943035376 25.099264903548, 121.549954933982 25.0999319340449, 121.550766384893 25.1004218164209, 121.551510214894 25.1008963881016, 121.552142953402 25.1012878536781, 121.552418267104 25.1015437271488, 121.552774484394 25.1020423508356, 121.553355299703 25.102896348524, 121.553704271896 25.1031358167157, 121.554301992432 25.1032790600217, 121.55553486651 25.1037569009819, 121.556084286397 25.1040160496462, 121.556630083736 25.1043265899384, 121.556945245473 25.104563868433, 121.557059959516 25.1047497544897, 121.557249539565 25.1051630765912, 121.557405309159 25.105647470821, 121.557453609809 25.1060575095837, 121.557477760134 25.1066971673079, 121.557536928429 25.1078091796941, 121.557481382682 25.1083001239307, 121.557216936627 25.1093224625064, 121.557144485652 25.1095925334085, 121.557154145782 25.1098888453315, 121.557233841854 25.1102059310956, 121.55739564903 25.1104792802322, 121.558536751873 25.1120100241026, 121.558641805785 25.1120537593601, 121.558836215899 25.1119487947158, 121.559238318806 25.1116787290188, 121.559363900495 25.1116043788436, 121.559581253417 25.1116251531618, 121.560034072006 25.1117694799066, 121.560287650415 25.1117771335928, 121.560506210854 25.1116896628642, 121.560796014751 25.1114185032078, 121.560955406894 25.111299323975, 121.561176382365 25.1112173198483, 121.561571240174 25.1111276619401, 121.561893647009 25.1111156346547, 121.562063906799 25.1111528098966, 121.562725625696 25.1115365889386, 121.562911583197 25.1115081609027, 121.562961091362 25.1113944486931, 121.56292003581 25.1112457479518, 121.562627816881 25.1110390973564, 121.56181636597 25.1108007380349, 121.561617125791 25.1107843371471, 121.561244003274 25.1108521274692, 121.560898653631 25.1109855212191, 121.560630585026 25.1111331288876, 121.560408402039 25.1111768644588, 121.560253839961 25.1111473429499, 121.560092032785 25.1110609651608, 121.559977318743 25.1109844278283, 121.559860189668 25.110833539804, 121.559786531177 25.1106596903276, 121.559744268109 25.1105361367759, 121.559718910268 25.1103819680097, 121.55975996582 25.1101282998294, 121.559944715804 25.1096362695309, 121.559999054035 25.1094733523957, 121.559993016454 25.1092820064899, 121.559935055674 25.1090873800613, 121.559886755025 25.1089430501502, 121.559832416794 25.1087134340313, 121.559900037703 25.1085800378023, 121.560369761519 25.1081492325934, 121.560456702688 25.1079710056291, 121.560478437981 25.1077785639526, 121.560460325237 25.1076025232901, 121.56046274027 25.1074089876109, 121.560467570334 25.1072406003865, 121.560537606276 25.1071017354231, 121.56067767816 25.1069738045693, 121.560910728793 25.1068054167456, 121.561042348063 25.1066446826976, 121.561428753258 25.1061023404051, 121.561492751619 25.1060017443928, 121.561536222203 25.1058497567825, 121.561597805532 25.1056551248905, 121.561684746701 25.1055840513696, 121.561778932967 25.105567649782, 121.561868289168 25.1055687432213, 121.561940740143 25.1056234151709, 121.562010776084 25.1057054230496, 121.562014398633 25.1057928980595, 121.561941947659 25.1059306710733, 121.561615918275 25.106304625614, 121.561571240174 25.1064074082406, 121.561357509801 25.1069541228875, 121.561349057187 25.1071323513341, 121.561673879054 25.1075894022368, 121.561798253227 25.1077763771136, 121.561774102902 25.1079786595531, 121.56159176795 25.1081689140827, 121.561378037577 25.1083088712489, 121.561335774508 25.1083941575684, 121.56137683006 25.1085264605874, 121.561487921554 25.1085395815402, 121.562014398633 25.1083023107603, 121.562131527708 25.1081918758163, 121.562197941101 25.1080825341893, 121.562481707416 25.1073302611452, 121.562636269495 25.1070109810705, 121.563039579918 25.1064773878518, 121.563165161606 25.1063461760479, 121.563326968782 25.106231365604, 121.563582962224 25.1061395171712, 121.56371578901 25.1061274893952, 121.563923481802 25.1061723201909, 121.564144457274 25.1063603906668, 121.56446324156 25.1067890153218, 121.564506712145 25.1069661505823, 121.564580370635 25.1073597835758, 121.564662481739 25.1074210152609, 121.565182921237 25.1075839351308, 121.565501705523 25.1077424811045, 121.565720265962 25.1077577889808, 121.565970221823 25.1077053048257, 121.566430285509 25.1075248903708, 121.567117362247 25.1073062058262, 121.56732505504 25.1072406003865, 121.567507389992 25.1071585935374, 121.567740440625 25.107118136805, 121.568070092558 25.1071203236557, 121.568437177493 25.1072777768066, 121.568945541829 25.107601429869, 121.569104933972 25.1075784680246, 121.569172554881 25.107473499538, 121.569124254232 25.1073171400627, 121.568972107186 25.1072001436812, 121.568103903012 25.1067769876096, 121.567927605642 25.1066895133037, 121.567699385073 25.1066709250056, 121.567188605705 25.1066851395867, 121.566820313253 25.1066129732346, 121.566450813285 25.1064587995215, 121.565993164631 25.1061756004923, 121.565907430979 25.1060728176709, 121.565863960394 25.1059514463556, 121.565871205491 25.1058333552305, 121.565960561693 25.1056944886689, 121.566047502862 25.1056693395897, 121.566995403107 25.1058967745526, 121.567509805024 25.1059853428612, 121.568032659554 25.105963474149, 121.568928636602 25.1061198353553, 121.569179799979 25.1062007494674, 121.569639863665 25.1065069104883, 121.569775007492 25.1065902647551)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0152005000'=='0100020200' || '0152005000'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
