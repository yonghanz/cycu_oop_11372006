
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492159</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400078000">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400078000">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400078000" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400078000" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400078000" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400078000',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="UeGfcPfjDZOREGvQoOz3A3-a0-C8SM09kukmVJGS9feYWL5zJ6ixjYwx2PwhLd9FPd2T5vUem59gYLBUlV0XgK-LuT41" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">780 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0400078000" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400078000" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">雙溪火車站 - 盤山坑</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0555 - 1610 <br>
                        [假日] 0555 - 1610
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 780內盤山班表:0635 1650<br/>780雙溪火車站班表:0555 1610<br/>本路線下坑口、外盤山、內盤山三站，目前通訊不良，無法提供準確的預估資訊。<br>
[假日]<br /> 780內盤山班表:0635 1650<br/>780雙溪火車站班表:0555 1610<br/>本路線下坑口、外盤山、內盤山三站，目前通訊不良，無法提供準確的預估資訊<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">柑腳-長源</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">二段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">國光客運羅東站:03-9542-703</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 盤山坑</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 雙溪火車站</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">雙溪火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400620" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.038525" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.866128" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">分駐所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035877" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8649868" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">雙溪中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035896" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.86199" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">埔尾</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038034" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8589151" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">平林里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037484" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.85689" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">白灰厝</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.036453" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.853366" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">平林活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035328" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.84975" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">林厝前</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034996" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.84435" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">竹寮坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034908" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.84193" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">番仔坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03145" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.834054" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">上林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029253" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8314358" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">吊橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.027079" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8263657" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">彎穹</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024874" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.821311" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">平水</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020732" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8134423" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">分坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.018558" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8102571" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">柑腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.017843" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8078146" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">內柑腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.017093" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.806577" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">長源</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01477" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.804633" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">上坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01198" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8007475" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">下坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.008652" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7966853" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">外盤山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998326" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7760672" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">內盤山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274202020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.995807" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7732374" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">內盤山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274202060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.995956" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.77329" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">外盤山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.998281" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7762007" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">下坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.008683" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7969253" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">上坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011821" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8007704" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">長源</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.014834" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.80478" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">內柑腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.016909" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.806526" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">柑腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.017827" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.808114" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">分坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.018382" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8101247" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">平水</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.020626" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8134979" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">彎穹</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024719" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.821295" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">吊橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.027041" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8267" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">上林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029081" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.83134" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">番仔坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.031419" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.834144" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">竹寮坑口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034799" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8424724" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">林厝前</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034832" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8444685" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">平林活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035156" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.849758" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">白灰厝</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.036414" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.85366" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">平林里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274200720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037316" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.85685" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">埔尾</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037916" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.85899" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">雙溪中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274201740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035876" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8618135" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">分駐所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0358" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8651076" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">雙溪火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2274400620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038525" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.866128" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400078000";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 22;
        var existBackNum = 22;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400078000',
                        url: './StopStatusRecent3OfRoute?routeid=0400078000&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400078000',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400078000',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400078000');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400078000","Name":"780","BeginStop":"雙溪火車站","GoDirStops":[{"UniStopId":"2274400620","Name":"雙溪火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.866128,"Latitude":25.038525,"PublicId":"2274400620"},{"UniStopId":"2274400060","Name":"分駐所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8649868,"Latitude":25.035877,"PublicId":"2274400060"},{"UniStopId":"2274201700","Name":"雙溪中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.86199,"Latitude":25.035896,"PublicId":"2274201700"},{"UniStopId":"2274201460","Name":"埔尾","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8589151,"Latitude":25.038034,"PublicId":"2274201460"},{"UniStopId":"2274200760","Name":"平林里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.85689,"Latitude":25.037484,"PublicId":"2274200760"},{"UniStopId":"2274200860","Name":"白灰厝","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.853366,"Latitude":25.036453,"PublicId":"2274200860"},{"UniStopId":"2274201660","Name":"平林活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.84975,"Latitude":25.035328,"PublicId":"2274201660"},{"UniStopId":"2274201160","Name":"林厝前","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.84435,"Latitude":25.034996,"PublicId":"2274201160"},{"UniStopId":"2274201060","Name":"竹寮坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.84193,"Latitude":25.034908,"PublicId":"2274201060"},{"UniStopId":"2274201960","Name":"番仔坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.834054,"Latitude":25.03145,"PublicId":"2274201960"},{"UniStopId":"2274200160","Name":"上林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8314358,"Latitude":25.029253,"PublicId":"2274200160"},{"UniStopId":"2274200960","Name":"吊橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8263657,"Latitude":25.027079,"PublicId":"2274200960"},{"UniStopId":"2274201860","Name":"彎穹","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.821311,"Latitude":25.024874,"PublicId":"2274201860"},{"UniStopId":"2274200660","Name":"平水","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8134423,"Latitude":25.020732,"PublicId":"2274200660"},{"UniStopId":"2274200460","Name":"分坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8102571,"Latitude":25.018558,"PublicId":"2274200460"},{"UniStopId":"2274201340","Name":"柑腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8078146,"Latitude":25.017843,"PublicId":"2274201340"},{"UniStopId":"2274200360","Name":"內柑腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.806577,"Latitude":25.017093,"PublicId":"2274200360"},{"UniStopId":"2274201260","Name":"長源","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.804633,"Latitude":25.01477,"PublicId":"2274201260"},{"UniStopId":"2274200060","Name":"上坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8007475,"Latitude":25.01198,"PublicId":"2274200060"},{"UniStopId":"2274200260","Name":"下坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7966853,"Latitude":25.008652,"PublicId":"2274200260"},{"UniStopId":"2274200560","Name":"外盤山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7760672,"Latitude":24.998326,"PublicId":"2274200560"},{"UniStopId":"2274202020","Name":"內盤山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7732374,"Latitude":24.995807,"PublicId":"2274202020"}],"LastStop":"盤山坑","BackDirStops":[{"UniStopId":"2274202060","Name":"內盤山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.77329,"Latitude":24.995956,"PublicId":"2274202060"},{"UniStopId":"2274200520","Name":"外盤山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7762007,"Latitude":24.998281,"PublicId":"2274200520"},{"UniStopId":"2274200220","Name":"下坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7969253,"Latitude":25.008683,"PublicId":"2274200220"},{"UniStopId":"2274200020","Name":"上坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8007704,"Latitude":25.011821,"PublicId":"2274200020"},{"UniStopId":"2274201220","Name":"長源","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.80478,"Latitude":25.014834,"PublicId":"2274201220"},{"UniStopId":"2274200320","Name":"內柑腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.806526,"Latitude":25.016909,"PublicId":"2274200320"},{"UniStopId":"2274201300","Name":"柑腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.808114,"Latitude":25.017827,"PublicId":"2274201300"},{"UniStopId":"2274200420","Name":"分坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8101247,"Latitude":25.018382,"PublicId":"2274200420"},{"UniStopId":"2274200620","Name":"平水","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8134979,"Latitude":25.020626,"PublicId":"2274200620"},{"UniStopId":"2274201820","Name":"彎穹","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.821295,"Latitude":25.024719,"PublicId":"2274201820"},{"UniStopId":"2274200920","Name":"吊橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8267,"Latitude":25.027041,"PublicId":"2274200920"},{"UniStopId":"2274200120","Name":"上林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.83134,"Latitude":25.029081,"PublicId":"2274200120"},{"UniStopId":"2274201920","Name":"番仔坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.834144,"Latitude":25.031419,"PublicId":"2274201920"},{"UniStopId":"2274201020","Name":"竹寮坑口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8424724,"Latitude":25.034799,"PublicId":"2274201020"},{"UniStopId":"2274201120","Name":"林厝前","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8444685,"Latitude":25.034832,"PublicId":"2274201120"},{"UniStopId":"2274201620","Name":"平林活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.849758,"Latitude":25.035156,"PublicId":"2274201620"},{"UniStopId":"2274200820","Name":"白灰厝","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.85366,"Latitude":25.036414,"PublicId":"2274200820"},{"UniStopId":"2274200720","Name":"平林里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.85685,"Latitude":25.037316,"PublicId":"2274200720"},{"UniStopId":"2274201420","Name":"埔尾","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.85899,"Latitude":25.037916,"PublicId":"2274201420"},{"UniStopId":"2274201740","Name":"雙溪中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8618135,"Latitude":25.035876,"PublicId":"2274201740"},{"UniStopId":"2274400020","Name":"分駐所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8651076,"Latitude":25.0358,"PublicId":"2274400020"},{"UniStopId":"2274400620","Name":"雙溪火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.866128,"Latitude":25.038525,"PublicId":"2274400620"}],"RouteMapUrl":"../MapOverview?nid=0400078000","RouteTracks":null,"StopDirection":null,"TicketPrice":"二段票","BusTimeDesc":"0555 - 1610","HeadwayDesc":"780內盤山班表:0635 1650;780雙溪火車站班表:0555 1610;本路線下坑口、外盤山、內盤山三站，目前通訊不良，無法提供準確的預估資訊。","HolidayBusTimeDesc":"0555 - 1610","HolidayHeadwayDesc":"780內盤山班表:0635 1650;780雙溪火車站班表:0555 1610;本路線下坑口、外盤山、內盤山三站，目前通訊不良，無法提供準確的預估資訊","RouteNote":"","SegmentBuffer":"柑腳-長源","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"國光客運羅東站:03-9542-703","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.86612955104 25.0386057243276, 121.866317596287 25.0385790989112, 121.866365968037 25.0386081176146, 121.866420119417 25.0389192445368, 121.866063512772 25.0390556614768, 121.865923829627 25.0388528490569, 121.865879539141 25.0386460683393, 121.865836046245 25.0382851723788, 121.865839975584 25.0379069103639, 121.865885339629 25.0374939258372, 121.866018690439 25.0365390885128, 121.865876305881 25.0364130248808, 121.865614964255 25.03626311415, 121.865481731616 25.0362079155862, 121.865250576978 25.0360136254341, 121.864405259375 25.0352408005115, 121.863394576194 25.0348589761529, 121.863042592228 25.0347716184745, 121.862911836458 25.0348230757447, 121.861880707621 25.0359859259181, 121.861802654578 25.0360113377868, 121.861678241623 25.0360098778408, 121.861247672119 25.0359548310603, 121.86116949681 25.0361987634867, 121.861122199411 25.0362866072056, 121.861012245695 25.0364173429155, 121.860700229676 25.036770586974, 121.860412288036 25.0371757269505, 121.859845007076 25.0377828422714, 121.859756858231 25.0379074808292, 121.859672725615 25.0381773408762, 121.859025914653 25.0380089910513, 121.858249427877 25.0377941010621, 121.856165651693 25.0371988653712, 121.853757367844 25.0365132689018, 121.852430522031 25.0361786963215, 121.852101245075 25.0360583928782, 121.851892360961 25.0359790636134, 121.851604434115 25.0359527368887, 121.851102543282 25.035768449658, 121.84983526893 25.0353089270455, 121.849404039043 25.035222766364, 121.84811431168 25.0351814810161, 121.84764015692 25.0351312205737, 121.846495713745 25.0348894914917, 121.845792406196 25.034851197732, 121.843362858337 25.0350378796975, 121.842685966096 25.0350067660563, 121.842254736209 25.0349517188256, 121.841440484372 25.0346782773246, 121.839239428918 25.033693404198, 121.839048744381 25.0337552053925, 121.838796972526 25.0337963196212, 121.838653009103 25.0338046964542, 121.838525885438 25.0338839771666, 121.838360789769 25.0340168096415, 121.838109514162 25.0341125446694, 121.837963899782 25.0341352817275, 121.837694463651 25.0341364784147, 121.837577052015 25.0341366272121, 121.837131787099 25.033961147855, 121.836006195343 25.0334417995584, 121.835777372747 25.0333589284761, 121.835669069988 25.033325421019, 121.835585861771 25.0332655862515, 121.835396992326 25.0330178700032, 121.835374209124 25.0327599813004, 121.835324020041 25.0325900497011, 121.835302887795 25.0325227351821, 121.835140433657 25.0323551966632, 121.834615836976 25.0321018076133, 121.834271435579 25.0318132440143, 121.834143831663 25.0316636982942, 121.834091726043 25.0315080495251, 121.834024079107 25.0311689470058, 121.833957403016 25.0309727559242, 121.833909480352 25.030880249473, 121.833840800554 25.0307809217633, 121.833404617797 25.0304596020553, 121.833322730346 25.0303806183111, 121.833213095671 25.0301418589417, 121.83321277663 25.030009334196, 121.831128278718 25.0291108878087, 121.82742749421 25.0275054557404, 121.824709359122 25.0263194689534, 121.82229775994 25.0252836137766, 121.821132066175 25.0247594779623, 121.820174343197 25.0243305695221, 121.819654725554 25.0241327274514, 121.819193182642 25.0239755854758, 121.816545048118 25.0233335079765, 121.81610853517 25.0231940815705, 121.815825891385 25.0230456790417, 121.815540690206 25.0228398937026, 121.815303007384 25.0225513835168, 121.815181204576 25.0223905580737, 121.814925131383 25.0219251798014, 121.814669178479 25.0215651097939, 121.814477389964 25.0213785318516, 121.814469465372 25.021206190865, 121.814350266299 25.0211233115197, 121.814110877579 25.0210395345074, 121.813898234358 25.0209665287785, 121.813591816797 25.0208959166388, 121.813366956497 25.0206332151861, 121.812825112512 25.0199911202031, 121.812580440731 25.0196808429056, 121.812422633286 25.0195314579825, 121.812310014026 25.0194217293447, 121.810871040178 25.0188131394537, 121.810680189586 25.0187266679805, 121.810169053396 25.018482512904, 121.809592209129 25.0183445770396, 121.808841354028 25.018112090427, 121.808261185782 25.0179447779981, 121.807203604996 25.0176210844356, 121.80687869672 25.0175310215756, 121.806738695593 25.0172042813431, 121.806610251163 25.0170433046084, 121.806217653663 25.0168577921245, 121.806125200088 25.016762043636, 121.805988831066 25.0165663574305, 121.805403401825 25.0155265822234, 121.80538491111 25.0153985172147, 121.805398118764 25.0152797278233, 121.805520949941 25.0151744031282, 121.805903971892 25.0148677042827, 121.805906613423 25.0147656706433, 121.805818122145 25.0145622015492, 121.805709489195 25.0145598077931, 121.805039065204 25.0150531305405, 121.804912737498 25.0150612986675, 121.804834812342 25.0150170143529, 121.804722547288 25.0148970277176, 121.804575942334 25.014607383686, 121.804481837803 25.0142911083793, 121.804246741571 25.01407058292, 121.804008343425 25.0137468256936, 121.803904002963 25.0136654374211, 121.803573151243 25.0134975739387, 121.803221357287 25.0131861917088, 121.80306022672 25.0131159492091, 121.802706068791 25.0130050533773, 121.802496067101 25.0128458664793, 121.80223158384 25.0125993059143, 121.801800916794 25.0124155727517, 121.801393530816 25.0123132227873, 121.801191909728 25.0122179709079, 121.800818695107 25.0119796108522, 121.800694543165 25.0118575266663, 121.800447229853 25.011461051451, 121.800259406097 25.011268737732, 121.800077085364 25.0109682234934, 121.799960858013 25.0108581074439, 121.799584188288 25.0106694828787, 121.799232014927 25.0104737122789, 121.798586466521 25.0100525187118, 121.798318816493 25.0098730431737, 121.798195985316 25.0098084092758, 121.797779655921 25.0096574181929, 121.797609199287 25.0095638022414, 121.797467253034 25.0094523237659, 121.797103712372 25.0090040734796, 121.796629557612 25.0084962739493, 121.796473377109 25.0082877074763, 121.79631059278 25.0081617295642, 121.796002854454 25.0080001425044, 121.795828183236 25.0078717704109, 121.795517473188 25.0074689983564, 121.794988506666 25.0070964479919, 121.794278925482 25.0066891848148, 121.794045150015 25.0065204140796, 121.793679958396 25.006154743358, 121.793631090078 25.006048213876, 121.793753921256 25.0058950027735, 121.794245576157 25.0054898303042, 121.794361803508 25.0051564747003, 121.79425878381 25.0048593266176, 121.793964253138 25.0043799381654, 121.793751609916 25.003899650106, 121.79356241028 25.0036572610266, 121.793279436304 25.003303850907, 121.793069434614 25.0029253029534, 121.792913254111 25.0027646067501, 121.792740233851 25.0027035600927, 121.792492920539 25.0029357766279, 121.792320542709 25.0030584569792, 121.792232399574 25.003102457556, 121.792069945436 25.0031156244419, 121.791948104832 25.0030689418399, 121.791383807837 25.0026637600497, 121.791169843851 25.0025189236941, 121.790920739153 25.0022175637186, 121.79075974621 25.0020239651075, 121.790662009574 25.0019485540716, 121.79056187457 25.0019121982818, 121.79029054432 25.0019329930584, 121.790167056952 25.0019416145043, 121.79003134412 25.0018958860191, 121.78990058835 25.0018180809002, 121.789791583572 25.0017695711541, 121.789596482129 25.0017938416031, 121.789428744929 25.0017878565907, 121.789253083138 25.0017136424131, 121.789088647852 25.0015505506154, 121.788940693196 25.0014698276195, 121.788677507703 25.0014177892668, 121.788531174605 25.0014166619503, 121.788446425701 25.0014631692328, 121.788369821311 25.0015158374709, 121.788136706227 25.001745961496, 121.788023120407 25.0017710985545, 121.787913131347 25.0017537419575, 121.787642409795 25.0016178821178, 121.787542254256 25.0016140782926, 121.787296039082 25.0017304004571, 121.787042452135 25.0017627195356, 121.786891554694 25.0018225696584, 121.78670796831 25.001999725851, 121.786402541323 25.0022816191308, 121.786175039492 25.0024444107091, 121.785916169484 25.0024767295997, 121.785716403725 25.0024132888064, 121.785499468016 25.0022861078721, 121.785335362922 25.0021592260559, 121.785124040466 25.0020814211037, 121.78481660295 25.0020900193561, 121.784582696452 25.0021771746109, 121.784307147097 25.0022885018674, 121.784077333927 25.0023785759056, 121.783986201118 25.0025258064173, 121.783932049738 25.0025820651841, 121.783824737554 25.0026146832871, 121.783148175504 25.0025033627531, 121.783050438868 25.0024052090804, 121.782665703384 25.0018462604598, 121.782543925356 25.001728006451, 121.782360338973 25.0015975330454, 121.782229493108 25.0015197328859, 121.782133827716 25.0015098524449, 121.781819155371 25.001505064424, 121.781391794246 25.0013784974175, 121.781123772415 25.0013000771026, 121.780596787041 25.0010822215891, 121.780011772932 25.0009135345221, 121.779799374961 25.000771597263, 121.779753148174 25.0003978295715, 121.779689619558 25.0002015030116, 121.779200738067 24.9999247080689, 121.779030029146 24.9997412645167, 121.778560827255 24.9996036068588, 121.778332004659 24.9995302891303, 121.777939407159 24.9990808056097, 121.777885255779 24.9990305303867, 121.777558696547 24.9989455412724, 121.777266807405 24.9989192066053, 121.777219259852 24.9988351151875, 121.777049211313 24.9985232881463, 121.776969965393 24.998425131294, 121.776766567529 24.9983473239772, 121.776520574983 24.9983509150853, 121.776247176555 24.99841076687, 121.775863824413 24.9981626810323, 121.775680238029 24.9980106571353, 121.775573158937 24.9979304626993, 121.774972923666 24.9977284349586, 121.774642932628 24.997638613937, 121.774244878006 24.9975919454884, 121.774052724928 24.9975132862995, 121.773914044566 24.9973445029591, 121.773834112013 24.997049602079, 121.773558428496 24.9969021937439, 121.773413144308 24.9967741093167, 121.773291633896 24.9964685615809, 121.773188614198 24.9963632207554, 121.772970357724 24.9963123458926, 121.772871300323 24.9962129902174, 121.772876583385 24.9961100432885, 121.77297167849 24.9959604109707, 121.773049778476 24.995914469058, 121.773326964369 24.9958894851883, 121.773407531055 24.9958858940084, 121.773415455647 24.9959265940416, 121.77317035282 24.9959373945543, 121.773055934941 24.9959461131439, 121.772917527111 24.9961100432885, 121.772918847876 24.9962034137625, 121.772998093797 24.9962812224367, 121.773221633332 24.9963404767017, 121.773312766141 24.9964218764534, 121.773447484207 24.9967609417512, 121.77357427768 24.9968770556893, 121.773875742371 24.9970377595927, 121.773943101404 24.9973121827185, 121.774024192881 24.9974282546477, 121.77412595648 24.9975073675356, 121.774265816876 24.9975667760175, 121.774676786555 24.9976141372273, 121.774987166412 24.997705112474, 121.775584812733 24.9978957413087, 121.775718540224 24.9980022778599, 121.775900805843 24.9981471195397, 121.776101276567 24.9982740339159, 121.776256421913 24.9983640824804, 121.776525858044 24.9983138069641, 121.776792918322 24.9983140850423, 121.776981852281 24.9984011905864, 121.777032497159 24.9984568127909, 121.777259837504 24.9988222003612, 121.777298505773 24.9988901786135, 121.77748682645 24.9989085101035, 121.777921533115 24.9989997528363, 121.777977709354 24.9990712293784, 121.778355778435 24.9995075456628, 121.779051161391 24.9997041568154, 121.779239040262 24.9999067527577, 121.779722770571 25.0001943366754, 121.779787488073 25.0003942385233, 121.779825790268 25.0007536420757, 121.780013503747 25.0008847851704, 121.780575324604 25.0010451142928, 121.781115847823 25.0012593788492, 121.781409917497 25.0013586385969, 121.78184590087 25.0014775333, 121.782140431542 25.0014811243165, 121.782258950112 25.0015000307338, 121.782393358107 25.0015795779787, 121.782595900601 25.0017352589721, 121.782698055998 25.0018389555812, 121.783066288052 25.0023716931741, 121.78315477933 25.0024698468737, 121.783814764206 25.0025833209311, 121.783927757251 25.002540469609, 121.784046956324 25.0023654089407, 121.784271486433 25.0022657589104, 121.784567383535 25.0021583171843, 121.784792198172 25.002062269108, 121.785126681996 25.0020491021091, 121.78534989134 25.0021233160841, 121.785540411742 25.0022696491533, 121.785717394299 25.0023773789089, 121.785941264025 25.0024384257284, 121.786153907247 25.0024132888064, 121.78621632419 25.0023697373735, 121.786681553003 25.0019868580956, 121.786851931733 25.001812095889, 121.786993253626 25.001741472735, 121.787297023945 25.0016837477948, 121.787542324253 25.0015886933099, 121.787634485203 25.0015831689922, 121.787915548191 25.0017234935922, 121.788043104421 25.0017369056168, 121.788148834357 25.0016932467293, 121.788350145781 25.0014750811478, 121.788437004929 25.0014195264653, 121.788610200604 25.0013805758141, 121.788711899536 25.0013913488719, 121.788969186986 25.001451456574, 121.789088647852 25.0015146404657, 121.789288743802 25.0016968843668, 121.789449156028 25.0017526234142, 121.789583274475 25.0017567345217, 121.789784030808 25.0017411734842, 121.789903298625 25.0017826410494, 121.790069646315 25.001877930996, 121.79016851541 25.0019159701824, 121.790322242688 25.0019006740248, 121.790533565144 25.0018743399911, 121.790660090019 25.0019022651252, 121.790792765343 25.0020000251011, 121.790955318881 25.0022215012508, 121.791196259158 25.0024889988059, 121.791391732429 25.0026326382025, 121.791980133392 25.0030330321341, 121.792064662375 25.0030773207698, 121.792205984267 25.0030653508698, 121.792304630965 25.0030328888211, 121.792624997074 25.0027490458403, 121.79272273371 25.0026628623042, 121.792868348089 25.0026999691119, 121.792943631714 25.0027358789151, 121.793099812217 25.002900166131, 121.793323021561 25.0033062448824, 121.793607316302 25.0036572610266, 121.793774062927 25.0038876802861, 121.794023687578 25.004427817246, 121.794302369067 25.0048461599186, 121.79440670953 25.0051600656093, 121.794282557587 25.0055065878331, 121.793776374267 25.0059186427803, 121.793672033804 25.0060589865244, 121.793710335999 25.0061296071964, 121.794080480488 25.0065009635367, 121.794327627163 25.0066881956237, 121.795022846565 25.007077296778, 121.795579549159 25.0074630136205, 121.795930250381 25.0078766034254, 121.796346253445 25.0081126549981, 121.796525877532 25.0082526970006, 121.796661418942 25.0084165776976, 121.797118240791 25.0089262728628, 121.797510838291 25.0094140220697, 121.797618150476 25.0094933185368, 121.79778720844 25.0095950573254, 121.798162966182 25.0097330030187, 121.798292401186 25.0097784861635, 121.798581648798 25.0099879477969, 121.798975897254 25.0102195521015, 121.799381372216 25.0104984342245, 121.799881157589 25.010738784158, 121.800052667755 25.0108307935291, 121.800174000453 25.0109785705866, 121.800338927094 25.011281215856, 121.800547544385 25.0114777616129, 121.800830581996 25.0119185687744, 121.801207330311 25.0121534609172, 121.801396529948 25.0122339525163, 121.801912949199 25.0123859588123, 121.802244791493 25.0125239013708, 121.802609652921 25.0128470633741, 121.802743380412 25.0129407203513, 121.803044845103 25.0130319834712, 121.803215223833 25.0131049939183, 121.803617066691 25.0134464069493, 121.803926455974 25.0136008055193, 121.804081340506 25.0137196241911, 121.804307166585 25.0140379678591, 121.80455924953 25.0142742413608, 121.804593854726 25.0144552726681, 121.804797830913 25.0149018152165, 121.804881369321 25.0149775175183, 121.805010804325 25.0149894862574, 121.805694960776 25.0145035545124, 121.805821754249 25.0144891919685, 121.805888122708 25.0145430514994, 121.805973018425 25.0147522291936, 121.80597001016 25.0148748855327, 121.80591321725 25.0149706354928, 121.805472081623 25.0153156339487, 121.805452270143 25.0153958242575, 121.805476043919 25.0155301728292, 121.806139214331 25.0166481856097, 121.806237465143 25.01678927212, 121.806665393116 25.0169975249408, 121.806826201699 25.0172029056428, 121.80692777722 25.017487041331, 121.80724212163 25.0175742651158, 121.808208377235 25.0178619498992, 121.808857965486 25.0180541876573, 121.809599847998 25.0182776105751, 121.810177968562 25.0184178835378, 121.81072074478 25.0186777302494, 121.810880285536 25.0187544944474, 121.812343693543 25.0193609901745, 121.812463883189 25.0194603271269, 121.812686580372 25.0197048647561, 121.81287398083 25.0199540186196, 121.813424588983 25.0206106539878, 121.813675025014 25.0208791612098, 121.814116490832 25.0210000396102, 121.814356050596 25.0211031437996, 121.814498522209 25.021188238665, 121.814513050628 25.0213091167611, 121.8147923925 25.0215915641255, 121.814916544442 25.0217854471096, 121.815233528126 25.0223575198087, 121.81536296313 25.0225226783764, 121.815545889131 25.0227321182696, 121.815788909955 25.0229571161567, 121.81610127096 25.0231156915474, 121.816558255771 25.0232766603194, 121.819228182924 25.0239211316897, 121.819689790413 25.0240832961905, 121.820203822271 25.0242938585727, 121.821129424644 25.0246900647839, 121.822065847276 25.0250903867992, 121.824767472798 25.0262428760727, 121.827453909517 25.0274073220517, 121.83117318474 25.0290247227745, 121.833247116529 25.0299291534338, 121.833248437295 25.030134990509, 121.833349145653 25.0303734379682, 121.83341518392 25.0304416512089, 121.833848725146 25.0307629709638, 121.833934574893 25.0308611019689, 121.833979512762 25.0309592129514, 121.834048701164 25.0311687797171, 121.834117105791 25.0314961352884, 121.83417189302 25.0316603508465, 121.834294105972 25.0318041824839, 121.834628468609 25.032080340597, 121.835156282841 25.0323432296174, 121.835312133152 25.0324928176062, 121.835331944633 25.0325230343578, 121.835399303665 25.0327539977974, 121.835420766102 25.0330070997202, 121.835613597843 25.0332572093817, 121.835673032284 25.0333026838108, 121.835780014277 25.0333314044942, 121.836015440701 25.0334202590659, 121.837148961532 25.0339437220841, 121.837571656146 25.0341094807124, 121.837701067477 25.0341137413568, 121.83795597519 25.0341149380441, 121.838112155692 25.0340922009822, 121.838347582116 25.03398689243, 121.83851664008 25.0338576499923, 121.838645084511 25.0337891394782, 121.838783764872 25.0337807626442, 121.839032581023 25.0337314681442, 121.839330204884 25.033633291824, 121.840143790534 25.0340013051806, 121.841608502834 25.0346151232565, 121.842318493279 25.0348429524669, 121.842740264987 25.0349205780758, 121.843440777867 25.034932729399, 121.844441252317 25.03485246144, 121.845605125915 25.0347772698421, 121.84611914497 25.0347844392041, 121.846539345842 25.0348152288708, 121.846890808826 25.0348705883294, 121.847536510393 25.0350168325496, 121.847980556591 25.0350674947656, 121.848666898983 25.0350936117971, 121.849218675619 25.0351066868151, 121.849741472459 25.0351774318131, 121.850156954769 25.0353066692601, 121.851274062544 25.035726606879, 121.851650306276 25.0358390396427, 121.851961040759 25.0359383768547, 121.852157135005 25.0360359128827, 121.852436106724 25.0361358227509, 121.853768242786 25.0364861088448, 121.856265415031 25.0371631620461, 121.858232034636 25.0377279831436, 121.859004021982 25.0379439786597, 121.859655819682 25.0381139028428, 121.859725159863 25.0378871377713, 121.859803085018 25.0377758492188, 121.860380589667 25.0371541871136, 121.860631535083 25.0368005742506, 121.86088016916 25.0365046994219, 121.861071680136 25.0362809230412, 121.861127482472 25.0362064305458, 121.861213504881 25.0359188588827, 121.861695386169 25.0359832030187, 121.861799057792 25.0359866775251, 121.861864538115 25.0359551918156, 121.862893345744 25.0347943554105, 121.863038629932 25.0347405047658, 121.863444765277 25.0348158956617, 121.864426880905 25.0352245686506, 121.865311614096 25.0359987485638, 121.865513337661 25.0361829399595, 121.865620505571 25.0362299437582, 121.865902820871 25.0364103027251, 121.866046698955 25.0365317078444, 121.865915664222 25.0374923441481, 121.865864988518 25.0379034458433, 121.865862969877 25.0383097018541, 121.865901764644 25.03863605971, 121.866123386313 25.038608884652)","wkt0":"LINESTRING (121.865993512209 25.0385985444662, 121.866302571301 25.0385554652883, 121.866386895601 25.0385940839683, 121.866420119417 25.0389192445368, 121.866063512772 25.0390556614768, 121.865923829627 25.0388528490569, 121.865879539141 25.0386460683393, 121.86582178899 25.0383250996065, 121.865894917707 25.0374955221836, 121.86601015786 25.0365324026438, 121.86595747843 25.0364845122529, 121.86585690861 25.0364430072476, 121.865598300499 25.0362817762652, 121.865454629327 25.0361971699081, 121.865103433127 25.0359058366973, 121.86439625169 25.0352393620918, 121.863743346028 25.035014277255, 121.863390553483 25.0348690097362, 121.863042592228 25.0347716184745, 121.862946956078 25.0347991305493, 121.861915827241 25.0359619807227, 121.861802654578 25.0360113377868, 121.861678241623 25.0360098778408, 121.861247672119 25.0359548310603, 121.86116949681 25.0361987634867, 121.861096603763 25.0363168958851, 121.861012245695 25.0364173429155, 121.860700229676 25.036770586974, 121.860412288036 25.0371757269505, 121.859845007076 25.0377828422714, 121.859756858231 25.0379074808292, 121.859672725615 25.0381773408762, 121.859025914653 25.0380089910513, 121.858249427877 25.0377941010621, 121.856165651693 25.0371988653712, 121.853750217812 25.0365371916828, 121.852430522031 25.0361786963215, 121.852101245075 25.0360583928782, 121.851892360961 25.0359790636134, 121.851604434115 25.0359527368887, 121.851102543282 25.035768449658, 121.84983526893 25.0353089270455, 121.849404039043 25.035222766364, 121.84811431168 25.0351814810161, 121.84764015692 25.0351312205737, 121.846495713745 25.0348894914917, 121.845792406196 25.034851197732, 121.843362858337 25.0350378796975, 121.842685966096 25.0350067660563, 121.842254736209 25.0349517188256, 121.841450369105 25.0346447230725, 121.839239428918 25.033693404198, 121.839048744381 25.0337552053925, 121.838796972526 25.0337963196212, 121.838653009103 25.0338046964542, 121.838525885438 25.0338839771666, 121.838360789769 25.0340168096415, 121.838109514162 25.0341125446694, 121.837963899782 25.0341352817275, 121.837694463651 25.0341364784147, 121.837577052015 25.0341366272121, 121.837131787099 25.033961147855, 121.836040351289 25.0334634267658, 121.835775357793 25.0333963802187, 121.835585861771 25.0332655862515, 121.835350729661 25.0329972936286, 121.835299646578 25.0325423349158, 121.835098506937 25.0323284245035, 121.834798393821 25.0322102948729, 121.834578098023 25.0320857798568, 121.83426361779 25.03180801559, 121.834143831663 25.0316636982942, 121.834091726043 25.0315080495251, 121.834024079107 25.0311689470058, 121.833957403016 25.0309727559242, 121.833909480352 25.030880249473, 121.833840800554 25.0307809217633, 121.833404617797 25.0304596020553, 121.833322730346 25.0303806183111, 121.833213095671 25.0301418589417, 121.83321277663 25.030009334196, 121.831128278718 25.0291108878087, 121.82742749421 25.0275054557404, 121.824709359122 25.0263194689534, 121.82229775994 25.0252836137766, 121.821132066175 25.0247594779623, 121.820174343197 25.0243305695221, 121.819654725554 25.0241327274514, 121.819193182642 25.0239755854758, 121.816545048118 25.0233335079765, 121.81610853517 25.0231940815705, 121.815825891385 25.0230456790417, 121.815540690206 25.0228398937026, 121.815303007384 25.0225513835168, 121.815181204576 25.0223905580737, 121.814925131383 25.0219251798014, 121.814669178479 25.0215651097939, 121.814477389964 25.0213785318516, 121.814454555803 25.0212306246057, 121.814331637133 25.0211396328632, 121.814127304799 25.0210693936233, 121.813883063806 25.0209903744785, 121.813591816797 25.0208959166388, 121.813366956497 25.0206332151861, 121.812825112512 25.0199911202031, 121.812580440731 25.0196808429056, 121.812422633286 25.0195314579825, 121.812310014026 25.0194217293447, 121.810871040178 25.0188131394537, 121.810680189586 25.0187266679805, 121.810169053396 25.018482512904, 121.809592209129 25.0183445770396, 121.808841354028 25.018112090427, 121.808261185782 25.0179447779981, 121.807203604996 25.0176210844356, 121.80687869672 25.0175310215756, 121.806738695593 25.0172042813431, 121.806610251163 25.0170433046084, 121.806217653663 25.0168577921245, 121.806125200088 25.016762043636, 121.805988831066 25.0165663574305, 121.805403401825 25.0155265822234, 121.80538491111 25.0153985172147, 121.805398118764 25.0152797278233, 121.805520949941 25.0151744031282, 121.805903971892 25.0148677042827, 121.805906613423 25.0147656706433, 121.805818122145 25.0145622015492, 121.805709489195 25.0145598077931, 121.805039065204 25.0150531305405, 121.804912737498 25.0150612986675, 121.804834812342 25.0150170143529, 121.804722547288 25.0148970277176, 121.804575942334 25.014607383686, 121.804481837803 25.0142911083793, 121.804246741571 25.01407058292, 121.804008343425 25.0137468256936, 121.803904002963 25.0136654374211, 121.803573151243 25.0134975739387, 121.803221357287 25.0131861917088, 121.80306022672 25.0131159492091, 121.802706068791 25.0130050533773, 121.802496067101 25.0128458664793, 121.80223158384 25.0125993059143, 121.801800916794 25.0124155727517, 121.801393530816 25.0123132227873, 121.801191909728 25.0122179709079, 121.800818695107 25.0119796108522, 121.800694543165 25.0118575266663, 121.800447229853 25.011461051451, 121.800259406097 25.011268737732, 121.800077085364 25.0109682234934, 121.799960858013 25.0108581074439, 121.799584188288 25.0106694828787, 121.799232014927 25.0104737122789, 121.798586466521 25.0100525187118, 121.798318816493 25.0098730431737, 121.798195985316 25.0098084092758, 121.797779655921 25.0096574181929, 121.797609199287 25.0095638022414, 121.797467253034 25.0094523237659, 121.797103712372 25.0090040734796, 121.796629557612 25.0084962739493, 121.796473377109 25.0082877074763, 121.79631059278 25.0081617295642, 121.796002854454 25.0080001425044, 121.795828183236 25.0078717704109, 121.795517473188 25.0074689983564, 121.794988506666 25.0070964479919, 121.794278925482 25.0066891848148, 121.794045150015 25.0065204140796, 121.793679958396 25.006154743358, 121.793631090078 25.006048213876, 121.793753921256 25.0058950027735, 121.794245576157 25.0054898303042, 121.794361803508 25.0051564747003, 121.79425878381 25.0048593266176, 121.793964253138 25.0043799381654, 121.793751609916 25.003899650106, 121.79356241028 25.0036572610266, 121.793279436304 25.003303850907, 121.793069434614 25.0029253029534, 121.792913254111 25.0027646067501, 121.792740233851 25.0027035600927, 121.792492920539 25.0029357766279, 121.792320542709 25.0030584569792, 121.792232399574 25.003102457556, 121.792069945436 25.0031156244419, 121.791948104832 25.0030689418399, 121.791383807837 25.0026637600497, 121.791169843851 25.0025189236941, 121.790920739153 25.0022175637186, 121.79075974621 25.0020239651075, 121.790662009574 25.0019485540716, 121.79056187457 25.0019121982818, 121.79029054432 25.0019329930584, 121.790167056952 25.0019416145043, 121.79003134412 25.0018958860191, 121.78990058835 25.0018180809002, 121.789791583572 25.0017695711541, 121.789596482129 25.0017938416031, 121.789428744929 25.0017878565907, 121.789253083138 25.0017136424131, 121.789088647852 25.0015505506154, 121.788940693196 25.0014698276195, 121.788677507703 25.0014177892668, 121.788531174605 25.0014166619503, 121.788446425701 25.0014631692328, 121.788369821311 25.0015158374709, 121.788136706227 25.001745961496, 121.788023120407 25.0017710985545, 121.787913131347 25.0017537419575, 121.787642409795 25.0016178821178, 121.787542254256 25.0016140782926, 121.787296039082 25.0017304004571, 121.787042452135 25.0017627195356, 121.786891554694 25.0018225696584, 121.78670796831 25.001999725851, 121.786402541323 25.0022816191308, 121.786175039492 25.0024444107091, 121.785916169484 25.0024767295997, 121.785716403725 25.0024132888064, 121.785499468016 25.0022861078721, 121.785335362922 25.0021592260559, 121.785124040466 25.0020814211037, 121.78481660295 25.0020900193561, 121.784582696452 25.0021771746109, 121.784307147097 25.0022885018674, 121.784077333927 25.0023785759056, 121.783986201118 25.0025258064173, 121.783932049738 25.0025820651841, 121.783824737554 25.0026146832871, 121.783148175504 25.0025033627531, 121.783050438868 25.0024052090804, 121.782665703384 25.0018462604598, 121.782543925356 25.001728006451, 121.782360338973 25.0015975330454, 121.782229493108 25.0015197328859, 121.782133827716 25.0015098524449, 121.781819155371 25.001505064424, 121.781391794246 25.0013784974175, 121.781123772415 25.0013000771026, 121.780596787041 25.0010822215891, 121.780011772932 25.0009135345221, 121.779799374961 25.000771597263, 121.779753148174 25.0003978295715, 121.779689619558 25.0002015030116, 121.779200738067 24.9999247080689, 121.779030029146 24.9997412645167, 121.778560827255 24.9996036068588, 121.778332004659 24.9995302891303, 121.777939407159 24.9990808056097, 121.777885255779 24.9990305303867, 121.777558696547 24.9989455412724, 121.777266807405 24.9989192066053, 121.777219259852 24.9988351151875, 121.777049211313 24.9985232881463, 121.776969965393 24.998425131294, 121.776766567529 24.9983473239772, 121.776520574983 24.9983509150853, 121.776247176555 24.99841076687, 121.775863824413 24.9981626810323, 121.775680238029 24.9980106571353, 121.775573158937 24.9979304626993, 121.774972923666 24.9977284349586, 121.774642932628 24.997638613937, 121.774244878006 24.9975919454884, 121.774052724928 24.9975132862995, 121.773914044566 24.9973445029591, 121.773834112013 24.997049602079, 121.773558428496 24.9969021937439, 121.773413144308 24.9967741093167, 121.773291633896 24.9964685615809, 121.773188614198 24.9963632207554, 121.772970357724 24.9963123458926, 121.772871300323 24.9962129902174, 121.772876583385 24.9961100432885, 121.77297167849 24.9959604109707, 121.773049778476 24.995914469058, 121.773326964369 24.9958894851883, 121.773407531055 24.9958858940084)","wkt1":"LINESTRING (121.773415455647 24.9959265940416, 121.77317035282 24.9959373945543, 121.773055934941 24.9959461131439, 121.772917527111 24.9961100432885, 121.772918847876 24.9962034137625, 121.772998093797 24.9962812224367, 121.773221633332 24.9963404767017, 121.773312766141 24.9964218764534, 121.773447484207 24.9967609417512, 121.77357427768 24.9968770556893, 121.773875742371 24.9970377595927, 121.773938220944 24.9973197506458, 121.774095727118 24.9974942845146, 121.774265816876 24.9975667760175, 121.774699146043 24.9976113499143, 121.774987166412 24.997705112474, 121.775584812733 24.9978957413087, 121.775718540224 24.9980022778599, 121.775900805843 24.9981471195397, 121.776256421913 24.9983640824804, 121.776525858044 24.9983138069641, 121.776792918322 24.9983140850423, 121.776981852281 24.9984011905864, 121.777113885971 24.9985526621515, 121.777259837504 24.9988222003612, 121.777298505773 24.9988901786135, 121.77759385411 24.9989160970063, 121.777921533115 24.9989997528363, 121.777977709354 24.9990712293784, 121.778355778435 24.9995075456628, 121.779051161391 24.9997041568154, 121.779239040262 24.9999067527577, 121.779722770571 25.0001943366754, 121.779787488073 25.0003942385233, 121.779825790268 25.0007536420757, 121.780013503747 25.0008847851704, 121.780575324604 25.0010451142928, 121.781115847823 25.0012593788492, 121.781409917497 25.0013586385969, 121.78184590087 25.0014775333, 121.782140431542 25.0014811243165, 121.782258950112 25.0015000307338, 121.782393358107 25.0015795779787, 121.782595900601 25.0017352589721, 121.782698055998 25.0018389555812, 121.783066288052 25.0023716931741, 121.78315477933 25.0024698468737, 121.783814764206 25.0025833209311, 121.783927757251 25.002540469609, 121.784046956324 25.0023654089407, 121.784271486433 25.0022657589104, 121.784567383535 25.0021583171843, 121.784792198172 25.002062269108, 121.785126681996 25.0020491021091, 121.78534989134 25.0021233160841, 121.785540411742 25.0022696491533, 121.785717394299 25.0023773789089, 121.785941264025 25.0024384257284, 121.786153907247 25.0024132888064, 121.786380144478 25.0022556535923, 121.786851931733 25.001812095889, 121.786993253626 25.001741472735, 121.787297023945 25.0016837477948, 121.787542324253 25.0015886933099, 121.787634485203 25.0015831689922, 121.787929664678 25.0017144921761, 121.788043104421 25.0017369056168, 121.788148834357 25.0016932467293, 121.788350145781 25.0014750811478, 121.788437004929 25.0014195264653, 121.788610200604 25.0013805758141, 121.788711899536 25.0013913488719, 121.788969186986 25.001451456574, 121.789088647852 25.0015146404657, 121.789288743802 25.0016968843668, 121.789449156028 25.0017526234142, 121.789583274475 25.0017567345217, 121.789784030808 25.0017411734842, 121.789903298625 25.0017826410494, 121.790069646315 25.001877930996, 121.79016851541 25.0019159701824, 121.790322242688 25.0019006740248, 121.790533565144 25.0018743399911, 121.790660090019 25.0019022651252, 121.790792765343 25.0020000251011, 121.790955318881 25.0022215012508, 121.791196259158 25.0024889988059, 121.791391732429 25.0026326382025, 121.791980133392 25.0030330321341, 121.792064662375 25.0030773207698, 121.792205984267 25.0030653508698, 121.792321745631 25.0030298815771, 121.792624997074 25.0027490458403, 121.79272562126 25.0026675109533, 121.792868348089 25.0026999691119, 121.79293633898 25.0027228509605, 121.793099812217 25.002900166131, 121.793323021561 25.0033062448824, 121.793607316302 25.0036572610266, 121.793774062927 25.0038876802861, 121.794023687578 25.004427817246, 121.794302369067 25.0048461599186, 121.79440670953 25.0051600656093, 121.794282557587 25.0055065878331, 121.793754732547 25.0060573524497, 121.793758989471 25.0061871886204, 121.794327288775 25.0066799275303, 121.795022846565 25.007077296778, 121.795579549159 25.0074630136205, 121.795930250381 25.0078766034254, 121.796346253445 25.0081126549981, 121.796525877532 25.0082526970006, 121.796661418942 25.0084165776976, 121.797118240791 25.0089262728628, 121.797510838291 25.0094140220697, 121.797618150476 25.0094933185368, 121.79778720844 25.0095950573254, 121.798162966182 25.0097330030187, 121.798292401186 25.0097784861635, 121.798581648798 25.0099879477969, 121.798975897254 25.0102195521015, 121.799381372216 25.0104984342245, 121.799881157589 25.010738784158, 121.800052667755 25.0108307935291, 121.800174000453 25.0109785705866, 121.800338927094 25.011281215856, 121.800547544385 25.0114777616129, 121.800830581996 25.0119185687744, 121.801207330311 25.0121534609172, 121.801396529948 25.0122339525163, 121.801912949199 25.0123859588123, 121.802244791493 25.0125239013708, 121.802609652921 25.0128470633741, 121.802743380412 25.0129407203513, 121.803044845103 25.0130319834712, 121.803215223833 25.0131049939183, 121.803617066691 25.0134464069493, 121.803926455974 25.0136008055193, 121.804081340506 25.0137196241911, 121.804307166585 25.0140379678591, 121.80455924953 25.0142742413608, 121.804593854726 25.0144552726681, 121.804797830913 25.0149018152165, 121.804881369321 25.0149775175183, 121.805010804325 25.0149894862574, 121.805694960776 25.0145035545124, 121.805821754249 25.0144891919685, 121.805888122708 25.0145430514994, 121.805954543549 25.0146331911558, 121.805973018425 25.0147522291936, 121.80597001016 25.0148748855327, 121.80591321725 25.0149706354928, 121.805472081623 25.0153156339487, 121.805452270143 25.0153958242575, 121.805476043919 25.0155301728292, 121.805809808146 25.016117793271, 121.806139214331 25.0166481856097, 121.806237465143 25.01678927212, 121.806665393116 25.0169975249408, 121.806826201699 25.0172029056428, 121.806908213217 25.0175128064833, 121.808871236155 25.0180832575934, 121.809805210031 25.0183628904905, 121.810247030009 25.0184859289652, 121.81072074478 25.0186777302494, 121.810880285536 25.0187544944474, 121.812343693543 25.0193609901745, 121.812463883189 25.0194603271269, 121.812686580372 25.0197048647561, 121.81287398083 25.0199540186196, 121.813424588983 25.0206106539878, 121.813675025014 25.0208791612098, 121.814116490832 25.0210000396102, 121.814356050596 25.0211031437996, 121.814498522209 25.021188238665, 121.814547143892 25.0213240108678, 121.8147923925 25.0215915641255, 121.814916544442 25.0217854471096, 121.815233528126 25.0223575198087, 121.81536296313 25.0225226783764, 121.815545889131 25.0227321182696, 121.815788909955 25.0229571161567, 121.81610127096 25.0231156915474, 121.816558255771 25.0232766603194, 121.819228182924 25.0239211316897, 121.819689790413 25.0240832961905, 121.820203822271 25.0242938585727, 121.821129424644 25.0246900647839, 121.822065847276 25.0250903867992, 121.824767472798 25.0262428760727, 121.827453909517 25.0274073220517, 121.83117318474 25.0290247227745, 121.833247116529 25.0299291534338, 121.833248437295 25.030134990509, 121.833349145653 25.0303734379682, 121.83341518392 25.0304416512089, 121.833848725146 25.0307629709638, 121.833934574893 25.0308611019689, 121.833979512762 25.0309592129514, 121.834048701164 25.0311687797171, 121.834117105791 25.0314961352884, 121.83417189302 25.0316603508465, 121.834294105972 25.0318041824839, 121.834628468609 25.032080340597, 121.835156282841 25.0323432296174, 121.835312133152 25.0324928176062, 121.835331944633 25.0325230343578, 121.835399303665 25.0327539977974, 121.835420766102 25.0330070997202, 121.835608273541 25.0332359474095, 121.835780014277 25.0333314044942, 121.836015440701 25.0334202590659, 121.836163802074 25.0334647570545, 121.837148961532 25.0339437220841, 121.837571656146 25.0341094807124, 121.837701067477 25.0341137413568, 121.83795597519 25.0341149380441, 121.838112155692 25.0340922009822, 121.838347582116 25.03398689243, 121.83851664008 25.0338576499923, 121.838645084511 25.0337891394782, 121.838783764872 25.0337807626442, 121.839032581023 25.0337314681442, 121.839330204884 25.033633291824, 121.840143790534 25.0340013051806, 121.841608502834 25.0346151232565, 121.842318493279 25.0348429524669, 121.842740264987 25.0349205780758, 121.843440777867 25.034932729399, 121.844441252317 25.03485246144, 121.845605125915 25.0347772698421, 121.84611914497 25.0347844392041, 121.846539345842 25.0348152288708, 121.846890808826 25.0348705883294, 121.847536510393 25.0350168325496, 121.847980556591 25.0350674947656, 121.848666898983 25.0350936117971, 121.849218675619 25.0351066868151, 121.849741472459 25.0351774318131, 121.850156954769 25.0353066692601, 121.851274062544 25.035726606879, 121.851650306276 25.0358390396427, 121.851961040759 25.0359383768547, 121.852157135005 25.0360359128827, 121.852436106724 25.0361358227509, 121.853768242786 25.0364861088448, 121.858232034636 25.0377279831436, 121.859004021982 25.0379439786597, 121.859655819682 25.0381139028428, 121.859725159863 25.0378871377713, 121.859803085018 25.0377758492188, 121.860380589667 25.0371541871136, 121.860631535083 25.0368005742506, 121.86088016916 25.0365046994219, 121.861071680136 25.0362809230412, 121.861127482472 25.0362064305458, 121.861213504881 25.0359188588827, 121.861695386169 25.0359832030187, 121.861799057792 25.0359866775251, 121.861888391557 25.0359476077604, 121.862893345744 25.0347943554105, 121.863038629932 25.0347405047658, 121.863442168682 25.0348408076172, 121.864459573429 25.0352292518982, 121.865311614096 25.0359987485638, 121.865513337661 25.0361829399595, 121.86558765819 25.0362562347234, 121.86597503824 25.036466952443, 121.866043149018 25.036558476301, 121.865923955157 25.0374981921919, 121.865851587455 25.0383453199938, 121.865901764644 25.03863605971, 121.866121626448 25.0385889713169)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400078000'=='0100020200' || '0400078000'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
