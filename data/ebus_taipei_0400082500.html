
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492240</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400082500">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400082500">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400082500" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400082500" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400082500" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400082500',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="dp8RwmntRpvo8frLFW_y3rznAR4H_rz5Qz4MnxoyJ-tRr2VIzXaYhcgmcCPGX6qfAY61tQV3zuOt_hrb_iQw0lJ1qnI1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">825 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0400082500" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400082500" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">瑞芳 - 金瓜石</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0930 - 0930 <br>
                        [假日] 0930 - 0930
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 825基隆客運瑞芳站班表:0930<br/>825金瓜石(黃金博物館)班表:1810<br>
[假日]<br /> 825基隆客運瑞芳站班表:0930<br/>825金瓜石(黃金博物館)班表:1810<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">基隆客運瑞芳站:02-2497-2055</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 金瓜石</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 瑞芳</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">基隆客運瑞芳站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901650" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.11011" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.790845" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">臨時站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110341" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7924761" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110433" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7938803" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">頂埔</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109957" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7967106" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">加油站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106615" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8013407" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">東和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106173" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8037843" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107574" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.808298" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">埔頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10741" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.80978" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">柑坪里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107474" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8192653" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">瑞柑國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107317" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8231598" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">流籠腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109243" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8264296" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">九號停車場一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300310" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11092" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.829554" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">九號停車場二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.111614" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8331352" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">七番坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109952" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8389447" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">大竿林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108666" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8410329" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">九份派出所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109513" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.84294" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">代天府</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110598" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8452439" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">九份老街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244801250" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110364" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.845765" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">隔頂</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.111958" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8480709" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">南新山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109993" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8497563" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">金瓜橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245000920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107685" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8501471" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">六號橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245000120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107894" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8509863" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">保民堂</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10672" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8519635" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">新山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107299" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8531761" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">瓜山站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245000320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106541" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.855507" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">金瓜石(黃金博物館)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108453" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.856086" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">金瓜石(黃金博物館)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108369" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.85587" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">瓜山站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245000360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106668" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8553" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">新山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107282" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.853329" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">保民堂</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106865" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.851965" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">六號橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245000160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107606" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.851482" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">金瓜橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245000960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107899" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.85022" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">南新山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109899" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.84983" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">隔頂</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11206" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8480656" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">九份老街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244801260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110328" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.846055" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">代天府</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110708" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8452425" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">九份派出所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109443" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8425581" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">大竿林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10886" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.840997" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">七番坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244800060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110036" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.838862" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">九號停車場二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244700160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.111716" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.833091" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">九號停車場一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300350" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11104" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.82941" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">流籠腳</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109359" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8263792" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">瑞柑國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245002560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107452" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8229426" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">柑坪里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245001360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107673" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8191379" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">埔頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244300160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107608" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.809858" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107778" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.807937" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">瑞芳火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108227" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8058805" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">東和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106304" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8038192" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">加油站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106861" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.801054" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">頂埔</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110147" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7964203" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901061" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11067" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7936866" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">臨時站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110541" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.792322" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">基隆客運瑞芳站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901650" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11011" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.790845" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400082500";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 26;
        var existBackNum = 27;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400082500',
                        url: './StopStatusRecent3OfRoute?routeid=0400082500&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400082500',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400082500',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400082500');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400082500","Name":"825","BeginStop":"瑞芳","GoDirStops":[{"UniStopId":"2244901650","Name":"基隆客運瑞芳站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.790845,"Latitude":25.11011,"PublicId":"2244901650"},{"UniStopId":"2245300720","Name":"臨時站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7924761,"Latitude":25.110341,"PublicId":"2245300720"},{"UniStopId":"2244901020","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7938803,"Latitude":25.110433,"PublicId":"2244901020"},{"UniStopId":"2244900920","Name":"頂埔","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7967106,"Latitude":25.109957,"PublicId":"2244900920"},{"UniStopId":"2244400020","Name":"加油站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8013407,"Latitude":25.106615,"PublicId":"2244400020"},{"UniStopId":"2244200220","Name":"東和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8037843,"Latitude":25.106173,"PublicId":"2244200220"},{"UniStopId":"2244100120","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.808298,"Latitude":25.107574,"PublicId":"2244100120"},{"UniStopId":"2244300120","Name":"埔頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.80978,"Latitude":25.10741,"PublicId":"2244300120"},{"UniStopId":"2245001320","Name":"柑坪里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8192653,"Latitude":25.107474,"PublicId":"2245001320"},{"UniStopId":"2245002520","Name":"瑞柑國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8231598,"Latitude":25.107317,"PublicId":"2245002520"},{"UniStopId":"2245001520","Name":"流籠腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8264296,"Latitude":25.109243,"PublicId":"2245001520"},{"UniStopId":"2245300310","Name":"九號停車場一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.829554,"Latitude":25.11092,"PublicId":"2245300310"},{"UniStopId":"2244700120","Name":"九號停車場二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8331352,"Latitude":25.111614,"PublicId":"2244700120"},{"UniStopId":"2244800020","Name":"七番坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8389447,"Latitude":25.109952,"PublicId":"2244800020"},{"UniStopId":"2244800540","Name":"大竿林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8410329,"Latitude":25.108666,"PublicId":"2244800540"},{"UniStopId":"2244800120","Name":"九份派出所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.84294,"Latitude":25.109513,"PublicId":"2244800120"},{"UniStopId":"2244800720","Name":"代天府","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8452439,"Latitude":25.110598,"PublicId":"2244800720"},{"UniStopId":"2244801250","Name":"九份老街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.845765,"Latitude":25.110364,"PublicId":"2244801250"},{"UniStopId":"2245002620","Name":"隔頂","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8480709,"Latitude":25.111958,"PublicId":"2245002620"},{"UniStopId":"2245001240","Name":"南新山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8497563,"Latitude":25.109993,"PublicId":"2245001240"},{"UniStopId":"2245000920","Name":"金瓜橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8501471,"Latitude":25.107685,"PublicId":"2245000920"},{"UniStopId":"2245000120","Name":"六號橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8509863,"Latitude":25.107894,"PublicId":"2245000120"},{"UniStopId":"2245001020","Name":"保民堂","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8519635,"Latitude":25.10672,"PublicId":"2245001020"},{"UniStopId":"2245002240","Name":"新山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8531761,"Latitude":25.107299,"PublicId":"2245002240"},{"UniStopId":"2245000320","Name":"瓜山站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.855507,"Latitude":25.106541,"PublicId":"2245000320"},{"UniStopId":"2245002100","Name":"金瓜石(黃金博物館)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.856086,"Latitude":25.108453,"PublicId":"2245002100"}],"LastStop":"金瓜石","BackDirStops":[{"UniStopId":"2245002140","Name":"金瓜石(黃金博物館)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.85587,"Latitude":25.108369,"PublicId":"2245002140"},{"UniStopId":"2245000360","Name":"瓜山站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8553,"Latitude":25.106668,"PublicId":"2245000360"},{"UniStopId":"2245002200","Name":"新山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.853329,"Latitude":25.107282,"PublicId":"2245002200"},{"UniStopId":"2245001160","Name":"保民堂","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.851965,"Latitude":25.106865,"PublicId":"2245001160"},{"UniStopId":"2245000160","Name":"六號橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.851482,"Latitude":25.107606,"PublicId":"2245000160"},{"UniStopId":"2245000960","Name":"金瓜橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.85022,"Latitude":25.107899,"PublicId":"2245000960"},{"UniStopId":"2245001200","Name":"南新山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.84983,"Latitude":25.109899,"PublicId":"2245001200"},{"UniStopId":"2245002660","Name":"隔頂","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8480656,"Latitude":25.11206,"PublicId":"2245002660"},{"UniStopId":"2244801260","Name":"九份老街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.846055,"Latitude":25.110328,"PublicId":"2244801260"},{"UniStopId":"2244800760","Name":"代天府","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8452425,"Latitude":25.110708,"PublicId":"2244800760"},{"UniStopId":"2244800160","Name":"九份派出所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8425581,"Latitude":25.109443,"PublicId":"2244800160"},{"UniStopId":"2244800500","Name":"大竿林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.840997,"Latitude":25.10886,"PublicId":"2244800500"},{"UniStopId":"2244800060","Name":"七番坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.838862,"Latitude":25.110036,"PublicId":"2244800060"},{"UniStopId":"2244700160","Name":"九號停車場二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.833091,"Latitude":25.111716,"PublicId":"2244700160"},{"UniStopId":"2245300350","Name":"九號停車場一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.82941,"Latitude":25.11104,"PublicId":"2245300350"},{"UniStopId":"2245001560","Name":"流籠腳","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8263792,"Latitude":25.109359,"PublicId":"2245001560"},{"UniStopId":"2245002560","Name":"瑞柑國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8229426,"Latitude":25.107452,"PublicId":"2245002560"},{"UniStopId":"2245001360","Name":"柑坪里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8191379,"Latitude":25.107673,"PublicId":"2245001360"},{"UniStopId":"2244300160","Name":"埔頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.809858,"Latitude":25.107608,"PublicId":"2244300160"},{"UniStopId":"2244100160","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.807937,"Latitude":25.107778,"PublicId":"2244100160"},{"UniStopId":"2244100460","Name":"瑞芳火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8058805,"Latitude":25.108227,"PublicId":"2244100460"},{"UniStopId":"2244400160","Name":"東和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8038192,"Latitude":25.106304,"PublicId":"2244400160"},{"UniStopId":"2244400060","Name":"加油站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.801054,"Latitude":25.106861,"PublicId":"2244400060"},{"UniStopId":"2244900960","Name":"頂埔","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7964203,"Latitude":25.110147,"PublicId":"2244900960"},{"UniStopId":"2244901061","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7936866,"Latitude":25.11067,"PublicId":"2244901061"},{"UniStopId":"2244901060","Name":"臨時站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.792322,"Latitude":25.110541,"PublicId":"2244901060"},{"UniStopId":"2244901650","Name":"基隆客運瑞芳站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.790845,"Latitude":25.11011,"PublicId":"2244901650"}],"RouteMapUrl":"../MapOverview?nid=0400082500","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"0930 - 0930","HeadwayDesc":"825基隆客運瑞芳站班表:0930;825金瓜石(黃金博物館)班表:1810","HolidayBusTimeDesc":"0930 - 0930","HolidayHeadwayDesc":"825基隆客運瑞芳站班表:0930;825金瓜石(黃金博物館)班表:1810","RouteNote":"","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"基隆客運瑞芳站:02-2497-2055","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.805539440656 25.1082311910922, 121.807113352697 25.1078755907939, 121.808118014872 25.1076375931555, 121.809361735576 25.1073521548409, 121.810257214483 25.107730081405, 121.810696589089 25.1078452929628, 121.81132571365 25.1079266187029, 121.812130940258 25.1078819692837, 121.813128558351 25.1079457541633, 121.813389629635 25.1080175121132, 121.813634851735 25.108155048066, 121.814739451822 25.1086334327839, 121.815020334586 25.1087534273237, 121.815240462144 25.1088156171385, 121.815460589703 25.1088204009691, 121.816241162024 25.1086768859697, 121.817191232565 25.108324476201, 121.817698846714 25.1082108597129, 121.818041365195 25.1080761144076, 121.819616598001 25.1073457763235, 121.820281383226 25.1069431317369, 121.820612455074 25.1068394804407, 121.820887174267 25.1068426697126, 121.822425865898 25.1073035186371, 121.822717314785 25.1073485669249, 121.823157569902 25.1073437830367, 121.823950469366 25.1074841103457, 121.824860476692 25.1078496781756, 121.825123500141 25.1079591365677, 121.825318782268 25.1081450816978, 121.82553406702 25.1084357006608, 121.825694319882 25.1087689747803, 121.825835201519 25.1089778686218, 121.825935579686 25.1090735450712, 121.826152625458 25.109174403914, 121.827164331715 25.1094809664469, 121.827670184844 25.1094123985609, 121.827833959747 25.1094171823681, 121.828107358175 25.1095080746703, 121.828951327233 25.1101431229486, 121.829195228567 25.1106641550738, 121.829924731295 25.1112880353016, 121.830164230078 25.1118895883658, 121.830242155234 25.1119442023808, 121.830425301362 25.1120207416892, 121.831068073832 25.1119250675462, 121.831276532543 25.1117964914401, 121.831525498898 25.1116619632668, 121.83164877033 25.1116635578399, 121.831784368906 25.1116938547248, 121.832036194833 25.1118501227485, 121.83217883749 25.1118804195871, 121.83232435263 25.1117964914401, 121.832480412245 25.1115997748999, 121.832631860005 25.1115136678781, 121.832810603582 25.1115136678781, 121.833289601149 25.1116810981426, 121.833393501356 25.111674719851, 121.83359601871 25.1115088841528, 121.833693315091 25.1113414536524, 121.833800737339 25.1112409952421, 121.833971556324 25.1112059145079, 121.834194325413 25.1112166779161, 121.834366905419 25.11119275923, 121.834747285839 25.1110492470155, 121.835412951575 25.1109312479573, 121.835855848222 25.1106996346099, 121.836042516391 25.1107028237811, 121.836134089456 25.1107570396801, 121.83631943686 25.1110408754644, 121.836578747123 25.1111560839023, 121.836721389781 25.1111768134367, 121.837043656526 25.1111656513802, 121.837156361836 25.1111321652044, 121.837232085716 25.1110635982445, 121.837547748634 25.1105417705278, 121.837583409299 25.110389487306, 121.837509446439 25.1101180081076, 121.837498880316 25.1099202783854, 121.837611585626 25.1096316562008, 121.837761272366 25.1095822236036, 121.837888065839 25.1096188994034, 121.838240269932 25.1098708459049, 121.838640902088 25.1098134404186, 121.838774739643 25.1098405485683, 121.839400782419 25.1103444401386, 121.839524053851 25.1103890886586, 121.83980273534 25.1104146020912, 121.839964749223 25.1103811157098, 121.840015818816 25.1102663051893, 121.840010535755 25.1099744946314, 121.840063366369 25.1097875282111, 121.840287015968 25.1095192368781, 121.840418211993 25.1092740667203, 121.840667836644 25.1089826524461, 121.841163123649 25.1086266556801, 121.84169671285 25.1082471372697, 121.841886903061 25.1081785686917, 121.842029545718 25.1082136502945, 121.842419171496 25.1084225450848, 121.842556531093 25.1086202772292, 121.842579424359 25.1087526300182, 121.84252879502 25.1090731464195, 121.842629173187 25.1093063574521, 121.842895087277 25.1095152503754, 121.843572639901 25.1098780215888, 121.843674779088 25.109836562076, 121.843887862564 25.1096324535005, 121.844097864255 25.1095670749004, 121.844249312015 25.1095814263034, 121.844349690181 25.1096085345045, 121.844469439573 25.109696237467, 121.84455264779 25.1098038728349, 121.844825605962 25.110582033861, 121.844878436576 25.1106729252972, 121.84502680255 25.1106840873987, 121.84525221317 25.1106139256007, 121.845465296646 25.1106238917676, 121.845579762977 25.1106685401856, 121.845732971757 25.1107996948189, 121.845966527096 25.1112409952421, 121.846046653527 25.1112830522453, 121.846111811285 25.1112814576673, 121.846139987612 25.1111718303759, 121.846009672098 25.1105650913709, 121.845939231279 25.110432740544, 121.845833570051 25.110340254339, 121.845225577735 25.1100400723379, 121.845162180999 25.1099412074538, 121.845178030183 25.1098455316834, 121.845248471001 25.1097897207827, 121.845362937332 25.1097626126217, 121.84558482591 25.1098295857143, 121.845901809594 25.110030504772, 121.846210868686 25.1103785245013, 121.846383448691 25.1105284158549, 121.846593010127 25.1106033614628, 121.846853641156 25.1106464153019, 121.847088297133 25.1107819550667, 121.847174587135 25.1109083258297, 121.847512703065 25.1116916621873, 121.847646980875 25.1118068700119, 121.84798641757 25.111961543322, 121.848549944119 25.1120396771878, 121.848782839075 25.1120205423681, 121.849070325666 25.1118945713973, 121.849414489157 25.1118260405192, 121.84949913415 25.1117219590652, 121.849785518225 25.1111413427671, 121.849686088368 25.1107564459807, 121.849868948447 25.110269295048, 121.849846055181 25.1100301061234, 121.849555486805 25.1095700647762, 121.849604795378 25.109092879678, 121.849470957822 25.1087237276894, 121.849448064556 25.1085610772154, 121.849449825577 25.1081365106205, 121.849527310477 25.1079738593654, 121.849645298848 25.1078745941548, 121.849937628246 25.1077342672939, 121.850099642128 25.1077278887965, 121.850281295497 25.1077793813251, 121.850582601991 25.1079654876037, 121.850803169804 25.1079798391947, 121.851167701041 25.1079128650889, 121.851294934769 25.1078088159588, 121.8515643709 25.1072698320747, 121.851726487914 25.1068627273395, 121.851851857491 25.1067762929727, 121.851971606883 25.1067539680551, 121.852141706209 25.1067996298037, 121.852320165856 25.1069977019731, 121.85249110792 25.107457599659, 121.852683059151 25.1076202516009, 121.852804569563 25.1076282247298, 121.852914017347 25.1075839226511, 121.853129037584 25.1074161393255, 121.853289290446 25.107184519319, 121.853458348411 25.1068783496871, 121.853583821119 25.1068129696142, 121.853950113376 25.1068177535232, 121.854370116757 25.1065562328925, 121.854535652681 25.1063409563439, 121.854632508806 25.1063186313468, 121.855448741792 25.1065881256823, 121.855910569409 25.1067762929727, 121.856359629628 25.1069293780123, 121.856485102942 25.1070392579026, 121.856428309426 25.1073172723196, 121.856410699221 25.1076062986242, 121.856315604116 25.107983028437, 121.856033840842 25.1082720531678, 121.855981890738 25.1083892574847, 121.856015350127 25.1084323121034, 121.85618088605 25.1084355013339, 121.856181766561 25.1084538394072, 121.855992456861 25.1084538394072, 121.855935223695 25.1083868655609, 121.855965161043 25.1082720531678, 121.85629447187 25.1078534654048, 121.85634845197 25.1073084357284, 121.856421265344 25.1071418629189, 121.856386044935 25.1070174815549, 121.854697666563 25.1063999581024, 121.854569112069 25.1064127152356, 121.854412381248 25.1066136399082, 121.85399565308 25.1068628844828, 121.853538626111 25.1068993582998, 121.853426284945 25.1070735760315, 121.853215327587 25.1074129500685, 121.853079729011 25.1075500880447, 121.852913165979 25.1076731866874, 121.852778154256 25.1077047667402, 121.852644316701 25.1076760634919, 121.852417145061 25.1074767351928, 121.852239281994 25.1070122989954, 121.852059657906 25.1068528355165, 121.851950474637 25.1068209427957, 121.851796825602 25.1068946946998, 121.85164009478 25.1072901636105, 121.851447069224 25.1076428656839, 121.851322670842 25.1078777833998, 121.851225814716 25.1079686768463, 121.850727445924 25.1080484078841, 121.850574237144 25.1080388401623, 121.850240964021 25.1078379178317, 121.850013352126 25.1078028361211, 121.849680519258 25.1079335951732, 121.849560993067 25.1080434753318, 121.849540940097 25.1083471258295, 121.849522027416 25.1086376186419, 121.849655864971 25.1089617232136, 121.849690675927 25.1091061702078, 121.849632971705 25.1095716593765, 121.849912973959 25.110016950719, 121.849941150287 25.1102852409597, 121.849758004158 25.1107512593096, 121.849858382325 25.1110514395644, 121.84985452153 25.1112004412197, 121.849520266395 25.1118160387961, 121.849432215372 25.1118877944744, 121.84908441383 25.1119599487528, 121.848786361116 25.1120907033588, 121.848548623354 25.1121018653309, 121.848058619409 25.1120388799037, 121.84781603884 25.1119711107368, 121.847583584139 25.1118531125685, 121.84743918046 25.1116968445485, 121.847252072036 25.1113404570416, 121.847051315703 25.1108441438497, 121.846881701436 25.1107338199554, 121.84652785237 25.1106575774059, 121.846331938843 25.1105826318312, 121.846147031694 25.1104056325257, 121.845986778832 25.1102047140845, 121.845797909387 25.1100416669322, 121.84546859856 25.1098550992638, 121.845294257534 25.1098343695053, 121.845232621817 25.1099204777099, 121.845292496513 25.1099906399059, 121.845879356583 25.1102844436641, 121.846002628016 25.1103912812194, 121.846078351896 25.1105363887941, 121.846227158125 25.1111748202124, 121.846182252103 25.1113111566802, 121.846105427585 25.1113637777324, 121.845978634112 25.1113374672091, 121.845860645741 25.1112441843992, 121.845719764104 25.110894771874, 121.84557315915 25.1107391005985, 121.845446365676 25.1106960467921, 121.845256175466 25.1106864792775, 121.845024601275 25.1107414924762, 121.844830889024 25.1107000332563, 121.844755165144 25.1105947905579, 121.844464156512 25.1098014809389, 121.844319752834 25.1096643454879, 121.844118996501 25.1096340481001, 121.843986919966 25.1096563724919, 121.843900414846 25.1097424645085, 121.843651885822 25.1099322378535, 121.843504571702 25.1099322237991, 121.842819803652 25.1095411626407, 121.842552240927 25.1093296342771, 121.842465398284 25.1091564646002, 121.842458354202 25.1090125513434, 121.842504140734 25.1087685761276, 121.842493574611 25.1086521694806, 121.842385712107 25.1084895189114, 121.842019419851 25.1082774350012, 121.841878097958 25.1082439480343, 121.841730172239 25.1082981650236, 121.840707019349 25.1090300920264, 121.840503621485 25.109272073465, 121.840329280459 25.1095626897491, 121.84014437331 25.1097811498207, 121.840082737594 25.1099725013875, 121.840069970196 25.1102934132386, 121.839964308968 25.1104401155186, 121.839814622228 25.110468818118, 121.839566318343 25.1104544668191, 121.839360278948 25.110400250786, 121.838847381738 25.1099473865114, 121.838647505915 25.1098820080797, 121.838314673047 25.1099410081294, 121.838210772839 25.1099314405557, 121.837791209713 25.109649196795, 121.837652089097 25.1096874671736, 121.837576365217 25.1099186837896, 121.837583409299 25.1101578729322, 121.837645045015 25.1103878927163, 121.837616428432 25.1105704731033, 121.837300765514 25.1110811386332, 121.837203909388 25.1111831917543, 121.837054222649 25.1112342182829, 121.836631577737 25.1112246508104, 121.836402645077 25.1111560839023, 121.836280254154 25.1110791454074, 121.836035472309 25.1107650126044, 121.835871697406 25.1107634180195, 121.835439807137 25.1109802813635, 121.834766657064 25.1111098410822, 121.834377031286 25.1112585356054, 121.834222061485 25.1112792651224, 121.834005455968 25.1112681030752, 121.833839479789 25.1112952109024, 121.833715768102 25.1114594523147, 121.833530860953 25.1116603686937, 121.833410671306 25.1117400973241, 121.833250418444 25.1117305298912, 121.832815446389 25.1115854237338, 121.83267104271 25.111571072566, 121.832523116991 25.1116571795474, 121.832432864693 25.1118022856196, 121.832300347902 25.1119027435687, 121.832164749327 25.1119426078113, 121.832002735444 25.1119139055579, 121.831715689108 25.1117400973241, 121.831554995991 25.1117225570298, 121.831281597563 25.1119011489987, 121.831100212455 25.1119904448853, 121.830448194628 25.1120845244096, 121.830317879114 25.1120558221895, 121.830198129722 25.1120127688468, 121.830104355382 25.1119246689038, 121.829972578656 25.1115645668182, 121.829864856599 25.1113135485467, 121.829156486117 25.110727938502, 121.829068435093 25.1106003716124, 121.828889691516 25.1101813931726, 121.828084464908 25.1095702641012, 121.827800940614 25.1094729934388, 121.82733427019 25.1095367774885, 121.827190306767 25.1095415612909, 121.826183003061 25.1092545328167, 121.825893315194 25.1091325455111, 121.825755955598 25.1090145446029, 121.825493563549 25.1085345667623, 121.825258907572 25.1081865417841, 121.825086327566 25.108028275802, 121.82396455753 25.1075622470729, 121.823545874914 25.1074713533243, 121.82312099953 25.1074109331825, 121.822717314785 25.1074059735685, 121.822352598132 25.1073687635896, 121.82088057044 25.1069160229449, 121.820619499156 25.1069128336748, 121.820367673229 25.1069798083284, 121.819597226776 25.1074207238823, 121.818104761931 25.1081275408878, 121.817727023041 25.1082650767168, 121.817202238943 25.1083942406589, 121.816260973504 25.1087438596571, 121.815492288071 25.1088889691871, 121.815243984185 25.1088841853592, 121.815020334586 25.1088235901894, 121.814704231413 25.1086924334361, 121.813573216019 25.1081945148761, 121.813302018867 25.108050999142, 121.812594528895 25.1079760519695, 121.812147229697 25.1079441595417, 121.81170433305 25.1079744573483, 121.811372820947 25.107980835833, 121.810666651741 25.1078787800388, 121.810200861828 25.107747622272, 121.809344125371 25.1073952098249, 121.808132543291 25.1076778574451, 121.806405862725 25.1080717292029, 121.805562333922 25.1082758403839)","wkt0":"LINESTRING (121.790915802903 25.1100644771037, 121.790951501593 25.1099624808469, 121.79139518531 25.110169023267, 121.792002063038 25.1103883152191, 121.792374349376 25.110424013909, 121.794355626664 25.110520910353, 121.794590218055 25.1104775619438, 121.796377702455 25.1100855138317, 121.797084026534 25.1098917209437, 121.797321167831 25.1097922745934, 121.798455876188 25.1090999750002, 121.798667518421 25.108916381738, 121.798779714303 25.1087837866041, 121.798863861215 25.1086205925932, 121.799172399892 25.1079027939359, 121.799378942312 25.107612104604, 121.800426953851 25.1068987682829, 121.800801790095 25.106766173149, 121.801921199013 25.1065672804483, 121.802551025899 25.1064780337236, 121.803474092023 25.1063008152273, 121.804125593114 25.1061886193448, 121.80437420899 25.1061682200935, 121.804713346543 25.1072136817258, 121.805043559425 25.1083487088211, 121.805696335468 25.1082059140616, 121.807082209608 25.1079031126742, 121.808111096849 25.1076519468918, 121.809361735576 25.1073521548409, 121.810257214483 25.107730081405, 121.810696589089 25.1078452929628, 121.81132571365 25.1079266187029, 121.812130940258 25.1078819692837, 121.813128558351 25.1079457541633, 121.813389629635 25.1080175121132, 121.813634851735 25.108155048066, 121.814739451822 25.1086334327839, 121.815020334586 25.1087534273237, 121.815240462144 25.1088156171385, 121.815470241361 25.1088293850762, 121.815872520644 25.1087599440095, 121.816241162024 25.1086768859697, 121.816871035293 25.1084702071451, 121.817191232565 25.108324476201, 121.817698846714 25.1082108597129, 121.818041365195 25.1080761144076, 121.819616598001 25.1073457763235, 121.820281383226 25.1069431317369, 121.820612455074 25.1068394804407, 121.820887174267 25.1068426697126, 121.822425865898 25.1073035186371, 121.822717314785 25.1073485669249, 121.823157569902 25.1073437830367, 121.823950469366 25.1074841103457, 121.824860476692 25.1078496781756, 121.82512254963 25.1079781333795, 121.825318782268 25.1081450816978, 121.825520039874 25.1084390783911, 121.825694319882 25.1087689747803, 121.825824143855 25.1089778452877, 121.825935579686 25.1090735450712, 121.826152625458 25.109174403914, 121.827164331715 25.1094809664469, 121.827670184844 25.1094123985609, 121.827833959747 25.1094171823681, 121.828107358175 25.1095080746703, 121.828951327233 25.1101431229486, 121.829195228567 25.1106641550738, 121.829924731295 25.1112880353016, 121.830164230078 25.1118895883658, 121.830242155234 25.1119442023808, 121.830425301362 25.1120207416892, 121.831068073832 25.1119250675462, 121.831283648408 25.1118201399825, 121.831525498898 25.1116619632668, 121.83164877033 25.1116635578399, 121.831784368906 25.1116938547248, 121.832036194833 25.1118501227485, 121.83217883749 25.1118804195871, 121.83232435263 25.1117964914401, 121.832492880776 25.1116213948606, 121.832636551949 25.1115375866767, 121.832808957355 25.1115351921572, 121.8333046229 25.1116956249664, 121.833400403682 25.1116884414078, 121.833599148804 25.1115088524422, 121.833693315091 25.1113414536524, 121.833800737339 25.1112409952421, 121.833971556324 25.1112059145079, 121.834194325413 25.1112166779161, 121.834366905419 25.11119275923, 121.834747285839 25.1110492470155, 121.835412951575 25.1109312479573, 121.835855848222 25.1106996346099, 121.836042516391 25.1107028237811, 121.836134089456 25.1107570396801, 121.83631943686 25.1110408754644, 121.836578747123 25.1111560839023, 121.836721389781 25.1111768134367, 121.837043656526 25.1111656513802, 121.837156361836 25.1111321652044, 121.837232085716 25.1110635982445, 121.837547748634 25.1105417705278, 121.837583409299 25.110389487306, 121.837509446439 25.1101180081076, 121.837498880316 25.1099202783854, 121.837611585626 25.1096316562008, 121.837761272366 25.1095822236036, 121.837888065839 25.1096188994034, 121.838240269932 25.1098708459049, 121.838640902088 25.1098134404186, 121.838774739643 25.1098405485683, 121.839400782419 25.1103444401386, 121.839524053851 25.1103890886586, 121.83980273534 25.1104146020912, 121.839964749223 25.1103811157098, 121.840015818816 25.1102663051893, 121.840010535755 25.1099744946314, 121.840063366369 25.1097875282111, 121.840287015968 25.1095192368781, 121.840418211993 25.1092740667203, 121.840667836644 25.1089826524461, 121.841163123649 25.1086266556801, 121.84169671285 25.1082471372697, 121.841886903061 25.1081785686917, 121.842029545718 25.1082136502945, 121.842419171496 25.1084225450848, 121.842556531093 25.1086202772292, 121.842579424359 25.1087526300182, 121.84252879502 25.1090731464195, 121.842629173187 25.1093063574521, 121.842895087277 25.1095152503754, 121.843572639901 25.1098780215888, 121.843674779088 25.109836562076, 121.843887862564 25.1096324535005, 121.844097864255 25.1095670749004, 121.844249312015 25.1095814263034, 121.844349690181 25.1096085345045, 121.844469439573 25.109696237467, 121.84455264779 25.1098038728349, 121.844825605962 25.110582033861, 121.844878436576 25.1106729252972, 121.84502680255 25.1106840873987, 121.84525221317 25.1106139256007, 121.845465296646 25.1106238917676, 121.845579762977 25.1106685401856, 121.845732971757 25.1107996948189, 121.845966527096 25.1112409952421, 121.846046653527 25.1112830522453, 121.846111811285 25.1112814576673, 121.846139987612 25.1111718303759, 121.846009672098 25.1105650913709, 121.845939231279 25.110432740544, 121.845833570051 25.110340254339, 121.845225577735 25.1100400723379, 121.845162180999 25.1099412074538, 121.845178030183 25.1098455316834, 121.845248471001 25.1097897207827, 121.845362937332 25.1097626126217, 121.84558482591 25.1098295857143, 121.845901809594 25.110030504772, 121.846210868686 25.1103785245013, 121.846383448691 25.1105284158549, 121.846593010127 25.1106033614628, 121.846853641156 25.1106464153019, 121.847088297133 25.1107819550667, 121.847174587135 25.1109083258297, 121.847317351252 25.1112969374629, 121.847512703065 25.1116916621873, 121.847646980875 25.1118068700119, 121.84798641757 25.111961543322, 121.848549944119 25.1120396771878, 121.848782839075 25.1120205423681, 121.849070325666 25.1118945713973, 121.849414489157 25.1118260405192, 121.84949913415 25.1117219590652, 121.849785518225 25.1111413427671, 121.849686088368 25.1107564459807, 121.849868948447 25.110269295048, 121.849846055181 25.1100301061234, 121.849555486805 25.1095700647762, 121.849604795378 25.109092879678, 121.849470957822 25.1087237276894, 121.849448064556 25.1085610772154, 121.849449825577 25.1081365106205, 121.849527310477 25.1079738593654, 121.849645298848 25.1078745941548, 121.849946533708 25.1077482595036, 121.850087810361 25.1077398786852, 121.850225495234 25.1077638238806, 121.85035240477 25.1078153060508, 121.850567911529 25.1079673580416, 121.85071637174 25.107991303237, 121.851182105791 25.1079170731312, 121.851288661911 25.1078476320646, 121.851320987924 25.107772204699, 121.8515643709 25.1072698320747, 121.851747212403 25.1068527091954, 121.851860952081 25.1067844653885, 121.851972297239 25.1067581256736, 121.852115968412 25.1068000297655, 121.852214143713 25.1068694708322, 121.852327883391 25.107021522823, 121.85249110792 25.107457599659, 121.852570927125 25.1075471198622, 121.852683059151 25.1076202516009, 121.85274931883 25.1076405061243, 121.852841507833 25.1076297307864, 121.853022294058 25.1075147938484, 121.853132441957 25.1074070404691, 121.853289290446 25.107184519319, 121.853449715796 25.1069029941058, 121.853574230812 25.1068257708506, 121.853916647106 25.1068293626299, 121.853981299134 25.1068090092138, 121.854370116757 25.1065562328925, 121.854517671511 25.1063708121379, 121.854639792008 25.1063348943447, 121.855428786196 25.1066000873839, 121.856218977645 25.1068682735724, 121.856393777571 25.1069891968092, 121.856459626859 25.1070730049932, 121.856479980275 25.1071568131771, 121.856415328247 25.1073172459863, 121.856403355649 25.1075914184737, 121.856312363907 25.1079553854439, 121.856023927303 25.1082964852403, 121.85626301343 25.1084055420702, 121.856242040963 25.1084370007711, 121.85601973281 25.1084390980178)","wkt1":"LINESTRING (121.856181766561 25.1084538394072, 121.855992456861 25.1084538394072, 121.855935223695 25.1083868655609, 121.855965161043 25.1082720531678, 121.856257289957 25.1079625690025, 121.856299194049 25.1078392512462, 121.856365043337 25.107448944561, 121.856362648817 25.1073142528369, 121.856423709065 25.1071430446897, 121.856378213194 25.1070137406345, 121.856234542022 25.1069203543724, 121.854663737203 25.1063791929562, 121.854555983824 25.1064007436321, 121.854397945534 25.1065946997149, 121.85399565308 25.1068628844828, 121.853717901985 25.1068604913839, 121.853514680916 25.1068969637803, 121.85340233975 25.107071181512, 121.853205474803 25.1073956665012, 121.853078565267 25.1075465212323, 121.852913343419 25.1076566691312, 121.852764883207 25.1076901924047, 121.852652340789 25.1076662472093, 121.852518247695 25.1075680719082, 121.852417145061 25.1074767351928, 121.852343447768 25.1072088939771, 121.852252456026 25.1069981762575, 121.852180620439 25.1069000009563, 121.852113573892 25.1068616886437, 121.851950746564 25.1068114037333, 121.851790313754 25.1068688722023, 121.851613119308 25.1072974912001, 121.851447069224 25.1076428656839, 121.851322670842 25.1078777833998, 121.851225814716 25.1079686768463, 121.850727445924 25.1080484078841, 121.850574237144 25.1080388401623, 121.850240964021 25.1078379178317, 121.850013352126 25.1078028361211, 121.849680519258 25.1079335951732, 121.849560993067 25.1080434753318, 121.849540940097 25.1083471258295, 121.849522027416 25.1086376186419, 121.849639908262 25.1089676041934, 121.84966717247 25.1091144114644, 121.849606352314 25.1095841947315, 121.849878994389 25.1100330055314, 121.849912550337 25.1102867723855, 121.849758004158 25.1107512593096, 121.849858382325 25.1110514395644, 121.84985452153 25.1112004412197, 121.849520266395 25.1118160387961, 121.849432215372 25.1118877944744, 121.84908441383 25.1119599487528, 121.848786361116 25.1120907033588, 121.848548623354 25.1121018653309, 121.848058619409 25.1120388799037, 121.84781603884 25.1119711107368, 121.847583584139 25.1118531125685, 121.84743918046 25.1116968445485, 121.847252072036 25.1113404570416, 121.847051315703 25.1108441438497, 121.846881701436 25.1107338199554, 121.84652785237 25.1106575774059, 121.846331938843 25.1105826318312, 121.846147031694 25.1104056325257, 121.845986778832 25.1102047140845, 121.845797909387 25.1100416669322, 121.84546859856 25.1098550992638, 121.845294257534 25.1098343695053, 121.845232621817 25.1099204777099, 121.845292496513 25.1099906399059, 121.845879356583 25.1102844436641, 121.846002628016 25.1103912812194, 121.846078351896 25.1105363887941, 121.846227158125 25.1111748202124, 121.846182252103 25.1113111566802, 121.846105427585 25.1113637777324, 121.845978634112 25.1113374672091, 121.845860645741 25.1112441843992, 121.845719764104 25.110894771874, 121.84557315915 25.1107391005985, 121.845446365676 25.1106960467921, 121.845256175466 25.1106864792775, 121.845024601275 25.1107414924762, 121.844830889024 25.1107000332563, 121.844755165144 25.1105947905579, 121.844464156512 25.1098014809389, 121.844319752834 25.1096643454879, 121.844118996501 25.1096340481001, 121.843986919966 25.1096563724919, 121.843900414846 25.1097424645085, 121.843651885822 25.1099322378535, 121.843504571702 25.1099322237991, 121.842819803652 25.1095411626407, 121.842552240927 25.1093296342771, 121.842465398284 25.1091564646002, 121.842458354202 25.1090125513434, 121.842504140734 25.1087685761276, 121.842493574611 25.1086521694806, 121.842385712107 25.1084895189114, 121.842019419851 25.1082774350012, 121.841878097958 25.1082439480343, 121.841730172239 25.1082981650236, 121.840707019349 25.1090300920264, 121.840503621485 25.109272073465, 121.840329280459 25.1095626897491, 121.84014437331 25.1097811498207, 121.840082737594 25.1099725013875, 121.840069970196 25.1102934132386, 121.839964308968 25.1104401155186, 121.839814622228 25.110468818118, 121.839566318343 25.1104544668191, 121.839360278948 25.110400250786, 121.838847381738 25.1099473865114, 121.838647505915 25.1098820080797, 121.838314673047 25.1099410081294, 121.838210772839 25.1099314405557, 121.837791209713 25.109649196795, 121.837652089097 25.1096874671736, 121.837576365217 25.1099186837896, 121.837583409299 25.1101578729322, 121.837645045015 25.1103878927163, 121.837616428432 25.1105704731033, 121.837300765514 25.1110811386332, 121.837203909388 25.1111831917543, 121.837054222649 25.1112342182829, 121.836631577737 25.1112246508104, 121.836402645077 25.1111560839023, 121.836280254154 25.1110791454074, 121.836035472309 25.1107650126044, 121.835871697406 25.1107634180195, 121.835439807137 25.1109802813635, 121.834766657064 25.1111098410822, 121.834377031286 25.1112585356054, 121.834222061485 25.1112792651224, 121.834005455968 25.1112681030752, 121.833839479789 25.1112952109024, 121.833765567912 25.1113669771594, 121.833715768102 25.1114594523147, 121.833530860953 25.1116603686937, 121.833410671306 25.1117400973241, 121.833250418444 25.1117305298912, 121.832815446389 25.1115854237338, 121.83267104271 25.111571072566, 121.832523116991 25.1116571795474, 121.832432864693 25.1118022856196, 121.832300347902 25.1119027435687, 121.832164749327 25.1119426078113, 121.832002735444 25.1119139055579, 121.831715689108 25.1117400973241, 121.831554995991 25.1117225570298, 121.831281597563 25.1119011489987, 121.831100212455 25.1119904448853, 121.830448194628 25.1120845244096, 121.830317879114 25.1120558221895, 121.830198129722 25.1120127688468, 121.830104355382 25.1119246689038, 121.829972578656 25.1115645668182, 121.829864856599 25.1113135485467, 121.829156486117 25.110727938502, 121.829068435093 25.1106003716124, 121.828889691516 25.1101813931726, 121.828084464908 25.1095702641012, 121.827800940614 25.1094729934388, 121.82733427019 25.1095367774885, 121.827190306767 25.1095415612909, 121.826183003061 25.1092545328167, 121.825893315194 25.1091325455111, 121.825755955598 25.1090145446029, 121.825493563549 25.1085345667623, 121.825258907572 25.1081865417841, 121.825086327566 25.108028275802, 121.82396455753 25.1075622470729, 121.823533785915 25.1074519377105, 121.82312099953 25.1074109331825, 121.822717314785 25.1074059735685, 121.822414348029 25.1073717213058, 121.820885447303 25.106907184515, 121.820619499156 25.1069128336748, 121.820367673229 25.1069798083284, 121.819597226776 25.1074207238823, 121.818104761931 25.1081275408878, 121.817727023041 25.1082650767168, 121.817202238943 25.1083942406589, 121.816260973504 25.1087438596571, 121.815492288071 25.1088889691871, 121.815243984185 25.1088841853592, 121.815020334586 25.1088235901894, 121.814704231413 25.1086924334361, 121.813573216019 25.1081945148761, 121.813302018867 25.108050999142, 121.813064946483 25.1080002826853, 121.812594528895 25.1079760519695, 121.812147229697 25.1079441595417, 121.81170433305 25.1079744573483, 121.811372820947 25.107980835833, 121.810666651741 25.1078787800388, 121.810200861828 25.107747622272, 121.809344125371 25.1073952098249, 121.808132543291 25.1076778574451, 121.806405862725 25.1080717292029, 121.805529954075 25.1082629682178, 121.804996386156 25.1083872761558, 121.804506804123 25.1067449770519, 121.804328948151 25.1062094967037, 121.803986623214 25.1062477453, 121.803355521375 25.1063567537994, 121.802485365809 25.1065154854741, 121.801930761162 25.1065958075263, 121.800790952992 25.1068004375166, 121.800439065906 25.1069300046366, 121.799524924455 25.1075486756818, 121.799253359421 25.107831237187, 121.7991558255 25.1080564257977, 121.798905297195 25.1086507133628, 121.798696842345 25.1089528772736, 121.798478825346 25.1091436421477, 121.798300969373 25.1092526506472, 121.797331367457 25.1098239890545, 121.797153511484 25.1098985738173, 121.796595081978 25.1100644771037, 121.794627191698 25.110501945424, 121.794357539094 25.1105497561693, 121.793217730924 25.1105038578538, 121.791999513132 25.1104101487928, 121.791374148582 25.1102036063728, 121.790894128699 25.1099975420602)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400082500'=='0100020200' || '0400082500'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
