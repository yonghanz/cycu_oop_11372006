
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493106</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454093250">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454093250">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454093250" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454093250" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454093250" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454093250',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="zwbOipoMAxJolVYXMmMPPeab3A3tcwh6MoGqeL9GEhEHBw_8bdSXkYKq546JmJWOUjVbH8hKyU-6kEopQPM8eR9z84o1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F932-0820 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454093250" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454093250" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">金山區公所 - 金山醫院</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0820 - 0820 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0820<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">金山區公所金山區公所站:(02)2498-5965#162</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">金山區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084400740" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.222305" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.636495" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">臺大醫院金山分院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084401420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.219498" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.628784" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">南勢湖路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084101210" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.212326" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.611997" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">磺溪中橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084102220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.221144" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.620298" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">六股中路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084200650" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.222552" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6124008" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">重和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084201470" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.218953" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.603065" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">葵扇湖</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084201760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.228667" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.595639" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">兩湖里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084201120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.232381" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.592617" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">兩福宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084210520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.239243" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.599268" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">半嶺(李簡玉英路口)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.23898" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.603067" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">三界里(7、8鄰)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084200070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.247583" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.60325" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">金寶山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084201320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.247907" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.601964" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">朱銘美術館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084201050" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.246299" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6112475" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">三界聖德宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084201640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.230771" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.62" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">磺溪橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084301820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.226977" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.630621" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">金山區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084400700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.222407" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.636451" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">金山醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2084400860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.221073" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.629897" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454093250";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 17;
        var existBackNum = 0;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454093250',
                        url: './StopStatusRecent3OfRoute?routeid=0454093250&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454093250',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454093250',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454093250');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454093250","Name":"F932-0820","BeginStop":"金山區公所","GoDirStops":[{"UniStopId":"2084400740","Name":"金山區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.636495,"Latitude":25.222305,"PublicId":"2084400740"},{"UniStopId":"2084401420","Name":"臺大醫院金山分院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.628784,"Latitude":25.219498,"PublicId":"2084401420"},{"UniStopId":"2084101210","Name":"南勢湖路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.611997,"Latitude":25.212326,"PublicId":"2084101210"},{"UniStopId":"2084102220","Name":"磺溪中橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.620298,"Latitude":25.221144,"PublicId":"2084102220"},{"UniStopId":"2084200650","Name":"六股中路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6124008,"Latitude":25.222552,"PublicId":"2084200650"},{"UniStopId":"2084201470","Name":"重和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.603065,"Latitude":25.218953,"PublicId":"2084201470"},{"UniStopId":"2084201760","Name":"葵扇湖","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.595639,"Latitude":25.228667,"PublicId":"2084201760"},{"UniStopId":"2084201120","Name":"兩湖里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.592617,"Latitude":25.232381,"PublicId":"2084201120"},{"UniStopId":"2084210520","Name":"兩福宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.599268,"Latitude":25.239243,"PublicId":"2084210520"},{"UniStopId":"2084200920","Name":"半嶺(李簡玉英路口)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.603067,"Latitude":25.23898,"PublicId":"2084200920"},{"UniStopId":"2084200070","Name":"三界里(7、8鄰)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.60325,"Latitude":25.247583,"PublicId":"2084200070"},{"UniStopId":"2084201320","Name":"金寶山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.601964,"Latitude":25.247907,"PublicId":"2084201320"},{"UniStopId":"2084201050","Name":"朱銘美術館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6112475,"Latitude":25.246299,"PublicId":"2084201050"},{"UniStopId":"2084201640","Name":"三界聖德宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.62,"Latitude":25.230771,"PublicId":"2084201640"},{"UniStopId":"2084301820","Name":"磺溪橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.630621,"Latitude":25.226977,"PublicId":"2084301820"},{"UniStopId":"2084400700","Name":"金山區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.636451,"Latitude":25.222407,"PublicId":"2084400700"},{"UniStopId":"2084400860","Name":"金山醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.629897,"Latitude":25.221073,"PublicId":"2084400860"}],"LastStop":"金山醫院","BackDirStops":null,"RouteMapUrl":"../MapOverview?nid=0454093250","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0820 - 0820","HeadwayDesc":"班表:0820","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"金山區公所金山區公所站:(02)2498-5965#162","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.636882651068 25.2222988095789, 121.63678098743 25.2224097133094, 121.636020997534 25.2222531205508, 121.635365217206 25.2221233840855, 121.634910621921 25.2220551287352, 121.634360352136 25.2219330817725, 121.633883099689 25.2218453660848, 121.632907560752 25.2216368391745, 121.632264221127 25.2215273611545, 121.629573045234 25.2209473170666, 121.627854590309 25.2206156676324, 121.626552733357 25.2203761804053, 121.624175994048 25.2198842771284, 121.623455648188 25.2197271088773, 121.622423118139 25.2195335762078, 121.621422980247 25.2193620992145, 121.620822962673 25.2191755003452, 121.620283938972 25.2189160771734, 121.620275291533 25.2187921305469, 121.619834272141 25.2184707340619, 121.619645469722 25.2182905790814, 121.619445137383 25.2177493935203, 121.61883549293 25.2173371989251, 121.618610659514 25.2170395828975, 121.618561657359 25.2169401373483, 121.618455005611 25.2165884748266, 121.618354118822 25.2164688519196, 121.618237378395 25.2163809362892, 121.617829507519 25.2161791627111, 121.617521082193 25.2161092625787, 121.617395694326 25.216023508808, 121.617225628025 25.2158606487058, 121.616460329668 25.215379995218, 121.616311881964 25.2153057713661, 121.615937159605 25.2152855940083, 121.615803124299 25.215251724872, 121.615346251269 25.2150168027775, 121.615170420008 25.2149995078994, 121.615104122975 25.2149490645049, 121.614906673117 25.2146615371562, 121.614820198726 25.2146010050828, 121.614281175025 25.2145181337918, 121.61395689606 25.2143632005086, 121.613629734616 25.2142695199188, 121.613449579635 25.2141340433736, 121.613188715224 25.214028832865, 121.612966764288 25.2138133675084, 121.612832728983 25.2136310506683, 121.612311000159 25.2127345994858, 121.612138051378 25.2125465176862, 121.611697031986 25.2118417514029, 121.611731621742 25.2118331039638, 121.61193339532 25.212153059209, 121.612165434935 25.2125342671476, 121.612323971318 25.2127007303495, 121.61285290634 25.2136231238491, 121.612988382886 25.2137975138702, 121.613207451342 25.2140064936474, 121.613451020875 25.214102336097, 121.613651353213 25.2142464600813, 121.613912217625 25.2143127571141, 121.614281175025 25.2144849852754, 121.614841817324 25.2145844308246, 121.614925409235 25.2146291092597, 121.61506665074 25.214856104535, 121.615173302488 25.2149670800029, 121.615352016229 25.2149915810803, 121.615807448019 25.215232988754, 121.615961660682 25.2152675785103, 121.616326294363 25.2152776671892, 121.616494919424 25.2153576560005, 121.616699575482 25.2155039418446, 121.617247246622 25.215839750728, 121.617440372761 25.2160163026088, 121.617535494591 25.2160825996416, 121.617835272478 25.2161640296928, 121.618266203192 25.2163607589314, 121.618387267338 25.216455880761, 121.618473741729 25.2165654149891, 121.618604894555 25.216952387887, 121.61864669051 25.217053274676, 121.618864317726 25.2173278308662, 121.618946468398 25.2173869216997, 121.619371634151 25.2176485067313, 121.619468197221 25.2177378636016, 121.619669970799 25.2182718429635, 121.619743474031 25.218368406033, 121.6198472433 25.2184678515822, 121.620275291533 25.2187380840528, 121.620319969968 25.2188706781183, 121.620867641109 25.219140189969, 121.620374737082 25.2199775503179, 121.620358883444 25.2200294349523, 121.620308440049 25.221025331684, 121.620272409053 25.2211766618675, 121.620014364644 25.2214062761029, 121.619644244185 25.221601603299, 121.619486784077 25.2216287425628, 121.619024715819 25.2216266522611, 121.618743101982 25.2217512786065, 121.618418027842 25.2217968816795, 121.61821857683 25.2219067916602, 121.618096262751 25.2219219785938, 121.617674204306 25.221892818913, 121.617421898572 25.2216813535785, 121.616572345982 25.2216944952424, 121.616436119606 25.2221134762926, 121.616221769468 25.2222855510602, 121.616026562896 25.2223768881039, 121.615509480229 25.2222246102137, 121.615286527061 25.2221891867109, 121.614981874978 25.2225907667497, 121.614682810005 25.2229302197966, 121.614561675055 25.2233975398178, 121.614441023236 25.2235832269488, 121.6142339761 25.2233988936914, 121.613685230445 25.2230840947409, 121.613011865695 25.2228476111491, 121.612308359455 25.222459609599, 121.611664373676 25.2220236485232, 121.611462858838 25.2219039383108, 121.611123062162 25.2219484447021, 121.610780740761 25.2220584847343, 121.610269009264 25.2223355049383, 121.60936282831 25.22211650453, 121.609198128549 25.2220545652984, 121.60884228706 25.221845661718, 121.608492964476 25.2215273850493, 121.60829182667 25.2212108358433, 121.608022976894 25.220925431963, 121.607782745737 25.220992084097, 121.607200097971 25.220554698154, 121.606998136782 25.2204926431339, 121.606753255839 25.2203135028968, 121.606202918478 25.2199615054885, 121.606001970375 25.2198148637543, 121.605606959244 25.2193897924161, 121.605535011955 25.219241992699, 121.605473769014 25.2188569648009, 121.605303131017 25.218613040535, 121.604553216219 25.2183134319906, 121.603753693306 25.2178641216952, 121.603560712882 25.2184921140973, 121.602975396136 25.2190211929297, 121.602656331568 25.219351417409, 121.602445181673 25.2195376511934, 121.602069989497 25.219760937906, 121.602047318151 25.2198748278912, 121.602134599241 25.2200967215766, 121.602371249869 25.2206385035261, 121.602616879522 25.2208756609364, 121.602630898759 25.2209764053623, 121.602552137336 25.2210481861026, 121.602426303379 25.2210223162245, 121.601919277418 25.2207371694919, 121.601269706681 25.2203737219612, 121.600591255249 25.2198569685594, 121.599921084473 25.2197479720107, 121.599584188876 25.2195585280458, 121.598690031038 25.2187111974503, 121.598032111697 25.2179694517787, 121.597923885139 25.2175130645677, 121.597570018662 25.2173122683438, 121.597376699459 25.2170614027581, 121.597289658292 25.216772681217, 121.597201644927 25.2167556876355, 121.59711633253 25.2168590389439, 121.597143499203 25.2170327436845, 121.597292154618 25.2173284467592, 121.59742697293 25.2175268795305, 121.597597298137 25.2177192255616, 121.597646086243 25.2179036245289, 121.597595531947 25.2183502465234, 121.597665812315 25.2185173502251, 121.597825861119 25.2187368487814, 121.598006607072 25.219030518156, 121.598141097863 25.2193013848737, 121.598254379911 25.2194189931793, 121.598285586157 25.2195755163399, 121.598224389399 25.2198441089361, 121.598332709864 25.220226698654, 121.598334294699 25.2203550310618, 121.597968311776 25.220712317281, 121.59699289107 25.2210691794973, 121.596645941711 25.221186094181, 121.596209444298 25.2212051961274, 121.596036872416 25.2212968662064, 121.59596788833 25.2213845276356, 121.595980306005 25.2215911139682, 121.595975273445 25.2218572134686, 121.595899419184 25.2221614886213, 121.596040597492 25.2223722571766, 121.596254533717 25.2224828379995, 121.596621579664 25.2224682428024, 121.596749904244 25.2225387670027, 121.596951441069 25.2227693377736, 121.597072833515 25.2228272796407, 121.597480925864 25.2226909489951, 121.59763929933 25.2227375115849, 121.597772795373 25.2228234460027, 121.598070004638 25.2229327163091, 121.598670458479 25.2228309146833, 121.598955056181 25.2228115201344, 121.599133093283 25.2229266589033, 121.599208576754 25.2232429778645, 121.599488835254 25.2234818392022, 121.599580283081 25.2238124523823, 121.599861029516 25.2243937615053, 121.599865128502 25.2245213730286, 121.599756156507 25.224595178387, 121.599610851501 25.2246206366172, 121.599188829721 25.2247726315222, 121.598870297134 25.2248271554593, 121.598754027803 25.2249128996157, 121.598609842794 25.2254285694209, 121.598188142404 25.2258105367414, 121.597581538796 25.2263878039857, 121.597161468472 25.2267084035742, 121.596042084537 25.2272916211504, 121.596052226511 25.2273967386311, 121.596245700215 25.2275248291932, 121.596951467948 25.228035747029, 121.596856498769 25.2282193855636, 121.596721443157 25.2283780676335, 121.596355344146 25.2285464268597, 121.596073236534 25.2286123064627, 121.595386880499 25.2286800652491, 121.595056134089 25.228540590061, 121.594773926037 25.2284611693034, 121.594422554822 25.2284934045818, 121.594130254724 25.2285864155673, 121.594030534278 25.2288044924857, 121.594006865467 25.2289556631916, 121.59410509607 25.2299514537349, 121.594094284637 25.2302160830434, 121.594026886824 25.2306741616497, 121.593955647046 25.2307949064946, 121.59335232195 25.2312080980009, 121.59323653033 25.231196891098, 121.59296513516 25.2309206519395, 121.592816788737 25.2309303881402, 121.592652817803 25.2310178392828, 121.592695956593 25.231292115839, 121.592912630491 25.2314998165809, 121.593035875517 25.2316405079829, 121.592933494733 25.2318593136667, 121.592778996143 25.2320157258392, 121.592566676458 25.2324608614234, 121.592772788299 25.2319917951022, 121.593018800739 25.2320977394542, 121.593289030012 25.2321901583651, 121.593557690707 25.2320689774015, 121.59370327687 25.2320379054447, 121.59425083561 25.2321280033268, 121.59442324337 25.2322256361471, 121.594608279585 25.2326156150074, 121.594799507718 25.2328389116511, 121.594952423915 25.233143213929, 121.595157992013 25.233296015323, 121.595035840609 25.2333313511003, 121.594988521912 25.2333926934046, 121.594990094137 25.2337615608304, 121.594943239404 25.2345180910035, 121.595069792481 25.2348368524058, 121.595022039747 25.2350529318717, 121.595026491497 25.2352648768267, 121.594864746526 25.2354855928556, 121.594768328932 25.235689495967, 121.594756808003 25.2358147235594, 121.594832865417 25.236412663579, 121.594914261078 25.2367473955914, 121.594982053144 25.2367867360828, 121.595231629048 25.2367648189418, 121.595316264061 25.2368102970715, 121.595355151229 25.2370680343266, 121.595540896588 25.2372428771033, 121.595573820696 25.23743609362, 121.595495981808 25.2377125918475, 121.595561628188 25.2378111366157, 121.595902702075 25.237991681517, 121.596256498912 25.2382300842046, 121.596266876933 25.2383276180137, 121.595950388315 25.2388740513578, 121.595916458417 25.2390776352122, 121.596146873863 25.2392679252118, 121.59638863959 25.2393216456455, 121.596837035236 25.2392646917354, 121.597179592425 25.2391311284148, 121.597493391009 25.2391222383421, 121.598055709135 25.2392231633006, 121.598976371008 25.2392341507457, 121.599453915862 25.2393335911394, 121.599600543804 25.2392780022068, 121.599781709125 25.2391868341288, 121.599891373142 25.2392032864929, 121.600113103101 25.2392592725376, 121.600576262324 25.2392697190957, 121.600714253907 25.2393320947791, 121.600886473358 25.2394598832915, 121.601303232793 25.2398292548636, 121.601435236048 25.2398919143226, 121.601620725744 25.2398898056691, 121.602029242981 25.2397697356575, 121.602178927749 25.2397495418389, 121.602702690546 25.2393638507644, 121.602779801307 25.2391523602004, 121.602954301314 25.2390414150254, 121.603085646873 25.2389977996084, 121.603075246865 25.2391314062017, 121.602899488808 25.239261518934, 121.602865635411 25.239411892495, 121.602890830271 25.2398611056605, 121.602820475447 25.2399780993314, 121.60261665278 25.2400861045507, 121.602186122695 25.2402530367487, 121.601976530375 25.2404040221153, 121.601833352112 25.2405855176028, 121.601769003103 25.2407888107006, 121.601752332971 25.2410395157079, 121.601789056042 25.2412794997449, 121.602054675731 25.2419000951579, 121.602142389055 25.2423837894056, 121.60222275414 25.2426257198047, 121.602136682577 25.2429929356671, 121.601904461373 25.2436448383998, 121.601874751467 25.2439189393166, 121.601925931653 25.2441431741214, 121.602094345559 25.2445706699612, 121.602116503681 25.2448622205972, 121.601916705054 25.2451740577819, 121.601702293869 25.2453022108055, 121.601541461074 25.2454126820361, 121.601469558745 25.2455751019282, 121.60152465738 25.2460859671779, 121.601546712037 25.246490275958, 121.601624720988 25.2466696598369, 121.601653244632 25.2471957086945, 121.601760053219 25.2476832109495, 121.601899891068 25.2480255903094, 121.601899448664 25.2481092122855, 121.60183986287 25.2489016736068, 121.602013698446 25.2492033233037, 121.602178386156 25.2492868123664, 121.60298434197 25.2497460534818, 121.603150382736 25.2500325763782, 121.603369834962 25.2502730607161, 121.603692997748 25.2504971794252, 121.604122234018 25.2506323412065, 121.605294615387 25.2509179730767, 121.605587641032 25.2509058122597, 121.606246315292 25.2507451807347, 121.606741256035 25.2507209411155, 121.607490886363 25.2511526431023, 121.607972819852 25.2514346822591, 121.608480046076 25.2516597013708, 121.608833222317 25.2517913129546, 121.609834224937 25.2520366198087, 121.610155167871 25.2520015265377, 121.61048182952 25.2519282505038, 121.611484956857 25.2517688634014, 121.611661670665 25.2518212615877, 121.611903997148 25.2520133080601, 121.611926255593 25.2516579936528, 121.611912870716 25.251294038776, 121.611993014683 25.2511993309579, 121.612398790646 25.2509079451668, 121.612692228886 25.2506298761121, 121.612837480462 25.250533823849, 121.61336597324 25.2497704923604, 121.613385413723 25.2496474337067, 121.613377908684 25.2489455542196, 121.613240679207 25.2480680020087, 121.613161492262 25.2479134476195, 121.612969251625 25.2477930652883, 121.612845409038 25.2476325010316, 121.612921311621 25.2473195264367, 121.613065063958 25.2469061735906, 121.613142134549 25.2464960514151, 121.612909010764 25.2465148070813, 121.61260453195 25.2465994937333, 121.61229568203 25.2464295658122, 121.611910272972 25.2464047932111, 121.611522843923 25.2463337679955, 121.610988918087 25.2461102250002, 121.610706255902 25.2460115906257, 121.61050082718 25.2460587529658, 121.610282552413 25.2460164028354, 121.610018636584 25.2458323574431, 121.609996332668 25.2456549745835, 121.609952426685 25.2454349093218, 121.609967515215 25.2452135035033, 121.609985181717 25.2450255857212, 121.609916638547 25.244849141853, 121.609757757273 25.2446814312772, 121.60965060176 25.2444574598497, 121.609733771163 25.2443146091049, 121.609978819653 25.2442052490457, 121.610149675001 25.2440607258041, 121.610191650379 25.2439445240457, 121.6100100811 25.2434975447114, 121.609908092844 25.2433676881415, 121.609683415846 25.2433117213868, 121.609594144558 25.2431645789198, 121.60959243359 25.2429287801041, 121.609753225606 25.2423022292649, 121.609743864438 25.2421154388182, 121.60991998202 25.2418789891836, 121.610241635426 25.241673132474, 121.610438426865 25.241608009404, 121.610626794314 25.2415210094037, 121.610763382609 25.2413104271646, 121.610870911174 25.2408554218369, 121.610869059342 25.2406412261647, 121.610825105272 25.2404398960825, 121.610920068301 25.2402374750737, 121.611099058081 25.2400784062548, 121.611222005093 25.2398991857771, 121.611477152643 25.239129695361, 121.611422218042 25.2388978212047, 121.61147887066 25.2385633278733, 121.611636614201 25.2381243210917, 121.61174561807 25.2379868506264, 121.611842678824 25.2378772025062, 121.611924617926 25.2378974134492, 121.612089017343 25.2379799446978, 121.612342959513 25.237925846856, 121.612749690176 25.2381556330097, 121.612890116026 25.2381485499911, 121.61302158592 25.2380056800742, 121.613081239206 25.2378814023768, 121.6130259129 25.2374483799645, 121.613101142516 25.2373324873267, 121.613260662662 25.2372492126131, 121.613710073969 25.2371839090862, 121.613862721765 25.2370633963164, 121.614147384355 25.2367285467987, 121.615200064646 25.2361841299708, 121.61538723147 25.2360153410312, 121.615756933205 25.2354298839769, 121.616161309493 25.2352010847954, 121.616682151804 25.2348291307188, 121.616922712724 25.2344534187384, 121.617077179732 25.2343178111662, 121.617320801329 25.2341743950145, 121.617680421758 25.2340347868738, 121.617883717167 25.2339155178784, 121.617939518991 25.2337409677129, 121.617859611804 25.2334361114956, 121.618073822528 25.2332498593953, 121.618254474766 25.233014200231, 121.618347280406 25.232772041192, 121.618520292697 25.2324864191749, 121.618638015389 25.2325607003599, 121.618692075881 25.2327621988357, 121.618625270099 25.2329461584507, 121.618612622734 25.2330968554187, 121.618711889297 25.2331766479352, 121.618832009024 25.2330291347189, 121.619091557483 25.2327228430224, 121.61909461331 25.2326211637449, 121.618991147746 25.2323920894263, 121.619024082092 25.2322136274941, 121.619389660585 25.231938321757, 121.619517550364 25.2317698803979, 121.619675718437 25.2315198578486, 121.619682983049 25.2310499853886, 121.619953130966 25.2308832362124, 121.62015515833 25.2306359812582, 121.620557790443 25.2304291836153, 121.62287347976 25.2291838204434, 121.623479795519 25.2290359697902, 121.629552800605 25.2273587516815, 121.629796477321 25.2281082308115, 121.629902070565 25.2291295723856, 121.629796477321 25.2307019807726, 121.629902070565 25.2306799378049, 121.629958928465 25.2284829686444, 121.629642148734 25.2273220123897, 121.630108739123 25.2271997269259, 121.630288923082 25.2271754357906, 121.63102601338 25.2268550483282, 121.632314001058 25.2259971961001, 121.632538613886 25.2259254617968, 121.633021158248 25.2255345837198, 121.63545717347 25.2239911653608, 121.635779570813 25.2237108359186, 121.636035967283 25.2232971737742, 121.636748086835 25.2223968682491, 121.629562723361 25.220976359252, 121.629274123388 25.2201584051107, 121.628921147975 25.2195339164429, 121.628457682714 25.2198615319616, 121.628293866629 25.2197660045864)","wkt0":"LINESTRING (121.636552281444 25.2223472174958, 121.636677643099 25.2223722898267, 121.636637527369 25.2224073910899, 121.634456234582 25.2219636108331, 121.631783524109 25.2214145267866, 121.629587187922 25.2209644784471, 121.629148422132 25.2198174193087, 121.628929039236 25.2194927326237, 121.628737880171 25.219640219562, 121.628704474248 25.2196179489472, 121.628907136843 25.2194676222972, 121.628989538118 25.2195210717727, 121.629190252034 25.21984009833, 121.62963148859 25.220972002328, 121.6278389413 25.2205986574691, 121.62650007883 25.2203353979948, 121.624153308659 25.2198170275535, 121.622418303361 25.2194666417293, 121.621372787163 25.2193425336914, 121.620822962673 25.2191755003452, 121.620283938972 25.2189160771734, 121.620275291533 25.2187921305469, 121.619834272141 25.2184707340619, 121.619645469722 25.2182905790814, 121.619445137383 25.2177493935203, 121.61883549293 25.2173371989251, 121.618610659514 25.2170395828975, 121.618561657359 25.2169401373483, 121.618455005611 25.2165884748266, 121.618354118822 25.2164688519196, 121.618237378395 25.2163809362892, 121.617829507519 25.2161791627111, 121.617521082193 25.2161092625787, 121.617395694326 25.216023508808, 121.617225628025 25.2158606487058, 121.616460329668 25.215379995218, 121.616311881964 25.2153057713661, 121.615937159605 25.2152855940083, 121.615803124299 25.215251724872, 121.615346251269 25.2150168027775, 121.615170420008 25.2149995078994, 121.615104122975 25.2149490645049, 121.614906673117 25.2146615371562, 121.614820198726 25.2146010050828, 121.614281175025 25.2145181337918, 121.61395689606 25.2143632005086, 121.613629734616 25.2142695199188, 121.613449579635 25.2141340433736, 121.613188715224 25.214028832865, 121.612966764288 25.2138133675084, 121.612832728983 25.2136310506683, 121.612311000159 25.2127345994858, 121.612138051378 25.2125465176862, 121.611697031986 25.2118417514029, 121.611731621742 25.2118331039638, 121.61193339532 25.212153059209, 121.612165434935 25.2125342671476, 121.612323971318 25.2127007303495, 121.61285290634 25.2136231238491, 121.612988382886 25.2137975138702, 121.613207451342 25.2140064936474, 121.613451020875 25.214102336097, 121.613651353213 25.2142464600813, 121.613912217625 25.2143127571141, 121.614281175025 25.2144849852754, 121.614841817324 25.2145844308246, 121.614925409235 25.2146291092597, 121.61506665074 25.214856104535, 121.615173302488 25.2149670800029, 121.615352016229 25.2149915810803, 121.615807448019 25.215232988754, 121.615961660682 25.2152675785103, 121.616326294363 25.2152776671892, 121.616494919424 25.2153576560005, 121.616699575482 25.2155039418446, 121.617247246622 25.215839750728, 121.617440372761 25.2160163026088, 121.617535494591 25.2160825996416, 121.617835272478 25.2161640296928, 121.618266203192 25.2163607589314, 121.618387267338 25.216455880761, 121.618473741729 25.2165654149891, 121.618604894555 25.216952387887, 121.61864669051 25.217053274676, 121.618864317726 25.2173278308662, 121.618946468398 25.2173869216997, 121.619371634151 25.2176485067313, 121.619468197221 25.2177378636016, 121.619669970799 25.2182718429635, 121.619743474031 25.218368406033, 121.6198472433 25.2184678515822, 121.620275291533 25.2187380840528, 121.620319969968 25.2188706781183, 121.620867641109 25.219140189969, 121.620374737082 25.2199775503179, 121.620358883444 25.2200294349523, 121.620308440049 25.221025331684, 121.620272409053 25.2211766618675, 121.620087830204 25.2213517676083, 121.619644049948 25.2215698968871, 121.619523702759 25.2215774185863, 121.619153885879 25.2215761649698, 121.618973365096 25.2216150270827, 121.618827945577 25.2216999596036, 121.618473172095 25.2217413289496, 121.618366614689 25.2217776838293, 121.618267578982 25.2218541544386, 121.618203644538 25.2218742123033, 121.617871436153 25.2218438121021, 121.6177385528 25.2218676308164, 121.617593133281 25.2217877127617, 121.617469025243 25.2216648583403, 121.61739380825 25.221641039626, 121.61660653706 25.2216460540922, 121.616543856233 25.2216949451374, 121.616467385623 25.2220171245894, 121.616419748195 25.2220848198828, 121.616293132924 25.2221901236725, 121.616135177239 25.2222728623645, 121.615991011337 25.2223079636277, 121.61550711535 25.222161290492, 121.615320326485 25.2221374717777, 121.615237587793 25.2222014062214, 121.614976835552 25.2225492848126, 121.614692264596 25.222856420866, 121.614643373551 25.2229435472159, 121.614608272288 25.223144125863, 121.614541830611 25.223353479826, 121.614489178716 25.2234838559466, 121.614429005122 25.223510181894, 121.614133151617 25.2233083496304, 121.613711936458 25.2230576263214, 121.613498821646 25.2229589040185, 121.613027461825 25.22282414024, 121.612280306364 25.2224229829457, 121.611671048724 25.2219773222641, 121.6114873939 25.2218776597488, 121.611375822027 25.2218663771999, 121.610992215365 25.2219478622753, 121.610721434191 25.2220155575687, 121.610275146701 25.2222772500224, 121.609507933376 25.2221293232701, 121.609169456909 25.2220205720349, 121.608856052773 25.2218416182731, 121.60850880099 25.2215210058418, 121.608022976894 25.220925431963, 121.607937151846 25.2208910635282, 121.607830594439 25.2209462226561, 121.607720276183 25.2209587588216, 121.607156148738 25.220517799202, 121.606924229678 25.2204363141266, 121.606477942188 25.2201185223325, 121.606047951713 25.2198790815725, 121.605503882132 25.219295523071, 121.605491345967 25.2192231267155, 121.605446215771 25.2188661594044, 121.605418636207 25.2187921960283, 121.605264441372 25.2185969452515, 121.605102724838 25.2184828661459, 121.604598770987 25.218273512183, 121.603847854677 25.2178378804337, 121.603703688774 25.2180635314117, 121.603603399451 25.2184628082812, 121.602949011614 25.2189990427582, 121.602440043297 25.2194616272631, 121.602099059597 25.2197023216397, 121.602061451101 25.2198499349878, 121.602351036523 25.2205663768431, 121.602630593012 25.2208017433494, 121.602663187042 25.2208844820413, 121.602658172576 25.2209622062671, 121.602594238132 25.2210148581619, 121.602492695192 25.2210324087936, 121.602387391402 25.2209772496656, 121.602254508049 25.2208481271615, 121.601581315964 25.2205071434614, 121.600752675428 25.2199022734786, 121.600577169112 25.2198345781852, 121.599878904697 25.2197267671623, 121.59967080435 25.2196289850719, 121.598690031038 25.2187111974503, 121.598254217655 25.218199862211, 121.597988450947 25.2179717039999, 121.59795836415 25.2177535747211, 121.59775527827 25.2174282612278, 121.597454410299 25.2172082515242, 121.597319019713 25.2170227162756, 121.597289658292 25.216772681217, 121.597166078494 25.2167469206358, 121.597070803637 25.2168597461248, 121.597115933832 25.2170377596741, 121.597292154618 25.2173284467592, 121.59742697293 25.2175268795305, 121.597602337052 25.2178996210486, 121.597559714089 25.2182650502713, 121.597665812315 25.2185173502251, 121.597825861119 25.2187368487814, 121.598068682406 25.2191689078, 121.598301855084 25.2193870370788, 121.59833946358 25.2195149059663, 121.598246695956 25.2197424373692, 121.598276782753 25.2198978858207, 121.59840465164 25.2201580112537, 121.598407158873 25.2202658222765, 121.598236667023 25.2205008753787, 121.598041102842 25.220651309364, 121.596766288899 25.2211183988876, 121.596235895018 25.2211126402524, 121.596067910401 25.2212248389332, 121.59596788833 25.2213845276356, 121.595995200641 25.2216579634493, 121.595917476416 25.2219412807884, 121.595924998115 25.2221243088039, 121.596007736807 25.222274115981, 121.596158170792 25.2223593619061, 121.596316126477 25.2224095065678, 121.596689704207 25.2224270571995, 121.596860196057 25.2226878094408, 121.596970514313 25.2227429685687, 121.597088354268 25.2227529975011, 121.597436859668 25.2226577226437, 121.597622394916 25.2226727660422, 121.597913233955 25.2228232000276, 121.598036088376 25.2228708374563, 121.598304362317 25.2228407506592, 121.598642838784 25.2227605192003, 121.598815837867 25.2227429685687, 121.598953735687 25.2227605192003, 121.599174372199 25.2228457651254, 121.599179386665 25.2230833254606, 121.599259618124 25.2232187160474, 121.599485269102 25.2234142802284, 121.599522877598 25.2235045406196, 121.599575529493 25.2238618213348, 121.599655760952 25.2240448493503, 121.599886426396 25.2243206449901, 121.599916513193 25.2244184270806, 121.599868875764 25.2244986585395, 121.599510341433 25.224605842754, 121.599239560259 25.2247086393107, 121.598833388498 25.2247788418372, 121.598754027803 25.2249128996157, 121.598695490679 25.2253247918424, 121.598590186889 25.225462062854, 121.598269261053 25.2257002499975, 121.597863089293 25.226115823882, 121.597549685157 25.226366547191, 121.597248817186 25.2266166436916, 121.596065403168 25.227167608163, 121.596022780205 25.2272578685542, 121.596062895935 25.2273456217123, 121.596905326253 25.2277862679277, 121.597048238539 25.22793419468, 121.597048238539 25.2280244550712, 121.596937920283 25.2281617260829, 121.596719791004 25.2283221890006, 121.596413908567 25.2284951880837, 121.596130591228 25.2285503472117, 121.595624130144 25.2286230569713, 121.595548913152 25.2285929701742, 121.595300697076 25.2286481293022, 121.594593657345 25.2284300000234, 121.594014486501 25.2285829412419, 121.593951805674 25.2286782160992, 121.593929240576 25.2289433559984, 121.594006964802 25.2294310128343, 121.594124804757 25.2298973581889, 121.594137340922 25.230132411291, 121.594074660095 25.2305837132471, 121.594014486501 25.2307391616986, 121.593728661929 25.2309015050411, 121.593467909687 25.2311096053875, 121.593337533567 25.2311597500493, 121.593214679145 25.231122141553, 121.593006578799 25.2308889688757, 121.592823550784 25.230896490575, 121.592695681896 25.2310118232971, 121.592660580633 25.2311421994177, 121.592695956593 25.231292115839, 121.592876202678 25.2315051214074, 121.592948912438 25.2316480336935, 121.592916318408 25.2318404638331, 121.592778996143 25.2320157258392, 121.592691921046 25.2321505772258, 121.59258912449 25.2324575565772, 121.592564052159 25.23244564722, 121.592666848715 25.2321543380754, 121.592762750381 25.2320114257893, 121.593319982935 25.2321957074214, 121.593605807507 25.232045273436, 121.594205036216 25.2321092078798, 121.594383049765 25.232171888707, 121.594525962051 25.2322818935588, 121.594584882029 25.2325138126196, 121.594727794315 25.2327491791258, 121.594831844488 25.2328378724964, 121.594879481917 25.2330393913559, 121.595174081805 25.2332822795615, 121.595046212917 25.2333361850729, 121.595006097188 25.2333925978174, 121.595013618887 25.2336342324064, 121.594990094137 25.2337615608304, 121.595004843571 25.2340366433172, 121.594943239404 25.2345180910035, 121.595069792481 25.2348368524058, 121.595022039747 25.2350529318717, 121.595011111654 25.235295274328, 121.594864746526 25.2354855928556, 121.594768328932 25.235689495967, 121.594760388345 25.235921455792, 121.594824322789 25.236151494428, 121.594815547473 25.2363968898666, 121.594919597646 25.2367363065461, 121.594982053144 25.2367867360828, 121.595265595812 25.2367563644108, 121.595338305572 25.2368002409898, 121.595343320038 25.236964151353, 121.595384689384 25.237088259391, 121.595532616136 25.2371985776469, 121.59560031143 25.2374514947848, 121.595536376986 25.2377194553212, 121.595561628188 25.2378111366157, 121.595757013498 25.2378868131299, 121.595856049205 25.2379632837391, 121.59604283807 25.2380422615814, 121.59628603968 25.2382140070481, 121.596266876933 25.2383276180137, 121.595907447483 25.2389476861308, 121.595980157243 25.2391441905242, 121.596146873863 25.2392679252118, 121.596348720507 25.239307160675, 121.596837035236 25.2392646917354, 121.597179592425 25.2391311284148, 121.597522105593 25.2391015675617, 121.598055709135 25.2392231633006, 121.598731845558 25.2392143930507, 121.599453915862 25.2393335911394, 121.599600543804 25.2392780022068, 121.599781709125 25.2391868341288, 121.599891373142 25.2392032864929, 121.600113103101 25.2392592725376, 121.600576262324 25.2392697190957, 121.600714253907 25.2393320947791, 121.600886473358 25.2394598832915, 121.601303232793 25.2398292548636, 121.601435236048 25.2398919143226, 121.601620725744 25.2398898056691, 121.602029242981 25.2397697356575, 121.602178927749 25.2397495418389, 121.602702690546 25.2393638507644, 121.602779801307 25.2391523602004, 121.602954301314 25.2390414150254, 121.603085646873 25.2389977996084, 121.602899488808 25.239261518934, 121.602865635411 25.239411892495, 121.602820475447 25.2399780993314, 121.602597998982 25.2400618378349, 121.60210908853 25.2402699381813, 121.601976530375 25.2404040221153, 121.601833352112 25.2405855176028, 121.601769003103 25.2407888107006, 121.601743032499 25.2411562450783, 121.602054675731 25.2419000951579, 121.602142389055 25.2423837894056, 121.602196841688 25.2425966504881, 121.602086523432 25.2430767856247, 121.601904461373 25.2436448383998, 121.601874751467 25.2439189393166, 121.601981219642 25.2440890809845, 121.602169262124 25.2445748573955, 121.602091537898 25.244987924047, 121.601948625612 25.2451157929345, 121.60163020701 25.2453132375403, 121.601517381521 25.2454711932249, 121.601552482784 25.2464170469078, 121.601653244632 25.2471957086945, 121.601760053219 25.2476832109495, 121.601918538815 25.2480548969234, 121.602490108255 25.247846168694, 121.602813884502 25.2478532073081, 121.602975772626 25.2477992446002, 121.603086044246 25.2476537799096, 121.603231508937 25.2475200462423, 121.603273740621 25.247522392447, 121.60324323996 25.2475646241314, 121.603102467679 25.247665510933, 121.603001580877 25.247815668033, 121.602804499684 25.2478813617643, 121.60249245446 25.2478696307409, 121.60193171154 25.2480714043441, 121.601845829055 25.2485563435412, 121.60183986287 25.2489016736068, 121.602013698446 25.2492033233037, 121.602178386156 25.2492868123664, 121.60298434197 25.2497460534818, 121.603150382736 25.2500325763782, 121.603369834962 25.2502730607161, 121.603692997748 25.2504971794252, 121.604122234018 25.2506323412065, 121.605294615387 25.2509179730767, 121.605587641032 25.2509058122597, 121.606439080075 25.250684984434, 121.606741256035 25.2507209411155, 121.607597421762 25.2512685429355, 121.608096361147 25.2515336828347, 121.608833222317 25.2517913129546, 121.609675917993 25.2519975209562, 121.6099492064 25.2520025354224, 121.610621144868 25.2518897099334, 121.611484956857 25.2517688634014, 121.611661670665 25.2518212615877, 121.611903997148 25.2520133080601, 121.611975050736 25.2516490155568, 121.611887297578 25.2513682054508, 121.611927413307 25.251232814864, 121.612087876225 25.251092409811, 121.612331077835 25.2509651677317, 121.612584308377 25.2506624193362, 121.612837480462 25.250533823849, 121.612972929505 25.2502800662901, 121.613221145581 25.2500017634172, 121.613414202529 25.2496281856869, 121.613377908684 25.2489455542196, 121.613240679207 25.2480680020087, 121.613161492262 25.2479134476195, 121.612930306543 25.2477577898023, 121.612921311621 25.2473195264367, 121.613078233295 25.2470062466838, 121.61313088519 25.24670287148, 121.613133392423 25.2465330064382, 121.612962900573 25.2464878762426, 121.612664539835 25.2466032089647, 121.612496555218 25.2465656004684, 121.612398773128 25.2464308366898, 121.61220571618 25.2463932281935, 121.61192992054 25.2464233149906, 121.611522843923 25.2463337679955, 121.611268011005 25.2461613091327, 121.610945831553 25.2460610198092, 121.610550942341 25.2460309330121, 121.610278907551 25.2460359474783, 121.610018636584 25.2458323574431, 121.609996332668 25.2456549745835, 121.609952426685 25.2454349093218, 121.609967515215 25.2452135035033, 121.609985181717 25.2450255857212, 121.609916638547 25.244849141853, 121.609699736707 25.2446071380215, 121.60965060176 25.2444574598497, 121.609733771163 25.2443146091049, 121.609978819653 25.2442052490457, 121.610149675001 25.2440607258041, 121.610191650379 25.2439445240457, 121.6100100811 25.2434975447114, 121.609908092844 25.2433676881415, 121.609683415846 25.2433117213868, 121.609594144558 25.2431645789198, 121.60959243359 25.2429287801041, 121.609837634527 25.2420948904661, 121.609940431084 25.2419193841499, 121.610241635426 25.241673132474, 121.610438426865 25.241608009404, 121.610626794314 25.2415210094037, 121.610763382609 25.2413104271646, 121.610870911174 25.2408554218369, 121.610869059342 25.2406412261647, 121.610825105272 25.2404398960825, 121.610920068301 25.2402374750737, 121.611099058081 25.2400784062548, 121.611222005093 25.2398991857771, 121.611306873118 25.2395362590985, 121.611484886667 25.2391802319998, 121.611504944532 25.2386067024307, 121.61174561807 25.2379868506264, 121.611842678824 25.2378772025062, 121.611924617926 25.2378974134492, 121.612089017343 25.2379799446978, 121.612395012278 25.2379128256732, 121.612796169573 25.2381685634483, 121.612929052926 25.2381234332527, 121.61302158592 25.2380056800742, 121.613081239206 25.2378814023768, 121.613044385648 25.2374245420291, 121.613101142516 25.2373324873267, 121.613260662662 25.2372492126131, 121.613710073969 25.2371839090862, 121.614150075441 25.236761378877, 121.614957404496 25.2362655735336, 121.615303402662 25.2360825455181, 121.615756933205 25.2354298839769, 121.616276209101 25.235159256933, 121.616750076154 25.2347179839093, 121.616922712724 25.2344534187384, 121.617077179732 25.2343178111662, 121.617320801329 25.2341743950145, 121.617680421758 25.2340347868738, 121.617828186383 25.2339213105951, 121.617939518991 25.2337409677129, 121.617859611804 25.2334361114956, 121.618073822528 25.2332498593953, 121.618354705332 25.2327040489303, 121.618520292697 25.2324864191749, 121.618638015389 25.2325607003599, 121.618625270099 25.2329461584507, 121.618612622734 25.2330968554187, 121.618711889297 25.2331766479352, 121.618832009024 25.2330291347189, 121.61905171613 25.2327498059342, 121.61905171613 25.2326194298136, 121.618991147746 25.2323920894263, 121.619024082092 25.2322136274941, 121.619389660585 25.231938321757, 121.619517550364 25.2317698803979, 121.619675718437 25.2315198578486, 121.619682983049 25.2310499853886, 121.619953130966 25.2308832362124, 121.62015515833 25.2306359812582, 121.620557790443 25.2304291836153, 121.62287347976 25.2291838204434, 121.623479795519 25.2290359697902, 121.629642148734 25.2273220123897, 121.630288923082 25.2271754357906, 121.63102601338 25.2268550483282, 121.632314001058 25.2259971961001, 121.633021158248 25.2255345837198, 121.63545717347 25.2239911653608, 121.635771199986 25.2236432219499, 121.636035967283 25.2232971737742, 121.636720134873 25.2224357454564, 121.635643813472 25.2222081636017, 121.632878224696 25.2216392089648, 121.630380103254 25.2211259766892, 121.629643394982 25.2209758195892)","wkt1":null,"CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454093250'=='0100020200' || '0454093250'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
