
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493257</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463002900">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463002900">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463002900" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0463002900" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463002900" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463002900',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="F2J1Oqedqv1mlS8mSgwxhG8uWumOaxJ_iCCGOUEEU9n0XDGHPPYYkNYrzoHGWf059LNvfvbpbRJpqZlVUE-p2Xh0UvA1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">瑞芳-內科(基客)</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0463002900" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0463002900" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">瑞芳 - 內科</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0640 - 1720 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 瑞芳-內科(基客)去班表:0640 1720<br/>瑞芳-內科(基客)返班表:1830<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">八堵交流道、國道1號、內湖交流道</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">四段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">基隆客運瑞芳站:02-2497-2055</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 內科</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 瑞芳</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">瑞芳火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100460" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.108227" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.8058805" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">東和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106304" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8038192" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901061" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11067" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7936866" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">瑞興新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.108179" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7883469" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">大寮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098468" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.782038" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">四腳亭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099105" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7609117" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">寶祥吉祥</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099587" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7585153" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">東暖新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054500260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098874" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.755091" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">麗寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.070424" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.58271" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">瑞光路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147400070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.074746" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5776" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">瑞光港墘路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.077273" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.573134" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">仁寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079478" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.568256" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">治磐新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144200160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.083069" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5640985" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">美麗華(植福)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046600420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08386" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.55711" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">美麗華(植福)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046600420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08386" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.55711" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">治磐新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082945" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5638416" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">仁寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079213" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5684974" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">瑞光港墘路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200721" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.078319" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.570459" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">瑞光路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100230" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.074821" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.577343" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">麗寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.070391" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.582671" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">東暖新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054500220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098787" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.755186" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">寶祥吉祥</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099459" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7585247" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">四腳亭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098772" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7614982" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">大寮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245200410" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09816" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.781998" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">瑞興新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2245300600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107855" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.788396" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110433" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7938803" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">東和里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.106173" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.8037843" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107778" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.807937" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0463002900";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 14;
        var existBackNum = 14;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0463002900',
                        url: './StopStatusRecent3OfRoute?routeid=0463002900&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0463002900',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0463002900',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0463002900');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0463002900","Name":"瑞芳-內科(基客)","BeginStop":"瑞芳","GoDirStops":[{"UniStopId":"2244100460","Name":"瑞芳火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8058805,"Latitude":25.108227,"PublicId":"2244100460"},{"UniStopId":"2244400160","Name":"東和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8038192,"Latitude":25.106304,"PublicId":"2244400160"},{"UniStopId":"2244901061","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7936866,"Latitude":25.11067,"PublicId":"2244901061"},{"UniStopId":"2245300640","Name":"瑞興新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7883469,"Latitude":25.108179,"PublicId":"2245300640"},{"UniStopId":"2245200440","Name":"大寮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.782038,"Latitude":25.098468,"PublicId":"2245200440"},{"UniStopId":"2244900360","Name":"四腳亭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7609117,"Latitude":25.099105,"PublicId":"2244900360"},{"UniStopId":"2244901360","Name":"寶祥吉祥","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7585153,"Latitude":25.099587,"PublicId":"2244901360"},{"UniStopId":"2054500260","Name":"東暖新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.755091,"Latitude":25.098874,"PublicId":"2054500260"},{"UniStopId":"1149100300","Name":"麗寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.58271,"Latitude":25.070424,"PublicId":"1149100300"},{"UniStopId":"1147400070","Name":"瑞光路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5776,"Latitude":25.074746,"PublicId":"1147400070"},{"UniStopId":"1149200760","Name":"瑞光港墘路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.573134,"Latitude":25.077273,"PublicId":"1149200760"},{"UniStopId":"1149200060","Name":"仁寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.568256,"Latitude":25.079478,"PublicId":"1149200060"},{"UniStopId":"1144200160","Name":"治磐新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5640985,"Latitude":25.083069,"PublicId":"1144200160"},{"UniStopId":"1046600420","Name":"美麗華(植福)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.55711,"Latitude":25.08386,"PublicId":"1046600420"}],"LastStop":"內科","BackDirStops":[{"UniStopId":"1046600420","Name":"美麗華(植福)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.55711,"Latitude":25.08386,"PublicId":"1046600420"},{"UniStopId":"1149300020","Name":"治磐新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5638416,"Latitude":25.082945,"PublicId":"1149300020"},{"UniStopId":"1149200020","Name":"仁寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5684974,"Latitude":25.079213,"PublicId":"1149200020"},{"UniStopId":"1149200721","Name":"瑞光港墘路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.570459,"Latitude":25.078319,"PublicId":"1149200721"},{"UniStopId":"1149100230","Name":"瑞光路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.577343,"Latitude":25.074821,"PublicId":"1149100230"},{"UniStopId":"1149100340","Name":"麗寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.582671,"Latitude":25.070391,"PublicId":"1149100340"},{"UniStopId":"2054500220","Name":"東暖新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.755186,"Latitude":25.098787,"PublicId":"2054500220"},{"UniStopId":"2244901320","Name":"寶祥吉祥","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7585247,"Latitude":25.099459,"PublicId":"2244901320"},{"UniStopId":"2244900320","Name":"四腳亭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7614982,"Latitude":25.098772,"PublicId":"2244900320"},{"UniStopId":"2245200410","Name":"大寮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.781998,"Latitude":25.09816,"PublicId":"2245200410"},{"UniStopId":"2245300600","Name":"瑞興新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.788396,"Latitude":25.107855,"PublicId":"2245300600"},{"UniStopId":"2244901020","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7938803,"Latitude":25.110433,"PublicId":"2244901020"},{"UniStopId":"2244200220","Name":"東和里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8037843,"Latitude":25.106173,"PublicId":"2244200220"},{"UniStopId":"2244100160","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.807937,"Latitude":25.107778,"PublicId":"2244100160"}],"RouteMapUrl":"../MapOverview?nid=0463002900","RouteTracks":null,"StopDirection":null,"TicketPrice":"四段票","BusTimeDesc":"0640 - 1720","HeadwayDesc":"瑞芳-內科(基客)去班表:0640 1720;瑞芳-內科(基客)返班表:1830","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"八堵交流道、國道1號、內湖交流道","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"基隆客運瑞芳站:02-2497-2055","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.555068994982 25.0843343353323, 121.555058346332 25.0839430508773, 121.556381821382 25.0839237621746, 121.556394751886 25.0845575322429, 121.55673550868 25.0844638447003, 121.557192640005 25.0844142453841, 121.55758283696 25.0844225119382, 121.558160906522 25.0845988649594, 121.55873669423 25.0848937045992, 121.559056914343 25.0849488147335, 121.560194798639 25.0846649972769, 121.561168009171 25.0843698126462, 121.563462793209 25.0831842447998, 121.564456160115 25.0826951344401, 121.565472345555 25.0823417337668, 121.565016735466 25.0807724295639, 121.567449951952 25.0797156523613, 121.56946939233 25.0788131822094, 121.571923145498 25.0777212533228, 121.573960080086 25.0768277244592, 121.574856087908 25.0763503004275, 121.57599169035 25.0757178657271, 121.576865640254 25.0751253858111, 121.579126957107 25.0737440697584, 121.579241049783 25.073641417719, 121.580331015155 25.0725962910513, 121.58111977586 25.0718405149245, 121.581652968969 25.0713293127487, 121.582666872557 25.0703110357493, 121.584325780076 25.0687147076094, 121.587044228254 25.0689730702861, 121.587815494749 25.0690006289395, 121.590793313611 25.0689234646945, 121.590662487342 25.0675021181657, 121.590382579975 25.0655626390738, 121.590169606978 25.0650114493591, 121.590123969908 25.0646993370835, 121.590203834781 25.064445788336, 121.591372904409 25.0641371195874, 121.59217003191 25.0640516843499, 121.593275209639 25.0638835696764, 121.593746792703 25.063949713182, 121.595596615302 25.0637388806333, 121.597931712085 25.0636754929987, 121.599099260477 25.0637450815958, 121.602427724166 25.0641536554329, 121.60594177861 25.0645863425978, 121.608978165046 25.0649756219418, 121.612165914434 25.0653538762611, 121.613795157858 25.0655330126897, 121.615247937942 25.0656983691604, 121.617062011502 25.0659188441076, 121.618864675794 25.0660786881962, 121.6204718613 25.0662109728014, 121.623134784375 25.0664321358068, 121.627352410325 25.0667738697588, 121.629123889286 25.0669254449969, 121.63060100914 25.0670411932342, 121.63219982785 25.0673395200321, 121.633260129126 25.0676598932669, 121.635187534745 25.0685369537713, 121.636142870758 25.0691900945134, 121.63648819126 25.0694532789335, 121.636914137253 25.0698280746184, 121.638567720447 25.0709703676278, 121.639572496621 25.0714946613948, 121.64012318394 25.071690323671, 121.641438292194 25.0720127523738, 121.642800558754 25.0722339049034, 121.644819238514 25.072565288476, 121.646993084315 25.0729214731457, 121.648804876022 25.0732190966787, 121.651506590607 25.0736276389152, 121.653930679678 25.0740912948108, 121.655678579486 25.0745542600158, 121.656811139457 25.0748904598415, 121.658279131897 25.0754650287182, 121.659780591523 25.0762235381785, 121.661017356139 25.0769544860827, 121.662667896862 25.0779671965148, 121.664494900926 25.0791039023282, 121.666452731258 25.0803646000686, 121.667300059538 25.0808978093046, 121.669824550165 25.0824781341475, 121.672066090953 25.0837911522615, 121.673801820875 25.0845881873423, 121.675226458099 25.0850986452856, 121.67722384056 25.0855898126599, 121.677830052982 25.0856759217441, 121.678866014487 25.0857640973835, 121.679614462446 25.0857916522578, 121.6811554742 25.0858026742057, 121.683196972495 25.0859294265361, 121.684639864547 25.0861278212245, 121.685261289326 25.0862463067878, 121.6878047954 25.0868015341201, 121.690337652823 25.0873388484951, 121.692185193568 25.0877335663983, 121.693445537337 25.0880614637233, 121.693936135847 25.0882743209703, 121.694398591497 25.0885553746322, 121.694907444835 25.0889473331956, 121.695339475771 25.0894460624877, 121.695662738355 25.0900426061813, 121.695912981626 25.0906467242559, 121.696229398649 25.0917502480902, 121.696916997181 25.0936569374782, 121.697501151686 25.0951489287549, 121.697704997268 25.0955208905056, 121.698079221248 25.0961029394942, 121.698414653718 25.0964611221107, 121.698880151839 25.0968110379619, 121.69935249552 25.097101026521, 121.700028684784 25.0973689725833, 121.700470603752 25.0974571397968, 121.701167329698 25.0975149994962, 121.701825264134 25.0975039786032, 121.703152542273 25.0973276441801, 121.704023449706 25.0972918262194, 121.704705723912 25.0973689725833, 121.70514764288 25.0974626502456, 121.705436677661 25.0975673487244, 121.706109824454 25.0978903980711, 121.70652436118 25.0981500767783, 121.707240102572 25.0986935405111, 121.708625187667 25.0998954891142, 121.709170550662 25.1002874113487, 121.709772959995 25.1006538471701, 121.710205751549 25.1008611722143, 121.710966369394 25.1011807689363, 121.711354284494 25.1012944184314, 121.712172709296 25.101525849804, 121.713083929474 25.1017469490099, 121.715057732781 25.1021801920893, 121.717989914573 25.1028338420978, 121.720674895566 25.1034020808366, 121.721597525011 25.1035811615889, 121.72199684938 25.103702385334, 121.722474517387 25.103892485965, 121.72292860624 25.1041383765602, 121.723884702871 25.1048140565741, 121.72447798479 25.1050151756941, 121.724686394079 25.1051033373959, 121.728693328886 25.1045743662319, 121.729277483391 25.1045908966154, 121.729642579957 25.1046625282515, 121.730397112859 25.1049270139288, 121.730993437249 25.1050757868709, 121.731401128414 25.1051419081205, 121.731790564751 25.1051171126561, 121.732435568683 25.1050179307483, 121.735272673244 25.1045661010393, 121.735939735094 25.1044359241823, 121.736259194589 25.104251334539, 121.736561920491 25.1040109543246, 121.736805318202 25.1037326912515, 121.737191712067 25.1033139179083, 121.737618418678 25.1030542501645, 121.740941558042 25.1024577699169, 121.744271542967 25.1020913395001, 121.745054979347 25.1019150116903, 121.745159183992 25.1018289140345, 121.745356944632 25.1015175844054, 121.745490813372 25.1014294201186, 121.74630695632 25.101111890403, 121.746507759431 25.1009713780749, 121.746687265242 25.1006324947369, 121.746723774899 25.1004003728844, 121.746480377189 25.0997253572788, 121.746468207303 25.0995896649165, 121.746513844374 25.0993058814186, 121.746784624326 25.0990524043394, 121.747685956473 25.098478634989, 121.74834693338 25.0982692395018, 121.748810149647 25.0982609738831, 121.752156868165 25.098327098817, 121.753566293031 25.0984731245861, 121.755500544211 25.0988870929178, 121.758545297444 25.0995132087477, 121.758841177785 25.099532494993, 121.759142382452 25.0995352501706, 121.759450432679 25.099457416378, 121.761919398204 25.0986825197243, 121.76326873426 25.0983491404537, 121.764786927479 25.0983601612705, 121.765403027933 25.098412510137, 121.766331742322 25.0985915981952, 121.766986634286 25.0988622961853, 121.767324348609 25.0990944209568, 121.768021835173 25.1001558523555, 121.768094854486 25.1004644302942, 121.768173958742 25.1019377414613, 121.768347379611 25.1026575153584, 121.768532970365 25.1029853726863, 121.768786256107 25.1033855502924, 121.76963586624 25.1051315766776, 121.769775819923 25.1052968796589, 121.770062572851 25.1055234821327, 121.771573159891 25.1067343174137, 121.771944341399 25.1068885981811, 121.77230411364 25.1069492084293, 121.772644870434 25.1068775781327, 121.773820025005 25.1065049621632, 121.774198052073 25.1063169318622, 121.774474916969 25.1060001035946, 121.774614870652 25.1056192198298, 121.775083411245 25.1028118012693, 121.775065156417 25.102003175627, 121.775080368774 25.1018020515535, 121.775144260672 25.1016029934976, 121.776307245357 25.100252283045, 121.776517175882 25.1000539112583, 121.776718739611 25.0999237295984, 121.778274963722 25.0993196573317, 121.779043187745 25.0989635494781, 121.780217581698 25.0978421818049, 121.780455655083 25.0977175082283, 121.780796411878 25.0976210755405, 121.780972875218 25.0976293412025, 121.781191933157 25.0976541381849, 121.781597342468 25.0978476922363, 121.782605161113 25.0988519642119, 121.782906365779 25.0990117653023, 121.784937976043 25.0996929839878, 121.785287860252 25.0999547252442, 121.785494748305 25.1004210365686, 121.785622532103 25.1010223482518, 121.785640786932 25.1015375591178, 121.785604277275 25.1032808567939, 121.785665887321 25.1034799121189, 121.785805841004 25.103785726589, 121.78637554377 25.1046880125734, 121.787746177126 25.1069195920617, 121.788741825885 25.108513355692, 121.789195914739 25.1089493297647, 121.789926868488 25.1095120301797, 121.790976521113 25.1099693514978, 121.791484613834 25.1101980115154, 121.791987382229 25.1103777710482, 121.792980749135 25.1104356246347, 121.794403104505 25.1104934781939, 121.796597486987 25.1100051657457, 121.797170992842 25.109844690284, 121.798443506497 25.1091001640345, 121.79865039455 25.1089321112289, 121.798799475648 25.1087557932829, 121.798872494961 25.1085932499512, 121.799155444799 25.1079203458087, 121.799341796171 25.1076496678676, 121.800440888957 25.1068803331449, 121.80078240637 25.1067529137665, 121.802606367962 25.1064553717822, 121.804387734954 25.1061578290739, 121.805316449343 25.1059539568002, 121.806464982289 25.1052534876479, 121.80679965414 25.1051653260544, 121.808147468961 25.105118490182, 121.808604600286 25.1053258076576, 121.808835828111 25.105526925936, 121.809000121566 25.1057418190734, 121.80907618335 25.1059711757553, 121.809410855202 25.1073762343264, 121.808251673606 25.1076441578779, 121.804997750466 25.1083907592273, 121.804317758112 25.1062149959004, 121.800714064561 25.1068173699936, 121.799851410127 25.1073039155294, 121.799303004661 25.1077701988314, 121.798849232581 25.1087122755476, 121.79869983471 25.1089589721437, 121.798286058603 25.1092730377862, 121.797137525657 25.1099211399937, 121.794391695237 25.1105575303167, 121.79199422779 25.1104308035036, 121.790931644661 25.1100099868936, 121.789921544163 25.1095629967968, 121.789165490025 25.108980323123, 121.788721289203 25.1085450379045, 121.788339592324 25.1079560128615, 121.786709312351 25.1052562964902, 121.785933594841 25.1040820406919, 121.785627985988 25.103467253049, 121.785562443294 25.1032836118871, 121.785556358351 25.1021698603962, 121.785580199336 25.1012768744583, 121.785452153706 25.1004375675135, 121.785254393066 25.0999829657148, 121.784897663297 25.0997391331447, 121.782919296283 25.0990661802811, 121.78262037347 25.098902935272, 121.781996666837 25.0983023019709, 121.781406427389 25.0977980983448, 121.781047299082 25.097677795917, 121.780654936959 25.0976796239672, 121.780259415679 25.0978559578829, 121.779059921338 25.0990200308702, 121.778347983035 25.0993506531306, 121.776733951968 25.0999767665876, 121.776368855403 25.1002577933678, 121.775174685386 25.1016367438482, 121.775100144837 25.1020183287972, 121.77514882438 25.1028448625105, 121.774668113902 25.1056247299108, 121.774552499989 25.1059939047725, 121.77428648033 25.1063261654912, 121.773907496057 25.1065283798361, 121.773315735373 25.106737761183, 121.772287380047 25.1070022423718, 121.771928368424 25.1069251020841, 121.771532847145 25.1067598013039, 121.770741804586 25.106131656301, 121.769596314112 25.1051605047154, 121.768698785055 25.1033332035543, 121.768302503158 25.1026678470103, 121.768110827461 25.1019418741465, 121.768069428728 25.1009298012297, 121.768046935562 25.10049749217, 121.767980001192 25.1001689393821, 121.767633159454 25.0996151502955, 121.767276429685 25.099129549593, 121.766941757833 25.0988981136862, 121.766353800239 25.0986529013548, 121.765492020221 25.0984621037793, 121.764797576129 25.0983959789184, 121.763179845361 25.0984034870757, 121.761929286236 25.0987513996256, 121.759511282107 25.0994939224993, 121.759121085152 25.0995793330046, 121.758825965429 25.0995848433577, 121.758524000144 25.0995462708806, 121.755966042332 25.0990276076404, 121.753579223535 25.0985309838048, 121.752165995579 25.0983684268825, 121.74876082092 25.0983296096655, 121.748053922053 25.0984174060543, 121.747364975742 25.0987651756012, 121.74678690618 25.0991756989625, 121.746611964076 25.0994085119343, 121.746572411948 25.0997232908987, 121.746821894601 25.1004458329851, 121.746675855975 25.1009279845291, 121.746408391975 25.1011580096759, 121.745917519983 25.1013694959187, 121.745455064334 25.1015678655717, 121.745335647332 25.1017889647016, 121.745077037265 25.1020093746514, 121.744292079649 25.102174681853, 121.741947094833 25.1024226422365, 121.740266129396 25.10266578068, 121.73803751911 25.103059760361, 121.737595600143 25.1031926937782, 121.73712705955 25.1035095293194, 121.736666885754 25.1040529692385, 121.736086680139 25.1045915789986, 121.732678205775 25.1052052742843, 121.731544885187 25.1053264964194, 121.730932587821 25.105219049533, 121.729332247876 25.1046955889924, 121.7287024563 25.1046680383755, 121.724814177877 25.1051749687318, 121.723829938386 25.105163948529, 121.722928986549 25.1049025628029, 121.721486855115 25.1041917561057, 121.720947577063 25.1039376003828, 121.720253893588 25.1037447447392, 121.716864580472 25.1030525282279, 121.711571440889 25.101833391114, 121.710330873184 25.1014338972128, 121.708958718592 25.1008470520812, 121.708131166377 25.1003511244227, 121.706336108263 25.0991388483479, 121.705481173805 25.0986966401072, 121.705117218167 25.0985626686034, 121.704469171763 25.0983725596882, 121.70364085893 25.0982589074782, 121.703091692846 25.0982423762389, 121.702093762233 25.0983553396632, 121.701529383792 25.0983746260911, 121.700926974459 25.0983222772083, 121.700351947368 25.098206558546, 121.699989132656 25.0980908397741, 121.699620993619 25.0979172614111, 121.699115182753 25.097591456914, 121.69842073866 25.0970011493038, 121.69800087761 25.0965375801872, 121.697580255942 25.0958012387073, 121.697211356287 25.0949353946463, 121.696152956556 25.0919875526331, 121.695698867702 25.0904555697714, 121.695171759536 25.0894898045316, 121.6945770983 25.0889108917602, 121.693975307666 25.0884971662673, 121.693399132408 25.0882065206423, 121.687936001978 25.0869968275023, 121.685197206371 25.0863885719978, 121.683801283373 25.0861247213099, 121.682448904845 25.0859869472513, 121.678598455178 25.0858545809089, 121.677272139793 25.0857169096467, 121.674906014588 25.0851138450897, 121.673106996474 25.0844149342635, 121.671494670084 25.0835998275861, 121.663017206044 25.0783663555975, 121.659149412899 25.076060751728, 121.655629014733 25.0747032782317, 121.653869449942 25.0741901573191, 121.65138527206 25.0737327022548, 121.643537121836 25.0724694780433, 121.641468254808 25.0721280512781, 121.640507676261 25.0719304229031, 121.639572846032 25.071643267715, 121.638052401857 25.0708074296201, 121.635776633266 25.0691814824481, 121.635208838063 25.0687881311821, 121.63410800439 25.0681843648843, 121.633249091136 25.0678407901609, 121.63211159618 25.0675627479229, 121.630814127293 25.0673354263491, 121.62647884073 25.0669099429924, 121.62064490186 25.0664345472391, 121.615226260333 25.065982575073, 121.611982422867 25.0656342936736, 121.603427556323 25.0645226109058, 121.600474837849 25.0641229952174, 121.598281215985 25.0639631485771, 121.5952215117 25.0640575126761, 121.593482478002 25.0643269371799, 121.592718817685 25.0645143430082, 121.590910829068 25.0651399456829, 121.590656782708 25.0654809942536, 121.590571593509 25.066002555585, 121.590766311678 25.0673874038267, 121.590923759571 25.0690230203406, 121.587840214828 25.0691112079736, 121.58701038076 25.069072625892, 121.584311708646 25.0688053068499, 121.582843334596 25.0702295882775, 121.579176016957 25.073763015595, 121.578083009114 25.0744140616599, 121.576959576557 25.0751326195946, 121.576019577431 25.0757656445306, 121.574872360561 25.0763887892397, 121.573947910201 25.0768883495999, 121.572304729487 25.077618451134, 121.566400407148 25.0802597539333, 121.565090123848 25.0808196567131, 121.565569324331 25.0824316340346, 121.564899980627 25.082649323299, 121.564250412988 25.0829779231327, 121.561255860532 25.084518955028, 121.560301285137 25.0848337722999, 121.558965640201 25.085092789842, 121.558691817777 25.0850431907806, 121.558420277207 25.0849102376419, 121.557982161328 25.0846870413745, 121.557548609156 25.0845657987871, 121.556772778955 25.084604375987, 121.556279898591 25.0847421516019, 121.556248713259 25.0839561396379, 121.555053022007 25.0839781838634, 121.55505226139 25.0843412241319)","wkt0":"LINESTRING (121.806213598091 25.1081059630328, 121.804997750466 25.1083907592273, 121.804662280107 25.1071981336344, 121.804303181815 25.1061962295621, 121.800714064561 25.1068173699936, 121.800422539508 25.1069431936873, 121.799851410127 25.1073039155294, 121.799507930048 25.1075602078783, 121.799303004661 25.1077701988314, 121.799172639378 25.1079818011761, 121.798898851731 25.1086553584682, 121.79869983471 25.1089589721437, 121.798286058603 25.1092730377862, 121.797371196016 25.1097911804115, 121.797170815202 25.1098844269291, 121.796680774992 25.1100371925005, 121.794391695237 25.1105575303167, 121.791982737679 25.1104171224606, 121.791631575262 25.1103060202268, 121.790931644661 25.1100099868936, 121.789921544163 25.1095629967968, 121.789165490025 25.108980323123, 121.788586183676 25.1084113303476, 121.787917586305 25.1072854282466, 121.786681573954 25.1052538445437, 121.785933594841 25.1040820406919, 121.785751092747 25.1037738040726, 121.78564395845 25.1035158881728, 121.78556658368 25.1032916997368, 121.785556358351 25.1021698603962, 121.785612214955 25.1015636632083, 121.785572535585 25.1010617191879, 121.785452153706 25.1004375675135, 121.785254393066 25.0999829657148, 121.784897663297 25.0997391331447, 121.784042895903 25.0994150253662, 121.782914017849 25.0990469992169, 121.782618406549 25.0988892737243, 121.782406121923 25.0987027806891, 121.781608566602 25.0979072093367, 121.781406427389 25.0977980983448, 121.781053055434 25.0976691331215, 121.780795139534 25.0976512774053, 121.780481672517 25.0977524597968, 121.780259415679 25.0978559578829, 121.779108766343 25.0989666484942, 121.778616742165 25.0992215884413, 121.776745859907 25.0999606166927, 121.776531591314 25.1001004864691, 121.776368855403 25.1002577933678, 121.775436440724 25.1012839236554, 121.775174685386 25.1016367438482, 121.775100144837 25.1020183287972, 121.775140829423 25.1028482827861, 121.774668113902 25.1056247299108, 121.774535719043 25.1060176724008, 121.774246059648 25.1063390752913, 121.773907496057 25.1065283798361, 121.772637061227 25.1069273219396, 121.772287380047 25.1070022423718, 121.771928368424 25.1069251020841, 121.771532847145 25.1067598013039, 121.769762290928 25.1053282433609, 121.769596314112 25.1051605047154, 121.768774274635 25.103469264914, 121.768302503158 25.1026678470103, 121.768129484886 25.101972360711, 121.768069428728 25.1009298012297, 121.768046935562 25.10049749217, 121.767980001192 25.1001689393821, 121.767637460708 25.0995925905434, 121.767470807357 25.0993436025016, 121.767276429685 25.099129549593, 121.766941757833 25.0988981136862, 121.766353800239 25.0986529013548, 121.765496758739 25.098447840742, 121.764797576129 25.0983959789184, 121.763268762159 25.0983823697828, 121.762770786076 25.0985014078904, 121.761921647575 25.0987335322002, 121.759511282107 25.0994939224993, 121.759121085152 25.0995793330046, 121.758825965429 25.0995848433577, 121.758524000144 25.0995462708806, 121.755979662037 25.0990142637373, 121.753579223535 25.0985309838048, 121.752165995579 25.0983684268825, 121.748777856528 25.0983020190602, 121.748053922053 25.0984174060543, 121.747702545622 25.0985678708338, 121.747364975742 25.0987651756012, 121.74678690618 25.0991756989625, 121.746611964076 25.0994085119343, 121.746572411948 25.0997232908987, 121.746821894601 25.1004458329851, 121.746768096478 25.1007075808178, 121.746577635506 25.1010329516452, 121.746408391975 25.1011580096759, 121.745917519983 25.1013694959187, 121.745455064334 25.1015678655717, 121.745335647332 25.1017889647016, 121.745077037265 25.1020093746514, 121.744292079649 25.102174681853, 121.74098086048 25.1025318398167, 121.740266129396 25.10266578068, 121.73803751911 25.103059760361, 121.737595600143 25.1031926937782, 121.73712705955 25.1035095293194, 121.736666885754 25.1040529692385, 121.736076490447 25.1044414094594, 121.735600338017 25.1047013093276, 121.735147993208 25.1047767001291, 121.733455668112 25.1050623915873, 121.732257351162 25.1057448767375, 121.731822862069 25.1059750170789, 121.731570898075 25.1060345361327, 121.73117807232 25.1060583437542, 121.730874525145 25.1060166804165, 121.73057296194 25.1059115300882, 121.730319013977 25.1057954679333, 121.729987691244 25.105561359655, 121.72954129834 25.1051754777895, 121.729136568775 25.1048818504575, 121.728918332244 25.1047826520345, 121.7285374103 25.1046913894853, 121.728196167725 25.1046834536115, 121.724814177877 25.1051749687318, 121.724123080476 25.1051873816003, 121.723829938386 25.105163948529, 121.723504082317 25.1051000869881, 121.723204503079 25.1049651771328, 121.722938651306 25.1046953574222, 121.722131176143 25.1041338943481, 121.721855404527 25.1039890646505, 121.721250294146 25.1037390846246, 121.7204983701 25.1035020003936, 121.718427107028 25.1030268399475, 121.714941274444 25.1022679720115, 121.712203397969 25.1016588936943, 121.711233237392 25.1013890739838, 121.710765020836 25.1012313484912, 121.709705581678 25.1007383323289, 121.709120310982 25.1003881618958, 121.708489409012 25.099918953355, 121.707541072088 25.0990896545388, 121.707128406649 25.0987355161687, 121.706648286281 25.0983655060509, 121.70621181322 25.0980708867346, 121.705705901263 25.0977782513868, 121.705094838977 25.0975699346985, 121.70466630179 25.0974647843701, 121.704237764603 25.0974092332532, 121.703319187206 25.0974251050009, 121.70210301454 25.0975907663673, 121.70148401638 25.0976344136734, 121.700896761716 25.0976264777996, 121.700499968024 25.0975907663673, 121.699910729391 25.0974637923859, 121.699184596935 25.0971820688646, 121.698708444505 25.0968755457375, 121.698222372232 25.096442048629, 121.697843434256 25.095997639694, 121.697399025321 25.0952030603258, 121.697240307844 25.0948568578295, 121.696152956556 25.0919875526331, 121.695698867702 25.0904555697714, 121.695373393524 25.0898036901622, 121.695171759536 25.0894898045316, 121.694599645824 25.0889109043552, 121.693994535444 25.0884912950259, 121.693399132408 25.0882065206423, 121.692800186431 25.0880240704536, 121.687936001978 25.0869968275023, 121.685197206371 25.0863885719978, 121.683801283373 25.0861247213099, 121.682846616668 25.0860262142145, 121.681170163319 25.0859389196023, 121.67968813888 25.085925031823, 121.678654491312 25.0858913043592, 121.677272139793 25.0857169096467, 121.676321344403 25.0855074064622, 121.674906014588 25.0851138450897, 121.673106996474 25.0844149342635, 121.672240321281 25.0840194301173, 121.671494670084 25.0835998275861, 121.670680922072 25.0831385481211, 121.663017206044 25.0783663555975, 121.661132081874 25.0771925946468, 121.659725448236 25.0763662717832, 121.658890197514 25.0759516223751, 121.658090658225 25.075571692415, 121.656598713943 25.0749913816405, 121.655114705535 25.0745122532574, 121.653869449942 25.0741901573191, 121.65138527206 25.0737327022548, 121.643537121836 25.0724694780433, 121.641377707919 25.0721304991213, 121.640507676261 25.0719304229031, 121.63980442093 25.0717227936028, 121.638808468763 25.0712764006993, 121.638052401857 25.0708074296201, 121.637082416203 25.070166370346, 121.635624199385 25.0690245964973, 121.635208838063 25.0687881311821, 121.634997265352 25.0686426825688, 121.63410800439 25.0681843648843, 121.633249091136 25.0678407901609, 121.63211159618 25.0675627479229, 121.630814127293 25.0673354263491, 121.62647884073 25.0669099429924, 121.62064490186 25.0664345472391, 121.615226260333 25.065982575073, 121.611982422867 25.0656342936736, 121.603427556323 25.0645226109058, 121.6011963947 25.0641638737705, 121.599589380247 25.0639277815238, 121.598331544244 25.0638285831008, 121.597446694311 25.0637968396054, 121.596284088793 25.0638087434162, 121.595351623617 25.0638761983438, 121.594427094315 25.0639992043883, 121.593482478002 25.0643269371799, 121.592718817685 25.0645143430082, 121.590910829068 25.0651399456829, 121.590656782708 25.0654809942536, 121.590571593509 25.066002555585, 121.590773616396 25.0675703476162, 121.590923759571 25.0690230203406, 121.589146762259 25.0690345163396, 121.587840214828 25.0691112079736, 121.58701038076 25.069072625892, 121.58427611969 25.068794456156, 121.582843334596 25.0702295882775, 121.579270567265 25.073665098725, 121.578083009114 25.0744140616599, 121.576959576557 25.0751326195946, 121.57600495518 25.0757383457656, 121.574872360561 25.0763887892397, 121.573947910201 25.0768883495999, 121.572941707878 25.0773066728332, 121.571919964121 25.0777788573267, 121.56944793942 25.07886309609, 121.568102808804 25.0794920140918, 121.566083128912 25.080360000293, 121.565073288966 25.0808083771649, 121.565277637717 25.0814164634979, 121.565543489491 25.0824382072548, 121.564899980627 25.082649323299, 121.564250412988 25.0829779231327, 121.561255860532 25.084518955028, 121.560301285137 25.0848337722999, 121.559367395675 25.0850381979215, 121.558965640201 25.085092789842, 121.558691817777 25.0850431907806, 121.558420277207 25.0849102376419, 121.557982161328 25.0846870413745, 121.557548609156 25.0845657987871, 121.557165190685 25.0845501416803, 121.556772778955 25.084604375987, 121.556279898591 25.0847421516019, 121.556267243181 25.0839324999936, 121.55722273504 25.0839207689701)","wkt1":"LINESTRING (121.557008643862 25.0839219420725, 121.558560071712 25.0838984800256, 121.558545994484 25.0846504386282, 121.558508455209 25.0847536716344, 121.55873669423 25.0848937045992, 121.559056914343 25.0849488147335, 121.560194798639 25.0846649972769, 121.561168009171 25.0843698126462, 121.562298957071 25.0838093774566, 121.563462793209 25.0831842447998, 121.564456160115 25.0826951344401, 121.565493642283 25.0823310729579, 121.565237710352 25.0814122475649, 121.565026417711 25.0807910174409, 121.567480090704 25.079717442508, 121.56811694458 25.0794615105767, 121.56946939233 25.0788131822094, 121.57106016179 25.0781401875824, 121.572829365664 25.0773270085099, 121.573984035308 25.0768285364343, 121.575022642796 25.0762675693523, 121.57599169035 25.0757178657271, 121.576933204423 25.0751002519096, 121.579110113816 25.0737409855186, 121.579241049783 25.073641417719, 121.580075810464 25.0728623354869, 121.581273631421 25.0717151057249, 121.581717048372 25.0712850805612, 121.582711016571 25.0703037601617, 121.584323982929 25.0687272492243, 121.58698597261 25.0689727653212, 121.587815494749 25.0690006289395, 121.589197849446 25.0689344499303, 121.590793313611 25.0689234646945, 121.590662487342 25.0675021181657, 121.590382579975 25.0655626390738, 121.590169606978 25.0650114493591, 121.590123969908 25.0646993370835, 121.590203834781 25.064445788336, 121.591372904409 25.0641371195874, 121.59217003191 25.0640516843499, 121.593543484362 25.0639036019081, 121.594237625327 25.0638857461919, 121.595596615302 25.0637388806333, 121.597931712085 25.0636754929987, 121.599099260477 25.0637450815958, 121.602427724166 25.0641536554329, 121.60594177861 25.0645863425978, 121.608978165046 25.0649756219418, 121.612165914434 25.0653538762611, 121.613795157858 25.0655330126897, 121.615247937942 25.0656983691604, 121.617062011502 25.0659188441076, 121.618864675794 25.0660786881962, 121.6204718613 25.0662109728014, 121.623134784375 25.0664321358068, 121.627352410325 25.0667738697588, 121.629123889286 25.0669254449969, 121.63060100914 25.0670411932342, 121.63219982785 25.0673395200321, 121.633260129126 25.0676598932669, 121.635187534745 25.0685369537713, 121.636158382893 25.0692313012111, 121.636522193109 25.0695560520484, 121.637789948955 25.0704577657135, 121.638567720447 25.0709703676278, 121.639535345207 25.0714599177818, 121.640233950101 25.0717221736126, 121.641438292194 25.0720127523738, 121.642800558754 25.0722339049034, 121.644819238514 25.072565288476, 121.646993084315 25.0729214731457, 121.648804876022 25.0732190966787, 121.651506590607 25.0736276389152, 121.653930679678 25.0740912948108, 121.655678579486 25.0745542600158, 121.656811139457 25.0748904598415, 121.658279131897 25.0754650287182, 121.659780591523 25.0762235381785, 121.661017356139 25.0769544860827, 121.662667896862 25.0779671965148, 121.664494900926 25.0791039023282, 121.666452731258 25.0803646000686, 121.667300059538 25.0808978093046, 121.669824550165 25.0824781341475, 121.672066090953 25.0837911522615, 121.673801820875 25.0845881873423, 121.675226458099 25.0850986452856, 121.67722384056 25.0855898126599, 121.677830052982 25.0856759217441, 121.678866014487 25.0857640973835, 121.679614462446 25.0857916522578, 121.6811554742 25.0858026742057, 121.683196972495 25.0859294265361, 121.684639864547 25.0861278212245, 121.685261289326 25.0862463067878, 121.6878047954 25.0868015341201, 121.690337652823 25.0873388484951, 121.692185193568 25.0877335663983, 121.693445537337 25.0880614637233, 121.693936135847 25.0882743209703, 121.694398591497 25.0885553746322, 121.694907444835 25.0889473331956, 121.695339475771 25.0894460624877, 121.695662738355 25.0900426061813, 121.695912981626 25.0906467242559, 121.696229398649 25.0917502480902, 121.696916997181 25.0936569374782, 121.697501151686 25.0951489287549, 121.697704997268 25.0955208905056, 121.698079221248 25.0961029394942, 121.698414653718 25.0964611221107, 121.698880151839 25.0968110379619, 121.69935249552 25.097101026521, 121.700028684784 25.0973689725833, 121.700470603752 25.0974571397968, 121.701167329698 25.0975149994962, 121.701825264134 25.0975039786032, 121.703152542273 25.0973276441801, 121.704023449706 25.0972918262194, 121.704705723912 25.0973689725833, 121.70514764288 25.0974626502456, 121.705436677661 25.0975673487244, 121.706109824454 25.0978903980711, 121.70652436118 25.0981500767783, 121.707240102572 25.0986935405111, 121.708625187667 25.0998954891142, 121.709170550662 25.1002874113487, 121.709772959995 25.1006538471701, 121.710205751549 25.1008611722143, 121.710966369394 25.1011807689363, 121.711354284494 25.1012944184314, 121.712172709296 25.101525849804, 121.713083929474 25.1017469490099, 121.715057732781 25.1021801920893, 121.717989914573 25.1028338420978, 121.720674895566 25.1034020808366, 121.721597525011 25.1035811615889, 121.72199684938 25.103702385334, 121.722474517387 25.103892485965, 121.72292860624 25.1041383765602, 121.723884702871 25.1048140565741, 121.72447798479 25.1050151756941, 121.724686394079 25.1051033373959, 121.728128712797 25.1045990109539, 121.728860797158 25.1046972173927, 121.729173272191 25.1048177434766, 121.729427716146 25.1049695170638, 121.729934372091 25.1054248378254, 121.730304878201 25.1056870936562, 121.730590569659 25.1058344033143, 121.730793678431 25.1059058261789, 121.731045890421 25.1059705531499, 121.731264622944 25.1059750170789, 121.731581561905 25.1059415376111, 121.731717711741 25.1059147540369, 121.731887341044 25.1058366352788, 121.73329347869 25.1050744193961, 121.733762191239 25.1048311352637, 121.735272673244 25.1045661010393, 121.735939735094 25.1044359241823, 121.736259194589 25.104251334539, 121.736561920491 25.1040109543246, 121.736805318202 25.1037326912515, 121.737191712067 25.1033139179083, 121.737618418678 25.1030542501645, 121.740100970468 25.1026270703028, 121.740941558042 25.1024577699169, 121.744314919477 25.1020980947122, 121.745040307945 25.1019262334443, 121.745159183992 25.1018289140345, 121.745384030481 25.1015289437603, 121.745490813372 25.1014294201186, 121.74630695632 25.101111890403, 121.746507759431 25.1009713780749, 121.746700889546 25.1006629415275, 121.746723774899 25.1004003728844, 121.746491084881 25.0997165885721, 121.746464301307 25.0994688405107, 121.746584827391 25.0992400641477, 121.746784624326 25.0990524043394, 121.747685956473 25.098478634989, 121.74834693338 25.0982692395018, 121.748810149647 25.0982609738831, 121.752251785301 25.0983483943229, 121.753606587763 25.0985001679101, 121.755500544211 25.0988870929178, 121.758528069524 25.0995157117656, 121.758845008485 25.0995581190914, 121.759142382452 25.0995352501706, 121.759501206053 25.0994733044397, 121.761918423626 25.0986965807877, 121.76326873426 25.0983491404537, 121.764786927479 25.0983601612705, 121.765403027933 25.098412510137, 121.766333249441 25.098607302207, 121.7669648954 25.0988695580378, 121.767324348609 25.0990944209568, 121.767779562448 25.0997489520576, 121.768021835173 25.1001558523555, 121.768094854486 25.1004644302942, 121.768173958742 25.1019377414613, 121.768347379611 25.1026575153584, 121.768532970365 25.1029853726863, 121.768786256107 25.1033855502924, 121.769616469246 25.1051224066333, 121.769775819923 25.1052968796589, 121.770062572851 25.1055234821327, 121.771573159891 25.1067343174137, 121.771946640202 25.1069023983359, 121.77230411364 25.1069492084293, 121.772692116351 25.1068778467262, 121.773863897723 25.1065051086518, 121.774216548117 25.1063086957743, 121.774486615823 25.1060174244047, 121.774614870652 25.1056192198298, 121.775095942137 25.1028201352336, 121.775065156417 25.102003175627, 121.775087014278 25.101791199591, 121.775169596966 25.1015992506425, 121.775390561453 25.1012678039117, 121.776310130834 25.100272347737, 121.776517175882 25.1000539112583, 121.776718739611 25.0999237295984, 121.778316666935 25.0993170669235, 121.779043187745 25.0989635494781, 121.780242852314 25.0978450863243, 121.780455655083 25.0977175082283, 121.780796411878 25.0976210755405, 121.780972875218 25.0976293412025, 121.781191933157 25.0976541381849, 121.781597342468 25.0978476922363, 121.782605161113 25.0988519642119, 121.782906365779 25.0990117653023, 121.784937976043 25.0996929839878, 121.785287860252 25.0999547252442, 121.785494748305 25.1004210365686, 121.785622532103 25.1010223482518, 121.785640786932 25.1015375591178, 121.785610726978 25.1020690791735, 121.785604277275 25.1032808567939, 121.785665887321 25.1034799121189, 121.785805841004 25.103785726589, 121.786360667056 25.1046882895346, 121.787746177126 25.1069195920617, 121.788628343006 25.1084011625093, 121.789195914739 25.1089493297647, 121.789926868488 25.1095120301797, 121.790974137713 25.1099813933877, 121.791484613834 25.1101980115154, 121.791987382229 25.1103777710482, 121.792980749135 25.1104356246347, 121.794226110015 25.1105159488896, 121.794403104505 25.1104934781939, 121.796621007942 25.1100171048199, 121.797170992842 25.109844690284, 121.79746469053 25.1097079777343, 121.798443506497 25.1091001640345, 121.79865039455 25.1089321112289, 121.798799475648 25.1087557932829, 121.798872494961 25.1085932499512, 121.799155444799 25.1079203458087, 121.799341796171 25.1076496678676, 121.800440888957 25.1068803331449, 121.80078240637 25.1067529137665, 121.802606367962 25.1064553717822, 121.804387734954 25.1061578290739, 121.805316449343 25.1059539568002, 121.806464982289 25.1052534876479, 121.80679965414 25.1051653260544, 121.808147468961 25.105118490182, 121.808617817223 25.1053444871028, 121.808835828111 25.105526925936, 121.809006179049 25.1057763722369, 121.809066442091 25.1059906408305, 121.809392308911 25.1073655309733, 121.808200331902 25.107643124755)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0463002900'=='0100020200' || '0463002900'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
