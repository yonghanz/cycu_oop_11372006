
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231491893</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100026800">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100026800">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100026800" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0100026800" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100026800" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100026800',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="e6-se_ptt4ww2zKrbZck_PVeoJeeQh--2xl-SQhqmfp3K91u6bicRmRKDOVEnpKeX5uEPeQIoLnRRI-jm6lm_uyryLo1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">268 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0100026800" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0100026800" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">大直 - 天母</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0550 - 1650 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0550 0700 0800 1650<br>
[假日]<br /> 例假日停駛<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">美麗華－外雙溪(故宮)</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">兩段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">光華巴士故宮站:02-2882-2126</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 天母</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 大直</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">敬業三路二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046600940" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.081246" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.5562232" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">大直美堤花園三</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046201320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079873" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5566492" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">大直美堤花園一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046201120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079832" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5588327" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">濱江國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046202020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0798" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5599958" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">治磐新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082945" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5638416" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">西湖國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144300000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.085622" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5656019" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">德明財經科技大學(環山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145100120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.086349" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5682175" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">環山路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145200020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08579" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57246" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">麗山新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.085184" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5739432" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">麗山高中(環山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145200120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084057" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5768304" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">麗山高中(港墘)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144700240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08352" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57808" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">港墘</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144800040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080557" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5775386" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">捷運港墘站(內湖高工)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079836" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5761086" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">麗山國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080638" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5738603" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">麗山街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081473" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.571386" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">恕德家商</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082118" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5694613" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">捷運西湖站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082421" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5658681" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">治磐新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144200160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.083069" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5640985" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">文湖國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144600060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084381" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5615357" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">美麗華</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046400260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084817" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5581193" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">捷運劍南路站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046400360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.085271" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5546799" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">外雙溪(故宮)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114300900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.096708" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5472393" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">故宮路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114302460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098068" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5459327" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">中影文化城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114300360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097263" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5437659" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">東吳大學(錢穆故居)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097411" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541307" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">梅林新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114100560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097585" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.539849" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">雙溪公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114100860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098494" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537493" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">芝山岩</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10139" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5367" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">芝山公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10144" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53414" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">惠濟宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10193" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53164" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">名山里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114200000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102448" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.528958" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">雨農國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.1045" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53074" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">聯合醫院陽明院區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114600460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.105462" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.530328" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">蘭雅新城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114800600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107083" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5301502" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">蘭雅國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114800500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10951" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5306501" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 36</span>
                                    <span class="auto-list-stationlist-place">天母棒球場(忠誠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115300300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11328" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53189" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 37</span>
                                    <span class="auto-list-stationlist-place">市立臺北特教學校</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115300700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11733" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5346929" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 38</span>
                                    <span class="auto-list-stationlist-place">三玉宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115300060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.118238" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5311071" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 39</span>
                                    <span class="auto-list-stationlist-place">齊福華廈</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115600860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.118505" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5276437" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 40</span>
                                    <span class="auto-list-stationlist-place">齊賢華廈</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115700460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11857" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.52525" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 41</span>
                                    <span class="auto-list-stationlist-place">榮光新村(榮總東院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1126700300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.120212" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5227594" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 42</span>
                                    <span class="auto-list-stationlist-place">永欣里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1126700100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121822" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5236475" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 43</span>
                                    <span class="auto-list-stationlist-place">福德廟(石牌)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1126700620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.123567" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5256724" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 44</span>
                                    <span class="auto-list-stationlist-place">天北站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115700040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.122884" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5265466" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 45</span>
                                    <span class="auto-list-stationlist-place">天玉里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115700240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121408" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5266441" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 46</span>
                                    <span class="auto-list-stationlist-place">天母國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115700140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11895" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.526158" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">齊福華廈</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115700320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.118381" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5275693" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">三玉宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.118085" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5308437" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">市立臺北特教學校</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115300740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.117222" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5342005" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">天母棒球場(忠誠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1115300340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.114207" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5321979" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">蘭雅國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114800540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.109534" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5303329" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">蘭雅新城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114800640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107166" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5298003" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">聯合醫院陽明院區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114200520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.105428" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.530534" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">雨農國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114200260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.1047" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53088" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">名山里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114200040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.102475" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5287392" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">惠濟宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10182" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53149" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">芝山公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.10132" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53452" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">芝山岩</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114500420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.101311" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5365234" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">梅林新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114302620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097232" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5401759" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">東吳大學(錢穆故居)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114100120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097131" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541888" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">中影文化城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114300320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09704" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54455" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">外雙溪(故宮)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1114300940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097172" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5468286" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">捷運劍南路站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046400320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08484" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.555253" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">美麗華</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144600120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084538" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5581969" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">文湖國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144600020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084151" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5615165" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">治磐新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082945" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5638416" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">捷運西湖站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149300220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082197" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5658848" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">恕德家商</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081963" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5690454" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">麗山街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081132" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57184" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">捷運港墘站(內湖高工)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144400220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080149" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5746181" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">港墘</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144700100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080919" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5780678" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">麗山高中(港墘)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144700201" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082989" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5783099" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">麗山高中(環山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145200160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084215" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5767705" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">麗山新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145200260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.085224" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5742675" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">環山路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145200060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.086361" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5713602" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">德明財經科技大學(環山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.086482" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5675277" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">西湖國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144200040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08514" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56545" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">內湖基湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081989" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5652273" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">基湖站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07973" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5646071" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">濱江國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046202060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07999" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5612469" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">大直美堤花園一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046201160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080042" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5590841" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 36</span>
                                    <span class="auto-list-stationlist-place">大直美堤花園二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046600660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08002" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5574829" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 37</span>
                                    <span class="auto-list-stationlist-place">敬業三路二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1046600900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081338" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.556408" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0100026800";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 46;
        var existBackNum = 37;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0100026800',
                        url: './StopStatusRecent3OfRoute?routeid=0100026800&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0100026800',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0100026800',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0100026800');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0100026800","Name":"268","BeginStop":"大直","GoDirStops":[{"UniStopId":"1046600940","Name":"敬業三路二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5562232,"Latitude":25.081246,"PublicId":"1046600940"},{"UniStopId":"1046201320","Name":"大直美堤花園三","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5566492,"Latitude":25.079873,"PublicId":"1046201320"},{"UniStopId":"1046201120","Name":"大直美堤花園一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5588327,"Latitude":25.079832,"PublicId":"1046201120"},{"UniStopId":"1046202020","Name":"濱江國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5599958,"Latitude":25.0798,"PublicId":"1046202020"},{"UniStopId":"1149300020","Name":"治磐新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5638416,"Latitude":25.082945,"PublicId":"1149300020"},{"UniStopId":"1144300000","Name":"西湖國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5656019,"Latitude":25.085622,"PublicId":"1144300000"},{"UniStopId":"1145100120","Name":"德明財經科技大學(環山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5682175,"Latitude":25.086349,"PublicId":"1145100120"},{"UniStopId":"1145200020","Name":"環山路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57246,"Latitude":25.08579,"PublicId":"1145200020"},{"UniStopId":"1145200220","Name":"麗山新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5739432,"Latitude":25.085184,"PublicId":"1145200220"},{"UniStopId":"1145200120","Name":"麗山高中(環山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5768304,"Latitude":25.084057,"PublicId":"1145200120"},{"UniStopId":"1144700240","Name":"麗山高中(港墘)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57808,"Latitude":25.08352,"PublicId":"1144700240"},{"UniStopId":"1144800040","Name":"港墘","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5775386,"Latitude":25.080557,"PublicId":"1144800040"},{"UniStopId":"1144400260","Name":"捷運港墘站(內湖高工)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5761086,"Latitude":25.079836,"PublicId":"1144400260"},{"UniStopId":"1144400360","Name":"麗山國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5738603,"Latitude":25.080638,"PublicId":"1144400360"},{"UniStopId":"1144400460","Name":"麗山街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.571386,"Latitude":25.081473,"PublicId":"1144400460"},{"UniStopId":"1144400060","Name":"恕德家商","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5694613,"Latitude":25.082118,"PublicId":"1144400060"},{"UniStopId":"1144400160","Name":"捷運西湖站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5658681,"Latitude":25.082421,"PublicId":"1144400160"},{"UniStopId":"1144200160","Name":"治磐新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5640985,"Latitude":25.083069,"PublicId":"1144200160"},{"UniStopId":"1144600060","Name":"文湖國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5615357,"Latitude":25.084381,"PublicId":"1144600060"},{"UniStopId":"1046400260","Name":"美麗華","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5581193,"Latitude":25.084817,"PublicId":"1046400260"},{"UniStopId":"1046400360","Name":"捷運劍南路站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5546799,"Latitude":25.085271,"PublicId":"1046400360"},{"UniStopId":"1114300900","Name":"外雙溪(故宮)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5472393,"Latitude":25.096708,"PublicId":"1114300900"},{"UniStopId":"1114302460","Name":"故宮路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5459327,"Latitude":25.098068,"PublicId":"1114302460"},{"UniStopId":"1114300360","Name":"中影文化城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5437659,"Latitude":25.097263,"PublicId":"1114300360"},{"UniStopId":"1114100160","Name":"東吳大學(錢穆故居)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541307,"Latitude":25.097411,"PublicId":"1114100160"},{"UniStopId":"1114100560","Name":"梅林新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.539849,"Latitude":25.097585,"PublicId":"1114100560"},{"UniStopId":"1114100860","Name":"雙溪公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537493,"Latitude":25.098494,"PublicId":"1114100860"},{"UniStopId":"1114500460","Name":"芝山岩","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5367,"Latitude":25.10139,"PublicId":"1114500460"},{"UniStopId":"1114500360","Name":"芝山公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53414,"Latitude":25.10144,"PublicId":"1114500360"},{"UniStopId":"1114500760","Name":"惠濟宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53164,"Latitude":25.10193,"PublicId":"1114500760"},{"UniStopId":"1114200000","Name":"名山里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.528958,"Latitude":25.102448,"PublicId":"1114200000"},{"UniStopId":"1114200220","Name":"雨農國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53074,"Latitude":25.1045,"PublicId":"1114200220"},{"UniStopId":"1114600460","Name":"聯合醫院陽明院區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.530328,"Latitude":25.105462,"PublicId":"1114600460"},{"UniStopId":"1114800600","Name":"蘭雅新城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5301502,"Latitude":25.107083,"PublicId":"1114800600"},{"UniStopId":"1114800500","Name":"蘭雅國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5306501,"Latitude":25.10951,"PublicId":"1114800500"},{"UniStopId":"1115300300","Name":"天母棒球場(忠誠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53189,"Latitude":25.11328,"PublicId":"1115300300"},{"UniStopId":"1115300700","Name":"市立臺北特教學校","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5346929,"Latitude":25.11733,"PublicId":"1115300700"},{"UniStopId":"1115300060","Name":"三玉宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5311071,"Latitude":25.118238,"PublicId":"1115300060"},{"UniStopId":"1115600860","Name":"齊福華廈","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5276437,"Latitude":25.118505,"PublicId":"1115600860"},{"UniStopId":"1115700460","Name":"齊賢華廈","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.52525,"Latitude":25.11857,"PublicId":"1115700460"},{"UniStopId":"1126700300","Name":"榮光新村(榮總東院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5227594,"Latitude":25.120212,"PublicId":"1126700300"},{"UniStopId":"1126700100","Name":"永欣里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5236475,"Latitude":25.121822,"PublicId":"1126700100"},{"UniStopId":"1126700620","Name":"福德廟(石牌)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5256724,"Latitude":25.123567,"PublicId":"1126700620"},{"UniStopId":"1115700040","Name":"天北站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5265466,"Latitude":25.122884,"PublicId":"1115700040"},{"UniStopId":"1115700240","Name":"天玉里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5266441,"Latitude":25.121408,"PublicId":"1115700240"},{"UniStopId":"1115700140","Name":"天母國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.526158,"Latitude":25.11895,"PublicId":"1115700140"}],"LastStop":"天母","BackDirStops":[{"UniStopId":"1115700320","Name":"齊福華廈","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5275693,"Latitude":25.118381,"PublicId":"1115700320"},{"UniStopId":"1115300020","Name":"三玉宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5308437,"Latitude":25.118085,"PublicId":"1115300020"},{"UniStopId":"1115300740","Name":"市立臺北特教學校","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5342005,"Latitude":25.117222,"PublicId":"1115300740"},{"UniStopId":"1115300340","Name":"天母棒球場(忠誠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5321979,"Latitude":25.114207,"PublicId":"1115300340"},{"UniStopId":"1114800540","Name":"蘭雅國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5303329,"Latitude":25.109534,"PublicId":"1114800540"},{"UniStopId":"1114800640","Name":"蘭雅新城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5298003,"Latitude":25.107166,"PublicId":"1114800640"},{"UniStopId":"1114200520","Name":"聯合醫院陽明院區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.530534,"Latitude":25.105428,"PublicId":"1114200520"},{"UniStopId":"1114200260","Name":"雨農國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53088,"Latitude":25.1047,"PublicId":"1114200260"},{"UniStopId":"1114200040","Name":"名山里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5287392,"Latitude":25.102475,"PublicId":"1114200040"},{"UniStopId":"1114500720","Name":"惠濟宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53149,"Latitude":25.10182,"PublicId":"1114500720"},{"UniStopId":"1114500320","Name":"芝山公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53452,"Latitude":25.10132,"PublicId":"1114500320"},{"UniStopId":"1114500420","Name":"芝山岩","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5365234,"Latitude":25.101311,"PublicId":"1114500420"},{"UniStopId":"1114302620","Name":"梅林新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5401759,"Latitude":25.097232,"PublicId":"1114302620"},{"UniStopId":"1114100120","Name":"東吳大學(錢穆故居)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541888,"Latitude":25.097131,"PublicId":"1114100120"},{"UniStopId":"1114300320","Name":"中影文化城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54455,"Latitude":25.09704,"PublicId":"1114300320"},{"UniStopId":"1114300940","Name":"外雙溪(故宮)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5468286,"Latitude":25.097172,"PublicId":"1114300940"},{"UniStopId":"1046400320","Name":"捷運劍南路站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.555253,"Latitude":25.08484,"PublicId":"1046400320"},{"UniStopId":"1144600120","Name":"美麗華","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5581969,"Latitude":25.084538,"PublicId":"1144600120"},{"UniStopId":"1144600020","Name":"文湖國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5615165,"Latitude":25.084151,"PublicId":"1144600020"},{"UniStopId":"1149300020","Name":"治磐新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5638416,"Latitude":25.082945,"PublicId":"1149300020"},{"UniStopId":"1149300220","Name":"捷運西湖站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5658848,"Latitude":25.082197,"PublicId":"1149300220"},{"UniStopId":"1149300120","Name":"恕德家商","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5690454,"Latitude":25.081963,"PublicId":"1149300120"},{"UniStopId":"1144400420","Name":"麗山街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57184,"Latitude":25.081132,"PublicId":"1144400420"},{"UniStopId":"1144400220","Name":"捷運港墘站(內湖高工)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5746181,"Latitude":25.080149,"PublicId":"1144400220"},{"UniStopId":"1144700100","Name":"港墘","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5780678,"Latitude":25.080919,"PublicId":"1144700100"},{"UniStopId":"1144700201","Name":"麗山高中(港墘)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5783099,"Latitude":25.082989,"PublicId":"1144700201"},{"UniStopId":"1145200160","Name":"麗山高中(環山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5767705,"Latitude":25.084215,"PublicId":"1145200160"},{"UniStopId":"1145200260","Name":"麗山新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5742675,"Latitude":25.085224,"PublicId":"1145200260"},{"UniStopId":"1145200060","Name":"環山路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5713602,"Latitude":25.086361,"PublicId":"1145200060"},{"UniStopId":"1145100160","Name":"德明財經科技大學(環山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5675277,"Latitude":25.086482,"PublicId":"1145100160"},{"UniStopId":"1144200040","Name":"西湖國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56545,"Latitude":25.08514,"PublicId":"1144200040"},{"UniStopId":"1149200140","Name":"內湖基湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5652273,"Latitude":25.081989,"PublicId":"1149200140"},{"UniStopId":"1149200340","Name":"基湖站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5646071,"Latitude":25.07973,"PublicId":"1149200340"},{"UniStopId":"1046202060","Name":"濱江國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5612469,"Latitude":25.07999,"PublicId":"1046202060"},{"UniStopId":"1046201160","Name":"大直美堤花園一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5590841,"Latitude":25.080042,"PublicId":"1046201160"},{"UniStopId":"1046600660","Name":"大直美堤花園二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5574829,"Latitude":25.08002,"PublicId":"1046600660"},{"UniStopId":"1046600900","Name":"敬業三路二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.556408,"Latitude":25.081338,"PublicId":"1046600900"}],"RouteMapUrl":"../MapOverview?nid=0100026800","RouteTracks":null,"StopDirection":null,"TicketPrice":"兩段票","BusTimeDesc":"0550 - 1650","HeadwayDesc":"班表:0550 0700 0800 1650","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"例假日停駛","RouteNote":"","SegmentBuffer":"美麗華－外雙溪(故宮)","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"光華巴士故宮站:02-2882-2126","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.559543937948 25.082649569781, 121.556286530009 25.082693955284, 121.556278959848 25.0806511662062, 121.556276502386 25.0798888132396, 121.558943919688 25.0798719283955, 121.561430533766 25.0798590641978, 121.561589628975 25.079890323114, 121.561717573462 25.0799403185705, 121.56226607362 25.0802134276153, 121.562609886939 25.0803792132702, 121.563044877795 25.0798785100279, 121.563478457826 25.0793952454926, 121.563974767665 25.078897043243, 121.564285186796 25.0786821555726, 121.564454819257 25.0788935012526, 121.564557099669 25.0791931179478, 121.564781571652 25.0799275736931, 121.565417724917 25.0819805918118, 121.56557150604 25.0825032463014, 121.565570136948 25.0843200862331, 121.565592477588 25.0863761144408, 121.566555408605 25.0863871117156, 121.568021340164 25.0863981736025, 121.570674 25.0864056675759, 121.571039923397 25.0863612743448, 121.571346817209 25.0862569973184, 121.572271605736 25.0858869974117, 121.573905310131 25.085265613554, 121.575951605736 25.0844762209801, 121.577223211473 25.0839036652712, 121.577448 25.083837, 121.577707 25.083827, 121.577932 25.083874, 121.578133422945 25.0839464442111, 121.578155422945 25.0833785557734, 121.578205422945 25.0821594442612, 121.578173211473 25.0816098885532, 121.578091 25.081364, 121.578018 25.0811204442901, 121.577727 25.080695668381, 121.576844437286 25.0795288876923, 121.575770437286 25.0799542205344, 121.574436028682 25.0804491089574, 121.5731496631 25.0808699986799, 121.572199283177 25.0812027771537, 121.571582230136 25.0813878241306, 121.569338480309 25.0820981098415, 121.568971591395 25.0821689983501, 121.568696971318 25.0821876655648, 121.568334 25.082188, 121.567438 25.082201, 121.566922670161 25.0822236335151, 121.566507 25.082261, 121.566159 25.0823098885139, 121.565732605736 25.0824002212713, 121.564815408605 25.0826998867126, 121.563986605736 25.0830836654101, 121.563446 25.0833993307203, 121.562194 25.084022, 121.561236605736 25.0845204419509, 121.560758394264 25.0846856651415, 121.559687 25.084979, 121.559084788527 25.085118330133, 121.558779365582 25.0851071068536, 121.558427 25.08492, 121.558054154109 25.0847195581111, 121.557603057364 25.084564, 121.557046211473 25.0845583348399, 121.55628 25.0847882186228, 121.553536143409 25.085598, 121.552857577055 25.0857761116811, 121.552251577055 25.085966, 121.551915 25.08604, 121.550717211473 25.0861813297817, 121.550352817209 25.0862749946336, 121.550022759846 25.086349441433, 121.549740308218 25.0865565475958, 121.549615 25.086935, 121.549593 25.087242, 121.549253457661 25.0907830779783, 121.549001826735 25.0934073301858, 121.548792 25.095461, 121.5487076524 25.0957060408795, 121.548488960618 25.0958849083151, 121.548176 25.0960124490347, 121.547783 25.096171, 121.547547788013 25.0962973380806, 121.547377211473 25.0964675508629, 121.547177268836 25.0967702460654, 121.546547874573 25.0982807637862, 121.544369268836 25.0972106739546, 121.544092928517 25.0971591341637, 121.543862262524 25.0971554407674, 121.541927619855 25.0972919999915, 121.539856 25.0974767753182, 121.537905788527 25.0980314494939, 121.537742880679 25.098191265518, 121.536583605736 25.0993153373351, 121.537348738373 25.1004541637262, 121.537613817209 25.1007934501144, 121.536267 25.10156, 121.53611909454 25.1016148363891, 121.535939379923 25.1016058874279, 121.534784067856 25.1014406215205, 121.534031189146 25.1013404402487, 121.533603437286 25.1013004307342, 121.533463717342 25.1013131254809, 121.533180105347 25.1014270957889, 121.532632480309 25.1017232383991, 121.532204577055 25.101921, 121.532050025588 25.1019557635308, 121.531916577055 25.1019474437042, 121.531456 25.1018799933547, 121.531190972516 25.1018254221377, 121.530938 25.10181, 121.530818383971 25.1018678397559, 121.530284408605 25.1022528941331, 121.530118379923 25.1022994436942, 121.529969774186 25.1022976689178, 121.529849139768 25.10227000675, 121.529118985659 25.1018824503572, 121.528707 25.1028594505744, 121.528639556869 25.1030491857538, 121.52860616845 25.103276, 121.528622005518 25.1034806776627, 121.528709802868 25.1036952324904, 121.528819792517 25.1038729747212, 121.528979802868 25.1040482254195, 121.529229591395 25.1042537890577, 121.529516394264 25.1044193381932, 121.529785754673 25.1044461154615, 121.530117802868 25.1045453382159, 121.530502 25.10461, 121.53089 25.104615, 121.531183577055 25.1046099999995, 121.531263577055 25.1054802255835, 121.53131749465 25.1058333155093, 121.531223114727 25.1057782027396, 121.531065397904 25.1057211799972, 121.530873272477 25.1056090749198, 121.530664460187 25.1055448432839, 121.530384153726 25.1054874885932, 121.530131605736 25.1054599848985, 121.529836756308 25.1054338548118, 121.529510197132 25.1054620976891, 121.529244443843 25.1055096759317, 121.529069422945 25.1055796616119, 121.529244 25.105769, 121.529573788527 25.1061912256634, 121.529790925434 25.1064865937634, 121.529992817209 25.106877, 121.530256 25.107682, 121.530489802868 25.1086763221845, 121.530634178472 25.1098431483952, 121.530833 25.11145, 121.530908351241 25.1118093946173, 121.53109881419 25.1122867717724, 121.531197014341 25.1124328868193, 121.531816595103 25.1133474869966, 121.532827957322 25.1146636327592, 121.533639471733 25.1157000497006, 121.534181589405 25.1164493506516, 121.534491467512 25.1170296262578, 121.534714371545 25.117640585904, 121.534756716743 25.1179518783145, 121.534729828694 25.1181738233373, 121.534461638884 25.1181662392181, 121.53210131875 25.1180812635654, 121.531453981744 25.1180954129974, 121.530893953662 25.1181883052453, 121.530315357441 25.1183069520568, 121.529959237827 25.1184087757882, 121.52975111065 25.1184456343424, 121.529296749026 25.1184293322623, 121.527927590109 25.1184594912436, 121.526128785303 25.1184859831914, 121.526310512149 25.1192585697586, 121.526559650596 25.1206143111935, 121.52677284918 25.1217889011186, 121.526774761083 25.1224667816918, 121.526623512437 25.1228103665413, 121.526280355958 25.1235755456013, 121.52613656557 25.1237145909212, 121.525941436754 25.1238044801405, 121.525741067279 25.1236801600077, 121.52547199766 25.1235568970424, 121.525193006525 25.1233351698168, 121.524858372074 25.1230447266412, 121.523812205497 25.1219664749423, 121.523292020172 25.1216383895395, 121.523088598359 25.1215004210743, 121.522942306092 25.1213323228873, 121.522886203491 25.1210458779565, 121.522801630099 25.1206211534007, 121.522699251784 25.1197962266117, 121.52250485514 25.119450450865, 121.522387437253 25.1191145170199, 121.52361690017 25.1187800140738, 121.524790542229 25.1185138075056, 121.52590106059 25.1184872962605, 121.526125201064 25.1184661328382, 121.527939174672 25.118414820428, 121.529289035298 25.1183797407913, 121.529786717446 25.1183618954394, 121.529987517189 25.1183181410599, 121.530242402125 25.1182246229047, 121.530821270058 25.1181168248401, 121.531456403629 25.1180254463523, 121.532102233128 25.11801425505, 121.534567598979 25.1180507950562, 121.5345297401 25.1178127390885, 121.534353787621 25.1172180625258, 121.533993019954 25.116547406437, 121.533441875342 25.1157780089273, 121.532660034561 25.1146887657938, 121.531672623875 25.1134667523369, 121.531188519924 25.1127703941846, 121.531006 25.112441, 121.530904653553 25.1122835607963, 121.530750211473 25.1118278960241, 121.53067197025 25.1114292367357, 121.530438415154 25.1098626984824, 121.530261788527 25.108678, 121.530050211473 25.1076824354321, 121.529834942636 25.1070448301008, 121.529650899614 25.1066771681194, 121.529431394264 25.106295, 121.528896985659 25.1056315640026, 121.529019 25.1055185639636, 121.529226152174 25.1054497394281, 121.529504 25.105392, 121.529810149081 25.105373581237, 121.530147605736 25.1053967744281, 121.530471411252 25.1054332404913, 121.530713186432 25.1054815412897, 121.530878394264 25.1055427819874, 121.531071422945 25.1056516615991, 121.531111759845 25.1055261052231, 121.531212562714 25.1053974511492, 121.531129956977 25.1046477745115, 121.530914605736 25.1046731053914, 121.530556028682 25.1046734362778, 121.530107 25.104594, 121.529781040333 25.1045057751833, 121.529524 25.104474, 121.529403143774 25.1044362269135, 121.529225 25.104327, 121.528938 25.104081, 121.528774965267 25.1039020626381, 121.528658 25.103725, 121.528576779281 25.10349193621, 121.528554971318 25.1032895563337, 121.528589415545 25.1030267506931, 121.528660605736 25.1028238942475, 121.529094182791 25.1018025629232, 121.529871365582 25.1022020067343, 121.530004014341 25.102230450434, 121.530137197132 25.1022226756545, 121.530243014341 25.1021810134625, 121.530795079089 25.1018007967674, 121.530928 25.101751, 121.531172073136 25.1017690272413, 121.531475802868 25.1018172185391, 121.531921197132 25.1018935562946, 121.532068443632 25.1018971835314, 121.532194788527 25.1018542251736, 121.532592052664 25.1016567683825, 121.533166613293 25.1013539048536, 121.53343587251 25.1012530205294, 121.533574211473 25.1012304372466, 121.534032213649 25.1012633445654, 121.534796243566 25.1013735016914, 121.535939 25.1015462251383, 121.536122426677 25.1015597785799, 121.536253197132 25.1015022251355, 121.537515408605 25.1008022250565, 121.536515562551 25.0994040072602, 121.536387 25.099268, 121.53757939592 25.0980918669447, 121.537790971318 25.0979251123659, 121.539845 25.097331, 121.541856913511 25.0971538659394, 121.543979039382 25.0970033369441, 121.544212942636 25.0970212246283, 121.544385 25.0970766630524, 121.546539240155 25.0980835391665, 121.547099903254 25.0966722783176, 121.547287211473 25.0964001122806, 121.547501732501 25.0962205468424, 121.547772817209 25.0960787858555, 121.548152971318 25.09592, 121.548348731164 25.0957091940906, 121.548410971318 25.0954271122251, 121.548592025124 25.0933520931952, 121.548754681407 25.0907899570018, 121.548993 25.087036, 121.549047788527 25.0867097821344, 121.549145577055 25.086445, 121.549446 25.085811, 121.549526 25.085552, 121.549747 25.0853374417242, 121.550025759845 25.0852542184355, 121.550285605736 25.0852932184301, 121.550645 25.0855088833572, 121.551090096746 25.0857287817599, 121.551335759845 25.0858293350551, 121.551572 25.085909, 121.551804 25.085923, 121.552290172091 25.0858595584433, 121.552780738445 25.0856520153629, 121.553444548373 25.0854018933049, 121.556410314987 25.08452627384, 121.557102057364 25.0843786696189, 121.557553537673 25.0843840000019, 121.558002788527 25.0845097767815, 121.558452125427 25.084735, 121.558840731164 25.0848943348957, 121.559116 25.084923, 121.559504774186 25.0848366674434, 121.560189139768 25.0846615558097, 121.561095788527 25.0843902232064, 121.562620160747 25.083629367298, 121.563189345204 25.0833243067944, 121.563509672487 25.0831737687077, 121.564488565997 25.0826637411014, 121.565153346648 25.0823996070185, 121.565690352301 25.0822847518066, 121.566157950285 25.0821666416347, 121.566538612244 25.0821054940054, 121.566983253201 25.0820732029529, 121.567443153296 25.082081221307, 121.56833315302 25.0820750568668, 121.568736225849 25.0820612915252, 121.568980012136 25.0820384096912, 121.569301898145 25.0819794553004, 121.571521764264 25.0812406445354, 121.572189299217 25.0810472517971, 121.573118313025 25.0807334904293, 121.57442424183 25.0802829232719, 121.575666564383 25.079811101495, 121.576868724933 25.0793545328483, 121.57783737306 25.0806430710423, 121.578126749776 25.0811055082075, 121.578221697601 25.0813328385934, 121.57827778746 25.081612401868, 121.578291434629 25.0821562680386, 121.5782405522 25.0833718458219, 121.578212997331 25.0840301297897, 121.578121773577 25.0839955304063, 121.577917427541 25.0839178350333, 121.577705573104 25.083870628663, 121.577453469454 25.0838847457305, 121.577241873631 25.0839555691682, 121.575946873526 25.0845184766303, 121.573926183139 25.0853091153638, 121.572303385263 25.0859346048512, 121.571341259613 25.0863169054236, 121.571040833027 25.0864064531328, 121.570675757682 25.0864546711029, 121.568028969645 25.0864570241755, 121.566568648785 25.0864458047237, 121.565538085149 25.0864378870398, 121.565507659827 25.0852595486723, 121.565503510883 25.084291798884, 121.565503856959 25.0825179557225, 121.565359256786 25.0819978780935, 121.564726801847 25.0799385747201, 121.564447091757 25.0790278253605, 121.56437350296 25.0789605221148, 121.56429074201 25.0789772146747, 121.564116908955 25.0790981148877, 121.563843034333 25.0793739304209, 121.562761870202 25.0805857612224, 121.562253207139 25.0803131465648, 121.561646280783 25.080027720812, 121.561561970923 25.079967803859, 121.56142326037 25.0799421143348, 121.558966726559 25.0799726279048, 121.556376973329 25.0799967381595, 121.556373170461 25.0806442689371, 121.556380674994 25.0826488018332, 121.559552700944 25.0825977960132)","wkt0":"LINESTRING (121.556277124874 25.0812484959955, 121.556278959848 25.0806511662062, 121.55626991213 25.0800744055317, 121.556332965245 25.0799461624166, 121.556466814841 25.0798910579119, 121.558355089717 25.0798880522109, 121.560092922072 25.0798700180035, 121.561257745413 25.0798630046999, 121.561723453511 25.0799461624166, 121.56250332099 25.0803519311879, 121.562775444962 25.0805072250532, 121.562543144011 25.0809220089921, 121.562367259005 25.0812115554015, 121.562015488993 25.0820200775621, 121.562128320883 25.08213529404, 121.562897126413 25.0826502602765, 121.563530976151 25.083107115669, 121.563611403968 25.0830891045996, 121.564311949826 25.08274343487, 121.564780976508 25.0825380499193, 121.565372790837 25.0823406796664, 121.565623897103 25.0825029841616, 121.565615047543 25.0845427926786, 121.565584074083 25.0862940353457, 121.565674782074 25.0863421240357, 121.570619473752 25.0863821979296, 121.570957969424 25.0863441277307, 121.571508854537 25.0861858357241, 121.574785404146 25.0849234997377, 121.577050891519 25.0839496887955, 121.577433634991 25.0838114310584, 121.577743369593 25.0838074235854, 121.578080759069 25.0838695394017, 121.57812500687 25.0838104291901, 121.57818695379 25.0818056744363, 121.57812500687 25.0813087386449, 121.576983413623 25.0796656301341, 121.576817484372 25.0795233599451, 121.573047571791 25.080905978721, 121.569585181421 25.0820381114527, 121.568976774167 25.0821863900085, 121.566160401681 25.0822785630743, 121.565096242085 25.0825991645016, 121.56410287897 25.0830159451018, 121.563056418494 25.083566974967, 121.561405975544 25.0844305840562, 121.560788718731 25.0846469863072, 121.559877214045 25.0849375257646, 121.559131638611 25.0850998268165, 121.558741151774 25.0850597525027, 121.558225664901 25.0848163007645, 121.557810841774 25.0846209379083, 121.557331859336 25.0845548150248, 121.556938053914 25.0845838690235, 121.556361726315 25.0847451686837, 121.55465486742 25.0852420905245, 121.552558627884 25.085856227028, 121.551816371034 25.0860896582024, 121.550622786622 25.0861607895018, 121.55011393692 25.0862860205622, 121.549860618263 25.0864503235191, 121.549701326182 25.0867077978312, 121.549576326146 25.0870614484352, 121.54928982164 25.0902332379118, 121.548882741878 25.0946211118159, 121.548796458667 25.0954986677134, 121.548674777216 25.09576413715, 121.548261060284 25.0959825228961, 121.547797564576 25.096174862313, 121.547514378655 25.0963070954867, 121.547294245848 25.0965535296562, 121.547110617477 25.0969532328024, 121.546688050985 25.0979069052092, 121.546419798696 25.098165357165, 121.545857851633 25.0979695147448, 121.5444695769 25.0972893230337, 121.544087939623 25.0971961595152, 121.542300328492 25.0972913265494, 121.54093417766 25.0974285673001, 121.539801433973 25.0975006937643, 121.538777097397 25.097832274601, 121.537956300703 25.0980326251242, 121.537289265114 25.098638683459, 121.53661006138 25.09922370221, 121.536562494995 25.0993078485125, 121.537106742938 25.1000982198856, 121.53752045987 25.1006641987827, 121.53757134484 25.1007824028943, 121.537406521784 25.1009256500968, 121.536543689679 25.1014305200183, 121.536357848918 25.1015266854813, 121.535986167396 25.1015927991933, 121.535305857467 25.101512661356, 121.534153202271 25.1013483786254, 121.533813600404 25.1013153217078, 121.533405414446 25.1013273424062, 121.533215702003 25.1013964613987, 121.5322859451 25.101885802714, 121.532130524702 25.1019343861359, 121.531929750308 25.1019459059135, 121.531514927181 25.1018747837909, 121.531203533286 25.1018106736731, 121.531042028815 25.1017966495803, 121.530870015492 25.1018277029264, 121.530694683583 25.1019343861359, 121.530304749844 25.1022469223268, 121.530193577246 25.1022909978791, 121.530014373655 25.1023070253488, 121.529872227596 25.102283485002, 121.529377758428 25.1020220365905, 121.529227869005 25.1019413981746, 121.52916702828 25.101925871517, 121.529096784897 25.1019489110727, 121.528955191936 25.1022649532365, 121.52879921844 25.1026215640158, 121.528642691847 25.1030062216683, 121.528606187412 25.1032381175591, 121.528615036972 25.1034760232537, 121.528733399837 25.1037755333436, 121.528896563601 25.1039954073408, 121.529450214201 25.1044030997654, 121.5296056346 25.1044101116626, 121.529813046163 25.1044416651947, 121.530691364998 25.1045859098093, 121.531082958031 25.1045698826383, 121.531199108506 25.1047131254047, 121.531276542157 25.1054603891431, 121.531313046592 25.1057548859303, 121.531179196996 25.1057438673558, 121.530858400444 25.1055755835491, 121.530728975629 25.1055069677638, 121.530345125961 25.1054643959068, 121.529752758536 25.1054178172699, 121.52929313451 25.1054944466309, 121.529208510592 25.1055520438314, 121.529206298202 25.1056752516649, 121.529788156776 25.1064044792271, 121.530259395848 25.1073941382484, 121.53057576762 25.109377438896, 121.530785944671 25.1109380134547, 121.530923112852 25.1117333178582, 121.531184174874 25.112392394917, 121.531473997965 25.1129072337949, 121.532436387621 25.114177293972, 121.533465148977 25.1154573570439, 121.53408240579 25.1162987057523, 121.534354529762 25.1167834802353, 121.534606742223 25.1172802719255, 121.534774883864 25.1179513381395, 121.534489485553 25.1181296207828, 121.531825767977 25.11809356364, 121.531016033233 25.1181576652199, 121.529881077156 25.1184300965594, 121.528051430616 25.1184401124059, 121.526610058523 25.1184781726151, 121.525000544788 25.1185192375644, 121.524652093361 25.1185322581552, 121.524011606453 25.1186905083015, 121.522886606131 25.1189939874393, 121.522423110424 25.119122189621, 121.522426429009 25.1191582464603, 121.522701871565 25.1197271418508, 121.52274943795 25.1198222913495, 121.522799216726 25.1204733122478, 121.522915367201 25.1211744077979, 121.522992800852 25.1213957528433, 121.523121119473 25.1215029197574, 121.523712933801 25.1218584728647, 121.52440209329 25.1225465403058, 121.525087934194 25.1232616455927, 121.525494737407 25.1235420778961, 121.525901540621 25.1237348747313, 121.526147115912 25.1236687729935, 121.526299770823 25.1235365694106, 121.526428089444 25.12325914173, 121.526726762096 25.122489952664, 121.526758841751 25.1222936484288, 121.526766585116 25.1217668304022, 121.526698001026 25.1214092739078, 121.526423664664 25.1199860484712, 121.526204737422 25.1189438534714)","wkt1":"LINESTRING (121.526204737422 25.1189438534714, 121.526122779622 25.118577830212, 121.526219018588 25.1184336021058, 121.526516585044 25.1183995482225, 121.527815257982 25.1183975450526, 121.529170346865 25.1183825212773, 121.529890479814 25.1183504705506, 121.530560833988 25.1181731898162, 121.531642692704 25.1180029199423, 121.533003312562 25.1180299628204, 121.534491144845 25.1180329675843, 121.53454313601 25.1179888977068, 121.5344789767 25.1175391837297, 121.534341808519 25.1171736021059, 121.534066365963 25.1166127076255, 121.53352433041 25.1158454799356, 121.533138268352 25.1153266469927, 121.531234901361 25.1128822524963, 121.531084888679 25.1126290336349, 121.530771899255 25.1119683144009, 121.530231112795 25.1085003183383, 121.530088508146 25.1077305708624, 121.529869971152 25.1070916264664, 121.529597725914 25.1065365303307, 121.528843958485 25.1056175136662, 121.529029159328 25.1055034746202, 121.529248622326 25.1054531632426, 121.529724588491 25.1053600871395, 121.529975535633 25.1053827272792, 121.530704300948 25.1054439394878, 121.531020068384 25.1056082899237, 121.531133966902 25.105535338482, 121.531224715315 25.1053525404253, 121.531157117007 25.1047328697504, 121.531112668805 25.1046984900946, 121.530634850632 25.1047119065468, 121.530069062058 25.1046163142929, 121.529712550436 25.1044628634133, 121.529496791455 25.1044435772235, 121.529277328457 25.1043270214903, 121.528874516624 25.1040142490815, 121.528736541997 25.1038381570249, 121.528655053626 25.1036788354219, 121.528573565255 25.1033903789388, 121.528572639251 25.1031287550285, 121.528687463773 25.1027832764434, 121.529069903513 25.1019296382787, 121.529164355943 25.1018759712402, 121.529293070528 25.1019120287843, 121.529879231195 25.102243254564, 121.530109806243 25.1022591869207, 121.530256114909 25.1022071971176, 121.530428351692 25.1020830923369, 121.530775603272 25.1018281740142, 121.530905243862 25.1017636058021, 121.531055256544 25.1017493504779, 121.531242309395 25.1017711527377, 121.531862732217 25.1018835181689, 121.532003484857 25.1018877109069, 121.532229429885 25.1018482991643, 121.532735028185 25.1016093127934, 121.533461941492 25.1012328034934, 121.533549911892 25.1012328034934, 121.534604630689 25.1013678103022, 121.535745467879 25.1015120410141, 121.536011231088 25.1015380360661, 121.536177911846 25.1015313276661, 121.536397374844 25.1014483111856, 121.537453019646 25.1008051411899, 121.537468761718 25.100732186883, 121.536815002744 25.0998592474898, 121.536416820933 25.0993418539579, 121.536520533404 25.0990919613224, 121.53711965813 25.0985586317082, 121.53772433888 25.0980051739896, 121.537953061921 25.0978575848417, 121.539787476265 25.0973301198976, 121.540651438195 25.097237876192, 121.543994313401 25.0970005579752, 121.544475835591 25.0970760302495, 121.546309323931 25.0979213165411, 121.546534342955 25.0979909182274, 121.546578791157 25.0979615681235, 121.547209400026 25.0965410146775, 121.547338114611 25.0963783292277, 121.547547391563 25.0962080962832, 121.54799742961 25.0960043195898, 121.548210410579 25.0958693068612, 121.548374313325 25.0956646910132, 121.54843913362 25.0953820857752, 121.548519695986 25.0943908658039, 121.548585442285 25.0931346380921, 121.548644706555 25.0924167878943, 121.548759531077 25.0905005433173, 121.548857687523 25.089442193186, 121.54895584397 25.0879292900994, 121.549039184349 25.0868356944042, 121.549098448619 25.086520361315, 121.549420698084 25.0858863380703, 121.549587378843 25.0854552674807, 121.549759615626 25.0853261137399, 121.550061492999 25.0852422476015, 121.550363370372 25.0853227590955, 121.551359750905 25.0858209227867, 121.55184682912 25.0859081431571, 121.552339463361 25.0858041496314, 121.552713569063 25.0856263540443, 121.554202583836 25.0851868959187, 121.556276833271 25.0845595750974, 121.557169501332 25.0843666816851, 121.557612131345 25.0843884870426, 121.558328858606 25.0846333777138, 121.558856681007 25.0849067824733, 121.559328943155 25.084878267895, 121.560047522424 25.0846971163013, 121.560450642924 25.0845886488607, 121.560922287736 25.0844533439804, 121.561475420919 25.0842543001657, 121.56243352661 25.0837365610867, 121.563417869088 25.0831883479363, 121.563613255977 25.0830941366581, 121.564314858501 25.082750558415, 121.56478218196 25.0825448023903, 121.565373589984 25.0823608517384, 121.566057598429 25.0821897606105, 121.566553936686 25.0821126017882, 121.568314579362 25.0820566895678, 121.568934384848 25.0820365611622, 121.56947640598 25.0819381555761, 121.570732067692 25.0815098667061, 121.572192685002 25.0810603295179, 121.573652067641 25.0805481682222, 121.575974486205 25.0796938157904, 121.576796777945 25.0793818191098, 121.577095568638 25.0796323111313, 121.577804270528 25.0805671786143, 121.578212947054 25.0812358952332, 121.578295670097 25.0816462930884, 121.578301843458 25.0821606862774, 121.578279619357 25.0828349853794, 121.578282088702 25.0835204630804, 121.578243813861 25.0838760601146, 121.578059847691 25.0839610454163, 121.577901809639 25.0839151980898, 121.577644997804 25.0838782965706, 121.577369665885 25.0839028975847, 121.576641209238 25.0842529023849, 121.575543585578 25.0846845363195, 121.57467931498 25.0850479574935, 121.573415010563 25.0855209625129, 121.571349403833 25.0863506737579, 121.570824668113 25.0864647306591, 121.570261657552 25.0864803855196, 121.569219594145 25.0864680852722, 121.565725471585 25.0864468393875, 121.565516811969 25.0863271914415, 121.565506934591 25.0846845363195, 121.565493353195 25.0825543074316, 121.56542544622 25.0822233079093, 121.565229133327 25.081610509134, 121.564451289789 25.0790206176586, 121.564340169283 25.0789965747997, 121.564203737996 25.0790284455651, 121.563441945197 25.0798129110878, 121.563025243302 25.0803144519845, 121.562515323649 25.0804464066616, 121.562246165091 25.0803345806732, 121.561600431487 25.0799991020953, 121.561327568913 25.079952135021, 121.559913869149 25.0799621993956, 121.558268050996 25.0799901559873, 121.556454317412 25.0800058116758, 121.556403695849 25.0800717891985, 121.556408 25.081339)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0100026800'=='0100020200' || '0100026800'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
