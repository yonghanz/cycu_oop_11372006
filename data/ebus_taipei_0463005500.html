
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493263</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463005500">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463005500">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463005500" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0463005500" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463005500" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463005500',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="hbsruLxopVtdzqvJ44MAKlmUSF8fRmO9svbgeSYusw-lft4St0yXNlibLqjJL4nzS9IQ4NWKtsWbVeeDa-23cOhoc2M1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">萬里-內湖科技園區</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0463005500" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0463005500" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">萬里橋頭 - 基湖路口</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0600 - 0840 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 萬里-內湖科技園區去班表:0600 0620 0640 0700 0720 0745 0810 0840<br/>萬里-內湖科技園區返班表:1700 1730 1800 1820 1840 1900 1930<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">情人湖路口、國道1號、成功交流道</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">四段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">基隆客運基隆站:02-2432-3185</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 基湖路口</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 萬里橋頭</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">萬里橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2074500540" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.176021" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.687788" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">武聖街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044600420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.156558" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6958382" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">情人湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044500720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.141612" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.709935" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">武嶺街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044500420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.140239" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7118581" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">興寮里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044500820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.138644" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7182126" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">麥金路樂利三街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.127876" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7194483" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">婦幼福利服務中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.125064" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7195321" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">基隆長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121041" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7216229" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">富景天下社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.116404" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7260445" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">湖興</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146700100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.067861" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5908537" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">國防醫學中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147200100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07121" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5900311" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">捷運文德站(碧湖公園)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147500260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.078585" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.584249" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">西湖圖書館(湖光教會)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144700061" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07889" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.578499" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">瑞光港墘路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.077273" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.573134" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">仁寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079478" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.568256" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">基湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080515" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5659034" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">基湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08025" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5662362" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">仁寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079213" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5684974" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">瑞光路393巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07768" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.57298" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">西湖圖書館(湖光教會)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144700020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.078723" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5785305" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">捷運文德站(碧湖公園)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147500220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.078401" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5841327" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">國防醫學中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.071037" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5898699" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">湖興</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146700140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.06803" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5906611" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">富景天下社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11658" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.726213" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">基隆長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.121092" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7218509" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">婦幼福利服務中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.125037" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7198392" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">麥金路樂利三街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044800500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.127249" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7194353" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">興寮里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044500960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.138769" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.718464" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">武嶺街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044500560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.140599" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.711525" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">情人湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044500760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.141647" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.710328" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">武聖街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2044600460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.156806" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6958887" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">萬里橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2074500500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.175981" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.687986" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0463005500";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 16;
        var existBackNum = 16;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0463005500',
                        url: './StopStatusRecent3OfRoute?routeid=0463005500&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0463005500',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0463005500',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0463005500');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0463005500","Name":"萬里-內湖科技園區","BeginStop":"萬里橋頭","GoDirStops":[{"UniStopId":"2074500540","Name":"萬里橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.687788,"Latitude":25.176021,"PublicId":"2074500540"},{"UniStopId":"2044600420","Name":"武聖街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6958382,"Latitude":25.156558,"PublicId":"2044600420"},{"UniStopId":"2044500720","Name":"情人湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.709935,"Latitude":25.141612,"PublicId":"2044500720"},{"UniStopId":"2044500420","Name":"武嶺街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7118581,"Latitude":25.140239,"PublicId":"2044500420"},{"UniStopId":"2044500820","Name":"興寮里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7182126,"Latitude":25.138644,"PublicId":"2044500820"},{"UniStopId":"2044800540","Name":"麥金路樂利三街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7194483,"Latitude":25.127876,"PublicId":"2044800540"},{"UniStopId":"2044800440","Name":"婦幼福利服務中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7195321,"Latitude":25.125064,"PublicId":"2044800440"},{"UniStopId":"2044800340","Name":"基隆長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7216229,"Latitude":25.121041,"PublicId":"2044800340"},{"UniStopId":"2044800940","Name":"富景天下社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7260445,"Latitude":25.116404,"PublicId":"2044800940"},{"UniStopId":"1146700100","Name":"湖興","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5908537,"Latitude":25.067861,"PublicId":"1146700100"},{"UniStopId":"1147200100","Name":"國防醫學中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5900311,"Latitude":25.07121,"PublicId":"1147200100"},{"UniStopId":"1147500260","Name":"捷運文德站(碧湖公園)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.584249,"Latitude":25.078585,"PublicId":"1147500260"},{"UniStopId":"1144700061","Name":"西湖圖書館(湖光教會)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.578499,"Latitude":25.07889,"PublicId":"1144700061"},{"UniStopId":"1149200760","Name":"瑞光港墘路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.573134,"Latitude":25.077273,"PublicId":"1149200760"},{"UniStopId":"1149200060","Name":"仁寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.568256,"Latitude":25.079478,"PublicId":"1149200060"},{"UniStopId":"1149200560","Name":"基湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5659034,"Latitude":25.080515,"PublicId":"1149200560"}],"LastStop":"基湖路口","BackDirStops":[{"UniStopId":"1149200520","Name":"基湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5662362,"Latitude":25.08025,"PublicId":"1149200520"},{"UniStopId":"1149200020","Name":"仁寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5684974,"Latitude":25.079213,"PublicId":"1149200020"},{"UniStopId":"1149200200","Name":"瑞光路393巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.57298,"Latitude":25.07768,"PublicId":"1149200200"},{"UniStopId":"1144700020","Name":"西湖圖書館(湖光教會)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5785305,"Latitude":25.078723,"PublicId":"1144700020"},{"UniStopId":"1147500220","Name":"捷運文德站(碧湖公園)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5841327,"Latitude":25.078401,"PublicId":"1147500220"},{"UniStopId":"1147200140","Name":"國防醫學中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5898699,"Latitude":25.071037,"PublicId":"1147200140"},{"UniStopId":"1146700140","Name":"湖興","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5906611,"Latitude":25.06803,"PublicId":"1146700140"},{"UniStopId":"2044800900","Name":"富景天下社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.726213,"Latitude":25.11658,"PublicId":"2044800900"},{"UniStopId":"2044800300","Name":"基隆長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7218509,"Latitude":25.121092,"PublicId":"2044800300"},{"UniStopId":"2044800400","Name":"婦幼福利服務中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7198392,"Latitude":25.125037,"PublicId":"2044800400"},{"UniStopId":"2044800500","Name":"麥金路樂利三街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7194353,"Latitude":25.127249,"PublicId":"2044800500"},{"UniStopId":"2044500960","Name":"興寮里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.718464,"Latitude":25.138769,"PublicId":"2044500960"},{"UniStopId":"2044500560","Name":"武嶺街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.711525,"Latitude":25.140599,"PublicId":"2044500560"},{"UniStopId":"2044500760","Name":"情人湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.710328,"Latitude":25.141647,"PublicId":"2044500760"},{"UniStopId":"2044600460","Name":"武聖街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6958887,"Latitude":25.156806,"PublicId":"2044600460"},{"UniStopId":"2074500500","Name":"萬里橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.687986,"Latitude":25.175981,"PublicId":"2074500500"}],"RouteMapUrl":"../MapOverview?nid=0463005500","RouteTracks":null,"StopDirection":null,"TicketPrice":"四段票","BusTimeDesc":"0600 - 0840","HeadwayDesc":"萬里-內湖科技園區去班表:0600 0620 0640 0700 0720 0745 0810 0840;萬里-內湖科技園區返班表:1700 1730 1800 1820 1840 1900 1930","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"情人湖路口、國道1號、成功交流道","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"基隆客運基隆站:02-2432-3185","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.687925860403 25.1759781858377, 121.687763595263 25.1756606204783, 121.687536424067 25.1741067410547, 121.687370102298 25.1737873351513, 121.687105407288 25.1734670105744, 121.686556748282 25.1731687132918, 121.684133926907 25.1718497716352, 121.683759702928 25.171547798991, 121.683564984759 25.1712687719315, 121.683163378537 25.1701847824601, 121.682910853413 25.1697763334617, 121.682452454392 25.1692953715386, 121.681852073373 25.1689612671013, 121.681327754138 25.1688171613334, 121.680884567474 25.1687437315772, 121.680653339649 25.168582185958, 121.680040788745 25.1678469671124, 121.67989069349 25.167578946156, 121.679886636862 25.1673329538008, 121.6801269921 25.166829035076, 121.680999167229 25.166164483337, 121.681730374517 25.1657633640292, 121.68218471691 25.1652640283104, 121.682562997518 25.1650097701828, 121.683715080014 25.1644700435917, 121.68485296431 25.1644590287384, 121.685019286079 25.1644994165288, 121.685197777733 25.1646132365935, 121.685514194756 25.1650171133852, 121.685722096967 25.1651456193567, 121.685969551306 25.1651713205347, 121.686671348038 25.1649106369063, 121.686936043048 25.1646857509342, 121.687029345503 25.1645645877079, 121.687041515389 25.1644030365523, 121.686858967106 25.1635952775641, 121.686858967106 25.1633520309116, 121.686944156305 25.1631243883219, 121.687155100987 25.1629297902874, 121.688563765236 25.1622716427473, 121.689716861889 25.1615180273252, 121.689960259599 25.161400532662, 121.692444944559 25.1611361692559, 121.693906344978 25.1608350880123, 121.694272455701 25.1606726139837, 121.694503683526 25.1603632701784, 121.694645665523 25.1599410192075, 121.694641608895 25.1597858875054, 121.694467173869 25.1582685238279, 121.69457264621 25.1577315212715, 121.694860666834 25.1574157443056, 121.695725742863 25.1568677224565, 121.696119235828 25.1565445995426, 121.696240934683 25.1562939951025, 121.696403199824 25.1556844642058, 121.696614144506 25.1553787796426, 121.696839794467 25.154531487796, 121.697298700566 25.1533459119174, 121.697347380108 25.1525077858984, 121.697412286164 25.1523407108012, 121.697532463784 25.1521915364139, 121.698893969726 25.1512840932126, 121.69911150643 25.1510761652162, 121.699251967192 25.1508223365196, 121.699736734298 25.1494990221234, 121.699915225953 25.148877982012, 121.700063292893 25.1485562149761, 121.700532340564 25.1479328749949, 121.700735679068 25.1466701198122, 121.700855856687 25.1463887407415, 121.701854294378 25.1449276706357, 121.702203671509 25.1442455565175, 121.702818757806 25.1434036957492, 121.703592052615 25.1421266635879, 121.703801476061 25.1420178719487, 121.705290765802 25.1417810088041, 121.705537205983 25.1417663196017, 121.706697908815 25.1419664598323, 121.706943841918 25.1419554429474, 121.707550814958 25.141847110193, 121.707788634804 25.1418654716836, 121.709000045492 25.1422290286281, 121.709264233423 25.1422290286281, 121.709491911698 25.142155582868, 121.709786524343 25.1419788538267, 121.711176933764 25.1406389180444, 121.71272758001 25.1401211177491, 121.712969456485 25.1401174453987, 121.713527749983 25.1402992266091, 121.713797515779 25.140302898954, 121.713970429569 25.1402496499422, 121.714407024212 25.1400123243227, 121.715549472215 25.1397088957312, 121.716213238054 25.1393338551138, 121.717411464699 25.1389349428378, 121.718420043961 25.1387416833723, 121.718647722236 25.1386145267401, 121.718775506034 25.1384621222267, 121.718883513768 25.1379254915672, 121.719031580708 25.1377216722899, 121.719671006777 25.1373424940804, 121.719817045403 25.1372011052942, 121.71989209303 25.1369128185604, 121.720344914187 25.1361865900454, 121.720515292585 25.1360470361572, 121.721309377615 25.1358299010074, 121.721753578436 25.1356348003849, 121.721516265668 25.1352413847699, 121.721099954168 25.1348993830013, 121.720953915542 25.1347322838023, 121.720882924543 25.1345463627214, 121.720854528143 25.1343810993009, 121.720923490828 25.1338811760921, 121.720905236 25.1336456743674, 121.72078150883 25.1334436842221, 121.720138026133 25.132892341239, 121.719382479074 25.1320008221731, 121.719177619335 25.1316381529259, 121.718984929481 25.1308499174431, 121.719017382509 25.1306938306055, 121.719159364506 25.1304716360573, 121.719425073674 25.1302434730531, 121.719812988774 25.1299840920578, 121.720013791885 25.1297049699467, 121.720036103342 25.129522713882, 121.719995537057 25.1288148048747, 121.719961055715 25.1286844242988, 121.719438764795 25.1276528519494, 121.719136545971 25.1263458138584, 121.719191817534 25.1260345466666, 121.720121292541 25.1243418452672, 121.720340857559 25.1241889638397, 121.721356028842 25.1238267305045, 121.721556831953 25.1236430883527, 121.721633907895 25.1234406225605, 121.721323575814 25.122438848103, 121.7213215475 25.1221427216333, 121.721952860311 25.120662996754, 121.722098898938 25.1204701674948, 121.722570482001 25.1201703633041, 121.723384343095 25.119159379585, 121.723985231193 25.1185987896402, 121.724468477064 25.1182512317656, 121.725287916022 25.1179298431552, 121.72546488644 25.1178155204314, 121.725678366516 25.1176112084699, 121.725850773227 25.1173022146749, 121.725970443768 25.1167710006336, 121.726043463081 25.1166002035801, 121.726169218565 25.1163091134282, 121.726530258502 25.1157691715, 121.72671787757 25.1155478680818, 121.726961275281 25.1153522759305, 121.728186377089 25.1146066353747, 121.727772600982 25.1138867022462, 121.726139808008 25.1098314895028, 121.724890366428 25.1066632609525, 121.724468477064 25.1058110393779, 121.723825501445 25.1050157496631, 121.72347460308 25.10469065284, 121.721387467713 25.1035298480918, 121.716937346242 25.1025876044903, 121.712529819371 25.1015939245235, 121.71058872263 25.1010502440821, 121.710028907897 25.1007857500206, 121.709274374994 25.1003743136769, 121.708266302811 25.0995349057727, 121.706041242075 25.0978358677679, 121.705205576603 25.0974170742343, 121.704256325533 25.0972848233469, 121.703378065461 25.0973215597189, 121.701520129605 25.0975346304587, 121.700552623707 25.0974593210155, 121.699449220753 25.0971433882119, 121.698856952991 25.0967980653769, 121.698134873117 25.0962764056288, 121.697191706989 25.0944597632996, 121.695599480301 25.0898638500325, 121.694729333486 25.0887892410958, 121.694023480126 25.0882675472009, 121.693323711709 25.0879644493744, 121.691033744917 25.0874500998297, 121.687257023778 25.0866197881463, 121.683693275636 25.085956636937, 121.681168024391 25.0857582419711, 121.677529228621 25.0856112825298, 121.675679406022 25.085221839157, 121.673306278346 25.0843529350896, 121.671576126288 25.0835152542928, 121.667434308584 25.080917672566, 121.664316789577 25.0789832283019, 121.661266204941 25.0770652875747, 121.660039074817 25.0763873875454, 121.656889102783 25.0749452300117, 121.655158950725 25.0743701994053, 121.653394317325 25.0739274423699, 121.650658121397 25.0734424286765, 121.645492004995 25.0726322310631, 121.641944483367 25.0720810731608, 121.63976201723 25.0715813545186, 121.63856936845 25.0709567033486, 121.637171859929 25.0700436045825, 121.634863638309 25.068382739476, 121.632192348438 25.0672858947521, 121.630671112748 25.0670433749948, 121.629614361023 25.066951511325, 121.62740958343 25.0667641092249, 121.624477655177 25.0665169952332, 121.621164403845 25.0662928467947, 121.617518508975 25.0659621352347, 121.614237710671 25.0655900836627, 121.611911234223 25.0653144891771, 121.609446832405 25.0650021480106, 121.606356695641 25.0646411173759, 121.603242219105 25.0642516073047, 121.600619608776 25.0638951677581, 121.598102470788 25.0636563159353, 121.596437224787 25.0636857131079, 121.594216220679 25.0638878184782, 121.592101703071 25.0642663058204, 121.590145393974 25.0648799672788, 121.590396904941 25.0656305041351, 121.590807638577 25.0689789264997, 121.589739731123 25.0714803082218, 121.589670768439 25.0718293768936, 121.589727561238 25.0723924776804, 121.590015581862 25.0751730369173, 121.590202186773 25.0762027555863, 121.589710320566 25.0780058906127, 121.589397960172 25.0788335050829, 121.589008523835 25.079002517783, 121.587387900747 25.0786194832313, 121.586981223739 25.0785606960477, 121.586514711461 25.0784908862306, 121.583911370117 25.0784541442056, 121.579588018287 25.0784137279653, 121.579186412065 25.0784578184086, 121.578791904943 25.0785533476478, 121.576895431116 25.0793148232452, 121.57410244239 25.0803913524384, 121.572822576096 25.0773087060461, 121.570266900137 25.0784458772484, 121.565887769665 25.0804088046254, 121.565948619093 25.0804597833683, 121.56783089472 25.0796294242658, 121.572907540731 25.0773577064842, 121.574863060235 25.0764163223795, 121.576794015403 25.0795981938357, 121.579094123766 25.0786429062419, 121.581489562899 25.0785914674677, 121.586667849187 25.0786869966026, 121.589580263956 25.0792057255112, 121.590371551013 25.0762105634112, 121.590022680961 25.0736918251622, 121.589827962793 25.0717297087034, 121.590957733832 25.068983060298, 121.590576410753 25.0659093131669, 121.590927309118 25.0648932877405, 121.594969739425 25.0640554738166, 121.597527443698 25.0638790912078, 121.612200269004 25.0656208583418, 121.629075843589 25.0672174564602, 121.632769403843 25.0676602377531, 121.634905218752 25.0685862150345, 121.638322928268 25.0710591279868, 121.639736663302 25.0717425691196, 121.642304509147 25.0723304724189, 121.645446367924 25.0728816291989, 121.650545549956 25.0736918251622, 121.654208685497 25.0743532056482, 121.656798842798 25.0751413460628, 121.659512727269 25.07630425727, 121.661078585872 25.0771346389244, 121.667256831087 25.081040296564, 121.671325629478 25.0835717428163, 121.673293094304 25.0845361769998, 121.675516126725 25.0853591548273, 121.677440996951 25.085770641666, 121.679625491402 25.0859543407009, 121.683434665569 25.0861086476771, 121.685895010757 25.086529316898, 121.69325981981 25.0881476858775, 121.694639073502 25.0889265527637, 121.69541997449 25.0899203356259, 121.69620696042 25.0921999438265, 121.697174466318 25.0947972860964, 121.697655176796 25.0959159264223, 121.698349863762 25.0967008770043, 121.699328536055 25.0972678327712, 121.70045627878 25.097605807024, 121.701553596791 25.0976719323121, 121.703330400076 25.0974515145462, 121.704385123488 25.0974809036046, 121.705768433808 25.0978207140796, 121.709048217955 25.1003793648012, 121.710273319764 25.101143459735, 121.712701211925 25.1018065286335, 121.72147104018 25.1037418404259, 121.723792184499 25.1050964467723, 121.724743313645 25.1066976986607, 121.72734969746 25.1130496828255, 121.727714794026 25.1143729330574, 121.727678284369 25.1147292256062, 121.72707790335 25.1151305126198, 121.726659056457 25.115531798316, 121.726261506863 25.1160754143661, 121.726066788695 25.1164252740925, 121.725950755179 25.1167375673058, 121.725786425793 25.1173372394408, 121.725542421551 25.1177204870086, 121.725255462994 25.1178802574086, 121.72443805235 25.1182145016815, 121.724014558556 25.1185368840003, 121.723338706025 25.1191644299332, 121.722517238752 25.1201506211953, 121.722094842309 25.1204040545359, 121.72192497099 25.1206317767995, 121.721255627287 25.1221679727557, 121.721271853801 25.1224360934415, 121.721521248206 25.1231618138029, 121.721547704539 25.123466332521, 121.721446288827 25.1237087404537, 121.720423004286 25.1241063251506, 121.720110643891 25.1242899666061, 121.719918968194 25.1245305364952, 121.719480852316 25.1253495724132, 121.719136038893 25.1260180191829, 121.719083302722 25.1263448956673, 121.719391606488 25.1276725928461, 121.719914911566 25.1287762416203, 121.719970738395 25.1296651800119, 121.719683683741 25.1300001599231, 121.719351040203 25.1302168463569, 121.71911575575 25.1304188418387, 121.71895349061 25.1306437909595, 121.718908867696 25.1308714941373, 121.719083302722 25.1316693700681, 121.719269907633 25.1319484876901, 121.720061964349 25.1329079496508, 121.720727251424 25.1334964771333, 121.720840837022 25.1337177480429, 121.720788100852 25.1343714589278, 121.72082055388 25.1345697750213, 121.720893573193 25.1347387106988, 121.721018696252 25.1348929591388, 121.721481784326 25.1352987675232, 121.721469614441 25.1355925667974, 121.721339802328 25.1356880514093, 121.7204747263 25.1359313532079, 121.720231328589 25.1361259942978, 121.719923024823 25.1366401390808, 121.719597480385 25.137263077672, 121.718940306567 25.1376197625237, 121.718749645027 25.1379094247447, 121.718615776287 25.1385199625163, 121.718364786222 25.1386738311929, 121.717561052875 25.1387880473101, 121.716195997383 25.1391975181534, 121.715334977982 25.1396785987352, 121.714653464393 25.1398071313941, 121.714267070528 25.1399466809849, 121.71391008722 25.140174366817, 121.71360989671 25.1402184349935, 121.713077464219 25.1400274727804, 121.712532861842 25.1400761314496, 121.711100871979 25.1405792425905, 121.709585721232 25.1420197080954, 121.709203383996 25.1421592551572, 121.708724701832 25.1420637756058, 121.707863682432 25.1417846811045, 121.707586817536 25.1417442857949, 121.70689719069 25.1418581270878, 121.705542276769 25.1416671674394, 121.703982503108 25.1418691439814, 121.703548443858 25.142001346628, 121.702747259728 25.1433297916641, 121.702073859396 25.1442074571644, 121.701679352274 25.145014426465, 121.700677365033 25.1464979875051, 121.700584945097 25.146929111637, 121.70044208058 25.1478952358073, 121.700003964701 25.1484653305527, 121.69984575619 25.1488105073973, 121.699353889983 25.1502811701397, 121.69899758024 25.1510734861901, 121.697478713456 25.1521043266878, 121.697336731459 25.1522769100857, 121.697219089232 25.1525348667306, 121.69717040969 25.1532472281562, 121.696718095611 25.1545571912106, 121.696572056985 25.1551676457135, 121.696186677277 25.1557367885138, 121.696154224249 25.1563169442485, 121.695943279567 25.1565519432548, 121.695807323804 25.1566782429098, 121.69474556 25.1573569950125, 121.694465652633 25.1576993928386, 121.694331783893 25.1582189544603, 121.694506218919 25.1598648302898, 121.694366762274 25.1604332578893, 121.693766898373 25.1607928631444, 121.692252761783 25.1610719141749, 121.69006928149 25.1612922171691, 121.689654491225 25.1614179732833, 121.688359412575 25.1622964266103, 121.687114027624 25.1628985811399, 121.686889898899 25.1631418286967, 121.686784426557 25.1633951728062, 121.686829049471 25.1637742700741, 121.686979144726 25.1644939091037, 121.686893955527 25.1646811614203, 121.68601772377 25.1651190002738, 121.685769255274 25.1651226718718, 121.685582650363 25.1649978374779, 121.685262176711 25.1645829457803, 121.68493764643 25.1644140514107, 121.683760210006 25.164373663592, 121.683589831609 25.1644287378869, 121.682517867526 25.1649620393561, 121.682140601075 25.1652337376589, 121.681682202054 25.1657220587624, 121.68101995745 25.1660681046764, 121.680045352452 25.1668437212615, 121.679842521027 25.1673871088769, 121.679854690912 25.1676331011228, 121.679980446396 25.1678533922651, 121.680597053929 25.1686106400315, 121.680840451639 25.1687832000767, 121.681316091331 25.1688749872353, 121.681795787652 25.1690080784925, 121.682444848213 25.1693421828016, 121.682907303863 25.1698607769624, 121.683061455746 25.1701398072443, 121.683507684882 25.1713045682019, 121.68370240305 25.1715946093891, 121.684153702971 25.1719553242068, 121.687035937525 25.1735762330893, 121.687397991619 25.1741315225123, 121.687629219444 25.1756606204784, 121.687844220755 25.1760130629077)","wkt0":"LINESTRING (121.688107109039 25.1763324905727, 121.687844220755 25.1760130629077, 121.687629219444 25.1756606204784, 121.687397991619 25.1741315225123, 121.687035937525 25.1735762330893, 121.684153702971 25.1719553242068, 121.68370240305 25.1715946093891, 121.683502318244 25.1712723790157, 121.68309560471 25.1701752444573, 121.682907303863 25.1698607769624, 121.682444848213 25.1693421828016, 121.681798089337 25.1689838713972, 121.681316091331 25.1688749872353, 121.680840451639 25.1687832000767, 121.680597053929 25.1686106400315, 121.679980446396 25.1678533922651, 121.679854690912 25.1676331011228, 121.679842521027 25.1673871088769, 121.680045352452 25.1668437212615, 121.68101995745 25.1660681046764, 121.681682202054 25.1657220587624, 121.682140601075 25.1652337376589, 121.682517867526 25.1649620393561, 121.683589831609 25.1644287378869, 121.683760210006 25.164373663592, 121.68493764643 25.1644140514107, 121.685262176711 25.1645829457803, 121.685582650363 25.1649978374779, 121.685769255274 25.1651226718718, 121.68601772377 25.1651190002738, 121.686756026518 25.1648165456471, 121.686893955527 25.1646811614203, 121.686979144726 25.1644939091037, 121.686829049471 25.1637742700741, 121.686784426557 25.1633951728062, 121.686889898899 25.1631418286967, 121.687114027624 25.1628985811399, 121.688359412575 25.1622964266103, 121.689654491225 25.1614179732833, 121.69006928149 25.1612922171691, 121.692252761783 25.1610719141749, 121.693766898373 25.1607928631444, 121.69419987618 25.1605619252848, 121.6944062089 25.160307977322, 121.694503423354 25.1600738690437, 121.694506218919 25.1598648302898, 121.694331783893 25.1582189544603, 121.694465652633 25.1576993928386, 121.69474556 25.1573569950125, 121.695807323804 25.1566782429098, 121.695943279567 25.1565519432548, 121.696154224249 25.1563169442485, 121.696186677277 25.1557367885138, 121.696572056985 25.1551676457135, 121.696718095611 25.1545571912106, 121.69717040969 25.1532472281562, 121.697219089232 25.1525348667306, 121.697336731459 25.1522769100857, 121.697478713456 25.1521043266878, 121.69899758024 25.1510734861901, 121.699353889983 25.1502811701397, 121.699689516908 25.149346551581, 121.69984575619 25.1488105073973, 121.700003964701 25.1484653305527, 121.70044208058 25.1478952358073, 121.700584945097 25.146929111637, 121.700677365033 25.1464979875051, 121.701679352274 25.145014426465, 121.702073859396 25.1442074571644, 121.702435329257 25.1437656483033, 121.702747259728 25.1433297916641, 121.703548443858 25.142001346628, 121.703982503108 25.1418691439814, 121.705542276769 25.1416671674394, 121.70657983937 25.1418451668341, 121.70689719069 25.1418581270878, 121.707643246464 25.1417618401587, 121.707960681418 25.1417955676226, 121.708724701832 25.1420637756058, 121.709203383996 25.1421592551572, 121.709585721232 25.1420197080954, 121.711100871979 25.1405792425905, 121.712532861842 25.1400761314496, 121.712831323987 25.1400308276775, 121.713077464219 25.1400274727804, 121.71360989671 25.1402184349935, 121.71391008722 25.140174366817, 121.714267070528 25.1399466809849, 121.714653464393 25.1398071313941, 121.715398579174 25.1396489137489, 121.716366755783 25.1391628414763, 121.717561052875 25.1387880473101, 121.718364786222 25.1386738311929, 121.718615776287 25.1385199625163, 121.718686014912 25.1384089334615, 121.718749645027 25.1379094247447, 121.718940306567 25.1376197625237, 121.719597480385 25.137263077672, 121.71971966248 25.137112410073, 121.719923024823 25.1366401390808, 121.720231328589 25.1361259942978, 121.7204747263 25.1359313532079, 121.721339802328 25.1356880514093, 121.721469614441 25.1355925667974, 121.721481784326 25.1352987675232, 121.721013209916 25.134847710076, 121.720896155777 25.1346314575138, 121.720848540533 25.1343953652671, 121.720963610704 25.1338527498933, 121.720923931335 25.1336821286058, 121.720854492439 25.1335353149397, 121.720166055383 25.1329460763071, 121.71933278863 25.1319838516041, 121.719166135279 25.131681296414, 121.719110584163 25.131478931631, 121.719080824636 25.1309442521311, 121.719150263532 25.1307061759159, 121.719310964977 25.1304919073222, 121.719521265634 25.1302994623816, 121.720001386001 25.129985995365, 121.720223590469 25.1296685604114, 121.720245414122 25.1295336505561, 121.720229542374 25.1289225882705, 121.720173991257 25.1287281593614, 121.719447858801 25.1277074075888, 121.719083302722 25.1263448956673, 121.719136038893 25.1260180191829, 121.719480852316 25.1253495724132, 121.719918968194 25.1245305364952, 121.720110643891 25.1242899666061, 121.720423004286 25.1241063251506, 121.721245334225 25.1238158534547, 121.721446288827 25.1237087404537, 121.721546897431 25.1235529776337, 121.721554833305 25.1234478273053, 121.72149729822 25.123131384336, 121.721271853801 25.1224360934415, 121.721255627287 25.1221679727557, 121.72192497099 25.1206317767995, 121.722094842309 25.1204040545359, 121.722517238752 25.1201506211953, 121.723338706025 25.1191644299332, 121.724014558556 25.1185368840003, 121.72443805235 25.1182145016815, 121.725255462994 25.1178802574086, 121.725542421551 25.1177204870086, 121.725786425793 25.1173372394408, 121.725950755179 25.1167375673058, 121.726066788695 25.1164252740925, 121.726261506863 25.1160754143661, 121.726659056457 25.115531798316, 121.72707790335 25.1151305126198, 121.727588081392 25.1147878049778, 121.727669424099 25.1146886065549, 121.727711087436 25.1145695684473, 121.727714794026 25.1143729330574, 121.727401588357 25.1134575541255, 121.72734969746 25.1130496828255, 121.725979082971 25.1098516914496, 121.724743313645 25.1066976986607, 121.724304613591 25.1058966503248, 121.724046697691 25.1054948967116, 121.723485234617 25.1048788745048, 121.723147959979 25.1045892151097, 121.722780925813 25.1043372511153, 121.722084552884 25.1039741848871, 121.72131675709 25.1037093250977, 121.720185895068 25.1034166897499, 121.714512737257 25.1021757174782, 121.712286724645 25.1016896452055, 121.71122331755 25.1013970098577, 121.710808668142 25.1012402763494, 121.709788908354 25.1007849555878, 121.70912427892 25.1003941138012, 121.708406082337 25.0998505064432, 121.707612494953 25.0991481816084, 121.706560991669 25.0983149148552, 121.705768433808 25.0978207140796, 121.705102774851 25.0975629908089, 121.704386562237 25.0974221290483, 121.703827083132 25.0974003053952, 121.703219988783 25.0974360168275, 121.701763755933 25.0976225098627, 121.701116982215 25.097636397642, 121.700708284713 25.097610606052, 121.700317442926 25.0975550549351, 121.699809547 25.0974280809537, 121.699563534911 25.0973457462626, 121.699200468683 25.0971790929119, 121.698865178013 25.0969916078925, 121.698220388264 25.0964281608499, 121.697956520459 25.096148421297, 121.697609325978 25.0956038219548, 121.697186740696 25.0947269078955, 121.69620696042 25.0921999438265, 121.695911048977 25.0911498127623, 121.695706700225 25.0905119669024, 121.69541997449 25.0899203356259, 121.695157140962 25.0894753433821, 121.694639073502 25.0889265527637, 121.694252451344 25.0886301728182, 121.69325981981 25.0881476858775, 121.685895010757 25.086529316898, 121.68464806003 25.0862801621774, 121.682945815091 25.0860341500884, 121.681033269496 25.0859369356339, 121.679176275017 25.0859032081701, 121.677745833757 25.0857911139521, 121.676341184088 25.0854984786042, 121.675541644799 25.0852980977898, 121.673646954919 25.0846632278826, 121.672260160966 25.0840283579754, 121.671359439285 25.0835403017343, 121.669901222467 25.0826871952965, 121.667683145729 25.0812696498319, 121.664332223 25.0792112825548, 121.660624185948 25.0768721837406, 121.659725448236 25.0763513920198, 121.659013203559 25.0761004200096, 121.657420076886 25.0754328146229, 121.656987571761 25.0752671532565, 121.656612601722 25.0750806602213, 121.655497611448 25.0747225539142, 121.654182240359 25.074415038803, 121.652839093712 25.0741065317074, 121.650557529983 25.0737146979366, 121.64862911264 25.0734161106834, 121.646591577031 25.073090739856, 121.645446367924 25.0728816291989, 121.644129472173 25.0726245072679, 121.643881476115 25.0725451485295, 121.642119712123 25.0722654089766, 121.640820212782 25.0720283247457, 121.640272637487 25.0718904389377, 121.639608008053 25.0716364909749, 121.638750933678 25.0712535850621, 121.638298588869 25.0709847573358, 121.637116143667 25.0701981138414, 121.635943618307 25.0692914402552, 121.634905218752 25.0685862150345, 121.633860451424 25.0680703076682, 121.633416042489 25.0679155581283, 121.632293116341 25.0675743155532, 121.631654278497 25.0674562694298, 121.630759508721 25.0673183836219, 121.628805299788 25.0671497463028, 121.622256219902 25.0665436439383, 121.619214796253 25.0663174715338, 121.616568182328 25.0661091548455, 121.615185356311 25.0659782129272, 121.611790786276 25.0656082028094, 121.609017198369 25.0652421606286, 121.605192107178 25.0647431925609, 121.60070635449 25.0641608978179, 121.59926400942 25.0639138937447, 121.598214490105 25.0638265991324, 121.59682968012 25.0638087434163, 121.595290120595 25.0638900861231, 121.594302104302 25.0640269799469, 121.593623587089 25.0642710080674, 121.592522484593 25.0645874510368, 121.590873806803 25.0651528820479, 121.590675409957 25.0654990845441, 121.590566291692 25.0658254473558, 121.59056827566 25.0660218602333, 121.590893646488 25.0684938849344, 121.590901582362 25.0690176526078, 121.58983420733 25.0715234047727, 121.589810399709 25.0719340862439, 121.590111962915 25.0751620029281, 121.590346071193 25.0762016024011, 121.590024668302 25.0774753101524, 121.589536612061 25.0791279558795, 121.589171561865 25.079254929861, 121.588663665939 25.0790724047626, 121.587449477241 25.0787708415567, 121.586318615219 25.0786279958276, 121.581497571862 25.0785724447107, 121.579565186582 25.0785684767738, 121.578890637305 25.0786795790076, 121.576831278044 25.0795088778238, 121.574885004985 25.0763900794048, 121.573972379493 25.0768493681033, 121.572805806039 25.077370159824, 121.568191095401 25.0794443988489, 121.565883740082 25.0804562227634)","wkt1":"LINESTRING (121.565887769665 25.0804088046254, 121.568078009199 25.0794741583758, 121.569405284098 25.0788561522005, 121.570988490929 25.0781667231607, 121.572809773976 25.0773195686283, 121.573208551636 25.078284769284, 121.573543842306 25.0791101001634, 121.574103321411 25.0804125754573, 121.576894765035 25.079337264552, 121.578811278567 25.0785575649473, 121.579188232574 25.0784682863666, 121.579571138487 25.0784206711235, 121.58393388513 25.078474238272, 121.586144025995 25.078496061925, 121.586524947939 25.0785238374835, 121.587387900747 25.0786194832313, 121.589008523835 25.079002517783, 121.589397960172 25.0788335050829, 121.589500900629 25.0786885068656, 121.589710320566 25.0780058906127, 121.590205209432 25.0762690573288, 121.590191321653 25.0760428849243, 121.590015581862 25.0751730369173, 121.589816351614 25.0731333951779, 121.589703265412 25.071878535127, 121.589727073033 25.0714867013562, 121.590807638577 25.0689789264997, 121.590721041232 25.0680336042517, 121.590396904941 25.0656305041351, 121.590145393974 25.0648799672788, 121.590119898788 25.0646816895387, 121.590215129274 25.0644237736389, 121.591294408117 25.0641549459126, 121.592490741098 25.0640140841519, 121.593498597076 25.0639208376343, 121.594216220679 25.0638878184782, 121.596437224787 25.0636857131079, 121.598102470788 25.0636563159353, 121.600619608776 25.0638951677581, 121.603242219105 25.0642516073047, 121.606356695641 25.0646411173759, 121.609467559209 25.0650278920349, 121.611911234223 25.0653144891771, 121.614237710671 25.0655900836627, 121.617518508975 25.0659621352347, 121.621164403845 25.0662928467947, 121.624482232514 25.0665396760014, 121.627418505835 25.066779736185, 121.629614361023 25.066951511325, 121.630671112748 25.0670433749948, 121.632205821729 25.0673173916377, 121.633078767851 25.0675911792851, 121.633821764039 25.0678887745541, 121.634863638309 25.068382739476, 121.63517284656 25.068526620414, 121.63607555221 25.0691882738954, 121.637171859929 25.0700436045825, 121.63856936845 25.0709567033486, 121.639210222376 25.0713140961001, 121.640243869944 25.0717307294767, 121.6409700024 25.0719082946539, 121.64261868019 25.0722177937336, 121.64551725811 25.072672122511, 121.649207439446 25.0732593771751, 121.650719223412 25.0734815816426, 121.653371789243 25.0739815416945, 121.655355757703 25.0744418223772, 121.657054034705 25.0749616221137, 121.658347582141 25.0754754699448, 121.660039074817 25.0763873875454, 121.661266204941 25.0770652875747, 121.664316789577 25.0789832283019, 121.667418285939 25.0809670946419, 121.670330751639 25.0827982975304, 121.671576126288 25.0835152542928, 121.672314720098 25.0839113038364, 121.673298768455 25.0843636486452, 121.674175682514 25.0847187789996, 121.675679406022 25.085221839157, 121.677318288554 25.0855937090904, 121.678687226792 25.0857444906933, 121.681190994988 25.0858040097471, 121.683693275636 25.085956636937, 121.686456447281 25.0864924468027, 121.691055286171 25.0874824470642, 121.693070998126 25.0879248720308, 121.693816970267 25.0882184993629, 121.69407091823 25.0883494412812, 121.694729333486 25.0887892410958, 121.695162100883 25.0892164354982, 121.695599480301 25.0898638500325, 121.695902121118 25.0905814057986, 121.696322722432 25.0920078791213, 121.697286931103 25.094620765583, 121.697513103508 25.0951782607202, 121.697917833074 25.095858761902, 121.698140037541 25.0961881006663, 121.698856952991 25.0967980653769, 121.699449220753 25.0971433882119, 121.70006051901 25.0973685619, 121.700588254621 25.0974915679445, 121.701520129605 25.0975346304587, 121.703378065461 25.0973215597189, 121.70402845593 25.0972931710985, 121.704829979188 25.0973685619, 121.705187093511 25.097467760323, 121.706041242075 25.0978358677679, 121.706690941603 25.0982692835808, 121.708266302811 25.0995349057727, 121.709274374994 25.1003743136769, 121.710028907897 25.1007857500206, 121.71058872263 25.1010502440821, 121.711511984961 25.1013464186621, 121.713146774972 25.1017610680702, 121.716967898226 25.1026082226026, 121.721372308207 25.1035783831795, 121.722364292437 25.1039573211554, 121.722844412804 25.1042192049921, 121.72345547509 25.104693373454, 121.723840364971 25.1050663595245, 121.72444745932 25.1058658988138, 121.724931547624 25.1067924120846, 121.726102089015 25.1098477235129, 121.727179383889 25.1123921630627, 121.728137640655 25.1134258106303, 121.728330085596 25.1136053597759, 121.728566177842 25.1141112717332, 121.728655456423 25.1143414120746, 121.728186377089 25.1146066353747, 121.726961275281 25.1153522759305, 121.726725055112 25.1155665125986, 121.726530258502 25.1157691715, 121.726167559974 25.1162985969603, 121.725945355507 25.1167559016903, 121.725840205179 25.1172935571429, 121.72573505485 25.1174899700204, 121.72554260991 25.1177349901252, 121.725354132906 25.1178798198228, 121.724804573642 25.1180851605584, 121.724276838032 25.1183520043163, 121.723985231193 25.1185987896402, 121.723384343095 25.119159379585, 121.72254086563 25.1201722953782, 121.722098898938 25.1204701674948, 121.721939723186 25.1206742393986, 121.721302869311 25.1221403920905, 121.721294933437 25.1222743099615, 121.721323575814 25.122438848103, 121.721592528706 25.1233010136395, 121.721606416485 25.1234517952425, 121.721556831953 25.1236430883527, 121.721356028842 25.1238267305045, 121.720340857559 25.1241889638397, 121.720074792834 25.1243683886709, 121.719180023059 25.1260448420196, 121.719136545971 25.1263458138584, 121.719217718459 25.1267322870909, 121.719495474044 25.127716335447, 121.720199782847 25.128695423882, 121.720239462216 25.1287618868254, 121.720271205712 25.1289483798606, 121.720289061428 25.1295346425405, 121.720243430153 25.1297161756546, 121.72009264855 25.1299621877437, 121.720003369969 25.1300405544978, 121.719560945003 25.130317318098, 121.719334772598 25.130511747007, 121.719221686396 25.1306684805154, 121.719146295595 25.1308371178345, 121.719124471942 25.1309611158632, 121.719150263532 25.1314997633001, 121.719322868788 25.1319273085032, 121.720138026133 25.132892341239, 121.72087830006 25.1335045634288, 121.720951706893 25.1336493931264, 121.720989402294 25.1338448140197, 121.720896155776 25.13437254963, 121.720919963398 25.1345977300502, 121.720953915542 25.1347322838023, 121.721099954168 25.1348993830013, 121.721546897431 25.1352901350427, 121.721753578436 25.1356348003849, 121.721309377615 25.1358299010074, 121.720515292585 25.1360470361572, 121.720344914187 25.1361865900454, 121.71989209303 25.1369128185604, 121.719817045403 25.1372011052942, 121.719671006777 25.1373424940804, 121.719031580708 25.1377216722899, 121.718883513768 25.1379254915672, 121.718775506034 25.1384621222267, 121.718647722236 25.1386145267401, 121.718420043961 25.1387416833723, 121.717411464699 25.1389349428378, 121.716213238054 25.1393338551138, 121.715549472215 25.1397088957312, 121.714407024212 25.1400123243227, 121.713970429569 25.1402496499422, 121.713797515779 25.140302898954, 121.713527749983 25.1402992266091, 121.712969456485 25.1401174453987, 121.71272758001 25.1401211177491, 121.711611183384 25.1404653167704, 121.711176933764 25.1406389180444, 121.709786524343 25.1419788538267, 121.709491911698 25.142155582868, 121.709264233423 25.1422290286281, 121.709000045492 25.1422290286281, 121.707788634804 25.1418654716836, 121.706943841918 25.1419554429474, 121.706697908815 25.1419664598323, 121.705537205983 25.1417663196017, 121.705290765802 25.1417810088041, 121.703801476061 25.1420178719487, 121.703592052615 25.1421266635879, 121.702818757806 25.1434036957492, 121.702185349231 25.1442626324027, 121.701806411255 25.1449917408117, 121.700855856687 25.1463887407415, 121.700735679068 25.1466701198122, 121.700532340564 25.1479328749949, 121.700063292893 25.1485562149761, 121.699915225953 25.148877982012, 121.699736734298 25.1494990221234, 121.699251967192 25.1508223365196, 121.699106230181 25.151049788504, 121.698887993651 25.1512719929715, 121.697532463784 25.1521915364139, 121.697412286164 25.1523407108012, 121.697347380108 25.1525077858984, 121.697302802851 25.1532103301568, 121.696839794467 25.154531487796, 121.696658013102 25.1552121543329, 121.696403199824 25.1556844642058, 121.696240934683 25.1562939951025, 121.696098533996 25.156532485343, 121.695697772367 25.15686480006, 121.694834746087 25.1573935276546, 121.69457264621 25.1577315212715, 121.694467711922 25.1580204616879, 121.694447872237 25.1582853214773, 121.694626429399 25.1597623859957, 121.694622461462 25.1599429271255, 121.694580798124 25.1601234682554, 121.694505407323 25.1603248410541, 121.694318914287 25.1605847409223, 121.694011399176 25.1607781778472, 121.693763403119 25.1608714243648, 121.692444944559 25.1611361692559, 121.689960259599 25.161400532662, 121.689716861889 25.1615180273252, 121.688563765236 25.1622716427473, 121.688359073034 25.1623415449936, 121.687155100987 25.1629297902874, 121.686944156305 25.1631243883219, 121.686858967106 25.1633520309116, 121.686853240973 25.1635904531391, 121.687021878292 25.1643562649646, 121.687025846229 25.1645526778421, 121.686936043048 25.1646857509342, 121.686671348038 25.1649106369063, 121.685969551306 25.1651713205347, 121.685722096967 25.1651456193567, 121.685533901947 25.165017918446, 121.68522043493 25.1646131888802, 121.685019286079 25.1644994165288, 121.684831577112 25.1644445515611, 121.683720554774 25.164448519498, 121.683587628888 25.1644862148987, 121.682562997518 25.1650097701828, 121.68218471691 25.1652640283104, 121.681694922977 25.1657698424923, 121.681091796565 25.166070413714, 121.6801269921 25.166829035076, 121.679886636862 25.1673329538008, 121.67989069349 25.167578946156, 121.680040788745 25.1678469671124, 121.680665243346 25.1686118773111, 121.680919191309 25.168766626851, 121.681417167393 25.1688440016209, 121.681796105368 25.168952127902, 121.682452454392 25.1692953715386, 121.682910853413 25.1697763334617, 121.683163378537 25.1701847824601, 121.683564984759 25.1712687719315, 121.683750314301 25.1715650143637, 121.684117348466 25.1718566577273, 121.686559613641 25.173183932627, 121.68704965385 25.1734418485268, 121.687370102298 25.1737873351513, 121.687536424067 25.1741067410547, 121.687623020735 25.1749447046351, 121.687744042811 25.1756658771703, 121.687817449644 25.175828562584, 121.688003942679 25.1760825105469)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0463005500'=='0100020200' || '0463005500'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
