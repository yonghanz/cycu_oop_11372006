
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492773</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0153000600">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0153000600">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0153000600" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0153000600" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0153000600" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0153000600',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="8y7Z1uimdBF25HW6o7fwnv26pY0yGJGDza0hRDKm72b2SGgO_3mXZUaHsaCq1tOyCecL3h_NF-fe91asIfVgHT2_lwk1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">市民小巴6 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0153000600" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0153000600" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">舊莊 - 捷運南港站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0720 - 2000 <br>
                        [假日] 0720 - 2000
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 市民小巴6(山豬)大都會週二至週五班表:0720 0800 1100 1300 1600 1800 2000<br/>市民小巴6大都會週一班表:0720 0740 0800 0820 1100 1300 1600 1700 1800 2000<br/>市民小巴6大都會週二至週五班表:0740 0820 1700<br/>平日繞駛山豬窟游泳池(周一及國定假日除外)0720、0800、1100、1300、1600、1800、2000<br>
[假日]<br /> 市民小巴6(山豬)大南班表:0720 0800 1100 1300 1600 1800 2000<br/>市民小巴6大南班表:0900 1000 1200 1400 1500 1700 1900<br/>假日繞駛山豬窟游泳池0720、0800、1100、1300、1600、1800、2000<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">大南汽車內湖站:02-2792-9840<br/>大都會客運舊莊站:02-2651-2945</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">18:00班次自舊莊站提供載客至山豬窟游泳池；末班車自山豬窟游泳池回站時提供載客至舊莊站</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 捷運南港站</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 舊莊</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">舊莊站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157201020" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.039219" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.6233788" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">舊莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038074" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.622697" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">坑口運動公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035249" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6235797" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">山豬窟游泳池</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032245" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6242927" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">坑口運動公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035123" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6236712" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">舊莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038111" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6228397" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">舊莊站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157201000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039454" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6233248" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">舊莊公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04107" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6208947" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">金德橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156500000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.042651" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.619864" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">胡適國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157200300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.043448" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6190381" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">福山抽水站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156400200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04642" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.61734" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">六福公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04887" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.616349" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">誠正國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051546" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6160314" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">國家文官學院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156100460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053113" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6145567" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">台北生技園區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156100060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052653" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.610465" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">捷運南港站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156100560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.05226" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.607245" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">南港車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053195" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6071781" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">台北生技園區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155700020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052333" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6103299" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">國家文官學院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156100420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052819" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6139003" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">誠正國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051803" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6158658" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">南港水廠</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049543" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.615625" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">六福公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.048866" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.616119" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">福山抽水站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156500140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04638" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.61729" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">胡適國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157200340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.043561" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6188397" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">金德橋頭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156500040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.042614" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6196862" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">舊莊公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040972" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6208139" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">舊莊站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157201020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039219" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6233788" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">舊莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038074" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.622697" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">坑口運動公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035249" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6235797" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">山豬窟游泳池</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032245" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6242927" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">坑口運動公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035123" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6236712" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">舊莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038111" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6228397" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">舊莊站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157201000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039454" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6233248" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0153000600";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 17;
        var existBackNum = 16;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0153000600',
                        url: './StopStatusRecent3OfRoute?routeid=0153000600&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0153000600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0153000600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0153000600');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0153000600","Name":"市民小巴6","BeginStop":"舊莊","GoDirStops":[{"UniStopId":"1157201020","Name":"舊莊站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6233788,"Latitude":25.039219,"PublicId":"1157201020"},{"UniStopId":"1158001030","Name":"舊莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.622697,"Latitude":25.038074,"PublicId":"1158001030"},{"UniStopId":"1158000240","Name":"坑口運動公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6235797,"Latitude":25.035249,"PublicId":"1158000240"},{"UniStopId":"1158000160","Name":"山豬窟游泳池","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6242927,"Latitude":25.032245,"PublicId":"1158000160"},{"UniStopId":"1158000200","Name":"坑口運動公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6236712,"Latitude":25.035123,"PublicId":"1158000200"},{"UniStopId":"1158001060","Name":"舊莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6228397,"Latitude":25.038111,"PublicId":"1158001060"},{"UniStopId":"1157201000","Name":"舊莊站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6233248,"Latitude":25.039454,"PublicId":"1157201000"},{"UniStopId":"1158001200","Name":"舊莊公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6208947,"Latitude":25.04107,"PublicId":"1158001200"},{"UniStopId":"1156500000","Name":"金德橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.619864,"Latitude":25.042651,"PublicId":"1156500000"},{"UniStopId":"1157200300","Name":"胡適國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6190381,"Latitude":25.043448,"PublicId":"1157200300"},{"UniStopId":"1156400200","Name":"福山抽水站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.61734,"Latitude":25.04642,"PublicId":"1156400200"},{"UniStopId":"1157100260","Name":"六福公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.616349,"Latitude":25.04887,"PublicId":"1157100260"},{"UniStopId":"1157100100","Name":"誠正國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6160314,"Latitude":25.051546,"PublicId":"1157100100"},{"UniStopId":"1156100460","Name":"國家文官學院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6145567,"Latitude":25.053113,"PublicId":"1156100460"},{"UniStopId":"1156100060","Name":"台北生技園區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.610465,"Latitude":25.052653,"PublicId":"1156100060"},{"UniStopId":"1156100560","Name":"捷運南港站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.607245,"Latitude":25.05226,"PublicId":"1156100560"},{"UniStopId":"1156800120","Name":"南港車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6071781,"Latitude":25.053195,"PublicId":"1156800120"}],"LastStop":"捷運南港站","BackDirStops":[{"UniStopId":"1155700020","Name":"台北生技園區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6103299,"Latitude":25.052333,"PublicId":"1155700020"},{"UniStopId":"1156100420","Name":"國家文官學院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6139003,"Latitude":25.052819,"PublicId":"1156100420"},{"UniStopId":"1157100140","Name":"誠正國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6158658,"Latitude":25.051803,"PublicId":"1157100140"},{"UniStopId":"1157100040","Name":"南港水廠","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615625,"Latitude":25.049543,"PublicId":"1157100040"},{"UniStopId":"1157100220","Name":"六福公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.616119,"Latitude":25.048866,"PublicId":"1157100220"},{"UniStopId":"1156500140","Name":"福山抽水站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.61729,"Latitude":25.04638,"PublicId":"1156500140"},{"UniStopId":"1157200340","Name":"胡適國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6188397,"Latitude":25.043561,"PublicId":"1157200340"},{"UniStopId":"1156500040","Name":"金德橋頭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6196862,"Latitude":25.042614,"PublicId":"1156500040"},{"UniStopId":"1158001240","Name":"舊莊公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6208139,"Latitude":25.040972,"PublicId":"1158001240"},{"UniStopId":"1157201020","Name":"舊莊站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6233788,"Latitude":25.039219,"PublicId":"1157201020"},{"UniStopId":"1158001030","Name":"舊莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.622697,"Latitude":25.038074,"PublicId":"1158001030"},{"UniStopId":"1158000240","Name":"坑口運動公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6235797,"Latitude":25.035249,"PublicId":"1158000240"},{"UniStopId":"1158000160","Name":"山豬窟游泳池","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6242927,"Latitude":25.032245,"PublicId":"1158000160"},{"UniStopId":"1158000200","Name":"坑口運動公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6236712,"Latitude":25.035123,"PublicId":"1158000200"},{"UniStopId":"1158001060","Name":"舊莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6228397,"Latitude":25.038111,"PublicId":"1158001060"},{"UniStopId":"1157201000","Name":"舊莊站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6233248,"Latitude":25.039454,"PublicId":"1157201000"}],"RouteMapUrl":"../MapOverview?nid=0153000600","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"0720 - 2000","HeadwayDesc":"市民小巴6(山豬)大都會週二至週五班表:0720 0800 1100 1300 1600 1800 2000;市民小巴6大都會週一班表:0720 0740 0800 0820 1100 1300 1600 1700 1800 2000;市民小巴6大都會週二至週五班表:0740 0820 1700;平日繞駛山豬窟游泳池(周一及國定假日除外)0720、0800、1100、1300、1600、1800、2000","HolidayBusTimeDesc":"0720 - 2000","HolidayHeadwayDesc":"市民小巴6(山豬)大南班表:0720 0800 1100 1300 1600 1800 2000;市民小巴6大南班表:0900 1000 1200 1400 1500 1700 1900;假日繞駛山豬窟游泳池0720、0800、1100、1300、1600、1800、2000","RouteNote":"18:00班次自舊莊站提供載客至山豬窟游泳池；末班車自山豬窟游泳池回站時提供載客至舊莊站","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"大南汽車內湖站:02-2792-9840,大都會客運舊莊站:02-2651-2945","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.623378808109 25.0392191053101, 121.623668988251 25.0389575950893, 121.623771550329 25.0388742373791, 121.623759484202 25.0388259536522, 121.623601619042 25.0387394073018, 121.623453808987 25.0386319075393, 121.623357279972 25.0384615475532, 121.623272557966 25.0383973113754, 121.623177101825 25.0383817439684, 121.622952461707 25.0383869331043, 121.622579546385 25.0383638702764, 121.622542636677 25.0382975646222, 121.623743474927 25.0371980386791, 121.623843703874 25.0371490296898, 121.624080242076 25.0371606089482, 121.62413856169 25.0370048233583, 121.624095324735 25.0366914295254, 121.624044043696 25.0365456646791, 121.623993768167 25.0363926114042, 121.62398170204 25.0363097074671, 121.623993768167 25.036093792555, 121.624002817762 25.0359370945749, 121.623990751635 25.0357749301754, 121.62396460836 25.0356610505532, 121.623918354874 25.035518017598, 121.623838919538 25.0354059598159, 121.623713230716 25.0352829694495, 121.623610668637 25.0351463133422, 121.623512128601 25.0349896141518, 121.623522183707 25.0349294853395, 121.623550338003 25.0348329147612, 121.62367652958 25.0346511614382, 121.623789146765 25.03453682525, 121.623870593121 25.0344716854616, 121.623947011925 25.0344356991302, 121.624124987297 25.0343819473749, 121.624405021992 25.0343432278755, 121.624464849872 25.0343291066433, 121.624510600603 25.034299042079, 121.624557356845 25.0342607780774, 121.624588024917 25.0342175032993, 121.624623720543 25.0341350534167, 121.624642825244 25.0340690023658, 121.624640814222 25.0340052289036, 121.624597074512 25.0338626495432, 121.624516130911 25.0336171211188, 121.624469374669 25.0334535870718, 121.624447253437 25.0333911798711, 121.624432673533 25.0332868641143, 121.624440717618 25.0331697934869, 121.624453789255 25.0330978200496, 121.624455297521 25.0329903153431, 121.624455297521 25.0329197083872, 121.62444473966 25.0328764331361, 121.624427143225 25.0328445460992, 121.624381895249 25.0328076482318, 121.624328603189 25.0327876049412, 121.624259725714 25.0327743945888, 121.624204422632 25.0327725724711, 121.624084264119 25.0326983211523, 121.624014381134 25.0326709893672, 121.623799704626 25.0326249808485, 121.623734346438 25.0326008377575, 121.623688092952 25.0325511849706, 121.623670999272 25.0324769335178, 121.623674015804 25.0323812720707, 121.62367652958 25.0322446127311, 121.6237021701 25.0321708166245, 121.623761997979 25.0320542004642, 121.623800710136 25.0320305127931, 121.623825345145 25.0320314238575, 121.62386003526 25.0320906430262, 121.62398270755 25.0321904044843, 121.624122976276 25.0322291246631, 121.624186826197 25.0322159142505, 121.624284863479 25.0321808383206, 121.624308995732 25.0321958708632, 121.624294415829 25.032211814467, 121.624154147104 25.0322564565466, 121.624019408686 25.0322227472227, 121.623952039478 25.0321881268263, 121.623892211599 25.0321421181266, 121.623856515973 25.0321298187683, 121.623776075127 25.0321423458925, 121.623730073018 25.0322507624047, 121.623715241737 25.0325110983023, 121.623760489713 25.0325653064075, 121.623823836879 25.0325844386742, 121.623979691019 25.0325807944331, 121.624053596046 25.0326532237036, 121.624168224252 25.0327283861088, 121.624261736735 25.0327529847042, 121.624360779527 25.0327725724711, 121.624417088119 25.0327999042335, 121.624466358137 25.03284409057, 121.624489484881 25.0328978429991, 121.624502053763 25.0330039812009, 121.62450557305 25.0331602273996, 121.624493506923 25.0332864085868, 121.624499037231 25.0333852580183, 121.624510097848 25.033477729995, 121.624560373376 25.0336289648017, 121.624639808712 25.0338152748947, 121.624661929944 25.0338790484557, 121.624677012603 25.0339532990599, 121.624681537401 25.0340371156388, 121.624666454742 25.0341309536973, 121.624645841775 25.0342088483419, 121.624567914706 25.0343035973165, 121.624517136422 25.0343541604413, 121.624413066077 25.034385136039, 121.624164202209 25.0344065456387, 121.624066164928 25.0344288662812, 121.623916343852 25.0344835290621, 121.623817803816 25.0345477577985, 121.623703678366 25.0346520724831, 121.623586033628 25.0348165159762, 121.623565923417 25.0348730006708, 121.623556371066 25.0349472506735, 121.623569945459 25.0350360773047, 121.623661446921 25.0351841215471, 121.623788141254 25.0353235107321, 121.623905283236 25.0354396682652, 121.62396360285 25.0355284945399, 121.624005834294 25.0356578619223, 121.624021922463 25.0357539763328, 121.624037507877 25.0359129521357, 121.624040524409 25.0360072442768, 121.624028458282 25.0361288673662, 121.624020414197 25.0361803407722, 121.624009353581 25.0362987750757, 121.62402644726 25.0364108320422, 121.624074711768 25.0365666183865, 121.624113926681 25.0366490666348, 121.624138058934 25.0367023618819, 121.624166213231 25.0368549592561, 121.624198892324 25.0369360407688, 121.624167218741 25.0370162112005, 121.624120765323 25.0371582549128, 121.624080673744 25.0372038044413, 121.623973762866 25.0372130296602, 121.623891034211 25.0372133179482, 121.623796055351 25.0372404891069, 121.62265089985 25.0382636189902, 121.622660922744 25.0382912223404, 121.622719469177 25.0383157266093, 121.623239386957 25.0383076546154, 121.62334788877 25.0383615639934, 121.623401026022 25.0384071130751, 121.623478443997 25.0385786131306, 121.6235548628 25.0386469392914, 121.623689601218 25.0387284751268, 121.623832383719 25.0387858690343, 121.623853499441 25.038815932499, 121.623849980154 25.0388669492706, 121.623291475185 25.0393581388568, 121.622870487165 25.0397049650336, 121.622702566898 25.0397878666759, 121.622526602548 25.0398343280113, 121.622257125713 25.039859836188, 121.621974577241 25.0399381826974, 121.621723199597 25.040054791363, 121.621487910123 25.0402451912115, 121.620824273143 25.0410687354772, 121.620586972647 25.0414376888025, 121.620212922712 25.0420170799325, 121.61991227505 25.0425090136488, 121.619750387847 25.0427399485183, 121.619502026735 25.0429476528816, 121.619220986529 25.0431508019843, 121.619024409212 25.0433635160429, 121.618923355399 25.0435252149197, 121.618776048099 25.0438003302653, 121.618364794274 25.0445523394264, 121.617930413705 25.0453362277734, 121.617851481125 25.0454783383143, 121.617613677874 25.0459110456776, 121.617199407516 25.0466767062283, 121.61686608076 25.0473125515704, 121.616757485618 25.0475562306806, 121.616671514464 25.0477812348869, 121.61653426227 25.0482080129859, 121.616483986741 25.0483974892324, 121.61641158998 25.0487340821308, 121.616391982524 25.0488620691745, 121.61634120424 25.0489108044193, 121.616251211043 25.0489581732369, 121.616180322548 25.0489531630743, 121.615956093689 25.0488830207774, 121.615923414595 25.0489003286207, 121.615873139067 25.0491544803529, 121.615797725773 25.0497247256916, 121.615677064504 25.0500216894661, 121.615625783465 25.0502002317573, 121.61563483306 25.0505491172187, 121.615753483308 25.0510783645478, 121.615863083961 25.0513807905671, 121.616082285266 25.0518171207682, 121.616179819792 25.052131386861, 121.616244172469 25.05244291941, 121.616300481061 25.0528792458304, 121.61635075659 25.0531798455922, 121.616273332276 25.0532308563877, 121.613659004778 25.0529293458419, 121.610479580337 25.0525759125963, 121.6056843004 25.0520093241844, 121.605563639131 25.0519983931925, 121.60549224788 25.0520785537771, 121.605363542527 25.0528373439869, 121.605387674781 25.052965782201, 121.607172427859 25.053236659114, 121.60752349512 25.053296937945, 121.607680860671 25.0532763124681, 121.607871919805 25.0523416594877, 121.60799108037 25.0521526327993, 121.616069865009 25.0530886536696, 121.616184500489 25.0530490266536, 121.616186008851 25.052946542932, 121.616054781393 25.0520651793893, 121.615931095743 25.0517754895233, 121.615692774613 25.0513300216955, 121.615587189302 25.0509364782186, 121.615529871562 25.0506030584509, 121.615484620714 25.0502532400149, 121.615550988624 25.0499444150973, 121.615641490319 25.0497749710066, 121.615710874952 25.0495740974667, 121.615735008737 25.0491723493995, 121.615777242862 25.0488594222718, 121.615934112466 25.0488047624296, 121.616159612523 25.0488853856884, 121.616238801506 25.0488703542374, 121.616312711223 25.0488252598733, 121.616362487156 25.0487453198235, 121.616459022297 25.0483059902434, 121.616584216308 25.0478646093287, 121.616765219698 25.0474198105456, 121.617054070942 25.0468390416564, 121.617381385405 25.0462439215055, 121.617531467383 25.0459986300466, 121.617714733315 25.045624200896, 121.617841435688 25.0454315197595, 121.617950791903 25.0452087745222, 121.618692151621 25.0438620454659, 121.618922176762 25.0434527626243, 121.619057929305 25.0432607613548, 121.619214044728 25.0430988241073, 121.619631106706 25.042789981169, 121.61972990439 25.0427202864161, 121.619948616819 25.0423882108729, 121.620156770718 25.0420499848582, 121.620373220605 25.0417049250335, 121.620700535069 25.0411753758895, 121.620939610379 25.0408528622582, 121.621453207498 25.0402406306589, 121.621567842979 25.0401272034869, 121.621751863092 25.0399973770769, 121.622025630719 25.0398716503173, 121.622392162584 25.0398060536959, 121.622595791398 25.039770522178, 121.622771515522 25.0397138083877, 121.6229215975 25.0396195131121, 121.623378912016 25.039219390179, 121.623669735058 25.0389601150542, 121.623774418625 25.0388768009575, 121.623762645701 25.0388263512175, 121.623602915759 25.0387361182021, 121.623455595115 25.0386291646059, 121.623360775349 25.0384590764846, 121.62327542165 25.0383961582342, 121.623180601884 25.038377131403, 121.622952779895 25.0383817439684, 121.62258113732 25.0383604108519, 121.622549318607 25.0382987177644, 121.623744588582 25.0371990476875, 121.623844340249 25.0371498945544, 121.62408027601 25.0371618585153, 121.624140970206 25.0370058224277, 121.624098969504 25.0366875514369, 121.624045195878 25.0365454247224, 121.62399714962 25.0363917662432, 121.623984581228 25.0363114774492, 121.623999536024 25.0360906469581, 121.624009081638 25.0359349698718, 121.623993172281 25.0357694906782, 121.623968990059 25.0356587867028, 121.623923807486 25.0355152173359, 121.623840442456 25.0354010536231, 121.623718258596 25.0352776644402, 121.623515891578 25.0349887948865, 121.62352400535 25.034929838891, 121.623551051256 25.0348344137234, 121.62367832611 25.0346536534591, 121.623792873479 25.0345386240614, 121.623872420263 25.0344751992846, 121.623946876053 25.0344377209921, 121.624125379036 25.0343843864791, 121.62440602009 25.034344890095, 121.624464566523 25.0343324934171, 121.624511976406 25.0343019341593, 121.624558749915 25.0342635909287, 121.624591205003 25.0342186168987, 121.624627160149 25.0341361644675, 121.624646251377 25.0340681267553, 121.624645615003 25.0340049900309, 121.624599477868 25.0338594006569, 121.624518658336 25.0336143488451, 121.624472203014 25.0334520377873, 121.624451202663 25.0333912071224, 121.624435611493 25.0332871318391, 121.624444202546 25.0331703713746, 121.624457566406 25.0330968554695, 121.624459793716 25.0329901852545, 121.624459793716 25.0329169575396, 121.624448975353 25.0328757308936, 121.624430838686 25.0328437297811, 121.624385019739 25.032804809498, 121.624329655177 25.0327834754116, 121.62425933582 25.0327707902774, 121.624205562194 25.0327699253818, 121.624083378334 25.0326958326395, 121.624016240848 25.0326678676628, 121.623798919035 25.0326228930478, 121.623734327046 25.0325983876417, 121.623689780847 25.0325499534128, 121.623674826052 25.0324770137344, 121.623677371549 25.0323798568623, 121.623679917046 25.0322446443513, 121.623703462894 25.0321711278916, 121.623763282076 25.0320552312656, 121.623800191783 25.0320333204484, 121.623822464883 25.0320330321481, 121.623856192719 25.0320909804853, 121.623979967515 25.0321924620845, 121.624121878977 25.0322319591614, 121.624188698276 25.0322186973706, 121.624284154417 25.0321838130878, 121.62430706389 25.0321959216829, 121.624293381844 25.0322106249754, 121.624153697691 25.0322541582429, 121.624020695468 25.0322207154693, 121.623953557983 25.0321872726865, 121.623894375176 25.0321417212954, 121.623855874532 25.0321270179946, 121.623774418625 25.0321402797954, 121.623727645116 25.0322504103463, 121.623711099385 25.032512186233, 121.623758191081 25.0325678279519, 121.623824055819 25.032587432282, 121.623978376579 25.0325845492925, 121.624050286872 25.0326537410227, 121.624167379738 25.0327318699711, 121.624262835879 25.0327555104549, 121.624359882955 25.0327748264566, 121.624416202078 25.0328007733197, 121.624466157458 25.0328454595712, 121.624485248686 25.0328982181568, 121.624498612546 25.0330037352599, 121.624503385353 25.0331611458517, 121.624489385119 25.0332856903525, 121.624493839739 25.0333848645869, 121.624506567224 25.0334791376947, 121.62455811354 25.0336278987816, 121.624637660324 25.0338170211433, 121.62465929705 25.033881311148, 121.624672342722 25.0339536734, 121.624678388278 25.0340358376583, 121.624664069857 25.0341298219705, 121.624642433131 25.0342088148644, 121.624568295529 25.0343016458644, 121.624515476464 25.0343518091705, 121.624412065645 25.0343829450054, 121.624161970557 25.0344034139296, 121.624065559855 25.0344264775021, 121.623915693714 25.0344812534693, 121.623814828392 25.0345432367711, 121.623699326461 25.034650482224, 121.623582233596 25.0348168278082, 121.623560915057 25.0348747748305, 121.623552005818 25.034950307724, 121.623565369677 25.0350385254719, 121.623660825818 25.0351849783252, 121.623786112003 25.0353241516177, 121.623904795804 25.0354420632013, 121.623962069489 25.0355292715736, 121.624004070191 25.0356603002344, 121.624018706799 25.0357551481766, 121.624033661594 25.0359134201114, 121.624036525278 25.0360085561488, 121.624025706916 25.0361264670746, 121.624016161302 25.0361800891207, 121.624005661126 25.0362985764621, 121.62402188867 25.0364089915701, 121.624071844051 25.0365658212133, 121.624110344694 25.0366500017479, 121.624135163291 25.0367039118545, 121.624160936449 25.0368552636312, 121.624195300659 25.0369348313476, 121.624164436507 25.0370164170321, 121.62411193563 25.037158543201, 121.624079241901 25.0372012098483, 121.623975194708 25.0372102909234, 121.623891193304 25.0372107233555, 121.623792873479 25.0372381827926, 121.622643581546 25.0382608802829, 121.622655513563 25.0382950421238, 121.622718037335 25.0383192581065, 121.623237318741 25.0383140689678, 121.623344229618 25.0383646630612, 121.623394821373 25.0384100679991, 121.623473095408 25.0385834714643, 121.623553905259 25.0386470406446, 121.623687871725 25.0387339560684, 121.623827714971 25.0387875769746, 121.623848238041 25.0388148198455, 121.623844897076 25.0388645488798, 121.623291475183 25.0393581388544)","wkt0":"LINESTRING (121.623378808109 25.0392191053101, 121.623668988251 25.0389575950893, 121.623771550329 25.0388742373791, 121.623759484202 25.0388259536522, 121.623601619042 25.0387394073018, 121.623453808987 25.0386319075393, 121.623357279972 25.0384615475532, 121.623272557966 25.0383973113754, 121.623177101825 25.0383817439684, 121.622952461707 25.0383869331043, 121.622579546385 25.0383638702764, 121.622542636677 25.0382975646222, 121.623743474927 25.0371980386791, 121.623843703874 25.0371490296898, 121.624080242076 25.0371606089482, 121.62413856169 25.0370048233583, 121.624095324735 25.0366914295254, 121.624044043696 25.0365456646791, 121.623993768167 25.0363926114042, 121.62398170204 25.0363097074671, 121.623993768167 25.036093792555, 121.624002817762 25.0359370945749, 121.623990751635 25.0357749301754, 121.62396460836 25.0356610505532, 121.623918354874 25.035518017598, 121.623838919538 25.0354059598159, 121.623713230716 25.0352829694495, 121.623610668637 25.0351463133422, 121.623512128601 25.0349896141518, 121.623522183707 25.0349294853395, 121.623550338003 25.0348329147612, 121.62367652958 25.0346511614382, 121.623789146765 25.03453682525, 121.623870593121 25.0344716854616, 121.623947011925 25.0344356991302, 121.624124987297 25.0343819473749, 121.624405021992 25.0343432278755, 121.624464849872 25.0343291066433, 121.624510600603 25.034299042079, 121.624557356845 25.0342607780774, 121.624588024917 25.0342175032993, 121.624623720543 25.0341350534167, 121.624642825244 25.0340690023658, 121.624640814222 25.0340052289036, 121.624597074512 25.0338626495432, 121.624516130911 25.0336171211188, 121.624469374669 25.0334535870718, 121.624447253437 25.0333911798711, 121.624432673533 25.0332868641143, 121.624440717618 25.0331697934869, 121.624453789255 25.0330978200496, 121.624455297521 25.0329903153431, 121.624455297521 25.0329197083872, 121.62444473966 25.0328764331361, 121.624427143225 25.0328445460992, 121.624381895249 25.0328076482318, 121.624328603189 25.0327876049412, 121.624259725714 25.0327743945888, 121.624204422632 25.0327725724711, 121.624084264119 25.0326983211523, 121.624014381134 25.0326709893672, 121.623799704626 25.0326249808485, 121.623734346438 25.0326008377575, 121.623688092952 25.0325511849706, 121.623670999272 25.0324769335178, 121.623674015804 25.0323812720707, 121.62367652958 25.0322446127311, 121.6237021701 25.0321708166245, 121.623761997979 25.0320542004642, 121.623800710136 25.0320305127931, 121.623825345145 25.0320314238575, 121.62386003526 25.0320906430262, 121.62398270755 25.0321904044843, 121.624122976276 25.0322291246631, 121.624186826197 25.0322159142505, 121.624284863479 25.0321808383206, 121.624308995732 25.0321958708632, 121.624294415829 25.032211814467, 121.624154147104 25.0322564565466, 121.624019408686 25.0322227472227, 121.623952039478 25.0321881268263, 121.623892211599 25.0321421181266, 121.623856515973 25.0321298187683, 121.623776075127 25.0321423458925, 121.623730073018 25.0322507624047, 121.623715241737 25.0325110983023, 121.623760489713 25.0325653064075, 121.623823836879 25.0325844386742, 121.623979691019 25.0325807944331, 121.624053596046 25.0326532237036, 121.624168224252 25.0327283861088, 121.624261736735 25.0327529847042, 121.624360779527 25.0327725724711, 121.624417088119 25.0327999042335, 121.624466358137 25.03284409057, 121.624489484881 25.0328978429991, 121.624502053763 25.0330039812009, 121.62450557305 25.0331602273996, 121.624493506923 25.0332864085868, 121.624499037231 25.0333852580183, 121.624510097848 25.033477729995, 121.624560373376 25.0336289648017, 121.624639808712 25.0338152748947, 121.624661929944 25.0338790484557, 121.624677012603 25.0339532990599, 121.624681537401 25.0340371156388, 121.624666454742 25.0341309536973, 121.624645841775 25.0342088483419, 121.624567914706 25.0343035973165, 121.624517136422 25.0343541604413, 121.624413066077 25.034385136039, 121.624164202209 25.0344065456387, 121.624066164928 25.0344288662812, 121.623916343852 25.0344835290621, 121.623817803816 25.0345477577985, 121.623703678366 25.0346520724831, 121.623586033628 25.0348165159762, 121.623565923417 25.0348730006708, 121.623556371066 25.0349472506735, 121.623569945459 25.0350360773047, 121.623661446921 25.0351841215471, 121.623788141254 25.0353235107321, 121.623905283236 25.0354396682652, 121.62396360285 25.0355284945399, 121.624005834294 25.0356578619223, 121.624021922463 25.0357539763328, 121.624037507877 25.0359129521357, 121.624040524409 25.0360072442768, 121.624028458282 25.0361288673662, 121.624020414197 25.0361803407722, 121.624009353581 25.0362987750757, 121.62402644726 25.0364108320422, 121.624074711768 25.0365666183865, 121.624113926681 25.0366490666348, 121.624138058934 25.0367023618819, 121.624166213231 25.0368549592561, 121.624198892324 25.0369360407688, 121.624167218741 25.0370162112005, 121.624120765323 25.0371582549128, 121.624080673744 25.0372038044413, 121.623973762866 25.0372130296602, 121.623891034211 25.0372133179482, 121.623796055351 25.0372404891069, 121.62265089985 25.0382636189902, 121.622660922744 25.0382912223404, 121.622719469177 25.0383157266093, 121.623239386957 25.0383076546154, 121.62334788877 25.0383615639934, 121.623401026022 25.0384071130751, 121.623478443997 25.0385786131306, 121.6235548628 25.0386469392914, 121.623689601218 25.0387284751268, 121.623832383719 25.0387858690343, 121.623853499441 25.038815932499, 121.623849980154 25.0388669492706, 121.623291475185 25.0393581388568, 121.622870487165 25.0397049650336, 121.622702566898 25.0397878666759, 121.622526602548 25.0398343280113, 121.622257125713 25.039859836188, 121.621974577241 25.0399381826974, 121.621723199597 25.040054791363, 121.621487910123 25.0402451912115, 121.620824273143 25.0410687354772, 121.620586972647 25.0414376888025, 121.620212922712 25.0420170799325, 121.61991227505 25.0425090136488, 121.619750387847 25.0427399485183, 121.619502026735 25.0429476528816, 121.619220986529 25.0431508019843, 121.619024409212 25.0433635160429, 121.618923355399 25.0435252149197, 121.618776048099 25.0438003302653, 121.618364794274 25.0445523394264, 121.617930413705 25.0453362277734, 121.617851481125 25.0454783383143, 121.617613677874 25.0459110456776, 121.617199407516 25.0466767062283, 121.61686608076 25.0473125515704, 121.616757485618 25.0475562306806, 121.616671514464 25.0477812348869, 121.61653426227 25.0482080129859, 121.616483986741 25.0483974892324, 121.61641158998 25.0487340821308, 121.616391982524 25.0488620691745, 121.61634120424 25.0489108044193, 121.616251211043 25.0489581732369, 121.616180322548 25.0489531630743, 121.615956093689 25.0488830207774, 121.615923414595 25.0489003286207, 121.615873139067 25.0491544803529, 121.615797725773 25.0497247256916, 121.615677064504 25.0500216894661, 121.615625783465 25.0502002317573, 121.61563483306 25.0505491172187, 121.615753483308 25.0510783645478, 121.615863083961 25.0513807905671, 121.616082285266 25.0518171207682, 121.616179819792 25.052131386861, 121.616244172469 25.05244291941, 121.616300481061 25.0528792458304, 121.61635075659 25.0531798455922, 121.616273332276 25.0532308563877, 121.613659004778 25.0529293458419, 121.610479580337 25.0525759125963, 121.6056843004 25.0520093241844, 121.605563639131 25.0519983931925, 121.60549224788 25.0520785537771, 121.605363542527 25.0528373439869, 121.605387674781 25.052965782201, 121.607172427859 25.053236659114)","wkt1":"LINESTRING (121.607172427859 25.053236659114, 121.60752349512 25.053296937945, 121.607680860671 25.0532763124681, 121.607871919805 25.0523416594877, 121.60799108037 25.0521526327993, 121.616069865009 25.0530886536696, 121.616184500489 25.0530490266536, 121.616186008851 25.052946542932, 121.616054781393 25.0520651793893, 121.615931095743 25.0517754895233, 121.615692774613 25.0513300216955, 121.615587189302 25.0509364782186, 121.615529871562 25.0506030584509, 121.615484620714 25.0502532400149, 121.615550988624 25.0499444150973, 121.615641490319 25.0497749710066, 121.615710874952 25.0495740974667, 121.615735008737 25.0491723493995, 121.615777242862 25.0488594222718, 121.615934112466 25.0488047624296, 121.616159612523 25.0488853856884, 121.616238801506 25.0488703542374, 121.616312711223 25.0488252598733, 121.616362487156 25.0487453198235, 121.616459022297 25.0483059902434, 121.616584216308 25.0478646093287, 121.616765219698 25.0474198105456, 121.617054070942 25.0468390416564, 121.617381385405 25.0462439215055, 121.617531467383 25.0459986300466, 121.617714733315 25.045624200896, 121.617841435688 25.0454315197595, 121.617950791903 25.0452087745222, 121.618692151621 25.0438620454659, 121.618922176762 25.0434527626243, 121.619057929305 25.0432607613548, 121.619214044728 25.0430988241073, 121.619631106706 25.042789981169, 121.61972990439 25.0427202864161, 121.619948616819 25.0423882108729, 121.620156770718 25.0420499848582, 121.620373220605 25.0417049250335, 121.620700535069 25.0411753758895, 121.620939610379 25.0408528622582, 121.621453207498 25.0402406306589, 121.621567842979 25.0401272034869, 121.621751863092 25.0399973770769, 121.622025630719 25.0398716503173, 121.622392162584 25.0398060536959, 121.622595791398 25.039770522178, 121.622771515522 25.0397138083877, 121.6229215975 25.0396195131121, 121.623378912016 25.039219390179, 121.623669735058 25.0389601150542, 121.623774418625 25.0388768009575, 121.623762645701 25.0388263512175, 121.623602915759 25.0387361182021, 121.623455595115 25.0386291646059, 121.623360775349 25.0384590764846, 121.62327542165 25.0383961582342, 121.623180601884 25.038377131403, 121.622952779895 25.0383817439684, 121.62258113732 25.0383604108519, 121.622549318607 25.0382987177644, 121.623744588582 25.0371990476875, 121.623844340249 25.0371498945544, 121.62408027601 25.0371618585153, 121.624140970206 25.0370058224277, 121.624098969504 25.0366875514369, 121.624045195878 25.0365454247224, 121.62399714962 25.0363917662432, 121.623984581228 25.0363114774492, 121.623999536024 25.0360906469581, 121.624009081638 25.0359349698718, 121.623993172281 25.0357694906782, 121.623968990059 25.0356587867028, 121.623923807486 25.0355152173359, 121.623840442456 25.0354010536231, 121.623718258596 25.0352776644402, 121.623515891578 25.0349887948865, 121.62352400535 25.034929838891, 121.623551051256 25.0348344137234, 121.62367832611 25.0346536534591, 121.623792873479 25.0345386240614, 121.623872420263 25.0344751992846, 121.623946876053 25.0344377209921, 121.624125379036 25.0343843864791, 121.62440602009 25.034344890095, 121.624464566523 25.0343324934171, 121.624511976406 25.0343019341593, 121.624558749915 25.0342635909287, 121.624591205003 25.0342186168987, 121.624627160149 25.0341361644675, 121.624646251377 25.0340681267553, 121.624645615003 25.0340049900309, 121.624599477868 25.0338594006569, 121.624518658336 25.0336143488451, 121.624472203014 25.0334520377873, 121.624451202663 25.0333912071224, 121.624435611493 25.0332871318391, 121.624444202546 25.0331703713746, 121.624457566406 25.0330968554695, 121.624459793716 25.0329901852545, 121.624459793716 25.0329169575396, 121.624448975353 25.0328757308936, 121.624430838686 25.0328437297811, 121.624385019739 25.032804809498, 121.624329655177 25.0327834754116, 121.62425933582 25.0327707902774, 121.624205562194 25.0327699253818, 121.624083378334 25.0326958326395, 121.624016240848 25.0326678676628, 121.623798919035 25.0326228930478, 121.623734327046 25.0325983876417, 121.623689780847 25.0325499534128, 121.623674826052 25.0324770137344, 121.623677371549 25.0323798568623, 121.623679917046 25.0322446443513, 121.623703462894 25.0321711278916, 121.623763282076 25.0320552312656, 121.623800191783 25.0320333204484, 121.623822464883 25.0320330321481, 121.623856192719 25.0320909804853, 121.623979967515 25.0321924620845, 121.624121878977 25.0322319591614, 121.624188698276 25.0322186973706, 121.624284154417 25.0321838130878, 121.62430706389 25.0321959216829, 121.624293381844 25.0322106249754, 121.624153697691 25.0322541582429, 121.624020695468 25.0322207154693, 121.623953557983 25.0321872726865, 121.623894375176 25.0321417212954, 121.623855874532 25.0321270179946, 121.623774418625 25.0321402797954, 121.623727645116 25.0322504103463, 121.623711099385 25.032512186233, 121.623758191081 25.0325678279519, 121.623824055819 25.032587432282, 121.623978376579 25.0325845492925, 121.624050286872 25.0326537410227, 121.624167379738 25.0327318699711, 121.624262835879 25.0327555104549, 121.624359882955 25.0327748264566, 121.624416202078 25.0328007733197, 121.624466157458 25.0328454595712, 121.624485248686 25.0328982181568, 121.624498612546 25.0330037352599, 121.624503385353 25.0331611458517, 121.624489385119 25.0332856903525, 121.624493839739 25.0333848645869, 121.624506567224 25.0334791376947, 121.62455811354 25.0336278987816, 121.624637660324 25.0338170211433, 121.62465929705 25.033881311148, 121.624672342722 25.0339536734, 121.624678388278 25.0340358376583, 121.624664069857 25.0341298219705, 121.624642433131 25.0342088148644, 121.624568295529 25.0343016458644, 121.624515476464 25.0343518091705, 121.624412065645 25.0343829450054, 121.624161970557 25.0344034139296, 121.624065559855 25.0344264775021, 121.623915693714 25.0344812534693, 121.623814828392 25.0345432367711, 121.623699326461 25.034650482224, 121.623582233596 25.0348168278082, 121.623560915057 25.0348747748305, 121.623552005818 25.034950307724, 121.623565369677 25.0350385254719, 121.623660825818 25.0351849783252, 121.623786112003 25.0353241516177, 121.623904795804 25.0354420632013, 121.623962069489 25.0355292715736, 121.624004070191 25.0356603002344, 121.624018706799 25.0357551481766, 121.624033661594 25.0359134201114, 121.624036525278 25.0360085561488, 121.624025706916 25.0361264670746, 121.624016161302 25.0361800891207, 121.624005661126 25.0362985764621, 121.62402188867 25.0364089915701, 121.624071844051 25.0365658212133, 121.624110344694 25.0366500017479, 121.624135163291 25.0367039118545, 121.624160936449 25.0368552636312, 121.624195300659 25.0369348313476, 121.624164436507 25.0370164170321, 121.62411193563 25.037158543201, 121.624079241901 25.0372012098483, 121.623975194708 25.0372102909234, 121.623891193304 25.0372107233555, 121.623792873479 25.0372381827926, 121.622643581546 25.0382608802829, 121.622655513563 25.0382950421238, 121.622718037335 25.0383192581065, 121.623237318741 25.0383140689678, 121.623344229618 25.0383646630612, 121.623394821373 25.0384100679991, 121.623473095408 25.0385834714643, 121.623553905259 25.0386470406446, 121.623687871725 25.0387339560684, 121.623827714971 25.0387875769746, 121.623848238041 25.0388148198455, 121.623844897076 25.0388645488798, 121.623291475183 25.0393581388544)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0153000600'=='0100020200' || '0153000600'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
