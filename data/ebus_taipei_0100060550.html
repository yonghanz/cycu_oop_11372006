
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492038</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100060550">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100060550">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100060550" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0100060550" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100060550" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0100060550',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="SN3KmX7112WzmNhcXNmRAHyMe60dnbqsmtUWKuvRgB5zmiRTmqII7HkA5fkXZvrSbZfpIb88xOMa2c4UJbm61Tty54c1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">605快 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0100060550" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0100060550" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">汐止 - 臺北車站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0630 - 1800 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0630 0640 0700 0730 0745 1630 1700 1730 1800<br>
[假日]<br /> 例假日停駛<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">潭美公園-南京公寓(捷運南京三民)</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">兩段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">中興巴士汐止站:02-2642-2625</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 臺北車站</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 汐止</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">東方山河社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2214900450" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.075533" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.6654731" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">鄉長路一段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217100740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.074168" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6650401" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">國泰醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2216600340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07167" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.66475" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">汐止</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.069176" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.661689" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">汐止公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.067906" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.659997" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">潭美公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147000360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059641" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5856823" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">南京舊宗路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.056334" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5796659" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">麥帥一橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146901250" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.055438" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5777159" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">南京公寓(捷運南京三民)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056900061" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051455" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5666502" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">南京三民路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051543" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5610057" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">南京寧安街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1058000060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051659" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5555163" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">南京敦化路口(小巨蛋)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1059500060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051793" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5495209" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">捷運南京復興站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1054700060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051885" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5444647" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">南京龍江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048700460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051963" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5407049" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">南京建國路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048700360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052089" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5372713" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">捷運松江南京站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048600160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052114" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.533302" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">南京吉林路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045700260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052112" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5303325" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">南京林森路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052167" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5257174" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">捷運中山站(志仁高中)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1035200160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052867" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.519866" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">圓環(南京)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1035000260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053538" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5168987" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">圓環(重慶)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1035000340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053017" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5140239" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">後車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1034900140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.050503" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5134928" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">臺北車站(重慶)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1004400240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.046565" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5132058" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">重慶南路一段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1000500041" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.044691" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5131649" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">博物館(館前)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1004700200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.044177" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5150573" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">臺北車站(忠孝)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1004100720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.046563" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5156894" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">行政院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1004100500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.046578" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5202398" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">中山市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1044400000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.050519" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.522081" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">南京林森路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045400120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052069" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5250604" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">南京吉林路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045700220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052007" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.529855" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">捷運松江南京站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1045700420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051969" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5327305" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">南京建國路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048700320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051938" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5362725" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">南京龍江路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1048700420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051888" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5401689" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">捷運南京復興站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1055000120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051804" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5435614" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">南京敦化路口(小巨蛋)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1055100220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051703" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5483534" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">南京寧安街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1058000020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051548" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5547373" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">南京三民路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056400120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051445" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5604478" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">南京公寓(捷運南京三民)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056900021" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051255" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5665356" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">麥帥一橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147000620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054593" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.577219" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">南京舊宗路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.056026" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5798105" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">潭美公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146901020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059184" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5857387" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">汐止國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2214400120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.067099" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.658766" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">汐止</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217400020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.06908" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.66202" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">國泰醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217400400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.071657" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6649754" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">鄉長路一段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217100700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.074002" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.665182" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">東方山河社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2214900410" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.075848" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6657594" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0100060550";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 28;
        var existBackNum = 18;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0100060550',
                        url: './StopStatusRecent3OfRoute?routeid=0100060550&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0100060550',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0100060550',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0100060550');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0100060550","Name":"605快","BeginStop":"汐止","GoDirStops":[{"UniStopId":"2214900450","Name":"東方山河社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6654731,"Latitude":25.075533,"PublicId":"2214900450"},{"UniStopId":"2217100740","Name":"鄉長路一段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6650401,"Latitude":25.074168,"PublicId":"2217100740"},{"UniStopId":"2216600340","Name":"國泰醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.66475,"Latitude":25.07167,"PublicId":"2216600340"},{"UniStopId":"2217400060","Name":"汐止","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.661689,"Latitude":25.069176,"PublicId":"2217400060"},{"UniStopId":"2217400160","Name":"汐止公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.659997,"Latitude":25.067906,"PublicId":"2217400160"},{"UniStopId":"1147000360","Name":"潭美公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5856823,"Latitude":25.059641,"PublicId":"1147000360"},{"UniStopId":"1146900960","Name":"南京舊宗路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5796659,"Latitude":25.056334,"PublicId":"1146900960"},{"UniStopId":"1146901250","Name":"麥帥一橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5777159,"Latitude":25.055438,"PublicId":"1146901250"},{"UniStopId":"1056900061","Name":"南京公寓(捷運南京三民)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5666502,"Latitude":25.051455,"PublicId":"1056900061"},{"UniStopId":"1056400160","Name":"南京三民路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5610057,"Latitude":25.051543,"PublicId":"1056400160"},{"UniStopId":"1058000060","Name":"南京寧安街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5555163,"Latitude":25.051659,"PublicId":"1058000060"},{"UniStopId":"1059500060","Name":"南京敦化路口(小巨蛋)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5495209,"Latitude":25.051793,"PublicId":"1059500060"},{"UniStopId":"1054700060","Name":"捷運南京復興站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5444647,"Latitude":25.051885,"PublicId":"1054700060"},{"UniStopId":"1048700460","Name":"南京龍江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5407049,"Latitude":25.051963,"PublicId":"1048700460"},{"UniStopId":"1048700360","Name":"南京建國路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5372713,"Latitude":25.052089,"PublicId":"1048700360"},{"UniStopId":"1048600160","Name":"捷運松江南京站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.533302,"Latitude":25.052114,"PublicId":"1048600160"},{"UniStopId":"1045700260","Name":"南京吉林路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5303325,"Latitude":25.052112,"PublicId":"1045700260"},{"UniStopId":"1045400160","Name":"南京林森路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5257174,"Latitude":25.052167,"PublicId":"1045400160"},{"UniStopId":"1035200160","Name":"捷運中山站(志仁高中)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.519866,"Latitude":25.052867,"PublicId":"1035200160"},{"UniStopId":"1035000260","Name":"圓環(南京)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5168987,"Latitude":25.053538,"PublicId":"1035000260"},{"UniStopId":"1035000340","Name":"圓環(重慶)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5140239,"Latitude":25.053017,"PublicId":"1035000340"},{"UniStopId":"1034900140","Name":"後車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5134928,"Latitude":25.050503,"PublicId":"1034900140"},{"UniStopId":"1004400240","Name":"臺北車站(重慶)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5132058,"Latitude":25.046565,"PublicId":"1004400240"},{"UniStopId":"1000500041","Name":"重慶南路一段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5131649,"Latitude":25.044691,"PublicId":"1000500041"},{"UniStopId":"1004700200","Name":"博物館(館前)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5150573,"Latitude":25.044177,"PublicId":"1004700200"},{"UniStopId":"1004100720","Name":"臺北車站(忠孝)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5156894,"Latitude":25.046563,"PublicId":"1004100720"},{"UniStopId":"1004100500","Name":"行政院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5202398,"Latitude":25.046578,"PublicId":"1004100500"},{"UniStopId":"1044400000","Name":"中山市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.522081,"Latitude":25.050519,"PublicId":"1044400000"}],"LastStop":"臺北車站","BackDirStops":[{"UniStopId":"1045400120","Name":"南京林森路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5250604,"Latitude":25.052069,"PublicId":"1045400120"},{"UniStopId":"1045700220","Name":"南京吉林路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.529855,"Latitude":25.052007,"PublicId":"1045700220"},{"UniStopId":"1045700420","Name":"捷運松江南京站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5327305,"Latitude":25.051969,"PublicId":"1045700420"},{"UniStopId":"1048700320","Name":"南京建國路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5362725,"Latitude":25.051938,"PublicId":"1048700320"},{"UniStopId":"1048700420","Name":"南京龍江路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5401689,"Latitude":25.051888,"PublicId":"1048700420"},{"UniStopId":"1055000120","Name":"捷運南京復興站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5435614,"Latitude":25.051804,"PublicId":"1055000120"},{"UniStopId":"1055100220","Name":"南京敦化路口(小巨蛋)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5483534,"Latitude":25.051703,"PublicId":"1055100220"},{"UniStopId":"1058000020","Name":"南京寧安街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5547373,"Latitude":25.051548,"PublicId":"1058000020"},{"UniStopId":"1056400120","Name":"南京三民路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5604478,"Latitude":25.051445,"PublicId":"1056400120"},{"UniStopId":"1056900021","Name":"南京公寓(捷運南京三民)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5665356,"Latitude":25.051255,"PublicId":"1056900021"},{"UniStopId":"1147000620","Name":"麥帥一橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.577219,"Latitude":25.054593,"PublicId":"1147000620"},{"UniStopId":"1146900920","Name":"南京舊宗路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5798105,"Latitude":25.056026,"PublicId":"1146900920"},{"UniStopId":"1146901020","Name":"潭美公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5857387,"Latitude":25.059184,"PublicId":"1146901020"},{"UniStopId":"2214400120","Name":"汐止國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.658766,"Latitude":25.067099,"PublicId":"2214400120"},{"UniStopId":"2217400020","Name":"汐止","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.66202,"Latitude":25.06908,"PublicId":"2217400020"},{"UniStopId":"2217400400","Name":"國泰醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6649754,"Latitude":25.071657,"PublicId":"2217400400"},{"UniStopId":"2217100700","Name":"鄉長路一段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.665182,"Latitude":25.074002,"PublicId":"2217100700"},{"UniStopId":"2214900410","Name":"東方山河社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6657594,"Latitude":25.075848,"PublicId":"2214900410"}],"RouteMapUrl":"../MapOverview?nid=0100060550","RouteTracks":null,"StopDirection":null,"TicketPrice":"兩段票","BusTimeDesc":"0630 - 1800","HeadwayDesc":"班表:0630 0640 0700 0730 0745 1630 1700 1730 1800","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"例假日停駛","RouteNote":"","SegmentBuffer":"潭美公園-南京公寓(捷運南京三民)","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"中興巴士汐止站:02-2642-2625","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.665845046779 25.0765491297392, 121.665968641782 25.0764875638444, 121.665845051358 25.0762300492941, 121.665519529775 25.0755340618697, 121.665392457356 25.0752858280779, 121.665276351353 25.0749699042675, 121.665146997175 25.0746536321409, 121.665106678618 25.0745402119447, 121.66506815916 25.0743898772623, 121.665038265144 25.0741292379786, 121.665037452873 25.0737701911162, 121.665061683783 25.0736106641251, 121.66510686967 25.0733353348926, 121.66514708277 25.0732639343176, 121.665211308643 25.073161479226, 121.665198436341 25.0730503274073, 121.665206892602 25.0727059224007, 121.665187790517 25.072583971023, 121.665131870957 25.0725050077966, 121.665043898808 25.0721903832922, 121.664812872796 25.071670071977, 121.664715335817 25.0715049711613, 121.664449358514 25.0710868942961, 121.664082348674 25.0707009089508, 121.663362288524 25.0701670932805, 121.662649132005 25.0697083594428, 121.661475814766 25.0689327329881, 121.660336777608 25.068101550593, 121.659693998383 25.0676229167869, 121.659250634719 25.0674059474399, 121.658814360689 25.0672959756555, 121.658483603371 25.0672666523401, 121.657656659267 25.0672327892437, 121.656922321325 25.0672242592931, 121.656525370032 25.0677459105941, 121.656096834939 25.0683568910896, 121.655269162777 25.0695678840445, 121.655152518417 25.0697653562373, 121.655021671552 25.0700122090635, 121.654848550678 25.0702714809856, 121.654285931994 25.0712209275889, 121.65414272931 25.0714572259856, 121.653938089792 25.0719480111758, 121.653821133621 25.0723419776168, 121.653781177502 25.0726058296115, 121.653780480172 25.0729275598048, 121.653806893534 25.073175375688, 121.653855133621 25.0734323825576, 121.653901489224 25.0735935016546, 121.654020151724 25.0739297997163, 121.654157022834 25.0742437682571, 121.654250186853 25.0744173293659, 121.654455889009 25.0748174486826, 121.654634618319 25.0750959584068, 121.654887959267 25.0753128207524, 121.655054857328 25.0754232776126, 121.655240579406 25.0754836898739, 121.655351384652 25.0754910995341, 121.655434402334 25.0754800381481, 121.655514284971 25.0754537680516, 121.655590849415 25.0754117772911, 121.655665923906 25.0753536156376, 121.655721231034 25.07528357333, 121.655749472117 25.0752093976215, 121.655771004526 25.0751125928466, 121.655759475647 25.0750285928175, 121.65573459569 25.0749700470894, 121.655701385021 25.074913543941, 121.65564923556 25.0748488780689, 121.655603889009 25.0748062603518, 121.655512711207 25.0747443074136, 121.655330693103 25.0746500662757, 121.655252185776 25.074620747472, 121.655063116595 25.07456554853, 121.654693271767 25.0744742852906, 121.654406004526 25.0744075926056, 121.654085884483 25.0743365926056, 121.653629550354 25.0742408958817, 121.65316047301 25.0741571215383, 121.652647350543 25.0740705170209, 121.651540573965 25.0738822819385, 121.651047869181 25.0738093269813, 121.650774785991 25.0737897617509, 121.649722481515 25.0736201015391, 121.64850569735 25.0734240968271, 121.64777365098 25.0733007078944, 121.647077913327 25.0731871879111, 121.64634176444 25.0730441660806, 121.645722413362 25.0729257147949, 121.64451238386 25.0726922103596, 121.644472600678 25.0726762453932, 121.644329764222 25.0726070681155, 121.642126744894 25.0722540962941, 121.641397635345 25.0721388301175, 121.640813393205 25.0720213993149, 121.640039635345 25.0718213788672, 121.638999944382 25.0713959891281, 121.638561502755 25.0711708789422, 121.637629768966 25.0705816213856, 121.637008592564 25.070138190231, 121.635660250174 25.0690951466866, 121.63532 25.068866, 121.635135940479 25.0687331960858, 121.63466044961 25.0684677724087, 121.633600064126 25.0679309488539, 121.6330000125 25.0677268026607, 121.631868388362 25.0674075869064, 121.630856808621 25.067198715109, 121.629786142672 25.0670823837209, 121.629012697584 25.0670396626448, 121.626597608424 25.0668472577074, 121.624463996384 25.0666657073071, 121.623278187405 25.0665657264195, 121.618139663578 25.0661707515078, 121.616140171121 25.0659866285456, 121.615226982548 25.065888741355, 121.613634016347 25.0656993285064, 121.611239306034 25.065395807987, 121.608174902703 25.0650105576064, 121.606215678361 25.0647703153002, 121.60030693319 25.0640034698776, 121.600201124569 25.0640414305642, 121.600124440517 25.0640525301195, 121.599835240086 25.0640163842798, 121.599123844355 25.0639474449189, 121.598408835776 25.0639777082949, 121.597381218534 25.0641875231507, 121.597025182328 25.064198, 121.596802942926 25.0641864791738, 121.596473706599 25.0641094996343, 121.595827321208 25.0638608059921, 121.595584686207 25.0637657437623, 121.595164421767 25.0635815261551, 121.594524022243 25.0633074240006, 121.593585295733 25.0630136716711, 121.593422728368 25.0629712282005, 121.592040734032 25.062600716321, 121.591328924905 25.0623646242136, 121.590201653448 25.0618546153297, 121.589062507583 25.0613775414007, 121.588155669246 25.060869296598, 121.587069374559 25.0602987513877, 121.586166741248 25.0598867707449, 121.58469563867 25.0590692580019, 121.582690296983 25.057964871492, 121.581989029393 25.0575966165581, 121.581433041731 25.0572882135659, 121.579470435412 25.0562620446527, 121.578644998945 25.0558185469677, 121.578129093998 25.0555419398802, 121.57716235707 25.0550288711965, 121.576468305347 25.0545647965943, 121.574647292241 25.0535855245308, 121.572483737785 25.0524256268813, 121.57128639181 25.05176867056, 121.571161631828 25.0516976412688, 121.570651805172 25.0513964083317, 121.570434027155 25.0513369763509, 121.570139817672 25.051311169616, 121.569455627792 25.05131221102, 121.569011037348 25.0513201335461, 121.568323755649 25.0513527025308, 121.567279153741 25.0514441315996, 121.566216049846 25.0514585486391, 121.565415230676 25.0514651955529, 121.563067719288 25.0515207030165, 121.561650916024 25.0515322760716, 121.560785414246 25.0515495643403, 121.559729238487 25.0515816074053, 121.559155919245 25.051596207805, 121.55807396792 25.0516301006645, 121.557240835377 25.051643984309, 121.555119311941 25.0516662518864, 121.553702342768 25.0517223764436, 121.552842301204 25.0517340097104, 121.551136875733 25.0517761380809, 121.549419697291 25.0517924346023, 121.548777096929 25.0518105784022, 121.547568796784 25.0518287803263, 121.546750787659 25.0518576433603, 121.545434709989 25.0518885580868, 121.543889208447 25.0519259181858, 121.543444439839 25.0519402464415, 121.542332545581 25.0519773879778, 121.542060722305 25.0519684333871, 121.540472568179 25.0520037780329, 121.539750300797 25.0520133099936, 121.538811198598 25.0520279360675, 121.53703647725 25.0520708840744, 121.536564161247 25.0521077014609, 121.534819887931 25.0520946936834, 121.532874056055 25.0520952696322, 121.532205891973 25.0521382174128, 121.532054982323 25.0521356666147, 121.531499126381 25.0521335680696, 121.530579900678 25.0521556326493, 121.530098053569 25.0521354530752, 121.529303890378 25.0521328633467, 121.528785871045 25.0521679716788, 121.527834460948 25.0521672502207, 121.527557713655 25.0521728709086, 121.525412782218 25.052184227508, 121.523581681787 25.0522616958902, 121.522656331897 25.0522953640001, 121.522414702155 25.0523168866967, 121.521183344632 25.0525379600126, 121.520282288634 25.0527073485733, 121.51927514589 25.0529517850925, 121.517637718379 25.0533632993695, 121.516152198028 25.0537224851544, 121.515821358123 25.0538033969017, 121.515228958863 25.0539178428818, 121.515090148168 25.0539702853656, 121.51496281307 25.0540769220419, 121.514840441738 25.0541643817052, 121.514747425322 25.0541796377719, 121.51463088738 25.0541852904939, 121.514518391121 25.0541588452011, 121.514409414234 25.0541069508836, 121.514300693103 25.0541072146497, 121.514315528879 25.0540052038918, 121.514222750862 25.0535452621904, 121.514180875431 25.0534185327155, 121.514020599598 25.0526830993365, 121.513973964546 25.0523305341281, 121.513865288793 25.0516137159629, 121.51360653214 25.050667623437, 121.513297346552 25.049561296454, 121.513353739772 25.0493639177856, 121.513349416529 25.0492835081612, 121.513336203479 25.0482918827929, 121.513333944287 25.0480568936767, 121.51330244152 25.0477271449366, 121.513306494944 25.0475980349139, 121.513247 25.046246, 121.513242512822 25.0460106872584, 121.513228973773 25.0451710617393, 121.513206804336 25.0440632797024, 121.513205240086 25.0434615971231, 121.514067802839 25.0434456504327, 121.51501006681 25.0434049403342, 121.514998817672 25.0446563414216, 121.514984619668 25.0451445903006, 121.515031817672 25.0467371309352, 121.515191084914 25.046703378079, 121.517335206636 25.0461505688362, 121.51826039181 25.0459140344119, 121.519475817672 25.0455843765008, 121.519607728064 25.0455555779513, 121.519733817672 25.0455492865375, 121.519813490592 25.0457570324585, 121.520377422414 25.04703185136, 121.520886058673 25.0479717913202, 121.521289072414 25.0489135226339, 121.521694771342 25.0498115820407, 121.522038821873 25.0505454898907, 121.522430835889 25.0513591393374, 121.522485711207 25.0514955562899, 121.522631519828 25.0519941015564, 121.522657790517 25.0521588067792, 121.523556865517 25.0521164203274, 121.525401500258 25.0520379730178, 121.527052865681 25.0520136881785, 121.527580702155 25.0520023971811, 121.528377554034 25.0520026735467, 121.529003486462 25.0519998374035, 121.530518356897 25.0519711246433, 121.532046638046 25.0519468248103, 121.532424921541 25.0519602625512, 121.532875932597 25.0519516256583, 121.533179516601 25.0519158177806, 121.533819534805 25.0519102285314, 121.5347847 25.0519367951571, 121.536568787997 25.0519236773755, 121.538451184914 25.0518982956899, 121.540444127435 25.0518169966951, 121.542065701268 25.0518336375728, 121.542807000753 25.0518005346897, 121.543483285023 25.05176132092, 121.543900041508 25.0517415020365, 121.54539287847 25.0517104547518, 121.546892033296 25.0516802529718, 121.54755169435 25.05163295567, 121.549160306897 25.0516415680781, 121.550242559483 25.0516243748083, 121.552726079201 25.0515901013309, 121.553715673707 25.051579045387, 121.555118002992 25.0515173126788, 121.556387877147 25.0514929895017, 121.557275452573 25.0514774701639, 121.55873793319 25.0514395108922, 121.559766128011 25.0514183935861, 121.560802758915 25.0514128929979, 121.562489514418 25.0513607591309, 121.563748150787 25.0513232036857, 121.565374747 25.051265125686, 121.566157824259 25.0512441294397, 121.567367680682 25.0512696456605, 121.569461010345 25.0512532484758, 121.570383006646 25.0512554851619, 121.570627829177 25.0512755283773, 121.570877768966 25.0513519410339, 121.571271310345 25.0515855095831, 121.572409118966 25.0521963859144, 121.574135 25.053113, 121.57536514762 25.0537064063701, 121.576310404363 25.0541880550262, 121.577234275923 25.0546788360554, 121.578556641511 25.0553594268225, 121.5798715761 25.0560555605113, 121.58204559104 25.0572592411144, 121.582753134032 25.0576381250371, 121.582831026293 25.057692365591, 121.584832649849 25.0587572795492, 121.586362449621 25.0595782525979, 121.58710069569 25.0600176327052, 121.589289979427 25.0612766759982, 121.591103647798 25.062179765301, 121.591622592488 25.062379214838, 121.592172806161 25.0625772968285, 121.59350417399 25.0629321891363, 121.593780586714 25.0629988403498, 121.593898414458 25.0630186576393, 121.595204973288 25.0632654787517, 121.596753583127 25.0634898241894, 121.597507116182 25.0636035308668, 121.598257047743 25.0636588980254, 121.59915793319 25.0637256085964, 121.599693320364 25.0638481893329, 121.606214537957 25.0646588323416, 121.608263586638 25.0649212384113, 121.613834422737 25.0656055168219, 121.61516828885 25.0657710079715, 121.616762893534 25.0659473839264, 121.618158717066 25.0660729448623, 121.620261080095 25.066247293183, 121.621250887093 25.0663230674665, 121.621714388877 25.0663361520481, 121.624471697442 25.0665545455199, 121.630003355603 25.0669984127986, 121.63090617569 25.0671099526302, 121.631048887931 25.067137128042, 121.631911809914 25.0672998151709, 121.632315553719 25.0673924924072, 121.633239716001 25.0676764539231, 121.633921829655 25.0679178212337, 121.634587313089 25.0682572696334, 121.635449702155 25.0687610881311, 121.636787650514 25.0696516064223, 121.636902148137 25.0697613315967, 121.638057322349 25.0706996203601, 121.639256624903 25.0713653032966, 121.639744929741 25.0715830550252, 121.64013728319 25.07171055827, 121.641218678404 25.0719810402349, 121.641881996552 25.0720898301028, 121.642308328714 25.0721095527419, 121.643360168946 25.0722784459314, 121.644447494167 25.0723966998189, 121.645288507328 25.0724027326461, 121.645516428747 25.0724202486279, 121.645918115517 25.0724568555414, 121.646144138147 25.0724776425905, 121.646798715733 25.0724700506489, 121.647710946767 25.0725488376711, 121.648128159698 25.0726262166542, 121.648926937716 25.0728825739891, 121.649754354044 25.0731684001096, 121.649961430104 25.0732287846843, 121.65031639416 25.0733130492619, 121.650465067187 25.0733451647266, 121.650684 25.073381, 121.651539840323 25.0735063899576, 121.652307790517 25.0736028305872, 121.652473857328 25.0735849245636, 121.652581617241 25.0735822819395, 121.652791870905 25.0735514950389, 121.652967471121 25.0735224228798, 121.653119773491 25.0734798742083, 121.653312621767 25.073393072154, 121.653407021774 25.0733096652692, 121.653468739353 25.0732244333611, 121.653513825431 25.073101124963, 121.653585487931 25.0728258184677, 121.653613632397 25.072620901, 121.653623870719 25.072550846651, 121.653660010032 25.0724802557615, 121.653732406788 25.0722006142108, 121.653754759698 25.0721431452198, 121.653802902586 25.0720698362851, 121.654059048087 25.0714324020008, 121.654185560243 25.0711485320079, 121.65473971297 25.0701526132679, 121.654893930328 25.0699306923188, 121.655096287103 25.0697145127969, 121.655191578305 25.0695537187497, 121.656041401481 25.0683063093039, 121.656475442845 25.0676927980937, 121.656845124925 25.0672007870334, 121.656897143837 25.0670794893681, 121.657741076072 25.0670879586524, 121.658502616919 25.0670969750858, 121.658857847999 25.0671232557301, 121.659314350139 25.0672173307716, 121.65953513012 25.0673409239241, 121.659795727068 25.0674932815498, 121.660443058114 25.0679399318719, 121.661598235857 25.0687896416183, 121.662335996812 25.0693419342946, 121.663487725294 25.0700263799001, 121.66420591708 25.0706237574377, 121.664586373769 25.0710346483578, 121.664892100647 25.0714995816012, 121.665152452054 25.0720770684519, 121.665268588536 25.0724767435267, 121.665273279967 25.0725868302616, 121.665304037871 25.0727022564418, 121.665294206928 25.0730345327792, 121.665289895509 25.0731785719805, 121.665209500167 25.0733085032088, 121.665177614914 25.0733846009655, 121.665125227414 25.0736528552229, 121.665111925349 25.0737989122379, 121.665112461756 25.0741392821902, 121.665151385185 25.074393383541, 121.665186100117 25.0745269543602, 121.665235178922 25.074657803308, 121.665355931973 25.0749569111799, 121.665477022765 25.0752652695986, 121.665605548103 25.0755321865329, 121.665921935388 25.0762248314269, 121.666075632941 25.0765368084343, 121.665890872382 25.0766194850769)","wkt0":"LINESTRING (121.665499490871 25.0755280827305, 121.665396414867 25.0752261025773, 121.665199295294 25.0747915385956, 121.665146997175 25.0746536321409, 121.665106678618 25.0745402119447, 121.66506815916 25.0743898772623, 121.665038265144 25.0741292379786, 121.665037452873 25.0737701911162, 121.665061683783 25.0736106641251, 121.66510686967 25.0733353348926, 121.66514708277 25.0732639343176, 121.665211308643 25.073161479226, 121.665198436341 25.0730503274073, 121.665206892602 25.0727059224007, 121.665187790517 25.072583971023, 121.665131870957 25.0725050077966, 121.665043898808 25.0721903832922, 121.664812872796 25.071670071977, 121.664715335817 25.0715049711613, 121.664449358514 25.0710868942961, 121.664082348674 25.0707009089508, 121.663362288524 25.0701670932805, 121.662649132005 25.0697083594428, 121.661475814766 25.0689327329881, 121.660336777608 25.068101550593, 121.659693998383 25.0676229167869, 121.659250634719 25.0674059474399, 121.658814360689 25.0672959756555, 121.658483603371 25.0672666523401, 121.657656659267 25.0672327892437, 121.656922321325 25.0672242592931, 121.656525370032 25.0677459105941, 121.656075172889 25.0683536208491, 121.655247500727 25.069564613804, 121.655152518417 25.0697653562373, 121.655021671552 25.0700122090635, 121.654848550678 25.0702714809856, 121.654285931994 25.0712209275889, 121.65414272931 25.0714572259856, 121.653938089792 25.0719480111758, 121.653821133621 25.0723419776168, 121.653781177502 25.0726058296115, 121.653780480172 25.0729275598048, 121.653806893534 25.073175375688, 121.653855133621 25.0734323825576, 121.653901489224 25.0735935016546, 121.654020151724 25.0739297997163, 121.654157022834 25.0742437682571, 121.654250186853 25.0744173293659, 121.654455889009 25.0748174486826, 121.654634618319 25.0750959584068, 121.654868703759 25.0753375283939, 121.65503560182 25.0754479852541, 121.655174789755 25.0755108198181, 121.655266416133 25.0755350673374, 121.655385193814 25.0755372048131, 121.65546913384 25.0755215023686, 121.655568085755 25.0754793540631, 121.65569378143 25.0753688963662, 121.655741920199 25.0752860530281, 121.655768129085 25.0752036940985, 121.655771004526 25.0751125928466, 121.655747268952 25.0750288023053, 121.655708757936 25.0749512878573, 121.655668642295 25.0749052636305, 121.655598573642 25.0748451898769, 121.655509784356 25.074790445221, 121.655385693306 25.0747308558774, 121.655190998728 25.0746693286386, 121.655063116595 25.07456554853, 121.654693271767 25.0744742852906, 121.654406004526 25.0744075926056, 121.654085884483 25.0743365926056, 121.653629550354 25.0742408958817, 121.65316047301 25.0741571215383, 121.652647350543 25.0740705170209, 121.651540573965 25.0738822819385, 121.651047869181 25.0738093269813, 121.650774785991 25.0737897617509, 121.649722481515 25.0736201015391, 121.64850569735 25.0734240968271, 121.64777365098 25.0733007078944, 121.647077913327 25.0731871879111, 121.64634176444 25.0730441660806, 121.645722413362 25.0729257147949, 121.64451238386 25.0726922103596, 121.644472600678 25.0726762453932, 121.644329764222 25.0726070681155, 121.642126744894 25.0722540962941, 121.641397635345 25.0721388301175, 121.640813393205 25.0720213993149, 121.640039635345 25.0718213788672, 121.638999944382 25.0713959891281, 121.638561502755 25.0711708789422, 121.637629768966 25.0705816213856, 121.637008592564 25.070138190231, 121.635660250174 25.0690951466866, 121.63532 25.068866, 121.635135940479 25.0687331960858, 121.63466044961 25.0684677724087, 121.633600064126 25.0679309488539, 121.6330000125 25.0677268026607, 121.631868388362 25.0674075869064, 121.630856808621 25.067198715109, 121.629786142672 25.0670823837209, 121.629012697584 25.0670396626448, 121.626597608424 25.0668472577074, 121.624463996384 25.0666657073071, 121.623278187405 25.0665657264195, 121.618139663578 25.0661707515078, 121.616140171121 25.0659866285456, 121.615226982548 25.065888741355, 121.613634016347 25.0656993285064, 121.611239306034 25.065395807987, 121.608174902703 25.0650105576064, 121.606215678361 25.0647703153002, 121.60030693319 25.0640034698776, 121.600201124569 25.0640414305642, 121.600124440517 25.0640525301195, 121.599835240086 25.0640163842798, 121.599123844355 25.0639474449189, 121.598408835776 25.0639777082949, 121.597381218534 25.0641875231507, 121.597025182328 25.064198, 121.596802942926 25.0641864791738, 121.596473706599 25.0641094996343, 121.595827321208 25.0638608059921, 121.595584686207 25.0637657437623, 121.595164421767 25.0635815261551, 121.594524022243 25.0633074240006, 121.593585295733 25.0630136716711, 121.593422728368 25.0629712282005, 121.592040734032 25.062600716321, 121.591328924905 25.0623646242136, 121.590201653448 25.0618546153297, 121.589062507583 25.0613775414007, 121.588155669246 25.060869296598, 121.587069374559 25.0602987513877, 121.586166741248 25.0598867707449, 121.58469563867 25.0590692580019, 121.582690296983 25.057964871492, 121.581989029393 25.0575966165581, 121.581433041731 25.0572882135659, 121.579470435412 25.0562620446527, 121.578644998945 25.0558185469677, 121.578129093998 25.0555419398802, 121.57716235707 25.0550288711965, 121.576468305347 25.0545647965943, 121.574647292241 25.0535855245308, 121.572483737785 25.0524256268813, 121.57128639181 25.05176867056, 121.571161631828 25.0516976412688, 121.570651805172 25.0513964083317, 121.570434027155 25.0513369763509, 121.570139817672 25.051311169616, 121.569455627792 25.05131221102, 121.569011037348 25.0513201335461, 121.568323755649 25.0513527025308, 121.567279153741 25.0514441315996, 121.566216049846 25.0514585486391, 121.565415230676 25.0514651955529, 121.563067719288 25.0515207030165, 121.561650916024 25.0515322760716, 121.560785414246 25.0515495643403, 121.559729238487 25.0515816074053, 121.559155919245 25.051596207805, 121.55807396792 25.0516301006645, 121.557232079805 25.0516101832258, 121.555119311941 25.0516662518864, 121.553702342768 25.0517223764436, 121.552842301204 25.0517340097104, 121.551139851107 25.0517477975521, 121.549419697291 25.0517924346023, 121.548777096929 25.0518105784022, 121.547568796784 25.0518287803263, 121.54547231333 25.051868936796, 121.543894431446 25.0518970410835, 121.540590507244 25.0519750546753, 121.538809059097 25.0520182449482, 121.537034337749 25.0520611929551, 121.534765865534 25.0520806415631, 121.532820033658 25.0520812175119, 121.530764314671 25.052114606815, 121.529303890378 25.0521328633467, 121.528785871045 25.0521679716788, 121.527834460948 25.0521672502207, 121.527557713655 25.0521728709086, 121.525412782218 25.052184227508, 121.523581681787 25.0522616958902, 121.522656331897 25.0522953640001, 121.522414702155 25.0523168866967, 121.521183344632 25.0525379600126, 121.520282288634 25.0527073485733, 121.51927514589 25.0529517850925, 121.517637718379 25.0533632993695, 121.516152198028 25.0537224851544, 121.515821358123 25.0538033969017, 121.515228958863 25.0539178428818, 121.515090148168 25.0539702853656, 121.51496281307 25.0540769220419, 121.514840441738 25.0541643817052, 121.514747425322 25.0541796377719, 121.51463088738 25.0541852904939, 121.514518391121 25.0541588452011, 121.514409414234 25.0541069508836, 121.514300693103 25.0541072146497, 121.514315528879 25.0540052038918, 121.514222750862 25.0535452621904, 121.514180875431 25.0534185327155, 121.514020599598 25.0526830993365, 121.513973964546 25.0523305341281, 121.513865288793 25.0516137159629, 121.51360653214 25.050667623437, 121.513297346552 25.049561296454, 121.513353739772 25.0493639177856, 121.513349416529 25.0492835081612, 121.513336203479 25.0482918827929, 121.513333944287 25.0480568936767, 121.51330244152 25.0477271449366, 121.513306494944 25.0475980349139, 121.513247 25.046246, 121.513242512822 25.0460106872584, 121.513228973773 25.0451710617393, 121.513206804336 25.0440632797024, 121.513205240086 25.0434615971231, 121.514067802839 25.0434456504327, 121.51501006681 25.0434049403342, 121.514998817672 25.0446563414216, 121.514984619668 25.0451445903006, 121.515031817672 25.0467371309352, 121.515191084914 25.046703378079, 121.517335206636 25.0461505688362, 121.51826039181 25.0459140344119, 121.519475817672 25.0455843765008, 121.519607728064 25.0455555779513, 121.519733817672 25.0455492865375, 121.519813490592 25.0457570324585, 121.520162018161 25.0465449963327, 121.520377422414 25.04703185136, 121.520886058673 25.0479717913202, 121.521289072414 25.0489135226339, 121.521694771342 25.0498115820407, 121.52205807435 25.0505033938852)","wkt1":"LINESTRING (121.52205807435 25.0505033938852, 121.522430835889 25.0513591393374, 121.522485711207 25.0514955562899, 121.522631519828 25.0519941015564, 121.522660955165 25.0522163634835, 121.52339373421 25.0521746917152, 121.524668876722 25.0521272052643, 121.5263569429 25.0520826261304, 121.528032172073 25.0520583983334, 121.529365081109 25.0520613056693, 121.531637231022 25.052044830765, 121.53549047207 25.0519973442638, 121.537793377307 25.0519588220376, 121.539414584084 25.0519362901638, 121.539771345852 25.051937501555, 121.541270066204 25.0518754783118, 121.542513116204 25.0518531887011, 121.542888598605 25.0518725709715, 121.543666307167 25.0518619107231, 121.545128656005 25.0517834125022, 121.545861435049 25.0517756595888, 121.547261738362 25.0517524008456, 121.54750671121 25.0517688757891, 121.549433331734 25.0517087906901, 121.552704628549 25.0516312614865, 121.553485546363 25.0516167247554, 121.553846052257 25.051627385025, 121.555214263057 25.0515798983621, 121.557077548743 25.0515268951158, 121.55854002936 25.0514889358441, 121.559325313959 25.05149073968, 121.560103022522 25.051481048515, 121.56181569296 25.0514267779768, 121.563601594978 25.0513978257285, 121.56487731869 25.0512852868178, 121.566157824259 25.0512441294397, 121.567367680682 25.0512696456605, 121.569461010345 25.0512532484758, 121.570383006646 25.0512554851619, 121.570627829177 25.0512755283773, 121.570877768966 25.0513519410339, 121.571271310345 25.0515855095831, 121.572409118966 25.0521963859144, 121.574135 25.053113, 121.57536514762 25.0537064063701, 121.576310404363 25.0541880550262, 121.577234275923 25.0546788360554, 121.578556641511 25.0553594268225, 121.5798715761 25.0560555605113, 121.58204559104 25.0572592411144, 121.582753134032 25.0576381250371, 121.582831026293 25.057692365591, 121.584832649849 25.0587572795492, 121.586362449621 25.0595782525979, 121.58710069569 25.0600176327052, 121.589289979427 25.0612766759982, 121.591103647798 25.062179765301, 121.591622592488 25.062379214838, 121.592172806161 25.0625772968285, 121.59350417399 25.0629321891363, 121.593780586714 25.0629988403498, 121.593898414458 25.0630186576393, 121.595204973288 25.0632654787517, 121.596753583127 25.0634898241894, 121.597507116182 25.0636035308668, 121.598257047743 25.0636588980254, 121.59915793319 25.0637256085964, 121.599693320364 25.0638481893329, 121.606214537957 25.0646588323416, 121.608263586638 25.0649212384113, 121.613834422737 25.0656055168219, 121.61516828885 25.0657710079715, 121.616762893534 25.0659473839264, 121.618158717066 25.0660729448623, 121.620261080095 25.066247293183, 121.621250887093 25.0663230674665, 121.621714388877 25.0663361520481, 121.624471697442 25.0665545455199, 121.630003355603 25.0669984127986, 121.63090617569 25.0671099526302, 121.631048887931 25.067137128042, 121.631911809914 25.0672998151709, 121.632315553719 25.0673924924072, 121.633239716001 25.0676764539231, 121.633921829655 25.0679178212337, 121.634587313089 25.0682572696334, 121.635449702155 25.0687610881311, 121.636787650514 25.0696516064223, 121.636902148137 25.0697613315967, 121.638057322349 25.0706996203601, 121.639256624903 25.0713653032966, 121.639744929741 25.0715830550252, 121.64013728319 25.07171055827, 121.641218678404 25.0719810402349, 121.641881996552 25.0720898301028, 121.642308328714 25.0721095527419, 121.643360168946 25.0722784459314, 121.644447494167 25.0723966998189, 121.645288507328 25.0724027326461, 121.645516428747 25.0724202486279, 121.645918115517 25.0724568555414, 121.646144138147 25.0724776425905, 121.646798715733 25.0724700506489, 121.647710946767 25.0725488376711, 121.648128159698 25.0726262166542, 121.648926937716 25.0728825739891, 121.649754354044 25.0731684001096, 121.649961430104 25.0732287846843, 121.65031639416 25.0733130492619, 121.650465067187 25.0733451647266, 121.650684 25.073381, 121.651539840323 25.0735063899576, 121.652307790517 25.0736028305872, 121.652473857328 25.0735849245636, 121.652581617241 25.0735822819395, 121.652791870905 25.0735514950389, 121.652967471121 25.0735224228798, 121.653119773491 25.0734798742083, 121.653312621767 25.073393072154, 121.653407021774 25.0733096652692, 121.653468739353 25.0732244333611, 121.653513825431 25.073101124963, 121.653585487931 25.0728258184677, 121.653613632397 25.072620901, 121.653623870719 25.072550846651, 121.653660010032 25.0724802557615, 121.653732406788 25.0722006142108, 121.653754759698 25.0721431452198, 121.653802902586 25.0720698362851, 121.654059048087 25.0714324020008, 121.654185560243 25.0711485320079, 121.65473971297 25.0701526132679, 121.654893930328 25.0699306923188, 121.655096287103 25.0697145127969, 121.655191578305 25.0695537187497, 121.656041401481 25.0683063093039, 121.656475442845 25.0676927980937, 121.656845124925 25.0672007870334, 121.656897143837 25.0670794893681, 121.657741076072 25.0670879586524, 121.658502616919 25.0670969750858, 121.658857847999 25.0671232557301, 121.659314350139 25.0672173307716, 121.65953513012 25.0673409239241, 121.659795727068 25.0674932815498, 121.660380259948 25.0679465870552, 121.66150857904 25.0687896416183, 121.662246339995 25.0693419342946, 121.663437617583 25.0700395413347, 121.66420591708 25.0706237574377, 121.664586373769 25.0710346483578, 121.664892100647 25.0714995816012, 121.665152452054 25.0720770684519, 121.665268588536 25.0724767435267, 121.665273279967 25.0725868302616, 121.665304037871 25.0727022564418, 121.665294206928 25.0730345327792, 121.665289895509 25.0731785719805, 121.665209500167 25.0733085032088, 121.665177614914 25.0733846009655, 121.665125227414 25.0736528552229, 121.665111925349 25.0737989122379, 121.665112461756 25.0741392821902, 121.665151385185 25.074393383541, 121.665186100117 25.0745269543602, 121.665235178922 25.074657803308, 121.665355931973 25.0749569111799, 121.665375017159 25.0750102325357, 121.665552755661 25.0755224281289, 121.665712151543 25.0758583350735)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0100060550'=='0100020200' || '0100060550'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
