
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492405</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400093910">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400093910">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400093910" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400093910" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400093910" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400093910',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="HfmbggHiTk7zbqwLOzi7aDhH6x-BUUT5Oa0fG5By-nmvczivymEaH5JnH_ADSt_ERsfngdtZqbxncVSb3IrdkZJyDAg1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">939副</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0400093910" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400093910" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">鶯歌 - 臺北市政府</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0625 - 1700 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0625 0655 0715 1640 1700<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">樹林交流道、安坑交流道</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">三段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">臺北客運三峽一站:02-2671-1914</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">鶯歌端發車；例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 臺北市政府</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 鶯歌</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">新北市美術館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394207310" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.953744" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.357768" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">三鶯轉運站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394207410" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.954907" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.358852" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">北鶯社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394101560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.957106" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.358124" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">鶯歌火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394105550" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955077" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.354993" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">鶯歌區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394105700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956804" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3536" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">中國砂輪</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394206660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.957165" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.351399" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">文昌街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394101240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.953993" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.350498" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">國慶街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394103940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.953082" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.351057" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">陶瓷博物館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394204240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.949571" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.352637" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">學勤路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374109600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94605" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.37486" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">大學風呂(學勤路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.947308" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3777681" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">森林公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.947989" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.379996" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">桃子腳國中小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2387000520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948492" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3827943" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">上善若水社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948611" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.384652" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">國道3號46Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2389700020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95063" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.401652" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">國道3號42Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2369700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.959255" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.426491" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">國道3號31Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2319700030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.973006" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.521323" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">敦化和平路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066900100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02391" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54898" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">成功國宅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1067500000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.027599" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5490337" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">大安國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068200000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.030615" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5489397" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">信義敦化路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03196" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54906" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">仁愛國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068900100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035951" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5490897" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">仁愛安和路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068800020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037721" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5508833" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">仁愛國泰醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068700320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037708" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5525491" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">仁愛延吉街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1069600020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037621" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5552343" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">仁愛光復路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03754" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.55728" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">國父紀念館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037605" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5611436" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">市政府(市府)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1100800100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038366" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5636251" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">市政府(松高)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03902" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.56453" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">興雅國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037232" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5682685" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">松壽路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1105100460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035881" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5666401" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">市政府(松壽)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1105100360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.035907" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5646562" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">市議會</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037028" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5620977" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">國父紀念館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037685" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5609264" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">仁愛光復路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1107300060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0377" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.55781" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">仁愛延吉街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1069600060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037774" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5557793" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">仁愛國泰醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068700360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037828" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5532159" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">仁愛安和路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068800060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037852" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5516958" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">信義敦化路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068100141" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.034123" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5485022" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">大安國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068300040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032074" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5483934" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">成功國宅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1068200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.028411" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5484575" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">鳳雛公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1055700340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.026331" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5486689" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">敦化和平路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1066900140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02391" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54858" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">國道3號31Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2319700070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972783" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.521891" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">國道3號42Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2369700160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9599" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.429231" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">國道3號50Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2399700050" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94117" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.362324" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">恩主公醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374106120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.93848" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.362591" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">陶瓷博物館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394204200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.950267" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.352531" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">中鶯</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394201300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955016" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.352304" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">鶯歌區公所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394105731" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955708" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.354072" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">鶯歌火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394105510" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95519" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.355054" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">北鶯社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394101520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956605" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.356936" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">三鶯轉運站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394207450" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955129" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.358715" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">新北市美術館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394207350" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.953915" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.357469" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400093910";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 32;
        var existBackNum = 22;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400093910',
                        url: './StopStatusRecent3OfRoute?routeid=0400093910&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400093910',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400093910',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400093910');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400093910","Name":"939副","BeginStop":"鶯歌","GoDirStops":[{"UniStopId":"2394207310","Name":"新北市美術館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.357768,"Latitude":24.953744,"PublicId":"2394207310"},{"UniStopId":"2394207410","Name":"三鶯轉運站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.358852,"Latitude":24.954907,"PublicId":"2394207410"},{"UniStopId":"2394101560","Name":"北鶯社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.358124,"Latitude":24.957106,"PublicId":"2394101560"},{"UniStopId":"2394105550","Name":"鶯歌火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.354993,"Latitude":24.955077,"PublicId":"2394105550"},{"UniStopId":"2394105700","Name":"鶯歌區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3536,"Latitude":24.956804,"PublicId":"2394105700"},{"UniStopId":"2394206660","Name":"中國砂輪","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.351399,"Latitude":24.957165,"PublicId":"2394206660"},{"UniStopId":"2394101240","Name":"文昌街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.350498,"Latitude":24.953993,"PublicId":"2394101240"},{"UniStopId":"2394103940","Name":"國慶街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.351057,"Latitude":24.953082,"PublicId":"2394103940"},{"UniStopId":"2394204240","Name":"陶瓷博物館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.352637,"Latitude":24.949571,"PublicId":"2394204240"},{"UniStopId":"2374109600","Name":"學勤路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.37486,"Latitude":24.94605,"PublicId":"2374109600"},{"UniStopId":"2385300120","Name":"大學風呂(學勤路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3777681,"Latitude":24.947308,"PublicId":"2385300120"},{"UniStopId":"2385300520","Name":"森林公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.379996,"Latitude":24.947989,"PublicId":"2385300520"},{"UniStopId":"2387000520","Name":"桃子腳國中小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3827943,"Latitude":24.948492,"PublicId":"2387000520"},{"UniStopId":"2385300020","Name":"上善若水社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.384652,"Latitude":24.948611,"PublicId":"2385300020"},{"UniStopId":"2389700020","Name":"國道3號46Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.401652,"Latitude":24.95063,"PublicId":"2389700020"},{"UniStopId":"2369700120","Name":"國道3號42Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.426491,"Latitude":24.959255,"PublicId":"2369700120"},{"UniStopId":"2319700030","Name":"國道3號31Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.521323,"Latitude":24.973006,"PublicId":"2319700030"},{"UniStopId":"1066900100","Name":"敦化和平路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54898,"Latitude":25.02391,"PublicId":"1066900100"},{"UniStopId":"1067500000","Name":"成功國宅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5490337,"Latitude":25.027599,"PublicId":"1067500000"},{"UniStopId":"1068200000","Name":"大安國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5489397,"Latitude":25.030615,"PublicId":"1068200000"},{"UniStopId":"1068100100","Name":"信義敦化路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54906,"Latitude":25.03196,"PublicId":"1068100100"},{"UniStopId":"1068900100","Name":"仁愛國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5490897,"Latitude":25.035951,"PublicId":"1068900100"},{"UniStopId":"1068800020","Name":"仁愛安和路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5508833,"Latitude":25.037721,"PublicId":"1068800020"},{"UniStopId":"1068700320","Name":"仁愛國泰醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5525491,"Latitude":25.037708,"PublicId":"1068700320"},{"UniStopId":"1069600020","Name":"仁愛延吉街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5552343,"Latitude":25.037621,"PublicId":"1069600020"},{"UniStopId":"1107300020","Name":"仁愛光復路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.55728,"Latitude":25.03754,"PublicId":"1107300020"},{"UniStopId":"1107300520","Name":"國父紀念館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5611436,"Latitude":25.037605,"PublicId":"1107300520"},{"UniStopId":"1100800100","Name":"市政府(市府)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5636251,"Latitude":25.038366,"PublicId":"1100800100"},{"UniStopId":"1107300220","Name":"市政府(松高)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.56453,"Latitude":25.03902,"PublicId":"1107300220"},{"UniStopId":"1107300740","Name":"興雅國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5682685,"Latitude":25.037232,"PublicId":"1107300740"},{"UniStopId":"1105100460","Name":"松壽路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5666401,"Latitude":25.035881,"PublicId":"1105100460"},{"UniStopId":"1105100360","Name":"市政府(松壽)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5646562,"Latitude":25.035907,"PublicId":"1105100360"}],"LastStop":"臺北市政府","BackDirStops":[{"UniStopId":"1107300300","Name":"市議會","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5620977,"Latitude":25.037028,"PublicId":"1107300300"},{"UniStopId":"1107300560","Name":"國父紀念館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5609264,"Latitude":25.037685,"PublicId":"1107300560"},{"UniStopId":"1107300060","Name":"仁愛光復路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.55781,"Latitude":25.0377,"PublicId":"1107300060"},{"UniStopId":"1069600060","Name":"仁愛延吉街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5557793,"Latitude":25.037774,"PublicId":"1069600060"},{"UniStopId":"1068700360","Name":"仁愛國泰醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5532159,"Latitude":25.037828,"PublicId":"1068700360"},{"UniStopId":"1068800060","Name":"仁愛安和路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5516958,"Latitude":25.037852,"PublicId":"1068800060"},{"UniStopId":"1068100141","Name":"信義敦化路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5485022,"Latitude":25.034123,"PublicId":"1068100141"},{"UniStopId":"1068300040","Name":"大安國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5483934,"Latitude":25.032074,"PublicId":"1068300040"},{"UniStopId":"1068200140","Name":"成功國宅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5484575,"Latitude":25.028411,"PublicId":"1068200140"},{"UniStopId":"1055700340","Name":"鳳雛公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5486689,"Latitude":25.026331,"PublicId":"1055700340"},{"UniStopId":"1066900140","Name":"敦化和平路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54858,"Latitude":25.02391,"PublicId":"1066900140"},{"UniStopId":"2319700070","Name":"國道3號31Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.521891,"Latitude":24.972783,"PublicId":"2319700070"},{"UniStopId":"2369700160","Name":"國道3號42Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.429231,"Latitude":24.9599,"PublicId":"2369700160"},{"UniStopId":"2399700050","Name":"國道3號50Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.362324,"Latitude":24.94117,"PublicId":"2399700050"},{"UniStopId":"2374106120","Name":"恩主公醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.362591,"Latitude":24.93848,"PublicId":"2374106120"},{"UniStopId":"2394204200","Name":"陶瓷博物館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.352531,"Latitude":24.950267,"PublicId":"2394204200"},{"UniStopId":"2394201300","Name":"中鶯","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.352304,"Latitude":24.955016,"PublicId":"2394201300"},{"UniStopId":"2394105731","Name":"鶯歌區公所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.354072,"Latitude":24.955708,"PublicId":"2394105731"},{"UniStopId":"2394105510","Name":"鶯歌火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.355054,"Latitude":24.95519,"PublicId":"2394105510"},{"UniStopId":"2394101520","Name":"北鶯社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.356936,"Latitude":24.956605,"PublicId":"2394101520"},{"UniStopId":"2394207450","Name":"三鶯轉運站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.358715,"Latitude":24.955129,"PublicId":"2394207450"},{"UniStopId":"2394207350","Name":"新北市美術館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.357469,"Latitude":24.953915,"PublicId":"2394207350"}],"RouteMapUrl":"../MapOverview?nid=0400093910","RouteTracks":null,"StopDirection":null,"TicketPrice":"三段票","BusTimeDesc":"0625 - 1700","HeadwayDesc":"班表:0625 0655 0715 1640 1700","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"鶯歌端發車；例假日停駛","SegmentBuffer":"樹林交流道、安坑交流道","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"臺北客運三峽一站:02-2671-1914","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.561936135739 25.0359117592363, 121.561952981059 25.0375760768901, 121.553489892099 25.037791696991, 121.54976370723 25.037879292657, 121.549367953226 25.0380081910756, 121.549100204378 25.0382022611214, 121.548921705146 25.0382831235498, 121.548653956297 25.0382831235498, 121.548493306988 25.0381860886293, 121.548368357526 25.0380405361046, 121.548332657679 25.0377817756342, 121.548457607142 25.0375715323501, 121.548636106374 25.0374259790962, 121.54872535599 25.0370701815261, 121.548636106374 25.0328328765921, 121.548636106374 25.0302613110176, 121.548636106374 25.0271236045528, 121.548618256451 25.0244063506293, 121.548546856758 25.0223521961278, 121.54855589776 25.020932900352, 121.546864501494 25.0194083872257, 121.543258817003 25.0164159816527, 121.54052777875 25.0141190587102, 121.539046235123 25.0128735261903, 121.537725340804 25.0117897408618, 121.536989031471 25.011207404496, 121.535632437306 25.0107868265146, 121.534347242834 25.0100103710725, 121.534043794139 25.0094280262695, 121.5339366946 25.0085059746843, 121.533829595061 25.0070339130701, 121.533776045291 25.0066618507482, 121.534293693065 25.0056588945279, 121.534704241299 25.0050441753775, 121.535150489379 25.0042353297034, 121.535346838535 25.0034911869798, 121.535418238228 25.0026337995574, 121.535311138688 25.0013881505656, 121.535204039149 25.0002395539402, 121.535186189226 24.9996086300982, 121.535275438842 24.9985247277294, 121.535413775747 24.9972466813101, 121.535503025363 24.9958230190159, 121.535342376054 24.9952244288082, 121.534610529202 24.9938654564325, 121.533396734423 24.9921505412755, 121.532575637954 24.9911312879118, 121.531254743636 24.9893839767683, 121.5306121464 24.9886073860657, 121.53005879878 24.9883161632874, 121.52945190139 24.9878146113299, 121.528791454231 24.9868923975518, 121.528184556841 24.9861805085008, 121.52734561045 24.9852906413907, 121.526096115824 24.9843198699253, 121.524096924423 24.9827504398451, 121.523150878493 24.9818929077306, 121.522776030105 24.9812942496911, 121.522722480335 24.9804852477102, 121.522954529337 24.9793364557533, 121.523382927495 24.9776051574625, 121.52363282642 24.9768932146455, 121.525935466515 24.9745631911604, 121.527524109682 24.9730098176512, 121.528612954999 24.9721683988107, 121.528697742134 24.971925680768, 121.528626342441 24.9716667809947, 121.52823364413 24.9711004358411, 121.527591046894 24.9705502694813, 121.526716400656 24.970048645068, 121.52607380342 24.9699030117908, 121.525413356261 24.9699515562357, 121.524360210791 24.9706149950631, 121.523271365474 24.9714240619624, 121.522771567624 24.9718447746474, 121.521843371617 24.9728641878791, 121.520861625839 24.9739644974435, 121.520174403795 24.974627914631, 121.518639310398 24.9759709189602, 121.516693668767 24.9770388396478, 121.514980076137 24.9777184207125, 121.5123382875 24.9781714726696, 121.510624694871 24.9781714726696, 121.508286354929 24.9779611273256, 121.505698116061 24.9781391118708, 121.503948823586 24.9783818176538, 121.501342734795 24.9791261124018, 121.500441313672 24.9794820778629, 121.499316768509 24.9798865828181, 121.497567476033 24.9810030095911, 121.495336235631 24.9829445972295, 121.491926900295 24.985856921206, 121.490498906437 24.9870865483957, 121.489213711965 24.987944044289, 121.487785718107 24.9886397441096, 121.486411274019 24.9891574716535, 121.484822630852 24.9893839767683, 121.483662385843 24.9894325135244, 121.482341491524 24.9892707242631, 121.480427087259 24.988833892194, 121.479262379768 24.9884132376235, 121.477780836141 24.9876042824806, 121.475603145508 24.985970176856, 121.473407604951 24.9841580739359, 121.471546750455 24.9826210014186, 121.469029911281 24.9806632286026, 121.46653092203 24.9786245229578, 121.465334977174 24.9776213379331, 121.464638830168 24.9771844644778, 121.463076961886 24.9763268935529, 121.461845317184 24.9758252926935, 121.460078174785 24.975388412859, 121.45866803085 24.9752589666842, 121.457168637299 24.9752427859027, 121.45484814728 24.9753560513281, 121.452902505649 24.9753398705594, 121.451599461254 24.9752751474634, 121.449635969699 24.9747897231584, 121.448386475074 24.9742881160307, 121.446904931446 24.9733819818412, 121.445744686437 24.9723625729, 121.445115476643 24.9717315059891, 121.443919531787 24.9700648265326, 121.442652187238 24.9678479460561, 121.441259893227 24.965841392066, 121.440206747757 24.9646762811865, 121.438573479782 24.9632684241573, 121.436092340454 24.9616825429288, 121.433361302201 24.9606144889543, 121.431754809111 24.9601451895803, 121.429309369629 24.9598377166065, 121.427167378842 24.9595626085579, 121.425275286981 24.9591904025724, 121.423597394198 24.9585916340602, 121.421901651492 24.9577501166339, 121.420188058862 24.9563745469162, 121.419295562701 24.9554520974376, 121.418322741886 24.9542221540487, 121.41762659488 24.9533967904122, 121.416180751099 24.952150642675, 121.414949106396 24.9514385525916, 121.412878515303 24.9505322501665, 121.410986423441 24.9501762009603, 121.408326784881 24.9502085691125, 121.403712579728 24.9505646182251, 121.399559746009 24.9510076569328, 121.397410857407 24.9512368140675, 121.395430215352 24.9512928972946, 121.391181933625 24.9516651271557, 121.388067122023 24.9519402528516, 121.384657786687 24.9518755174491, 121.380695103732 24.9514223686782, 121.37714296901 24.9506131702971, 121.374728766895 24.9498201507248, 121.37171212987 24.9484444924156, 121.368284944611 24.9463890684294, 121.365625306051 24.9443174252959, 121.362675606238 24.9414688590997, 121.36194462636 24.9407709604213, 121.360785471843 24.9396319031059, 121.359058196828 24.9382190663111, 121.358643057768 24.9380381829219, 121.358384269783 24.9380015173377, 121.358136264631 24.9380479604092, 121.357990696389 24.9381457352394, 121.357876802719 24.938271620219, 121.357836367096 24.9384158378046, 121.357809410014 24.9385649439444, 121.357898368384 24.9387800475659, 121.358046632334 24.9389193758476, 121.358205679116 24.9390171499863, 121.358567577939 24.9390220386912, 121.359377638247 24.9388338234126, 121.360154002202 24.9386064980824, 121.361141305323 24.9384598363564, 121.361665957527 24.9384616696291, 121.36285543876 24.9385472223225, 121.365043005947 24.9388258792549, 121.365572038677 24.9388735441934, 121.366952915191 24.9389053208088, 121.366952915191 24.9385178899772, 121.367020307896 24.9376831373893, 121.365435231487 24.93751936389, 121.364927764422 24.9374215885628, 121.364444558731 24.9372345930334, 121.363924287053 24.9368239351887, 121.361455018362 24.9378175781588, 121.360937442391 24.9379984618719, 121.361069532092 24.938293008431, 121.360979899795 24.9386205531553, 121.359768852896 24.9388625445938, 121.359229037334 24.9390666481145, 121.358360345373 24.9395310740272, 121.35780705127 24.9398573932924, 121.356474697503 24.9407101580034, 121.35426702606 24.9439624201928, 121.352683565945 24.9458928939087, 121.352548803381 24.9462432765726, 121.352902555109 24.9473180080131, 121.352814959444 24.9493765061638, 121.351901943079 24.9517180056971, 121.352597239923 24.952596239178, 121.352486094886 24.952911146401, 121.352130369992 24.9558134914384, 121.352270751377 24.9561546439295, 121.353399492061 24.956995644573, 121.353480349599 24.9570057517652, 121.353486400217 24.9565829051784, 121.353579736989 24.9563908975713, 121.353770089109 24.9561702238742, 121.354590456212 24.9551965643561, 121.354615724192 24.9549910514475, 121.354706688923 24.9548731342048, 121.354888618383 24.9548360744999, 121.354991374837 24.954928723762, 121.35494420794 24.9551342366707, 121.354795969121 24.9552521539134, 121.35459719434 24.9552134096765, 121.353808833346 24.9561837001305, 121.353588159649 24.9564279572761, 121.353520778368 24.9565913568838, 121.353512355707 24.9571118772836, 121.349732265813 24.9570512341303, 121.349462740687 24.9559293357928, 121.350705925332 24.9537697657197, 121.351527468943 24.9523065238216, 121.351797502092 24.9519605783106, 121.351885097758 24.9516034575185, 121.352269171063 24.9506331670644, 121.352767792546 24.9494135658687, 121.3528284357 24.9473348533335, 121.352350028601 24.9460579780484, 121.352403933626 24.9457985601145, 121.353761666449 24.943881562655, 121.356470393967 24.9405630345396, 121.3566554772 24.9404264343343, 121.356806807383 24.9406296491518, 121.357221884457 24.9408198928108, 121.35972531806 24.9418813659533, 121.360676536354 24.9422694197803, 121.36125591477 24.9424639871587, 121.363214559713 24.9428736595834, 121.363863117642 24.9429882381507, 121.364885677308 24.9430368799953, 121.366113613652 24.9441513187019, 121.367319931399 24.945134964893, 121.368374918962 24.945930529285, 121.370685947046 24.9474038367118, 121.371273972901 24.9476892022002, 121.37164581278 24.9476978496393, 121.37173661089 24.9475076059803, 121.373422861503 24.9453911452747, 121.375154511171 24.9463099356729, 121.377286104895 24.9472006218943, 121.379514982309 24.9479194402647, 121.38175899274 24.948404777781, 121.383823568812 24.9486382586352, 121.385416859455 24.9486836576901, 121.385473067809 24.9488674157698, 121.386307545677 24.9504671919927, 121.386435095402 24.9506487882126, 121.386979884062 24.951050894128, 121.387170127721 24.9513189647384, 121.387390637417 24.9515513646626, 121.387931102357 24.9514713758515, 121.389511421842 24.9514281386563, 121.391050665991 24.9512033052412, 121.392140243311 24.9512270856985, 121.392829876574 24.9512184382595, 121.393601660509 24.9511557443264, 121.397015237071 24.9508368700117, 121.398861465307 24.9507309388835, 121.399855920796 24.9506790542492, 121.400582305676 24.9506682449504, 121.403816138547 24.9504219292643, 121.408335344145 24.9500965538697, 121.41330691346 24.9504998820994, 121.414806307011 24.9511310578736, 121.416287850638 24.9519726205402, 121.417162496876 24.9527494425123, 121.418197792423 24.9536880958568, 121.419054588738 24.9549018611245, 121.42045134523 24.9563583636515, 121.422147087936 24.9577015673762, 121.423575081794 24.9583165232268, 121.42532437427 24.9589314760056, 121.426609568742 24.959255134129, 121.428988071011 24.9595949742426, 121.430683813717 24.9598215337972, 121.432504505886 24.9601451895803, 121.433646900972 24.9605173926789, 121.435699642143 24.9613427085786, 121.437631896332 24.9623460263371, 121.43950613827 24.9637538939176, 121.441117093841 24.9653235663702, 121.442723586931 24.9673948560796, 121.44393738171 24.9695793816686, 121.444990527181 24.9711813424512, 121.445659899301 24.9719418619857, 121.446998643543 24.9731554472509, 121.448622986556 24.9741263068435, 121.450550778264 24.9748220848383, 121.45240717028 24.9751618819636, 121.454281412218 24.9751618819636, 121.457208799627 24.9750324355503, 121.459547139569 24.9751295203731, 121.46209967859 24.9756958469784, 121.464281831704 24.9766666865214, 121.466513072106 24.9782038334598, 121.469922407442 24.9810191896147, 121.472109023037 24.9827989792199, 121.475429108756 24.985484794764, 121.477713898929 24.9872321613275, 121.479873739639 24.988364700465, 121.481051834572 24.9887691762, 121.482711877431 24.98896332408, 121.483782872825 24.9891574716535, 121.485799914149 24.9888824291673, 121.48774555578 24.9882676260906, 121.489619797718 24.9872159821213, 121.491154891116 24.9860510736851, 121.492623047301 24.9848537951797, 121.495461185093 24.9825724619735, 121.496804391816 24.9813104296764, 121.498036036518 24.9803719870082, 121.49926768122 24.9797409611875, 121.500909874157 24.9790613912981, 121.502784116095 24.9784141783887, 121.504462008878 24.9780420294236, 121.506371950663 24.9777993229701, 121.508629965951 24.9777669620734, 121.51039710835 24.9778802251745, 121.511896501901 24.9779125860413, 121.51305674691 24.9777831425228, 121.514948838772 24.9773624501469, 121.516858780557 24.9766828671155, 121.518376024031 24.9758091119865, 121.519754930599 24.9746440954933, 121.522218220004 24.9721198552404, 121.523182115858 24.9708900784058, 121.52374438844 24.9702670946607, 121.524404835599 24.9692962046135, 121.525199157182 24.9694499293814, 121.526305852422 24.96982210434, 121.527064474159 24.970121461642, 121.527912345512 24.9706473578412, 121.528099769706 24.9708577156915, 121.528412143363 24.9712217957364, 121.528831616558 24.9717315059891, 121.528983340906 24.9720227680425, 121.528778066789 24.9723302105731, 121.528554942748 24.9725567466829, 121.528046219937 24.9728803689734, 121.527350072931 24.9734952489799, 121.526778875388 24.9740615831091, 121.526118428228 24.9746117337665, 121.525011732989 24.9757039373396, 121.523766700844 24.9768851243625, 121.523374002533 24.978842957322, 121.522981304222 24.9806551385677, 121.523177653377 24.9815126793135, 121.523623901458 24.9820627966434, 121.525266094395 24.9833733603672, 121.526479889174 24.9844250372043, 121.527836483339 24.9855252433449, 121.528537092825 24.9863342121676, 121.529518838602 24.9877741635022, 121.530090036146 24.9881948202595, 121.530911132614 24.9886316545994, 121.532303426625 24.9905245854685, 121.533178072863 24.9915762011339, 121.534249068256 24.9931616969752, 121.535128176975 24.9944397858771, 121.535699374518 24.9956855053073, 121.535520875286 24.99744890473, 121.5353780759 24.9989049035296, 121.535324526131 24.999616718886, 121.535270976361 25.0004417724348, 121.535467325516 25.0014771259125, 121.535538725209 25.0026742424949, 121.535467325516 25.003531629635, 121.535217426591 25.0042595951512, 121.535074627206 25.0047287261982, 121.534592679279 25.00539197738, 121.533932232119 25.0066214091237, 121.533985781889 25.0074140625394, 121.534146431198 25.0093714092665, 121.534396330123 25.0097919920951, 121.535056777282 25.010131692559, 121.535645824749 25.0106493295545, 121.536270572061 25.010875795054, 121.537073818607 25.0110860840724, 121.537395117225 25.0112640206529, 121.539447858395 25.0130110206604, 121.54262960721 25.015712351373, 121.545378495386 25.0180739451024, 121.547877484637 25.0200958214466, 121.548758041604 25.0209665909928, 121.548791732245 25.0243087025567, 121.548859230414 25.0275360396216, 121.548841380491 25.0298650586999, 121.548912780184 25.0365930877102, 121.548894930261 25.0371106131203, 121.549037729647 25.0374340653927, 121.549269778649 25.037660481476, 121.54976370723 25.0377984351191, 121.555295710444 25.0376771488124, 121.563577698057 25.037498024705, 121.563617298714 25.0391014206509, 121.568393012656 25.0390730032664, 121.568318095927 25.0358343985058, 121.561952981059 25.0359117592363)","wkt0":"LINESTRING (121.356970403296 24.953123215609, 121.357244945319 24.9533446356312, 121.357673682177 24.9538161521541, 121.358198320701 24.9543873311923, 121.358717317951 24.954922782159, 121.359176141606 24.9551517238805, 121.358764328571 24.9561074497938, 121.358754926447 24.9562917314259, 121.358959892752 24.9570359095472, 121.356846295258 24.9570960831414, 121.356825610585 24.9565324258025, 121.356799284637 24.9564515675353, 121.356703382972 24.9563260491788, 121.355346656466 24.9554319071782, 121.354629274398 24.9549667370891, 121.354776887746 24.9548313465023, 121.354866207925 24.9548275856526, 121.354943305343 24.9548680147862, 121.354991374837 24.954928723762, 121.354997837662 24.9550212694088, 121.35494420794 24.9551342366707, 121.354795969121 24.9552521539134, 121.35459719434 24.9552134096765, 121.353808833346 24.9561837001305, 121.353588159649 24.9564279572761, 121.353520778368 24.9565913568838, 121.353512355707 24.9571118772836, 121.349732265813 24.9570512341303, 121.349462740687 24.9559293357928, 121.350705925332 24.9537697657197, 121.351527468943 24.9523065238216, 121.351797502092 24.9519605783106, 121.351885097758 24.9516034575185, 121.352269171063 24.9506331670644, 121.352767792546 24.9494135658687, 121.3528284357 24.9473348533335, 121.352350028601 24.9460579780484, 121.352403933626 24.9457985601145, 121.353761666449 24.943881562655, 121.356470393967 24.9405630345396, 121.356754232793 24.9405658953833, 121.356829449785 24.9406392319512, 121.359360501589 24.9417326989822, 121.360680559811 24.9422657994178, 121.361248448105 24.942443499563, 121.363324437103 24.9428797581206, 121.363860358176 24.9429756597862, 121.364902113525 24.9430264312563, 121.366154476453 24.9441763110318, 121.367352307061 24.9451475504498, 121.368713734629 24.946151697302, 121.370767158529 24.9474397883017, 121.371286155778 24.9477105694753, 121.371639675644 24.9476955260768, 121.371714892636 24.9475074835951, 121.372380563022 24.9466960802865, 121.373411035821 24.945392005676, 121.375159830901 24.9462983704378, 121.377288471794 24.9472066156243, 121.379537459875 24.9479352802409, 121.38174883946 24.948416668994, 121.383787219961 24.9486404395473, 121.385374298507 24.9487006131414, 121.38636716281 24.9505509511613, 121.386946333654 24.9510680679859, 121.38739763561 24.9515344133405, 121.388179892334 24.9514554354982, 121.389390885916 24.9514366312501, 121.391034377206 24.9512185019713, 121.391621069749 24.9512034585728, 121.392155110397 24.9512260236706, 121.392775650586 24.9512260236706, 121.393986644168 24.9511207198808, 121.39694643283 24.9508499387072, 121.398853183595 24.9507408740678, 121.399846047898 24.9506703581372, 121.400308632403 24.9507079666335, 121.403816138547 24.9504219292643, 121.408335344145 24.9500965538697, 121.41330691346 24.9504998820994, 121.414806307011 24.9511310578736, 121.416287850638 24.9519726205402, 121.417162496876 24.9527494425123, 121.418197792423 24.9536880958568, 121.419054588738 24.9549018611245, 121.42045134523 24.9563583636515, 121.422147087936 24.9577015673762, 121.423575081794 24.9583165232268, 121.42532437427 24.9589314760056, 121.426609568742 24.959255134129, 121.428988071011 24.9595949742426, 121.430683813717 24.9598215337972, 121.432504505886 24.9601451895803, 121.433646900972 24.9605173926789, 121.435699642143 24.9613427085786, 121.437631896332 24.9623460263371, 121.43950613827 24.9637538939176, 121.441117093841 24.9653235663702, 121.442723586931 24.9673948560796, 121.44393738171 24.9695793816686, 121.444990527181 24.9711813424512, 121.445659899301 24.9719418619857, 121.446998643543 24.9731554472509, 121.448622986556 24.9741263068435, 121.450550778264 24.9748220848383, 121.45240717028 24.9751618819636, 121.454281412218 24.9751618819636, 121.457208799627 24.9750324355503, 121.459547139569 24.9751295203731, 121.46209967859 24.9756958469784, 121.464281831704 24.9766666865214, 121.466513072106 24.9782038334598, 121.469922407442 24.9810191896147, 121.472109023037 24.9827989792199, 121.475429108756 24.985484794764, 121.477713898929 24.9872321613275, 121.479873739639 24.988364700465, 121.481051834572 24.9887691762, 121.482711877431 24.98896332408, 121.483782872825 24.9891574716535, 121.485799914149 24.9888824291673, 121.48774555578 24.9882676260906, 121.489619797718 24.9872159821213, 121.491154891116 24.9860510736851, 121.492623047301 24.9848537951797, 121.495461185093 24.9825724619735, 121.496804391816 24.9813104296764, 121.498036036518 24.9803719870082, 121.49926768122 24.9797409611875, 121.500909874157 24.9790613912981, 121.502784116095 24.9784141783887, 121.504462008878 24.9780420294236, 121.506371950663 24.9777993229701, 121.508629965951 24.9777669620734, 121.51039710835 24.9778802251745, 121.511896501901 24.9779125860413, 121.51305674691 24.9777831425228, 121.514948838772 24.9773624501469, 121.516858780557 24.9766828671155, 121.518376024031 24.9758091119865, 121.519754930599 24.9746440954933, 121.522218220004 24.9721198552404, 121.523182115858 24.9708900784058, 121.52374438844 24.9702670946607, 121.524404835599 24.9692962046135, 121.525199157182 24.9694499293814, 121.526305852422 24.96982210434, 121.527064474159 24.970121461642, 121.527912345512 24.9706473578412, 121.528099769706 24.9708577156915, 121.528412143363 24.9712217957364, 121.528831616558 24.9717315059891, 121.528983340906 24.9720227680425, 121.528778066789 24.9723302105731, 121.528554942748 24.9725567466829, 121.528046219937 24.9728803689734, 121.527350072931 24.9734952489799, 121.526778875388 24.9740615831091, 121.526118428228 24.9746117337665, 121.525011732989 24.9757039373396, 121.523766700844 24.9768851243625, 121.523374002533 24.978842957322, 121.522981304222 24.9806551385677, 121.523177653377 24.9815126793135, 121.523623901458 24.9820627966434, 121.525266094395 24.9833733603672, 121.526479889174 24.9844250372043, 121.527836483339 24.9855252433449, 121.528537092825 24.9863342121676, 121.529518838602 24.9877741635022, 121.530090036146 24.9881948202595, 121.530911132614 24.9886316545994, 121.532303426625 24.9905245854685, 121.533178072863 24.9915762011339, 121.534249068256 24.9931616969752, 121.535128176975 24.9944397858771, 121.535699374518 24.9956855053073, 121.535520875286 24.99744890473, 121.5353780759 24.9989049035296, 121.535324526131 24.999616718886, 121.535270976361 25.0004417724348, 121.535467325516 25.0014771259125, 121.535538725209 25.0026742424949, 121.535467325516 25.003531629635, 121.535217426591 25.0042595951512, 121.535074627206 25.0047287261982, 121.534592679279 25.00539197738, 121.533932232119 25.0066214091237, 121.533985781889 25.0074140625394, 121.534146431198 25.0093714092665, 121.534396330123 25.0097919920951, 121.535056777282 25.010131692559, 121.535645824749 25.0106493295545, 121.536270572061 25.010875795054, 121.537073818607 25.0110860840724, 121.537395117225 25.0112640206529, 121.539447858395 25.0130110206604, 121.54262960721 25.015712351373, 121.545378495386 25.0180739451024, 121.547877484637 25.0200958214466, 121.548758041604 25.0209665909928, 121.548791732245 25.0243087025567, 121.548859230414 25.0275360396216, 121.548841380491 25.0298650586999, 121.548912780184 25.0365930877102, 121.548894930261 25.0371106131203, 121.549037729647 25.0374340653927, 121.549269778649 25.037660481476, 121.54976370723 25.0377984351191, 121.555295710444 25.0376771488124, 121.563577698057 25.037498024705, 121.563617298714 25.0391014206509, 121.568393012656 25.0390730032664, 121.568318095927 25.0358343985058, 121.561958439993 25.0359204187879)","wkt1":"LINESTRING (121.561936135739 25.0359117592363, 121.561952981059 25.0375760768901, 121.553489892099 25.037791696991, 121.54976370723 25.037879292657, 121.549367953226 25.0380081910756, 121.549100204378 25.0382022611214, 121.548921705146 25.0382831235498, 121.548653956297 25.0382831235498, 121.548493306988 25.0381860886293, 121.548368357526 25.0380405361046, 121.548332657679 25.0377817756342, 121.548457607142 25.0375715323501, 121.548636106374 25.0374259790962, 121.54872535599 25.0370701815261, 121.548636106374 25.0328328765921, 121.548636106374 25.0302613110176, 121.548636106374 25.0271236045528, 121.548618256451 25.0244063506293, 121.548546856758 25.0223521961278, 121.54855589776 25.020932900352, 121.546864501494 25.0194083872257, 121.543258817003 25.0164159816527, 121.54052777875 25.0141190587102, 121.539046235123 25.0128735261903, 121.537725340804 25.0117897408618, 121.536989031471 25.011207404496, 121.535632437306 25.0107868265146, 121.534347242834 25.0100103710725, 121.534043794139 25.0094280262695, 121.5339366946 25.0085059746843, 121.533829595061 25.0070339130701, 121.533776045291 25.0066618507482, 121.534293693065 25.0056588945279, 121.534704241299 25.0050441753775, 121.535150489379 25.0042353297034, 121.535346838535 25.0034911869798, 121.535418238228 25.0026337995574, 121.535311138688 25.0013881505656, 121.535204039149 25.0002395539402, 121.535186189226 24.9996086300982, 121.535275438842 24.9985247277294, 121.535413775747 24.9972466813101, 121.535503025363 24.9958230190159, 121.535342376054 24.9952244288082, 121.534610529202 24.9938654564325, 121.533396734423 24.9921505412755, 121.532575637954 24.9911312879118, 121.531254743636 24.9893839767683, 121.5306121464 24.9886073860657, 121.53005879878 24.9883161632874, 121.52945190139 24.9878146113299, 121.528791454231 24.9868923975518, 121.528184556841 24.9861805085008, 121.52734561045 24.9852906413907, 121.526096115824 24.9843198699253, 121.524096924423 24.9827504398451, 121.523150878493 24.9818929077306, 121.522776030105 24.9812942496911, 121.522722480335 24.9804852477102, 121.522954529337 24.9793364557533, 121.523382927495 24.9776051574625, 121.52363282642 24.9768932146455, 121.525935466515 24.9745631911604, 121.527524109682 24.9730098176512, 121.528612954999 24.9721683988107, 121.528697742134 24.971925680768, 121.528626342441 24.9716667809947, 121.52823364413 24.9711004358411, 121.527591046894 24.9705502694813, 121.526716400656 24.970048645068, 121.52607380342 24.9699030117908, 121.525413356261 24.9699515562357, 121.524360210791 24.9706149950631, 121.523271365474 24.9714240619624, 121.522771567624 24.9718447746474, 121.521843371617 24.9728641878791, 121.520861625839 24.9739644974435, 121.520174403795 24.974627914631, 121.518639310398 24.9759709189602, 121.516693668767 24.9770388396478, 121.514980076137 24.9777184207125, 121.5123382875 24.9781714726696, 121.510624694871 24.9781714726696, 121.508286354929 24.9779611273256, 121.505698116061 24.9781391118708, 121.503948823586 24.9783818176538, 121.501342734795 24.9791261124018, 121.500441313672 24.9794820778629, 121.499316768509 24.9798865828181, 121.497567476033 24.9810030095911, 121.495336235631 24.9829445972295, 121.491926900295 24.985856921206, 121.490498906437 24.9870865483957, 121.489213711965 24.987944044289, 121.487785718107 24.9886397441096, 121.486411274019 24.9891574716535, 121.484822630852 24.9893839767683, 121.483662385843 24.9894325135244, 121.482341491524 24.9892707242631, 121.480427087259 24.988833892194, 121.479262379768 24.9884132376235, 121.477780836141 24.9876042824806, 121.475603145508 24.985970176856, 121.473407604951 24.9841580739359, 121.471546750455 24.9826210014186, 121.469029911281 24.9806632286026, 121.46653092203 24.9786245229578, 121.465334977174 24.9776213379331, 121.464638830168 24.9771844644778, 121.463076961886 24.9763268935529, 121.461845317184 24.9758252926935, 121.460078174785 24.975388412859, 121.45866803085 24.9752589666842, 121.457168637299 24.9752427859027, 121.45484814728 24.9753560513281, 121.452902505649 24.9753398705594, 121.451599461254 24.9752751474634, 121.449635969699 24.9747897231584, 121.448386475074 24.9742881160307, 121.446904931446 24.9733819818412, 121.445744686437 24.9723625729, 121.445115476643 24.9717315059891, 121.443919531787 24.9700648265326, 121.442652187238 24.9678479460561, 121.441259893227 24.965841392066, 121.440206747757 24.9646762811865, 121.438573479782 24.9632684241573, 121.436092340454 24.9616825429288, 121.433361302201 24.9606144889543, 121.431754809111 24.9601451895803, 121.429309369629 24.9598377166065, 121.427167378842 24.9595626085579, 121.425275286981 24.9591904025724, 121.423597394198 24.9585916340602, 121.421901651492 24.9577501166339, 121.420188058862 24.9563745469162, 121.419295562701 24.9554520974376, 121.418322741886 24.9542221540487, 121.41762659488 24.9533967904122, 121.416180751099 24.952150642675, 121.414949106396 24.9514385525916, 121.412878515303 24.9505322501665, 121.410986423441 24.9501762009603, 121.408326784881 24.9502085691125, 121.403712579728 24.9505646182251, 121.399553547617 24.9509530342648, 121.395430215352 24.9512928972946, 121.391181933625 24.9516651271557, 121.388067122023 24.9519402528516, 121.384657786687 24.9518755174491, 121.380695103732 24.9514223686782, 121.37714296901 24.9506131702971, 121.374728766895 24.9498201507248, 121.37171212987 24.9484444924156, 121.368284944611 24.9463890684294, 121.365625306051 24.9443174252959, 121.362675606238 24.9414688590997, 121.36194462636 24.9407709604213, 121.360785471843 24.9396319031059, 121.359058196828 24.9382190663111, 121.358643057768 24.9380381829219, 121.358384269783 24.9380015173377, 121.358136264631 24.9380479604092, 121.357990696389 24.9381457352394, 121.357876802719 24.938271620219, 121.357836367096 24.9384158378046, 121.357809410014 24.9385649439444, 121.357898368384 24.9387800475659, 121.358046632334 24.9389193758476, 121.358205679116 24.9390171499863, 121.358567577939 24.9390220386912, 121.359377638247 24.9388338234126, 121.360154002202 24.9386064980824, 121.361141305323 24.9384598363564, 121.361665957527 24.9384616696291, 121.36285543876 24.9385472223225, 121.365043005947 24.9388258792549, 121.365572038677 24.9388735441934, 121.366952915191 24.9389053208088, 121.366952915191 24.9385178899772, 121.367020307896 24.9376831373893, 121.365435231487 24.93751936389, 121.364927764422 24.9374215885628, 121.364444558731 24.9372345930334, 121.363924287053 24.9368239351887, 121.361455018362 24.9378175781588, 121.360937442391 24.9379984618719, 121.361069532092 24.938293008431, 121.360979899795 24.9386205531553, 121.359768852896 24.9388625445938, 121.359229037334 24.9390666481145, 121.358360345373 24.9395310740272, 121.35780705127 24.9398573932924, 121.356474697503 24.9407101580034, 121.35426702606 24.9439624201928, 121.352683565945 24.9458928939087, 121.352548803381 24.9462432765726, 121.352902555109 24.9473180080131, 121.352814959444 24.9493765061638, 121.351901943079 24.9517180056971, 121.352597239923 24.952596239178, 121.352486094886 24.952911146401, 121.352130369992 24.9558134914384, 121.352270751377 24.9561546439295, 121.353399492061 24.956995644573, 121.353480349599 24.9570057517652, 121.353486400217 24.9565829051784, 121.353596921174 24.9564010311184, 121.354262591559 24.9556465106605, 121.354614231 24.9552013200851, 121.354570981229 24.9550870842774, 121.354648078646 24.9549404111417, 121.354932022794 24.9551265731986, 121.355909843699 24.9557630969992, 121.356720306795 24.9563117109396, 121.356827491009 24.956400090906, 121.356872621205 24.9564959925716, 121.356893305878 24.9569994763164, 121.358832023865 24.9569637482449, 121.358694752853 24.9564659057746, 121.358640220533 24.9561763203527, 121.359063316117 24.955245039962, 121.358649622657 24.9550081064351, 121.357918137403 24.9542512354462, 121.357363412082 24.9536217632387, 121.356962881596 24.9532499092311)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400093910'=='0100020200' || '0400093910'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
