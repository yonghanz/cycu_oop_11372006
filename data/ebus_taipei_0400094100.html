
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492409</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400094100">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400094100">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400094100" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400094100" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400094100" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400094100',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="zyXcG5t4_qpaLNFt3r_9AYEiajYiORSLRGu-i4RNYF8SRVf8OysM74voTu3rTOQDOlPX7z2otF2_9bCu1nwjwkVwwhQ1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">941</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0400094100" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400094100" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">三峽 - 新店</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0600 - 2000 <br>
                        [假日] 0700 - 1900
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 941班表:0600 0800 0830 0900 1000 1100 1200 1300 1400 1500 1600 1615 1630 1645 1700 1720 1740 1800 1830 1900 2000<br/>平日六至八時為機動發車(10-20分乙班)<br>
[假日]<br /> 941班表:0700 0740 0820 0900 0930 1000 1030 1100 1140 1220 1300 1340 1420 1500 1540 1620 1700 1740 1820 1900<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">樹林交流道，安坑交流道</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">三段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">臺北客運三峽一站:02-2671-1914</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 新店</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 三峽</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">三峽一站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374100120" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.93748" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.367161" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">學成路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374109300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94144" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.37434" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">大學學成路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374102100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.943105" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3753109" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">臺北大學正門</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374103500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.944914" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.373877" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">學勤路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374109600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94605" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.37486" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">大學風呂(學勤路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.947308" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3777681" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">森林公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.947989" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.379996" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">桃子腳國中小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2387000520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948492" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3827943" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">上善若水社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948611" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.384652" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">國道3號46Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2389700020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95063" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.401652" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">國道3號42Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2369700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.959255" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.426491" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">國道3號31Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2319700030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.973006" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.521323" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">中央新村(捷運小碧潭站)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315000400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.973506" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.530184" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">新店高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315001600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.975463" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.531576" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">耕莘醫院(中正路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314801520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97613" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53501" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">中正國宅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314800220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974051" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537963" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">崇光中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314600920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972496" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.540277" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">七張(北新路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.971513" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542921" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">捷運七張站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9753" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5430453" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">新店郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.978161" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542795" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">大坪林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.981232" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5418387" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">捷運大坪林站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.983344" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5413983" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">順安街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.986291" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5408845" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">捷運大坪林站(民權路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314100660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982998" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542517" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">大坪林</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.980858" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541691" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">新店郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.978011" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542478" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">捷運七張站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314301141" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974123" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54279" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">七張(北新路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314300040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97141" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5426501" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">崇光中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314600960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972713" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54022" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">中正國宅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314800260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974454" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537621" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">耕莘醫院(中正路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314801560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97615" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.535279" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">新店高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315001640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.975484" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.531393" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中央新村(捷運小碧潭站)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2315000460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97344" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.52988" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">國道3號31Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2319700070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972783" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.521891" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">國道3號42Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2369700160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9599" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.429231" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">國道3號46Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2389700060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.950848" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.402173" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">北美館社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948895" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3843777" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">桃子腳國中小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2387000560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948622" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3819842" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">森林公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.948158" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3797908" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">大學風呂(學勤路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.947473" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3776023" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">海洋公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374106260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.947112" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3765923" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">學勤路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2385300940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94629" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.37483" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">臺北大學正門</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374103540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94489" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.37368" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">大學學成路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374102140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.943183" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3749655" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">學成路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374109340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.9416" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.37419" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">龍恩公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374106660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.94137" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3709899" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">臺北大學宿舍</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374103640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.940404" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3683827" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">臺北大學(三峽校區)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374103460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.939065" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.367802" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">三峽一站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2374100120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.93748" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.367161" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400094100";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 23;
        var existBackNum = 26;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400094100',
                        url: './StopStatusRecent3OfRoute?routeid=0400094100&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400094100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400094100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400094100');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400094100","Name":"941","BeginStop":"三峽","GoDirStops":[{"UniStopId":"2374100120","Name":"三峽一站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367161,"Latitude":24.93748,"PublicId":"2374100120"},{"UniStopId":"2374109300","Name":"學成路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.37434,"Latitude":24.94144,"PublicId":"2374109300"},{"UniStopId":"2374102100","Name":"大學學成路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3753109,"Latitude":24.943105,"PublicId":"2374102100"},{"UniStopId":"2374103500","Name":"臺北大學正門","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.373877,"Latitude":24.944914,"PublicId":"2374103500"},{"UniStopId":"2374109600","Name":"學勤路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.37486,"Latitude":24.94605,"PublicId":"2374109600"},{"UniStopId":"2385300120","Name":"大學風呂(學勤路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3777681,"Latitude":24.947308,"PublicId":"2385300120"},{"UniStopId":"2385300520","Name":"森林公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.379996,"Latitude":24.947989,"PublicId":"2385300520"},{"UniStopId":"2387000520","Name":"桃子腳國中小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3827943,"Latitude":24.948492,"PublicId":"2387000520"},{"UniStopId":"2385300020","Name":"上善若水社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.384652,"Latitude":24.948611,"PublicId":"2385300020"},{"UniStopId":"2389700020","Name":"國道3號46Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.401652,"Latitude":24.95063,"PublicId":"2389700020"},{"UniStopId":"2369700120","Name":"國道3號42Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.426491,"Latitude":24.959255,"PublicId":"2369700120"},{"UniStopId":"2319700030","Name":"國道3號31Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.521323,"Latitude":24.973006,"PublicId":"2319700030"},{"UniStopId":"2315000400","Name":"中央新村(捷運小碧潭站)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.530184,"Latitude":24.973506,"PublicId":"2315000400"},{"UniStopId":"2315001600","Name":"新店高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.531576,"Latitude":24.975463,"PublicId":"2315001600"},{"UniStopId":"2314801520","Name":"耕莘醫院(中正路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53501,"Latitude":24.97613,"PublicId":"2314801520"},{"UniStopId":"2314800220","Name":"中正國宅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537963,"Latitude":24.974051,"PublicId":"2314800220"},{"UniStopId":"2314600920","Name":"崇光中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.540277,"Latitude":24.972496,"PublicId":"2314600920"},{"UniStopId":"2314300000","Name":"七張(北新路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542921,"Latitude":24.971513,"PublicId":"2314300000"},{"UniStopId":"2314301100","Name":"捷運七張站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5430453,"Latitude":24.9753,"PublicId":"2314301100"},{"UniStopId":"2314301700","Name":"新店郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542795,"Latitude":24.978161,"PublicId":"2314301700"},{"UniStopId":"2314300100","Name":"大坪林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5418387,"Latitude":24.981232,"PublicId":"2314300100"},{"UniStopId":"2314301200","Name":"捷運大坪林站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5413983,"Latitude":24.983344,"PublicId":"2314301200"},{"UniStopId":"2314301500","Name":"順安街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5408845,"Latitude":24.986291,"PublicId":"2314301500"}],"LastStop":"新店","BackDirStops":[{"UniStopId":"2314100660","Name":"捷運大坪林站(民權路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542517,"Latitude":24.982998,"PublicId":"2314100660"},{"UniStopId":"2314300140","Name":"大坪林","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541691,"Latitude":24.980858,"PublicId":"2314300140"},{"UniStopId":"2314301740","Name":"新店郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542478,"Latitude":24.978011,"PublicId":"2314301740"},{"UniStopId":"2314301141","Name":"捷運七張站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54279,"Latitude":24.974123,"PublicId":"2314301141"},{"UniStopId":"2314300040","Name":"七張(北新路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5426501,"Latitude":24.97141,"PublicId":"2314300040"},{"UniStopId":"2314600960","Name":"崇光中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54022,"Latitude":24.972713,"PublicId":"2314600960"},{"UniStopId":"2314800260","Name":"中正國宅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537621,"Latitude":24.974454,"PublicId":"2314800260"},{"UniStopId":"2314801560","Name":"耕莘醫院(中正路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.535279,"Latitude":24.97615,"PublicId":"2314801560"},{"UniStopId":"2315001640","Name":"新店高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.531393,"Latitude":24.975484,"PublicId":"2315001640"},{"UniStopId":"2315000460","Name":"中央新村(捷運小碧潭站)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.52988,"Latitude":24.97344,"PublicId":"2315000460"},{"UniStopId":"2319700070","Name":"國道3號31Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.521891,"Latitude":24.972783,"PublicId":"2319700070"},{"UniStopId":"2369700160","Name":"國道3號42Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.429231,"Latitude":24.9599,"PublicId":"2369700160"},{"UniStopId":"2389700060","Name":"國道3號46Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.402173,"Latitude":24.950848,"PublicId":"2389700060"},{"UniStopId":"2385300260","Name":"北美館社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3843777,"Latitude":24.948895,"PublicId":"2385300260"},{"UniStopId":"2387000560","Name":"桃子腳國中小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3819842,"Latitude":24.948622,"PublicId":"2387000560"},{"UniStopId":"2385300560","Name":"森林公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3797908,"Latitude":24.948158,"PublicId":"2385300560"},{"UniStopId":"2385300160","Name":"大學風呂(學勤路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3776023,"Latitude":24.947473,"PublicId":"2385300160"},{"UniStopId":"2374106260","Name":"海洋公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3765923,"Latitude":24.947112,"PublicId":"2374106260"},{"UniStopId":"2385300940","Name":"學勤路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.37483,"Latitude":24.94629,"PublicId":"2385300940"},{"UniStopId":"2374103540","Name":"臺北大學正門","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.37368,"Latitude":24.94489,"PublicId":"2374103540"},{"UniStopId":"2374102140","Name":"大學學成路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3749655,"Latitude":24.943183,"PublicId":"2374102140"},{"UniStopId":"2374109340","Name":"學成路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.37419,"Latitude":24.9416,"PublicId":"2374109340"},{"UniStopId":"2374106660","Name":"龍恩公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3709899,"Latitude":24.94137,"PublicId":"2374106660"},{"UniStopId":"2374103640","Name":"臺北大學宿舍","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3683827,"Latitude":24.940404,"PublicId":"2374103640"},{"UniStopId":"2374103460","Name":"臺北大學(三峽校區)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367802,"Latitude":24.939065,"PublicId":"2374103460"},{"UniStopId":"2374100120","Name":"三峽一站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367161,"Latitude":24.93748,"PublicId":"2374100120"}],"RouteMapUrl":"../MapOverview?nid=0400094100","RouteTracks":null,"StopDirection":null,"TicketPrice":"三段票","BusTimeDesc":"0600 - 2000","HeadwayDesc":"941班表:0600 0800 0830 0900 1000 1100 1200 1300 1400 1500 1600 1615 1630 1645 1700 1720 1740 1800 1830 1900 2000;平日六至八時為機動發車(10-20分乙班)","HolidayBusTimeDesc":"0700 - 1900","HolidayHeadwayDesc":"941班表:0700 0740 0820 0900 0930 1000 1030 1100 1140 1220 1300 1340 1420 1500 1540 1620 1700 1740 1820 1900","RouteNote":"","SegmentBuffer":"樹林交流道，安坑交流道","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"臺北客運三峽一站:02-2671-1914","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.367066993806 24.937477792737, 121.366984302671 24.9384713024133, 121.366991598947 24.9389188073837, 121.368283039922 24.9388871901847, 121.368489767761 24.9403610380765, 121.368584619358 24.9406881544816, 121.368679470955 24.9408523207071, 121.368759729999 24.9409654129959, 121.368922680178 24.9410845855152, 121.369112383372 24.9412061901267, 121.369423691178 24.9412548319713, 121.371233167798 24.9412451036024, 121.371982252205 24.9412207826801, 121.372821324024 24.9411818692044, 121.373334495485 24.9410845855152, 121.373477988927 24.9411405236365, 121.373755247441 24.9411867333889, 121.374154110567 24.941356979845, 121.374470282557 24.9416330223132, 121.375507164544 24.9426731470905, 121.373866312986 24.9448206845303, 121.373483663808 24.9453622304003, 121.373490149388 24.945428707588, 121.375121272577 24.9462831826584, 121.377186929578 24.947161978651, 121.379486067434 24.9479159272426, 121.381726835076 24.9484072098732, 121.383773035339 24.9486374479377, 121.385400915739 24.9486828469927, 121.386305654049 24.950440438978, 121.386415908897 24.9506350063565, 121.386993125453 24.9510711615632, 121.387398474158 24.9515624441938, 121.387820036811 24.9514943456114, 121.389486830687 24.9514278684237, 121.3910790404 24.9512073587281, 121.391737326697 24.9511976303592, 121.392107004716 24.9512235726763, 121.392781504962 24.9512138443074, 121.393994308287 24.9511165606182, 121.39523629672 24.95100954856, 121.396627453476 24.9508668658158, 121.398501785888 24.9507501253888, 121.399824844062 24.9506658128581, 121.400609599155 24.9506852695959, 121.401750655574 24.9506111960616, 121.40341095791 24.950459494109, 121.405245012816 24.9503077919695, 121.407147710713 24.9501249711941, 121.408203096694 24.9500549546551, 121.409496588049 24.9500082769403, 121.410836198913 24.9500432852281, 121.411651334427 24.9501210813875, 121.412347417254 24.950272783757, 121.413169921905 24.9504654726207, 121.41405176154 24.9507783357123, 121.414900737586 24.9511867946635, 121.415886645253 24.951792652254, 121.416467235323 24.9521564136784, 121.417157370689 24.952763507997, 121.417633892728 24.9532265861091, 121.417946096822 24.9535742039229, 121.418685527572 24.9544494515721, 121.419277072172 24.9551806820718, 121.419644048914 24.9556288534573, 121.419956253009 24.9559131496956, 121.420399911459 24.9563364891656, 121.42065186564 24.9565649180697, 121.42123245571 24.9570217746065, 121.421900682017 24.9575146315236, 121.422541522001 24.9578771345963, 121.423122112071 24.9581514940889, 121.42381401433 24.9584799923509, 121.425017245696 24.9588678053571, 121.425838835418 24.9590776080417, 121.42679735676 24.9592812032043, 121.427728491779 24.9594103121574, 121.429601716345 24.9596784610887, 121.431036759726 24.9598882623916, 121.431628304326 24.9599826107899, 121.432367735075 24.960131581798, 121.433074302236 24.9603066225021, 121.434695572621 24.9609322978775, 121.435670525758 24.9613357574944, 121.43588961635 24.9614214149044, 121.437185454396 24.9621798642205, 121.437683116078 24.9624793496405, 121.438069232901 24.9627166038065, 121.439208838827 24.9635591066123, 121.439838935003 24.9640876127758, 121.440435270984 24.9646476801311, 121.441284722191 24.9655887621119, 121.44176124423 24.966180893831, 121.442155607296 24.9667084721031, 121.442423993272 24.9671069473692, 121.443075787785 24.9681906446038, 121.443541355294 24.9689664815498, 121.443930241096 24.9695983195445, 121.444258876985 24.9701358137521, 121.44467514911 24.9707279235906, 121.444872330644 24.9710072196953, 121.445200966532 24.9714243006978, 121.445463875243 24.9717433170579, 121.445863715575 24.972160395565, 121.446132101551 24.9724545840187, 121.44732614528 24.9733992096984, 121.447934121674 24.9737827678579, 121.448744756867 24.9741861853437, 121.449473233087 24.9744890579097, 121.450031914098 24.9746975926857, 121.450678231346 24.9748577173629, 121.451516252862 24.9750166005576, 121.452038081495 24.975100830625, 121.453526409048 24.9751655533663, 121.455131247639 24.9751010071713, 121.456922313233 24.9750414260383, 121.458847680675 24.9750152722132, 121.4597411121 24.9750891635724, 121.460980966459 24.9753691219131, 121.462322896338 24.9757874293939, 121.463167898898 24.9761333604032, 121.463856530486 24.9764788128238, 121.464601438501 24.9769058053168, 121.465603777961 24.9775723574956, 121.466049831958 24.9779018634934, 121.466704708189 24.9784089560492, 121.468079501657 24.9795372379642, 121.469711726571 24.9808554156056, 121.470549748088 24.981543046922, 121.471354906015 24.982189714742, 121.472028609587 24.9827569426404, 121.473447221174 24.9839100083552, 121.474397463148 24.9847335494256, 121.475126794923 24.9853596305882, 121.475904391301 24.9860304282962, 121.47677739818 24.9866405837171, 121.477424190016 24.9871513328204, 121.478291880319 24.9876617152759, 121.478820417955 24.9879239331882, 121.47942839435 24.9882081548084, 121.480326665779 24.9885755319988, 121.481093482853 24.9887691492656, 121.481660660705 24.9889156834291, 121.482191955392 24.9889802223897, 121.48338845681 24.9890781915787, 121.484436500528 24.9890314740966, 121.485234295052 24.9889491137593, 121.486784360994 24.9885767731361, 121.487737405071 24.988169679431, 121.488098904549 24.988034394944, 121.48907933495 24.9875131138772, 121.490109060735 24.9868329628763, 121.491193559168 24.9859430515961, 121.492787349358 24.9843495384396, 121.494261028563 24.9828387595275, 121.495875211389 24.9816050402005, 121.497437641055 24.9805662121164, 121.498609775725 24.9798934700383, 121.499393024594 24.9795260669069, 121.500389886789 24.9790978422774, 121.500630886441 24.9789935786636, 121.501671566756 24.9786348615078, 121.50271224707 24.9783171042606, 121.503523542112 24.9781040876252, 121.50476340613 24.9778357516859, 121.505931409517 24.9776568607344, 121.506883831013 24.9776101934868, 121.507382565241 24.9776296381754, 121.508430511535 24.977655521108, 121.510284876689 24.977699639029, 121.511181525754 24.9777346394409, 121.512122149235 24.9776685275435, 121.513447686104 24.977635661146, 121.514050185233 24.9775450500285, 121.514910115809 24.9773563800902, 121.515435933231 24.9772024649262, 121.516449227222 24.9768487075693, 121.517547090589 24.9763443376436, 121.518136224784 24.9759686541517, 121.518399133495 24.9758184610495, 121.518976795378 24.9754372301676, 121.51980909164 24.9747177618177, 121.520586688018 24.9739030074434, 121.520754357365 24.9736797410264, 121.520989879752 24.9734116226026, 121.521804028555 24.9724416862583, 121.521967055658 24.9721266686387, 121.522087180891 24.9718038719696, 121.522164404256 24.9713867629712, 121.522168694443 24.9708267262878, 121.522115457671 24.9701988108986, 121.522123673568 24.9700250255884, 121.522185855191 24.969826237743, 121.522287991512 24.9697119010796, 121.522426105658 24.9695734405161, 121.522697417057 24.9694260850493, 121.522739865859 24.9694046720952, 121.522998666622 24.9693252268997, 121.523123274396 24.9692851939497, 121.523506682933 24.9692417473226, 121.523852592807 24.9692506371483, 121.524448928788 24.9692934183662, 121.524774982994 24.9693361995692, 121.525281225049 24.9694450971098, 121.525784249465 24.9695734405161, 121.52655648311 24.9698729079435, 121.526883609862 24.9700129184387, 121.52713673089 24.9701412612527, 121.527496034044 24.9703532210615, 121.527957765411 24.9706745631027, 121.528024057088 24.9707710593638, 121.528170129663 24.9708923557185, 121.528618454196 24.9714096116359, 121.528970785796 24.9718904048947, 121.529166525574 24.9721067369412, 121.529591254079 24.9727197566966, 121.530282510445 24.9736793865639, 121.531301966111 24.9750697184822, 121.532083316403 24.9761916951603, 121.532917221484 24.9776369299329, 121.533559140701 24.9787720082366, 121.533958128084 24.9787817304894, 121.533994594673 24.9785090210052, 121.534209640292 24.9778513074085, 121.534325475339 24.9775785958613, 121.53463651389 24.9769422665664, 121.535046763014 24.9762140568098, 121.53520228229 24.9759899540079, 121.535565339357 24.9756180688478, 121.536129039695 24.9752660964102, 121.536861512079 24.9747756111176, 121.53722027896 24.9745670618331, 121.538169320838 24.9739826148393, 121.539084024062 24.9733805903399, 121.539981014239 24.9727022557785, 121.540620788363 24.9722759131979, 121.541387123001 24.9717076161724, 121.542153457638 24.9710965359457, 121.542655945781 24.9707572076675, 121.542789393708 24.9712182429983, 121.542887984475 24.9716055318832, 121.542942757123 24.9718817227311, 121.543015248935 24.9722749409213, 121.543005745668 24.9727667705747, 121.543005745668 24.9734016922794, 121.542989313874 24.9743264501904, 121.542994791138 24.9745802919177, 121.5430084843 24.9749905337976, 121.543005745668 24.9752344439793, 121.543003007036 24.9754709060602, 121.543000268403 24.9758488720643, 121.542982457513 24.976455443005, 121.542901558982 24.9774876918778, 121.542587896997 24.9786431951963, 121.542037056004 24.980329381723, 121.541849702136 24.9809748850347, 121.541616311156 24.9817878314099, 121.541437532697 24.9829651445753, 121.541214442977 24.9840812161275, 121.541160815641 24.9846071661956, 121.541066431529 24.9850815887264, 121.540881953491 24.9861363945559, 121.540841196716 24.9866448368986, 121.541868696482 24.9866098390227, 121.541890147416 24.9859191150168, 121.542077306821 24.9853192853921, 121.54234973369 24.9846791074348, 121.543202673856 24.9829993432477, 121.541270751681 24.9829913937612, 121.541395167101 24.982119334474, 121.541716826093 24.9808995354979, 121.542013132266 24.9799877521395, 121.54255412435 24.9783213376724, 121.542736018491 24.9775277930534, 121.542830748588 24.9767405518271, 121.542833211826 24.9755689663173, 121.542833211826 24.9749601225705, 121.542833211826 24.9742836259842, 121.542841427724 24.9739702019928, 121.542849643621 24.9736195385609, 121.542855120886 24.9733011477117, 121.542855120886 24.9726296071954, 121.542865092393 24.9721777132152, 121.542800348237 24.9718798607724, 121.542712712 24.9715000206091, 121.542549109175 24.9709954622429, 121.541637026388 24.971683309141, 121.541016021832 24.9721568092483, 121.539675874695 24.9730974842399, 121.539151935618 24.9734460426042, 121.538168946541 24.9740882235597, 121.537509866576 24.9745009482331, 121.536294671133 24.9752758362823, 121.535637736262 24.9757080019635, 121.535188339182 24.9761887784231, 121.534760929311 24.9769286552086, 121.534497619089 24.9774594970458, 121.534310459685 24.9778668631292, 121.534179608984 24.9782829779263, 121.53404822201 24.9788828418736, 121.533606332757 24.9788964530151, 121.533462611496 24.978845897339, 121.532780471776 24.9776539440319, 121.531999657758 24.9763375319319, 121.531224742746 24.975178124821, 121.530872947419 24.9747688053191, 121.530529196193 24.9742544803085, 121.530042259978 24.9736113279547, 121.5296169952 24.9729686583741, 121.528877141083 24.9719468912678, 121.528715561771 24.9717206631997, 121.528466346222 24.9714072326786, 121.528340369131 24.9712492758064, 121.528150034179 24.97101528824, 121.527928204954 24.9707890584589, 121.52759256325 24.9705048984987, 121.527309410913 24.970322107718, 121.527002662549 24.9701470950138, 121.526776355189 24.9700634777451, 121.526403108928 24.9699312456692, 121.52591724526 24.9698884646731, 121.52566472527 24.9699533390765, 121.525440157412 24.9700029920762, 121.525010192124 24.9701978799066, 121.524615829058 24.9704452132213, 121.524205034197 24.9707037178984, 121.524042085569 24.970816988084, 121.523772151802 24.9710707703643, 121.523543699349 24.9712623105952, 121.522857269443 24.9718690147391, 121.522531215237 24.9722384805405, 121.522200355275 24.9725690938912, 121.521916906821 24.9728887279306, 121.521615657257 24.9732282218164, 121.5213404247 24.9735379238311, 121.521213078293 24.9736809823141, 121.520933737787 24.9738699682112, 121.520847470866 24.9739248950924, 121.520233820144 24.9746662321663, 121.51946480414 24.9754070903617, 121.517863491874 24.9765825373189, 121.516515300636 24.9772718554127, 121.514931149118 24.9778007513028, 121.513940639937 24.9779875543733, 121.513554492768 24.97807257957, 121.512286248885 24.9781857549689, 121.511475870771 24.9781892563866, 121.510665235579 24.9781445716614, 121.509638248426 24.9781098168639, 121.508802965542 24.9780700970833, 121.507825273773 24.9780651321099, 121.506946172771 24.978102369406, 121.506595627823 24.978119746807, 121.505865984167 24.9781157543919, 121.505492737905 24.9781429768433, 121.504727880521 24.9783388259736, 121.503969279345 24.9785001871497, 121.503470848247 24.9785951418968, 121.502777974248 24.9787738800453, 121.502435645197 24.9788688345811, 121.501416873942 24.9792089325782, 121.500907488314 24.9793982202896, 121.50009411449 24.979716595357, 121.499332774681 24.9801019956517, 121.498420810089 24.9805643502892, 121.497716774123 24.9809429682242, 121.496771860455 24.9814844869783, 121.49462569445 24.9831265283704, 121.493216368049 24.9845167534974, 121.492037057949 24.9857649444506, 121.491618047191 24.9861230202268, 121.491223684125 24.986468683375, 121.490941604987 24.9866951946058, 121.490211092115 24.987331182118, 121.489509300238 24.987766928387, 121.488915017006 24.9880803172177, 121.488356335995 24.9883688824643, 121.48770180285 24.9886425533949, 121.487477234993 24.9887275712244, 121.486685770227 24.9889906917256, 121.486042102981 24.9891597970652, 121.485604503916 24.9892297913552, 121.484945960224 24.9893231170132, 121.484272400879 24.9893969997756, 121.483640670855 24.989420331165, 121.482808374594 24.9893581141167, 121.481958890693 24.9892271273559, 121.481474152757 24.9891303191213, 121.480800449185 24.9889317378886, 121.480091143392 24.9887226066812, 121.479611882721 24.9885835993911, 121.478875190604 24.9882460096034, 121.47874647488 24.9881932611153, 121.478059078146 24.9877687901052, 121.477829033024 24.9876310228834, 121.477127943128 24.9871370454495, 121.476621296133 24.9867733874269, 121.476248842126 24.9864606158441, 121.475427252404 24.9857941118405, 121.474624833109 24.9851375336004, 121.474060674833 24.9846671285088, 121.473400664423 24.9841427302102, 121.472595506495 24.9834836607743, 121.471795825833 24.9828394821494, 121.471505530797 24.9825943458517, 121.470727759194 24.9819389917298, 121.470388168776 24.9816795797584, 121.469873305883 24.9812501214162, 121.469032545734 24.9805662121164, 121.468178092424 24.9798674043118, 121.467378411761 24.9792207242802, 121.466611594687 24.9785914181826, 121.466178890767 24.9782333204747, 121.465602579972 24.9778153347969, 121.465129586865 24.9774682471667, 121.464293000417 24.9769276829686, 121.463463921796 24.9765105913431, 121.462441784763 24.97605071945, 121.461682421679 24.975782379031, 121.460601294577 24.9755140380266, 121.459545923078 24.9752884392977, 121.458721594724 24.975220789987, 121.458053368416 24.9752058947209, 121.457365971682 24.9751984470872, 121.456656665889 24.9752183074428, 121.456015825906 24.9752456154264, 121.454895725252 24.9752803710332, 121.454098783221 24.9753101615455, 121.453249807175 24.9753101615455, 121.45297046667 24.9753101615455, 121.452189956434 24.9752605106877, 121.451883229604 24.9752356852513, 121.451135582957 24.9751289358176, 121.450240050161 24.9749272287859, 121.44959099428 24.9747037990724, 121.448448267594 24.9742530219169, 121.447871133129 24.9739751671316, 121.447421997414 24.9737182209375, 121.446838668712 24.9732936999627, 121.446367623938 24.9729126228692, 121.446066374373 24.9726438821244, 121.445650102247 24.9722361150233, 121.445326943623 24.9719251684261, 121.445154409782 24.9717538681685, 121.444853160217 24.9713436154951, 121.444373899546 24.9706770295656, 121.4440151387 24.9701817427095, 121.443749491357 24.9697292796659, 121.443390730512 24.9691123383495, 121.44314973086 24.9687045595439, 121.442777276853 24.9680900957776, 121.442492459082 24.9676543832476, 121.442140620283 24.9670541905429, 121.441668130728 24.966431028282, 121.441175176895 24.965779312148, 121.440285114442 24.9648343686831, 121.439929028928 24.9645193315873, 121.439268340143 24.9638970337195, 121.438880202938 24.9635398650697, 121.438680282772 24.9633834498378, 121.438099692702 24.9629483413415, 121.437360261952 24.9624536440783, 121.437129681966 24.962335441153, 121.436190131032 24.9618220365294, 121.435645878066 24.961520727769, 121.435503469181 24.9614549330052, 121.434599720487 24.9611098202719, 121.433504267524 24.9606771865757, 121.43311264309 24.9605201469956, 121.432291053368 24.960294208276, 121.431992542436 24.9602166193343, 121.430645135292 24.9599633686883, 121.429579807285 24.9598286738923, 121.428908842346 24.9597666025081, 121.427892809723 24.9596672882283, 121.427681935028 24.9596449425043, 121.426626231852 24.9594689046047, 121.425847562927 24.9593006831203, 121.424891268605 24.9590825737814, 121.424195655974 24.9588218721773, 121.423283691383 24.9584835799872, 121.422516874309 24.9581154921995, 121.421818523045 24.9576896759489, 121.421489887156 24.957455662601, 121.4208682176 24.9569907382107, 121.420471115901 24.9566574068262, 121.41999185523 24.956214825772, 121.419649526179 24.9558939069578, 121.41904702705 24.955172612489, 121.418493823304 24.9545084219347, 121.41787489238 24.9537896023258, 121.41743123393 24.9533066624425, 121.416925046692 24.9528653094667, 121.416289026481 24.9522653186859, 121.415938679268 24.9519925349445, 121.415495020818 24.951724369273, 121.41514447587 24.9515201408583, 121.414503635887 24.9512147287369, 121.413961386671 24.9509428368207, 121.41317539917 24.9506821179811, 121.412312729962 24.9504307100059, 121.411636287758 24.9503015916364, 121.410371039586 24.9501743354187, 121.409382393287 24.9501594371212, 121.408574496727 24.9501917167635, 121.407421532484 24.9502786234508, 121.406441102082 24.9503506318023, 121.405459522162 24.9504478247203, 121.404475996812 24.950541179799, 121.403566477186 24.9506423143878, 121.402715791027 24.9507679607318, 121.400987384148 24.9510760257477, 121.400215600214 24.9511392601457, 121.398237498533 24.9513240991552, 121.395607596134 24.9517456618085, 121.394534232763 24.9518786161838, 121.389358740496 24.9520861547208, 121.388499401241 24.9522028951479, 121.387824900996 24.9520926403001, 121.387487650873 24.9520926403001, 121.387357939287 24.9515981148799, 121.387134186802 24.9512770787054, 121.386783965521 24.9510808899321, 121.386381859605 24.9507452612043, 121.386197020596 24.9505052947709, 121.385305253445 24.9488044516042, 121.383755199996 24.9487363530217, 121.381708999733 24.9485093577468, 121.379442289774 24.9480196965111, 121.377088024494 24.9472203488646, 121.375074252127 24.9463820877424, 121.373478799624 24.9455389624357, 121.373439886148 24.9453670945848, 121.375392045512 24.9427696200824, 121.374534327652 24.9418438036399, 121.374128978947 24.9414643972519, 121.373707416294 24.94125523732, 121.373460964281 24.9412033526858, 121.373353952223 24.9411255257344, 121.372822134722 24.9412065954754, 121.371654730451 24.9412617228993, 121.36997091193 24.9412888812626, 121.36940747723 24.9412909080061, 121.369099412214 24.941219566634, 121.368943758311 24.9411449824722, 121.368755676512 24.9410039211229, 121.368541652396 24.9406828849484, 121.368457339865 24.9403667129584, 121.368269258066 24.9389901487558, 121.366975384999 24.9390485189694, 121.36696241384 24.938510215889, 121.367040240792 24.9374948173826, 121.367098611005 24.9374996815671)","wkt0":"LINESTRING (121.367093746821 24.9372102625916, 121.366986734763 24.93850048752, 121.366984302671 24.9389236715682, 121.368273311553 24.938879893908, 121.36834627432 24.9395402069487, 121.368567594713 24.9406480249598, 121.368650285849 24.9408097590931, 121.368752433722 24.9409252834741, 121.368891062979 24.9410663448235, 121.369090494542 24.9411964617578, 121.369331271673 24.9412499677869, 121.369878492425 24.9412523998791, 121.371653919754 24.9412426715102, 121.372833484485 24.9411782210661, 121.373349088038 24.9410894496996, 121.373755247441 24.9411903815272, 121.374200320319 24.9413861649518, 121.374453257911 24.9416050532526, 121.37549905757 24.9426788219724, 121.374338949576 24.9441782068327, 121.373456100096 24.9454051973631, 121.375124515367 24.9462856147506, 121.37726475653 24.9471830567837, 121.379482824644 24.9479078202685, 121.381739806234 24.9484027510374, 121.383768171155 24.9486313677071, 121.385414697595 24.948672713275, 121.385470635716 24.9488356634545, 121.386290250798 24.9504359801423, 121.38641185541 24.9506183870596, 121.386993125453 24.9510525155228, 121.387391988578 24.951560822799, 121.387839493549 24.9514842118937, 121.389495748358 24.9514331379569, 121.391064447847 24.9512142496561, 121.391718680657 24.9512045212872, 121.392222123749 24.951233706394, 121.392869060282 24.9512142496561, 121.394627462965 24.9510634599378, 121.397023073812 24.9508470037293, 121.397993478612 24.9507752570085, 121.3995937953 24.9506877016882, 121.400496101518 24.9506949979649, 121.401750655574 24.9506111960616, 121.40341095791 24.950459494109, 121.405245012816 24.9503077919695, 121.407147710713 24.9501249711941, 121.408203096694 24.9500549546551, 121.409496588049 24.9500082769403, 121.410836198913 24.9500432852281, 121.411651334427 24.9501210813875, 121.412347417254 24.950272783757, 121.413169921905 24.9504654726207, 121.41405176154 24.9507783357123, 121.414900737586 24.9511867946635, 121.415886645253 24.951792652254, 121.416467235323 24.9521564136784, 121.417157370689 24.952763507997, 121.417633892728 24.9532265861091, 121.417946096822 24.9535742039229, 121.418685527572 24.9544494515721, 121.419277072172 24.9551806820718, 121.419255129911 24.9551582980448, 121.420060165309 24.9560436310915, 121.420836375911 24.9567632215562, 121.421900682017 24.9575146315236, 121.422541522001 24.9578771345963, 121.42301058916 24.9581416645207, 121.42381401433 24.9584799923509, 121.42498714666 24.9588787557549, 121.425838835418 24.9590776080417, 121.42679735676 24.9592812032043, 121.427728491779 24.9594103121574, 121.429601716345 24.9596784610887, 121.431036759726 24.9598882623916, 121.431628304326 24.9599826107899, 121.432367735075 24.960131581798, 121.433311336213 24.9604095583601, 121.434695572621 24.9609322978775, 121.435180830181 24.9611178247974, 121.4359302749 24.961467840188, 121.437185454396 24.9621798642205, 121.437683116078 24.9624793496405, 121.439208838827 24.9635591066123, 121.439838935003 24.9640876127758, 121.440426943211 24.9646776872107, 121.441284722191 24.9655887621119, 121.44176124423 24.966180893831, 121.442155607296 24.9667084721031, 121.442423993272 24.9671069473692, 121.443029410586 24.9680563651865, 121.443541355294 24.9689664815498, 121.443930241096 24.9695983195445, 121.444258876985 24.9701358137521, 121.44467514911 24.9707279235906, 121.444872330644 24.9710072196953, 121.445178916867 24.9714278369632, 121.445463875243 24.9717433170579, 121.445863715575 24.972160395565, 121.446132101551 24.9724545840187, 121.446848696171 24.9730770271269, 121.44732614528 24.9733992096984, 121.447682556366 24.9736226393533, 121.448448472397 24.9740282454235, 121.449473233087 24.9744890579097, 121.450031914098 24.9746975926857, 121.451071528912 24.9749300497827, 121.45205363092 24.9750803505092, 121.452848371748 24.9751462357592, 121.454114603896 24.9751482946733, 121.455131247639 24.9751010071713, 121.456922313233 24.9750414260383, 121.459113647239 24.9750268187436, 121.4597411121 24.9750891635724, 121.460980966459 24.9753691219131, 121.462322896338 24.9757874293939, 121.463167898898 24.9761333604032, 121.463856530486 24.9764788128238, 121.464601438501 24.9769058053168, 121.465603777961 24.9775723574956, 121.466049831958 24.9779018634934, 121.466770748635 24.9784816765398, 121.468079501657 24.9795372379642, 121.469675876377 24.9808628106525, 121.470549748088 24.981543046922, 121.471337420025 24.9821969869647, 121.472671596337 24.9833190951285, 121.473447221174 24.9839100083552, 121.474397463148 24.9847335494256, 121.475126794923 24.9853596305882, 121.475904391301 24.9860304282962, 121.47677739818 24.9866405837171, 121.477424190016 24.9871513328204, 121.478291880319 24.9876617152759, 121.4788009835 24.9879341509986, 121.47942839435 24.9882081548084, 121.480326665779 24.9885755319988, 121.481310799742 24.9888441910141, 121.482097304913 24.9889924328265, 121.48338845681 24.9890781915787, 121.484436500528 24.9890314740966, 121.485331858905 24.9889183119203, 121.486784360994 24.9885767731361, 121.487349594686 24.9883675524087, 121.488098904549 24.988034394944, 121.48907933495 24.9875131138772, 121.490122951927 24.986783218038, 121.491193559168 24.9859430515961, 121.492787349358 24.9843495384396, 121.494261028563 24.9828387595275, 121.496464407238 24.9811737066759, 121.497437641055 24.9805662121164, 121.498609775725 24.9798934700383, 121.499393024594 24.9795260669069, 121.500849894191 24.9789099306647, 121.501671566756 24.9786348615078, 121.503523542112 24.9781040876252, 121.50476340613 24.9778357516859, 121.505931409517 24.9776568607344, 121.506883831013 24.9776101934868, 121.507382565241 24.9776296381754, 121.508430511535 24.977655521108, 121.510284876689 24.977699639029, 121.511181525754 24.9777346394409, 121.512122149235 24.9776685275435, 121.513447686104 24.977635661146, 121.514234894508 24.9775294287861, 121.514910115809 24.9773563800902, 121.516137331101 24.9769827871026, 121.517438564789 24.9764237919347, 121.518161243624 24.9759975967239, 121.518976795378 24.9754372301676, 121.51980909164 24.9747177618177, 121.520586688018 24.9739030074434, 121.52159551228 24.9727537776191, 121.521804028555 24.9724416862583, 121.521967055658 24.9721266686387, 121.522087180891 24.9718038719696, 121.522164404256 24.9713867629712, 121.522168694443 24.9708267262878, 121.522115457671 24.9701988108986, 121.522155536905 24.9700329226861, 121.52220906867 24.9698476204205, 121.522287991512 24.9697119010796, 121.522426105658 24.9695734405161, 121.522697417057 24.9694260850493, 121.522739865859 24.9694046720952, 121.522935865334 24.9693236267917, 121.523123274396 24.9692851939497, 121.523506682933 24.9692417473226, 121.523852592807 24.9692506371483, 121.524448928788 24.9692934183662, 121.524774982994 24.9693361995692, 121.525281225049 24.9694450971098, 121.525784249465 24.9695734405161, 121.52655648311 24.9698729079435, 121.526883609862 24.9700129184387, 121.52713673089 24.9701412612527, 121.527496034044 24.9703532210615, 121.527957765411 24.9706745631027, 121.528336396919 24.9710541440609, 121.528618454196 24.9714096116359, 121.528970785796 24.9718904048947, 121.529493506622 24.9726148009199, 121.530255304825 24.9737049959158, 121.531278585114 24.9750978512788, 121.532093915082 24.9762312834699, 121.532905127223 24.9776447279735, 121.533559140701 24.9787720082366, 121.533958128084 24.9787817304894, 121.534014881902 24.9785187369929, 121.534325475339 24.9775785958613, 121.53463651389 24.9769422665664, 121.535046763014 24.9762140568098, 121.53520228229 24.9759899540079, 121.535565339357 24.9756180688478, 121.536129039695 24.9752660964102, 121.536861512079 24.9747756111176, 121.53722027896 24.9745670618331, 121.538169320838 24.9739826148393, 121.539084024062 24.9733805903399, 121.540439723233 24.9724140567989, 121.540935921522 24.9720928662052, 121.542622172139 24.9707669255492, 121.542887984475 24.9716055318832, 121.542942757123 24.9718817227311, 121.542996894498 24.9722730211856, 121.542980423185 24.9734496905721, 121.542989313874 24.9743264501904, 121.542994791138 24.9745802919177, 121.5430084843 24.9749905337976, 121.542957775131 24.976533943837, 121.542901558982 24.9774876918778, 121.542587896997 24.9786431951963, 121.542037056004 24.980329381723, 121.541616311156 24.9817878314099, 121.541388882615 24.9829289309138, 121.541220051662 24.9839244158628, 121.541143871842 24.9846398884994, 121.541066431529 24.9850815887264, 121.540876213014 24.9860337733194, 121.540841196716 24.9866448368986)","wkt1":"LINESTRING (121.543198668076 24.9829793743083, 121.541270751681 24.9829913937612, 121.54141153067 24.9821259544296, 121.541749192576 24.9808947238205, 121.542013132266 24.9799877521395, 121.54255412435 24.9783213376724, 121.542727176756 24.9777095837665, 121.542830748588 24.9767405518271, 121.542852770513 24.9749794637202, 121.542852770513 24.9742886980524, 121.542875418568 24.9721741933106, 121.542826004631 24.9718138833498, 121.542556286888 24.970924432475, 121.541003865686 24.9721494863419, 121.539599686295 24.9731171759511, 121.538168946541 24.9740882235597, 121.537485181554 24.9745059134859, 121.536136592843 24.9753562449935, 121.535637736262 24.9757080019635, 121.535188339182 24.9761887784231, 121.534759179335 24.9769199902237, 121.534479167023 24.9774594257079, 121.534304159328 24.9778578255789, 121.534151799687 24.9783015215593, 121.534026205929 24.9788440454147, 121.533462611496 24.978845897339, 121.532778504008 24.9776056086063, 121.532014646891 24.9762920214347, 121.531224742746 24.975178124821, 121.530529196193 24.9742544803085, 121.530042259978 24.9736113279547, 121.5296169952 24.9729686583741, 121.528720384391 24.9716944663342, 121.528466346222 24.9714072326786, 121.528340369131 24.9712492758064, 121.528150034179 24.97101528824, 121.527907113337 24.970727806182, 121.52759256325 24.9705048984987, 121.527309410913 24.970322107718, 121.527002662549 24.9701470950138, 121.526403108928 24.9699312456692, 121.52591724526 24.9698884646731, 121.525619659814 24.9699361537252, 121.525440157412 24.9700029920762, 121.525006103423 24.9701811644986, 121.524606674095 24.9704344109282, 121.524071356439 24.9708122216586, 121.523772151802 24.9710707703643, 121.523543699349 24.9712623105952, 121.522850420401 24.9719044755685, 121.522531215237 24.9722384805405, 121.522200355275 24.9725690938912, 121.521916906821 24.9728887279306, 121.521615657257 24.9732282218164, 121.520997397745 24.9738738268689, 121.520604145159 24.9742217833454, 121.520033825964 24.9748610761616, 121.519354384323 24.9754880154935, 121.517863491874 24.9765825373189, 121.516515300636 24.9772718554127, 121.514931149118 24.9778007513028, 121.513960029481 24.9779854782508, 121.513472066848 24.9780534224148, 121.512286248885 24.9781857549689, 121.511116669161 24.9781851929148, 121.509638248426 24.9781098168639, 121.508802965542 24.9780700970833, 121.507825273773 24.9780651321099, 121.505865984167 24.9781157543919, 121.505492737905 24.9781429768433, 121.503373093373 24.9786494780358, 121.501416873942 24.9792089325782, 121.500907488314 24.9793982202896, 121.499720579827 24.9798796791879, 121.498927897913 24.98028116743, 121.497989033101 24.9808195734572, 121.496771860455 24.9814844869783, 121.49462569445 24.9831265283704, 121.493216368049 24.9845167534974, 121.491931707931 24.9858495005108, 121.491235794978 24.9865001173544, 121.490941604987 24.9866951946058, 121.490486350259 24.9871342628855, 121.489944855861 24.9875388394987, 121.489509300238 24.987766928387, 121.488915017006 24.9880803172177, 121.488356335995 24.9883688824643, 121.48770180285 24.9886425533949, 121.487477234993 24.9887275712244, 121.487229148213 24.9888369848148, 121.486685770227 24.9889906917256, 121.486428230643 24.9890892017874, 121.484824336588 24.9893630373577, 121.484272400879 24.9893969997756, 121.483418098284 24.9894021567249, 121.482808374594 24.9893581141167, 121.482139512651 24.9892847986233, 121.481464188839 24.9891509692093, 121.480323550449 24.9888400731859, 121.479611882721 24.9885835993911, 121.47874647488 24.9881932611153, 121.478059078146 24.9877687901052, 121.477829033024 24.9876310228834, 121.477029287949 24.987115732659, 121.476621296133 24.9867733874269, 121.475318330364 24.9857424369796, 121.474624833109 24.9851375336004, 121.474060674833 24.9846671285088, 121.47326353413 24.9840088313393, 121.472595506495 24.9834836607743, 121.471795825833 24.9828394821494, 121.470700186123 24.9819622707616, 121.469873305883 24.9812501214162, 121.469032545734 24.9805662121164, 121.468178092424 24.9798674043118, 121.467378411761 24.9792207242802, 121.466611594687 24.9785914181826, 121.466178890767 24.9782333204747, 121.465602579972 24.9778153347969, 121.465129586865 24.9774682471667, 121.464293000417 24.9769276829686, 121.463463921796 24.9765105913431, 121.462441784763 24.97605071945, 121.461682421679 24.975782379031, 121.460282080969 24.9754406604701, 121.459106441039 24.9752440341772, 121.457473722188 24.9752172682944, 121.456015825906 24.9752456154264, 121.454895725252 24.9752803710332, 121.454098783221 24.9753101615455, 121.453249807175 24.9753101615455, 121.452719689619 24.9753016837709, 121.452189956434 24.9752605106877, 121.451325804799 24.9751637365287, 121.450240050161 24.9749272287859, 121.44959099428 24.9747037990724, 121.449124825666 24.9745347382828, 121.448323908096 24.9741569275524, 121.447529167268 24.9737410269119, 121.446838668712 24.9732936999627, 121.446367623938 24.9729126228692, 121.446066374373 24.9726438821244, 121.445742029862 24.9723564072051, 121.445087295191 24.9716522585959, 121.444853160217 24.9713436154951, 121.444000188566 24.9700751304244, 121.443390730512 24.9691123383495, 121.44314973086 24.9687045595439, 121.442777276853 24.9680900957776, 121.442554830894 24.9676981141397, 121.442140620283 24.9670541905429, 121.441668130728 24.966431028282, 121.441175176895 24.965779312148, 121.440285114442 24.9648343686831, 121.439268340143 24.9638970337195, 121.438880202938 24.9635398650697, 121.438680282772 24.9633834498378, 121.438099692702 24.9629483413415, 121.437551669724 24.9625899483518, 121.437129681966 24.962335441153, 121.436190131032 24.9618220365294, 121.435645878066 24.961520727769, 121.435503469181 24.9614549330052, 121.434607422615 24.9610756170591, 121.433835329842 24.9607904574615, 121.433087944037 24.9605619180006, 121.431922598678 24.960241756864, 121.429579807285 24.9598286738923, 121.428200082054 24.9597054097508, 121.426876200312 24.9595067245438, 121.425387605445 24.9591937696064, 121.424891268605 24.9590825737814, 121.424133726781 24.9588211061612, 121.423283691383 24.9584835799872, 121.422085107289 24.9578915064622, 121.420880642563 24.9570257330991, 121.420219731149 24.9564667379312, 121.419107917556 24.9552941863729, 121.418493823304 24.9545084219347, 121.41787489238 24.9537896023258, 121.41743123393 24.9533066624425, 121.416925046692 24.9528653094667, 121.416289026481 24.9522653186859, 121.415494523377 24.9517034402487, 121.415055974682 24.9514440170768, 121.414329178018 24.9510888544011, 121.413097947409 24.9506101568817, 121.412312729962 24.9504307100059, 121.411636287758 24.9503015916364, 121.410880496964 24.9502086686396, 121.410227821206 24.9501788143857, 121.408574496727 24.9501917167635, 121.407421532484 24.9502786234508, 121.405459522162 24.9504478247203, 121.404475996812 24.950541179799, 121.403566477186 24.9506423143878, 121.402881983996 24.9507363435328, 121.401614863944 24.9509649602025, 121.400355040168 24.9511449350276, 121.398248848296 24.9513176135759, 121.397035234273 24.9515073167699, 121.395580843119 24.9517578222697, 121.394566660659 24.9518696985123, 121.392088358676 24.9519779266166, 121.389413057222 24.9520800744903, 121.388486430082 24.9521992470096, 121.387858950287 24.9520922349514, 121.387477111807 24.9521043954126, 121.387355507195 24.9515571746607, 121.387119594249 24.9512811321925, 121.386818014812 24.9511230461975, 121.386394830764 24.9507606644551, 121.386195399201 24.950506510817, 121.385307685537 24.9488125585783, 121.383765739062 24.9487335155808, 121.381705756943 24.9485170593723, 121.379453639537 24.9480196965111, 121.378193815762 24.9475952964168, 121.377060460782 24.9472146739827, 121.375090466076 24.9463938428548, 121.373485285203 24.9455450426663, 121.373409890344 24.9453869566713, 121.374263554717 24.9442292807695, 121.375370156682 24.9427834019383, 121.374579726707 24.9418993364125, 121.374129789644 24.9414870967794, 121.373672556305 24.9412657763864, 121.373456100096 24.941219566634, 121.373356384315 24.9411441717748, 121.372814027748 24.9412171345418, 121.371106699002 24.9412803689398, 121.369430987455 24.9412876652164, 121.369119679649 24.9412365912796, 121.369012667591 24.941187949435, 121.368900791348 24.9411320113137, 121.368737841169 24.9410067585638, 121.368594347727 24.9408097590931, 121.36852138496 24.9406662656515, 121.368463014747 24.9404279206129, 121.368248990631 24.9389978503812, 121.366952685472 24.9390343317647, 121.366969710117 24.938489543105, 121.367047537069 24.9374936013365, 121.367098611005 24.9375106259821)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400094100'=='0100020200' || '0400094100'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
