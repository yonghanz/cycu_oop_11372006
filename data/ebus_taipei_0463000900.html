
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">0</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463000900">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463000900">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463000900" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0463000900" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463000900" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463000900',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="K5XLtvzPImQwe_H12LmCktgeF8FuSpC23ByKpIUTQ1X0uQbIn55HeVCR4qI8cvAwOm6GkSMIPOLJ9wtS4qmGw8SnRVM1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">新店-汐止</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0463000900" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0463000900" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">新店 - 汐止</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0740 - 0740 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 新店-汐止去班表:0740<br/>新店-汐止返班表:1800<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">1.往程:捷運南港展覽館站(經貿二) 返程:捷運南港展覽館站(南港路) 2.新店交流道</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">三段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">中興巴士汐止站:02-2642-2625</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 汐止</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 新店</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">捷運新店站(新店路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700841" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.958392" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.53755" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">捷運新店區公所站(北新)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967638" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5416161" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">崇光中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314600960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972713" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54022" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">中正國宅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314800260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974454" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537621" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">耕莘醫院(中正路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314801560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97615" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.535279" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">花開富貴</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314801100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.981939" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.533911" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">民權路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314100320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982831" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.540005" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">捷運大坪林站(民權路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314100620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982813" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542306" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">中興路三段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314400040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.981485" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5437477" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">寶中路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314401040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.979878" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.544309" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">寶橋路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314401840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.976868" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.546288" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">寶興路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314601440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974445" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5480377" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">捷運南港展覽館站(經貿二)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.056527" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6166139" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">遠東世界中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217501520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.060656" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.646552" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">東方科學園區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2216100320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.061077" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.648377" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">連興街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2216300220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.06234" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.65414" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">秀峰高中(忠孝東路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217700220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.066644" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.662214" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">秀峰高中(忠孝東路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217500860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.066476" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.661871" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">連興街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217501360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062102" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.652972" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">東方科學園區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2217500960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.06145" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.64922" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">遠東世界中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2210100260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.060816" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6461518" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">捷運南港展覽館站(南港路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054878" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6179651" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">寶興路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314501200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97417" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.548434" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">寶橋路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314401800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.976856" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.546866" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">寶中路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314401000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.980011" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.54468" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">中興路三段</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314400000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.981602" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.544084" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">捷運大坪林站(民權路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314100660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982998" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.542517" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">民權路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314100360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.982991" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.539702" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">花開富貴</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314801140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.98182" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53367" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">耕莘醫院(中正路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314801520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.97613" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53501" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">中正國宅</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314800220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974051" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.537963" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">崇光中學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314600920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972496" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.540277" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">捷運新店區公所站(北新)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967768" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.541385" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">捷運新店站(新店路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2314700841" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958392" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.53755" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0463000900";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 17;
        var existBackNum = 17;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0463000900',
                        url: './StopStatusRecent3OfRoute?routeid=0463000900&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0463000900',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0463000900',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0463000900');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0463000900","Name":"新店-汐止","BeginStop":"新店","GoDirStops":[{"UniStopId":"2314700841","Name":"捷運新店站(新店路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53755,"Latitude":24.958392,"PublicId":"2314700841"},{"UniStopId":"2314700900","Name":"捷運新店區公所站(北新)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5416161,"Latitude":24.967638,"PublicId":"2314700900"},{"UniStopId":"2314600960","Name":"崇光中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54022,"Latitude":24.972713,"PublicId":"2314600960"},{"UniStopId":"2314800260","Name":"中正國宅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537621,"Latitude":24.974454,"PublicId":"2314800260"},{"UniStopId":"2314801560","Name":"耕莘醫院(中正路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.535279,"Latitude":24.97615,"PublicId":"2314801560"},{"UniStopId":"2314801100","Name":"花開富貴","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.533911,"Latitude":24.981939,"PublicId":"2314801100"},{"UniStopId":"2314100320","Name":"民權路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.540005,"Latitude":24.982831,"PublicId":"2314100320"},{"UniStopId":"2314100620","Name":"捷運大坪林站(民權路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542306,"Latitude":24.982813,"PublicId":"2314100620"},{"UniStopId":"2314400040","Name":"中興路三段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5437477,"Latitude":24.981485,"PublicId":"2314400040"},{"UniStopId":"2314401040","Name":"寶中路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.544309,"Latitude":24.979878,"PublicId":"2314401040"},{"UniStopId":"2314401840","Name":"寶橋路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.546288,"Latitude":24.976868,"PublicId":"2314401840"},{"UniStopId":"2314601440","Name":"寶興路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5480377,"Latitude":24.974445,"PublicId":"2314601440"},{"UniStopId":"1156800340","Name":"捷運南港展覽館站(經貿二)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6166139,"Latitude":25.056527,"PublicId":"1156800340"},{"UniStopId":"2217501520","Name":"遠東世界中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.646552,"Latitude":25.060656,"PublicId":"2217501520"},{"UniStopId":"2216100320","Name":"東方科學園區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.648377,"Latitude":25.061077,"PublicId":"2216100320"},{"UniStopId":"2216300220","Name":"連興街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.65414,"Latitude":25.06234,"PublicId":"2216300220"},{"UniStopId":"2217700220","Name":"秀峰高中(忠孝東路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.662214,"Latitude":25.066644,"PublicId":"2217700220"}],"LastStop":"汐止","BackDirStops":[{"UniStopId":"2217500860","Name":"秀峰高中(忠孝東路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.661871,"Latitude":25.066476,"PublicId":"2217500860"},{"UniStopId":"2217501360","Name":"連興街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.652972,"Latitude":25.062102,"PublicId":"2217501360"},{"UniStopId":"2217500960","Name":"東方科學園區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.64922,"Latitude":25.06145,"PublicId":"2217500960"},{"UniStopId":"2210100260","Name":"遠東世界中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6461518,"Latitude":25.060816,"PublicId":"2210100260"},{"UniStopId":"1156800620","Name":"捷運南港展覽館站(南港路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6179651,"Latitude":25.054878,"PublicId":"1156800620"},{"UniStopId":"2314501200","Name":"寶興路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.548434,"Latitude":24.97417,"PublicId":"2314501200"},{"UniStopId":"2314401800","Name":"寶橋路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.546866,"Latitude":24.976856,"PublicId":"2314401800"},{"UniStopId":"2314401000","Name":"寶中路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.54468,"Latitude":24.980011,"PublicId":"2314401000"},{"UniStopId":"2314400000","Name":"中興路三段","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.544084,"Latitude":24.981602,"PublicId":"2314400000"},{"UniStopId":"2314100660","Name":"捷運大坪林站(民權路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.542517,"Latitude":24.982998,"PublicId":"2314100660"},{"UniStopId":"2314100360","Name":"民權路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.539702,"Latitude":24.982991,"PublicId":"2314100360"},{"UniStopId":"2314801140","Name":"花開富貴","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53367,"Latitude":24.98182,"PublicId":"2314801140"},{"UniStopId":"2314801520","Name":"耕莘醫院(中正路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53501,"Latitude":24.97613,"PublicId":"2314801520"},{"UniStopId":"2314800220","Name":"中正國宅","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.537963,"Latitude":24.974051,"PublicId":"2314800220"},{"UniStopId":"2314600920","Name":"崇光中學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.540277,"Latitude":24.972496,"PublicId":"2314600920"},{"UniStopId":"2314700940","Name":"捷運新店區公所站(北新)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.541385,"Latitude":24.967768,"PublicId":"2314700940"},{"UniStopId":"2314700841","Name":"捷運新店站(新店路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.53755,"Latitude":24.958392,"PublicId":"2314700841"}],"RouteMapUrl":"../MapOverview?nid=0463000900","RouteTracks":null,"StopDirection":null,"TicketPrice":"三段票","BusTimeDesc":"0740 - 0740","HeadwayDesc":"新店-汐止去班表:0740;新店-汐止返班表:1800","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"1.往程:捷運南港展覽館站(經貿二) 返程:捷運南港展覽館站(南港路) 2.新店交流道","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"中興巴士汐止站:02-2642-2625","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.662258304151 25.0667008379858, 121.661598087862 25.0660087564326, 121.661187354226 25.0657524544571, 121.660945914935 25.065606077861, 121.659758913913 25.0650710468661, 121.658830199524 25.0646624760884, 121.65895189838 25.0644750704867, 121.658055129941 25.0640857895522, 121.655846295719 25.0630881223241, 121.653738623671 25.0622323819446, 121.652147411139 25.0616012523602, 121.651412654301 25.0614276222536, 121.65064709244 25.0613197923216, 121.649654486153 25.0612646715529, 121.648331011103 25.0611819903533, 121.647496613327 25.0610469442741, 121.64668731594 25.0608092352526, 121.645978420109 25.0605611905646, 121.645430014642 25.0602904078736, 121.644921161304 25.0600168685172, 121.644445775151 25.0597026764626, 121.643788601333 25.0591597286447, 121.643326145683 25.058768363751, 121.642992995067 25.0584583026485, 121.642128933196 25.0577169089207, 121.641144693704 25.0569107415056, 121.640444164669 25.0564580451706, 121.639661488907 25.0561162824461, 121.639101674173 25.0559261076142, 121.638221639327 25.0557717626061, 121.63740853885 25.0557304201602, 121.636834272377 25.055782787256, 121.636091148743 25.0559316199323, 121.635228608107 25.0562051684077, 121.633901329968 25.0567095433409, 121.633353685119 25.0569520835533, 121.63289122947 25.0566185906375, 121.632518526726 25.056253401073, 121.630832236964 25.0548112361781, 121.630497945421 25.0545559443512, 121.630140835343 25.0543812706896, 121.629660505174 25.0542548302309, 121.628573582273 25.0538799869057, 121.627827416167 25.0537697386507, 121.627368002989 25.0537780072732, 121.626112222927 25.0540398466993, 121.62461836948 25.0545800610108, 121.624088218842 25.0546985770974, 121.623512431133 25.0547516336804, 121.622374546838 25.0548453439528, 121.621016843984 25.0548901319253, 121.620286650853 25.0547302732407, 121.619153330264 25.0547027113774, 121.618471816675 25.0548350082645, 121.61658548442 25.0550871988099, 121.616552017235 25.0555833098438, 121.616730001811 25.0581279144549, 121.617882337846 25.0580893289143, 121.618032179561 25.0581162009884, 121.619425631453 25.0590491406279, 121.618756287749 25.0598070627279, 121.618000994229 25.0608591886359, 121.617257109977 25.0619905411889, 121.617096619612 25.0624563081446, 121.61717496325 25.0626326928017, 121.617601669861 25.0624645761811, 121.618835392005 25.0617004694534, 121.620142133463 25.0605133041017, 121.620994025449 25.0595535038563, 121.622029226336 25.0582491832175, 121.622345643359 25.057642149174, 121.622418662672 25.057274895563, 121.622439959972 25.0569221105701, 121.622409535258 25.0565989531131, 121.622272624046 25.0561745062034, 121.622141797777 25.0559119822978, 121.621581983043 25.0549300965638, 121.621265285217 25.0542530613448, 121.620823647052 25.0531544137561, 121.620601546641 25.0522944696469, 121.620521515897 25.0516689337934, 121.620543739685 25.0510272813949, 121.620650226183 25.0504367492793, 121.620990982978 25.0494107188034, 121.621305118147 25.0487898593889, 121.621694554484 25.0482068964107, 121.622404210933 25.047412380938, 121.622942242479 25.0470064604055, 121.623775308012 25.0464142323559, 121.624447235924 25.0460264855528, 121.624731457014 25.0456390983449, 121.624833871214 25.0453702992862, 121.624833323074 25.0448851927257, 121.624747652682 25.043784967106, 121.624436114745 25.0418583152022, 121.624191692471 25.0408334780461, 121.623856230399 25.0399706977216, 121.623101611 25.0385742636034, 121.622388237959 25.0375559643331, 121.621819295811 25.0369212619655, 121.621137021604 25.0362224653324, 121.620424322683 25.0356435775328, 121.619818870879 25.0352025183281, 121.618403096915 25.0343188739564, 121.617529507161 25.0337682899877, 121.616567616729 25.0332536449144, 121.615275772454 25.0325033682345, 121.614487340314 25.0320432107188, 121.612680990136 25.0309939654796, 121.610302352648 25.0296122986846, 121.60946578503 25.0291207124804, 121.608096989271 25.0282928432326, 121.606545328868 25.0273775887822, 121.60550913484 25.0267533957488, 121.604548952207 25.0260952243237, 121.603542711386 25.0253767186255, 121.602579467425 25.0244787785118, 121.601800594751 25.0238171289099, 121.601038455671 25.022983169643, 121.600462115826 25.0221740817796, 121.599754532749 25.0204550667635, 121.599152123416 25.0188711851602, 121.598373250742 25.0169219764446, 121.597732810517 25.0148307471116, 121.596947852901 25.0119991906486, 121.596728446412 25.010903586984, 121.596210028146 25.0084715351861, 121.595720345069 25.0062323905063, 121.595217382769 25.0039497684172, 121.594763749208 25.0019181934423, 121.594398145628 25.000228616446, 121.594087801937 24.9988945337273, 121.593809218601 24.9976496849049, 121.593386089272 24.9955818997581, 121.593069607617 24.9940912331731, 121.592593513055 24.9919084220409, 121.592197064304 24.9903318229769, 121.591620485516 24.9883874790882, 121.590237431712 24.9858387399243, 121.588948433588 24.9840417105721, 121.587819580848 24.9826614183297, 121.586578313474 24.981476613861, 121.585093028797 24.9803087344402, 121.584190097943 24.9796551590019, 121.582987855548 24.9789801794014, 121.581155593883 24.9780848951534, 121.579150670591 24.9773058280012, 121.577321710471 24.9769038017878, 121.575344755823 24.9765578188511, 121.573160991484 24.9764011639553, 121.570491765508 24.9765294714154, 121.568127789036 24.9768920446665, 121.566271256118 24.9772843857683, 121.564644212645 24.9775268895349, 121.562841921207 24.9775331472396, 121.561349855475 24.9773293320383, 121.560287181604 24.9770823195896, 121.558978664072 24.976624732267, 121.557357402829 24.9758752158109, 121.55547436487 24.974827174394, 121.554324728331 24.9741481442553, 121.553646639611 24.9738440144157, 121.552754502655 24.9736294434268, 121.55117980276 24.9735584703817, 121.548962754922 24.9736592281298, 121.548374756911 24.9736709541869, 121.548350698325 24.9740345802927, 121.548281241333 24.9744687003269, 121.548147674681 24.9749518073516, 121.547557340501 24.975758554753, 121.546840267859 24.9767449732492, 121.546158356928 24.9776548249203, 121.545491295078 24.9785601077629, 121.544809020871 24.9795212309215, 121.5444151232 24.9804846041967, 121.54401804523 24.9815173743589, 121.543552638353 24.9827258378174, 121.543472725665 24.9829376268591, 121.543213244632 24.9829885202625, 121.541466105443 24.9829857624653, 121.539589661219 24.9829830046681, 121.537324541277 24.9829802468707, 121.536099185929 24.9829195753145, 121.534940004334 24.9828340835254, 121.533711606514 24.9827844431044, 121.533729093317 24.9821730112893, 121.533797977825 24.9809531498033, 121.533869815026 24.9798473491962, 121.533930664454 24.9788552023294, 121.534078616433 24.9782645333309, 121.534307930905 24.9776293141877, 121.534806684553 24.9766324079058, 121.535175795866 24.9760338486677, 121.535633245236 24.9755911878784, 121.536221461185 24.9751741511582, 121.536859803774 24.9747803525976, 121.53771549885 24.9742639195333, 121.538687568455 24.9736447485957, 121.539810240394 24.972864230234, 121.540525981787 24.9723781275152, 121.541425032079 24.9716872377929, 121.542514236833 24.9708460295001, 121.542111264699 24.969767859456, 121.541855575224 24.9689921474948, 121.541661425435 24.9684540221054, 121.541555097731 24.9681196476869, 121.541296487663 24.9673749501932, 121.541071344781 24.9666550716653, 121.5406474174 24.965605735193, 121.54036729092 24.9649048808191, 121.540173158997 24.9644727292661, 121.539570473047 24.9630881379713, 121.539255850549 24.9623450249311, 121.539070889602 24.9619241318482, 121.538003764702 24.959281492815, 121.537909373017 24.958943898961, 121.537642099228 24.9588309478652, 121.537496060601 24.9587019954641, 121.537464114652 24.9583868545356, 121.537499103073 24.9583868545356, 121.537517357901 24.958680618315, 121.537649705406 24.9587923311176, 121.538031535564 24.9589467980356, 121.538104037618 24.9592384983115, 121.539119599391 24.9617702674355, 121.539429931472 24.9623853607379, 121.539951650395 24.9636508888965, 121.540258244305 24.9643181955821, 121.540508913651 24.9649073068101, 121.540766709313 24.9655492815915, 121.541238273009 24.9667453922705, 121.541582479973 24.9678093576122, 121.541816750269 24.9684354532261, 121.542212823873 24.9695798123241, 121.542690700173 24.9708984328076, 121.541666752527 24.9716118672231, 121.54051761499 24.9724987914898, 121.539748612386 24.9730171182021, 121.539053672034 24.9735082122837, 121.538359059481 24.9739942073384, 121.537698654982 24.9743670002589, 121.537142753613 24.9747251929612, 121.536482537323 24.9751554374694, 121.536117440758 24.9753705591592, 121.535571317145 24.9757580530486, 121.535230560351 24.9761248610863, 121.534445012475 24.9775073026952, 121.534283591134 24.9779388900179, 121.534046278366 24.9787641919311, 121.534015853652 24.9790627333645, 121.533961089167 24.9800838361146, 121.533906324683 24.9811049303867, 121.533805923127 24.9826706837307, 121.534294035045 24.9827156192668, 121.534884087646 24.9827626078415, 121.536972769377 24.9828709666198, 121.538614746726 24.9829113807481, 121.540046031926 24.9828837239263, 121.541069823546 24.9829030285213, 121.541739167249 24.9828864817258, 121.542630000945 24.9828766705688, 121.543301476302 24.9828671771282, 121.543614850855 24.9820777543826, 121.544143621284 24.9807512890252, 121.544671570308 24.9794315811635, 121.545270270209 24.9785658275157, 121.545792526811 24.9777857892834, 121.546215152226 24.9771544261049, 121.547037341897 24.9760259968662, 121.547683318872 24.9751156549001, 121.548066704786 24.9744944107947, 121.548142318867 24.9740780936347, 121.548193009663 24.9735902779521, 121.548948856855 24.9735559714786, 121.550030728437 24.9735214895876, 121.551368924354 24.973466455113, 121.551853068421 24.9733861202536, 121.552587644764 24.9731443270686, 121.553199787674 24.972690504901, 121.55368923421 24.9723429625632, 121.554261218829 24.9721471418621, 121.554720632007 24.9721692061821, 121.55503400656 24.9723870911288, 121.555152662943 24.9727456351379, 121.555122832461 24.973222555964, 121.555127942793 24.973708912915, 121.555348141729 24.974170147743, 121.555691940995 24.9746059101629, 121.557329106356 24.9756483715553, 121.558400290182 24.9761769510959, 121.559481528495 24.9765668527853, 121.560614796313 24.9769249377079, 121.561675427966 24.977198570524, 121.562897959873 24.9772831161794, 121.564703184951 24.9772320266621, 121.566064676624 24.9769727375098, 121.567051868199 24.9767459782865, 121.568169647449 24.9764892229002, 121.570584753718 24.9761072623221, 121.573322362345 24.9759416060364, 121.575726561379 24.9761647179884, 121.577759700695 24.9765488272023, 121.579582297495 24.9770113955606, 121.581448026294 24.9777299263091, 121.583166730256 24.9785433329055, 121.584562456012 24.9794034871485, 121.585533998061 24.9800359742655, 121.586960124316 24.9812266754588, 121.587968979175 24.9822004092488, 121.58911675678 24.9835400522529, 121.589893536001 24.9846275869201, 121.591033171791 24.9864677628918, 121.592022091738 24.9883764483835, 121.592691435441 24.9903509287551, 121.593116731871 24.9927275771257, 121.593589252177 24.9947949400754, 121.593955379335 24.9963968135035, 121.594271584936 24.9976851952963, 121.594556254071 24.9991235402146, 121.594685877747 24.9996742731864, 121.594855677589 25.0003957028998, 121.59509273806 25.0013901715771, 121.595432193856 25.0029725803755, 121.595875139714 25.0049828195932, 121.596357480553 25.0072302873584, 121.596721873071 25.0090581069377, 121.597270997228 25.0114061468228, 121.597783011295 25.0132909068321, 121.598306316372 25.0148693462617, 121.599018254675 25.0167344978787, 121.599564378288 25.0181970988009, 121.600807227846 25.0214971918156, 121.601567207665 25.022690590932, 121.602244795573 25.0237233949278, 121.603702139364 25.0250384210158, 121.604461202786 25.0257141607533, 121.605022571942 25.0261521847113, 121.6060693601 25.0268856879071, 121.60760316055 25.0278235732237, 121.610429116064 25.0295230233716, 121.612174996936 25.030515999368, 121.614011953989 25.0315702422416, 121.616681789271 25.0331774167439, 121.619854619917 25.0350633086873, 121.620604589112 25.0356132547632, 121.62130799469 25.036208375304, 121.622897091297 25.0379287901428, 121.623533728433 25.0388942727857, 121.624300431221 25.0406550013637, 121.624651940344 25.0418359737495, 121.624910201484 25.0433069138031, 121.625142022647 25.0445691254724, 121.625391730111 25.0456493098517, 121.625163034256 25.0458125362022, 121.624241850985 25.0463290644119, 121.623399247478 25.0467995279406, 121.622732797842 25.0472807651284, 121.622032268807 25.047915413882, 121.621645874942 25.0484198229262, 121.621362925104 25.0488415403703, 121.621015322749 25.0495512903098, 121.620750627739 25.0503382121382, 121.620619801469 25.0510327939334, 121.620617080363 25.0517918511809, 121.620704990668 25.0523902489768, 121.620890581422 25.0530634584145, 121.621291249067 25.0541356954765, 121.621748534684 25.0550147090497, 121.622256651072 25.0559312754124, 121.622411056494 25.0562599469333, 121.622493203221 25.0566595882659, 121.622523627935 25.0570378682578, 121.622477990864 25.0575236359339, 121.622319782353 25.0579983772349, 121.620620562087 25.060204625446, 121.619393685503 25.0614276222536, 121.618595797384 25.0620077663298, 121.617773569494 25.0625231414235, 121.617304268284 25.0626967699776, 121.617179526957 25.0625010933355, 121.617170399543 25.0624211689834, 121.618143990384 25.0610810503132, 121.619189079303 25.0594970042537, 121.619560260812 25.0590767015137, 121.618063364893 25.0580789934996, 121.617903635145 25.0580314505807, 121.616917874418 25.0580645239175, 121.616784766296 25.055772796167, 121.616726198722 25.055189866397, 121.619220264635 25.0548067573787, 121.62016799447 25.0548122697472, 121.621022928927 25.054985909227, 121.623294133812 25.0548673934182, 121.623871442756 25.0548232944834, 121.624337701495 25.0548618810522, 121.625850570389 25.0551016687435, 121.626140365787 25.0551126934537, 121.626673558897 25.0550713507855, 121.627115477865 25.0549886654072, 121.627717887198 25.054724071822, 121.628454925889 25.054359565661, 121.628838277283 25.0542713674101, 121.629216304352 25.0542548302309, 121.629581400918 25.054287904587, 121.630224122997 25.0545063329224, 121.630564499482 25.0546989216207, 121.631571557509 25.0555726296969, 121.63194882396 25.0559226624152, 121.632750515168 25.0566289261754, 121.633320217934 25.0571146954724, 121.635033889939 25.056392586658, 121.63622273563 25.0559950115729, 121.636852527206 25.0558875213804, 121.638358550539 25.0559316199323, 121.639327577673 25.0561217947557, 121.640276828743 25.0565269488302, 121.641053419563 25.0570072062619, 121.641738736241 25.0575288036648, 121.642338103103 25.0580800270411, 121.642926060697 25.0585602783866, 121.644314948882 25.0598018950931, 121.644796419978 25.0601333122977, 121.645311358259 25.0604116744963, 121.645759362169 25.0606356040237, 121.64666601864 25.0609718420534, 121.647514868155 25.0611709661892, 121.647968196391 25.0612619155138, 121.649578424368 25.0613969613561, 121.650226470772 25.0614024734281, 121.651427866658 25.061554399816, 121.653066998114 25.0621035380687, 121.655618110366 25.0631652902449, 121.658012535341 25.0641629568445, 121.658830199524 25.064554993499, 121.658751855886 25.064685212778, 121.659737616613 25.0651206540178, 121.660952323312 25.0656752881659, 121.661579833034 25.0660655975239, 121.66175577914 25.0662705983025, 121.662176157424 25.0666953261521)","wkt0":"LINESTRING (121.537473743142 24.9583601381796, 121.537493874746 24.9586657725337, 121.537649705406 24.9587923311176, 121.538031535564 24.9589467980356, 121.538104037618 24.9592384983115, 121.538795108434 24.9610284908041, 121.539119599391 24.9617702674355, 121.539429931472 24.9623853607379, 121.539951650395 24.9636508888965, 121.540258244305 24.9643181955821, 121.540508913651 24.9649073068101, 121.540766709313 24.9655492815915, 121.541238273009 24.9667453922705, 121.541582479973 24.9678093576122, 121.541816750269 24.9684354532261, 121.542212823873 24.9695798123241, 121.542669527162 24.9708646095832, 121.541666752527 24.9716118672231, 121.54051761499 24.9724987914898, 121.539748612386 24.9730171182021, 121.539053672034 24.9735082122837, 121.538337571975 24.9739731122804, 121.537698654982 24.9743670002589, 121.537142753613 24.9747251929612, 121.536482537323 24.9751554374694, 121.536117440758 24.9753705591592, 121.535571317145 24.9757580530486, 121.535230560351 24.9761248610863, 121.534995725684 24.9764685161236, 121.534445012475 24.9775073026952, 121.534146538018 24.9782858509358, 121.534046278366 24.9787641919311, 121.534015853652 24.9790627333645, 121.533961089167 24.9800838361146, 121.533906324683 24.9811049303867, 121.533805923127 24.9826706837307, 121.534294035045 24.9827156192668, 121.534884087646 24.9827626078415, 121.536972769377 24.9828709666198, 121.538614746726 24.9829113807481, 121.540046031926 24.9828837239263, 121.541069823546 24.9829030285213, 121.541739167249 24.9828864817258, 121.542630000945 24.9828766705688, 121.543301476302 24.9828671771282, 121.543614850855 24.9820777543826, 121.544143621284 24.9807512890252, 121.544671570308 24.9794315811635, 121.545270270209 24.9785658275157, 121.545792526811 24.9777857892834, 121.546215152226 24.9771544261049, 121.547037341897 24.9760259968662, 121.547683318872 24.9751156549001, 121.548066704786 24.9744944107947, 121.548142318867 24.9740780936347, 121.548193009663 24.9735902779521, 121.548086758828 24.9731614426035, 121.547651184119 24.9722884630412, 121.54735653064 24.9721640131246, 121.547222929994 24.9721731638537, 121.547076518328 24.9722024461871, 121.546840429515 24.9723415372704, 121.546726960474 24.9725520040412, 121.54667571639 24.9727231226765, 121.54667571639 24.9729125427702, 121.54676356339 24.9731760837702, 121.546915465494 24.9733590983535, 121.547032594828 24.9734487754993, 121.54724672189 24.9735576691764, 121.547687787036 24.9736107434055, 121.548948856855 24.9735559714786, 121.550030728437 24.9735214895876, 121.551331607389 24.9734862934889, 121.551853068421 24.9733861202536, 121.55224485016 24.9732584403327, 121.55266212341 24.9730607845827, 121.553610138951 24.9723827155516, 121.554096957743 24.9721749939996, 121.554360498743 24.9721237499162, 121.554720632007 24.9721692061821, 121.55503400656 24.9723870911288, 121.555127329847 24.9725785411557, 121.555152662943 24.9727456351379, 121.555122832461 24.973222555964, 121.555120009264 24.9736208092076, 121.55522249743 24.9739648766242, 121.555348141729 24.974170147743, 121.55550800018 24.9743858101658, 121.555866708763 24.9747454338219, 121.557334485721 24.9756330545509, 121.558584475325 24.9762269368737, 121.559481528495 24.9765668527853, 121.560614796313 24.9769249377079, 121.561424861658 24.9771237083318, 121.562897959873 24.9772831161794, 121.564052951074 24.9772673747797, 121.565370656074 24.9771136425298, 121.566064676624 24.9769727375098, 121.567051868199 24.9767459782865, 121.569129775615 24.9763028879258, 121.570584753718 24.9761072623221, 121.572312399218 24.9759725466029, 121.573322362345 24.9759416060364, 121.57527174503 24.9760896759362, 121.577211699613 24.9763568772278, 121.579316367321 24.9768555919673, 121.580570017216 24.9773167887172, 121.581757781862 24.9778484460817, 121.584023502403 24.9789639199669, 121.58489465182 24.9795459063417, 121.585533998061 24.9800359742655, 121.586960124316 24.9812266754588, 121.587705755819 24.9818857477891, 121.587968979175 24.9822004092488, 121.588648280923 24.982818207091, 121.589903760964 24.9844122641115, 121.590668761923 24.98566682908, 121.591680832568 24.987594887715, 121.592105426401 24.9887396439335, 121.592577604026 24.9900106802145, 121.592771599485 24.9909394792247, 121.593154099964 24.9927183809743, 121.593622617297 24.9947287961718, 121.594001457484 24.9963887384423, 121.594271584936 24.9976851952963, 121.594609065901 24.9991220612438, 121.594962284047 25.000795729608, 121.59509273806 25.0013901715771, 121.595432193856 25.0029725803755, 121.595901148859 25.0049821882008, 121.596357480553 25.0072302873584, 121.596744846088 25.0090926957416, 121.597270997228 25.0114061468228, 121.597819141692 25.0138831024593, 121.598580482358 25.0171425921878, 121.599096583483 25.0187512903749, 121.60000250567 25.0208623635932, 121.600685150066 25.0219028014993, 121.601234193816 25.0226037473533, 121.601958931566 25.0233275700302, 121.60312107417 25.0245226552591, 121.603702139364 25.0250384210158, 121.604461202786 25.0257141607533, 121.605022571942 25.0261521847113, 121.6060693601 25.0268856879071, 121.60760316055 25.0278235732237, 121.610429116064 25.0295230233716, 121.612174996936 25.030515999368, 121.613984819834 25.0315961689034, 121.616389631459 25.0329742687156, 121.61845769625 25.0341766745279, 121.619854619917 25.0350633086873, 121.620604589112 25.0356132547632, 121.621806863124 25.036683974319, 121.622826254353 25.0378872952041, 121.623325884165 25.0385735998915, 121.623873097769 25.0395710293704, 121.624300431221 25.0406550013637, 121.624651940344 25.0418359737495, 121.624784510394 25.042479131099, 121.625029749936 25.0431526247655, 121.625582453977 25.0440109631612, 121.625692262727 25.0443129372236, 121.625728865644 25.0446423634735, 121.625706903894 25.0448729618485, 121.625626377477 25.0451676153276, 121.625468984936 25.0455043621608, 121.625048051394 25.0458996736608, 121.624524629686 25.0461687050982, 121.623399247478 25.0467995279406, 121.622732797842 25.0472807651284, 121.622032268807 25.047915413882, 121.621645874942 25.0484198229262, 121.621362925104 25.0488415403703, 121.621015322749 25.0495512903098, 121.620750627739 25.0503382121382, 121.620619801469 25.0510327939334, 121.620608117604 25.0516902550762, 121.620704990668 25.0523902489768, 121.621036371728 25.0535332119299, 121.621291249067 25.0541356954765, 121.621748534684 25.0550147090497, 121.622256651072 25.0559312754124, 121.622411056494 25.0562599469333, 121.622493203221 25.0566595882659, 121.622523627935 25.0570378682578, 121.622477990864 25.0575236359339, 121.622319782353 25.0579983772349, 121.620598966874 25.0601803015952, 121.619383750041 25.0614055842303, 121.618618749083 25.0619500526156, 121.617743939375 25.0624807949072, 121.617307449594 25.062674332829, 121.617181169531 25.0626395600582, 121.617106133552 25.0625352417457, 121.61708966224 25.0623705286208, 121.617201584875 25.0620963035155, 121.617956117777 25.0609387695012, 121.618755094948 25.0598183902567, 121.619428673925 25.0590467290502, 121.618047391918 25.0581220577218, 121.617913523178 25.0580972527317, 121.616745214168 25.0581213686944, 121.616560750094 25.0556053945493, 121.616598414924 25.0550958118658, 121.618498874531 25.0548266674974, 121.619134314819 25.0547009887608, 121.620258507993 25.0547230382522, 121.621077693412 25.054877384581, 121.621553387926 25.0548815718724, 121.623338249647 25.0547506001109, 121.62390186747 25.0547257944383, 121.624394747834 25.0546513773906, 121.626162423705 25.0540339897709, 121.627125365897 25.0538134934387, 121.627728535848 25.0537583692937, 121.628419176851 25.0538438117079, 121.629101451058 25.0540780889897, 121.629688648034 25.0542544857064, 121.63021955929 25.0544198573976, 121.630678972468 25.0546596459537, 121.631918779555 25.0557386886505, 121.632719710146 25.0564862956757, 121.633343416779 25.0569768887753, 121.635176505785 25.0562279066666, 121.636169112072 25.0559019912195, 121.636791297469 25.0557800310936, 121.63754062685 25.055728929393, 121.638257768674 25.0557579817923, 121.639200934802 25.0559495349645, 121.639894618277 25.056192076681, 121.64040879594 25.0564456425077, 121.641113071516 25.0568910719969, 121.642610784601 25.0581399724338, 121.644416491364 25.059676493755, 121.645495047468 25.0603586203636, 121.646667920185 25.0608140583388, 121.647538067 25.0610483222961, 121.647964012993 25.0611227354593, 121.649563592321 25.0612639825431, 121.650657360781 25.0613135912364, 121.651524465125 25.0614376128815, 121.652254658256 25.0616312241989, 121.653027445986 25.0619398992609, 121.655670592997 25.0630243898529, 121.65800949287 25.0640372154727, 121.658924050762 25.0644623853078, 121.658818790257 25.0646683325089, 121.659739898467 25.0650693243952, 121.660920377362 25.0655819306684, 121.661605694041 25.0660428610906, 121.662235485616 25.0666960151314)","wkt1":"LINESTRING (121.662206582138 25.066746999583, 121.661552450791 25.066055262782, 121.660966493511 25.0656446595159, 121.659722404257 25.0651230654761, 121.658773978804 25.0646783425161, 121.658827053033 25.0645502323078, 121.655928442446 25.0632744965498, 121.653616924816 25.0623305650212, 121.65210858768 25.0617336378709, 121.651199005201 25.0615176806626, 121.650552963722 25.0614389843918, 121.648786872993 25.0613474771001, 121.648281190634 25.0613039451031, 121.647489387458 25.0611964595673, 121.646649665357 25.0609649519391, 121.645747572593 25.0606087325021, 121.644865255893 25.0601677630992, 121.644204278986 25.0596930302025, 121.64356383876 25.0591907346128, 121.642111819294 25.0578774527385, 121.641179301817 25.0571153845055, 121.640449108685 25.0566165235299, 121.639958249495 25.056375885945, 121.639308547724 25.0561160052367, 121.638596620995 25.0559659332784, 121.637681548079 25.0558780862784, 121.636868119872 25.0558930337003, 121.636265015204 25.0559878950284, 121.636003297382 25.0560611593368, 121.635292880315 25.056298188531, 121.633341895543 25.0571277871006, 121.632721231382 25.0566427068912, 121.632173586533 25.0561355755286, 121.630712439653 25.0548753174439, 121.630300184781 25.0545459531624, 121.629670393206 25.0543282139463, 121.629120125873 25.0542638976537, 121.62885729273 25.0542896272094, 121.628436671061 25.0543916064162, 121.628071574496 25.0545514655425, 121.627331493333 25.0549483562651, 121.626790350227 25.0550737371848, 121.62606012204 25.0551323018515, 121.623891399228 25.0548239222786, 121.621926542927 25.0549573138534, 121.621468286145 25.0549922956952, 121.62099610852 25.0549758243828, 121.620234767854 25.0548349031536, 121.619341656687 25.0548019605286, 121.618506044479 25.0549352644042, 121.616713268218 25.0551778081278, 121.616792372474 25.0556808092068, 121.616941453572 25.0580800270411, 121.617872449814 25.0580386853739, 121.618042828211 25.0580690025979, 121.619559444041 25.0590790113402, 121.619193414875 25.0594715776214, 121.618660842437 25.0603106994858, 121.618274816654 25.0608836485611, 121.617504310777 25.0619626364557, 121.617169638925 25.0624538966339, 121.617218318467 25.0625696490961, 121.617607754804 25.0624290925207, 121.618835392005 25.0617004694534, 121.620142133463 25.0605133041017, 121.620994025449 25.0595535038563, 121.622029226336 25.0582491832175, 121.622345643359 25.057642149174, 121.622418662672 25.057274895563, 121.622439959972 25.0569221105701, 121.622409535258 25.0565989531131, 121.622272624046 25.0561745062034, 121.622141797777 25.0559119822978, 121.621581983043 25.0549300965638, 121.621265285217 25.0542530613448, 121.620823647052 25.0531544137561, 121.620601546641 25.0522944696469, 121.620521515897 25.0516689337934, 121.620543739685 25.0510272813949, 121.620650226183 25.0504367492793, 121.620783811603 25.0499182163734, 121.620990982978 25.0494107188034, 121.621305118147 25.0487898593889, 121.621694554484 25.0482068964107, 121.621973406395 25.0478583872385, 121.622522450145 25.0473020229052, 121.622942242479 25.0470064604055, 121.62317032177 25.0468435713741, 121.624251937957 25.0461728229263, 121.624696663394 25.0457875772285, 121.624790000832 25.045595411916, 121.62487418754 25.0452193169474, 121.62485222579 25.0446483114475, 121.62472045529 25.0434230288123, 121.624484366478 25.0422837630313, 121.624420311374 25.0417694920523, 121.624165921103 25.0408251368025, 121.62375413829 25.0397883591881, 121.623101611 25.0385742636034, 121.62270912502 25.0379472324802, 121.622231456957 25.0373652461053, 121.621819295811 25.0369212619655, 121.621188273833 25.0363129122514, 121.620393990541 25.0356284377098, 121.619818870879 25.0352025183281, 121.619041512771 25.034684997533, 121.618403096915 25.0343188739564, 121.617529507161 25.0337682899877, 121.616567616729 25.0332536449144, 121.615275772454 25.0325033682345, 121.614487340314 25.0320432107188, 121.612680990136 25.0309939654796, 121.610320867877 25.0295807208049, 121.608096989271 25.0282928432326, 121.605331890336 25.0266360161597, 121.604548952207 25.0260952243237, 121.603329710795 25.0251298061392, 121.602579467425 25.0244787785118, 121.601686239837 25.0235723520354, 121.601045688795 25.0229098392438, 121.600324611337 25.0220185582232, 121.599676739712 25.0208518402547, 121.599427839879 25.0203631913173, 121.598779968254 25.018723380651, 121.598033268754 25.0159040409954, 121.597732810517 25.0148307471116, 121.597270097942 25.0128870455897, 121.597019367963 25.0118411172462, 121.596796090171 25.0109004222881, 121.596210028146 25.0084715351861, 121.59587003638 25.0067084732577, 121.595478385171 25.0049396373102, 121.595040980317 25.0029328824044, 121.594398145628 25.000228616446, 121.594105775797 24.9988809395303, 121.593816612755 24.9974506805618, 121.59338835863 24.9954640572602, 121.593069607617 24.9940912331731, 121.592593513055 24.9919084220409, 121.592197064304 24.9903318229769, 121.591755868547 24.9887702988762, 121.591512459151 24.9882596881888, 121.590725496443 24.9866281131787, 121.590544312006 24.9862602538663, 121.589771990464 24.9851383744707, 121.588734297777 24.9836211835752, 121.587797263111 24.9825624442109, 121.58714756134 24.9818944409819, 121.586221507548 24.9810608095549, 121.585074006111 24.980173188826, 121.584530452799 24.9797943486386, 121.582949206799 24.9789415006804, 121.580802445737 24.9779038079931, 121.580315626946 24.9776732096182, 121.579147993904 24.9772769830453, 121.578558686946 24.9771104397745, 121.575899485051 24.9766117250351, 121.574971601113 24.9764872751184, 121.573160991484 24.9764011639553, 121.571538247531 24.9764488420559, 121.570130865385 24.9765861029934, 121.569032777885 24.9767480708996, 121.567969463157 24.9769695185454, 121.566271256118 24.9772843857683, 121.564644212645 24.9775268895349, 121.563804051241 24.9775487597015, 121.562881657741 24.9775139869307, 121.562134958241 24.9774352906599, 121.561282110283 24.9772833885558, 121.560288341096 24.9770427243787, 121.558930372888 24.9765732919726, 121.557357402829 24.9758752158109, 121.55547436487 24.974827174394, 121.554525211868 24.9742316203793, 121.553881000535 24.9739214106607, 121.553202016431 24.9737072835982, 121.552754502655 24.9736294434268, 121.552318055993 24.9735755130982, 121.55117980276 24.9735584703817, 121.548962754922 24.9736592281298, 121.548374756911 24.9736709541869, 121.547523073911 24.9736853218482, 121.547314437286 24.9736542093691, 121.547102140369 24.9735810035357, 121.546935597099 24.9734931565358, 121.546812977328 24.9733897532962, 121.546692187703 24.9732232100254, 121.546622642161 24.9730676476296, 121.546580548807 24.97292032089, 121.546582378953 24.9726622703276, 121.546692187703 24.9723932388902, 121.546995991911 24.9720537468381, 121.547592619453 24.9717325562445, 121.548220359473 24.9728654165151, 121.54830088589 24.9730941847442, 121.54838873289 24.9736944725774, 121.548350698325 24.9740345802927, 121.548273433702 24.9744576433897, 121.548147674681 24.9749518073516, 121.547557340501 24.975758554753, 121.546840267859 24.9767449732492, 121.546158356928 24.9776548249203, 121.545491295078 24.9785601077629, 121.544809020871 24.9795212309215, 121.5444151232 24.9804846041967, 121.54401804523 24.9815173743589, 121.543552638353 24.9827258378174, 121.543472725665 24.9829376268591, 121.543213244632 24.9829885202625, 121.541466105443 24.9829857624653, 121.539589661219 24.9829830046681, 121.537324541277 24.9829802468707, 121.536099185929 24.9829195753145, 121.534940004334 24.9828340835254, 121.533711606514 24.9827844431044, 121.533729093317 24.9821730112893, 121.533797977825 24.9809531498033, 121.533869815026 24.9798473491962, 121.533930664454 24.9788552023294, 121.534078616433 24.9782645333309, 121.534307930905 24.9776293141877, 121.534806684553 24.9766324079058, 121.535175795866 24.9760338486677, 121.535633245236 24.9755911878784, 121.536221461185 24.9751741511582, 121.536859803774 24.9747803525976, 121.53771549885 24.9742639195333, 121.538687568455 24.9736447485957, 121.539810240394 24.972864230234, 121.540525981787 24.9723781275152, 121.541425032079 24.9716872377929, 121.542514236833 24.9708460295001, 121.542111264699 24.969767859456, 121.541855575224 24.9689921474948, 121.541661425435 24.9684540221054, 121.541555097731 24.9681196476869, 121.541296487663 24.9673749501932, 121.541071344781 24.9666550716653, 121.5406474174 24.965605735193, 121.54036729092 24.9649048808191, 121.540173158997 24.9644727292661, 121.539570473047 24.9630881379713, 121.539255850549 24.9623450249311, 121.539070889602 24.9619241318482, 121.538003764702 24.959281492815, 121.537909373017 24.958943898961, 121.537642099228 24.9588309478652, 121.537336482205 24.9585463555181, 121.537244974913 24.9583523600598, 121.537466422559 24.9583532751328, 121.53747923358 24.9585509308827)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0463000900'=='0100020200' || '0463000900'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
