
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492888</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020600">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020600">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020600" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454020600" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020600" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020600',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="FOVHhwKtP8kbMT1hyBtoVMMJPv2_lQBh-yDrS7rWGqJRP1MWBoUENvIemDXEPexUe7wniG6DXLK2xKQdMPbUC6BxEkU1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F206 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454020600" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454020600" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">新泰活動中心站 - 林口長庚醫院</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0700 - 0800 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> F206新泰活動中心班表:0700 0800<br/>F206林口長庚醫院班表:1000 1200 1400 1600<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">新莊區公所新莊區公所站:(02)2992-9891</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 林口長庚醫院</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 新泰活動中心站</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">新泰活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424701261" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.036998" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.4453914" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">海山活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424100840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032415" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.443066" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">豐年國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424100440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.030497" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.443112" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">瓊泰活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424100640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.028994" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4431013" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">仁濟療養院新莊分院站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426300850" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.026265" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.443323" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">瓊林活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426300950" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.023414" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4410486" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">許厝</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426201000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.002077" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.432111" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">世界盃</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426401400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003153" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.43267" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">新樹路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426201870" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.005886" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.43312" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">西盛館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426200800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.012944" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4327276" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">新樹民安路口(新泰醫院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426201200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.021865" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4348185" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">建國一路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425700400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.030458" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.434521" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">福營消防分隊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425800560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029625" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.427796" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">富國公園站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426701260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.025914" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.420103" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">丹鳳國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425701950" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024242" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.415911" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">捷運迴龍站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424300740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.022547" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.412762" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">雙鳳福德宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426100860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.028" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.413082" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">林口長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3330500020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062056" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.367396" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">林口長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3330500020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062056" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.367396" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">雙鳳福德宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426100810" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.027614" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.412956" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">捷運迴龍站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425700900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.021617" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.411687" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">啞口橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425701910" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024324" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.416489" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">富國公園站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426701220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.025914" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.420003" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">福營消防分隊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425800520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029546" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.427786" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">建國一路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425700440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029839" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4345539" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">新樹民安路口(新泰醫院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426201240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.021698" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4345132" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">西盛館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426200840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.013078" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.432578" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">新樹路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426201830" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.005742" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4330311" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">許厝</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426201000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.002077" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.432111" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">世界盃</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426401400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.003153" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.43267" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">瓊林活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426300910" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.023519" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.441276" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">仁濟療養院新莊分院站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2426300810" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.026265" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.443423" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">豐年國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424100400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.030103" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4432295" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">海山活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424100800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032229" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.443143" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">新泰活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424701260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.036563" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4457655" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454020600";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 18;
        var existBackNum = 17;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454020600',
                        url: './StopStatusRecent3OfRoute?routeid=0454020600&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454020600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454020600',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454020600');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454020600","Name":"F206","BeginStop":"新泰活動中心站","GoDirStops":[{"UniStopId":"2424701261","Name":"新泰活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4453914,"Latitude":25.036998,"PublicId":"2424701261"},{"UniStopId":"2424100840","Name":"海山活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.443066,"Latitude":25.032415,"PublicId":"2424100840"},{"UniStopId":"2424100440","Name":"豐年國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.443112,"Latitude":25.030497,"PublicId":"2424100440"},{"UniStopId":"2424100640","Name":"瓊泰活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4431013,"Latitude":25.028994,"PublicId":"2424100640"},{"UniStopId":"2426300850","Name":"仁濟療養院新莊分院站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.443323,"Latitude":25.026265,"PublicId":"2426300850"},{"UniStopId":"2426300950","Name":"瓊林活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4410486,"Latitude":25.023414,"PublicId":"2426300950"},{"UniStopId":"2426201000","Name":"許厝","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.432111,"Latitude":25.002077,"PublicId":"2426201000"},{"UniStopId":"2426401400","Name":"世界盃","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.43267,"Latitude":25.003153,"PublicId":"2426401400"},{"UniStopId":"2426201870","Name":"新樹路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.43312,"Latitude":25.005886,"PublicId":"2426201870"},{"UniStopId":"2426200800","Name":"西盛館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4327276,"Latitude":25.012944,"PublicId":"2426200800"},{"UniStopId":"2426201200","Name":"新樹民安路口(新泰醫院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4348185,"Latitude":25.021865,"PublicId":"2426201200"},{"UniStopId":"2425700400","Name":"建國一路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.434521,"Latitude":25.030458,"PublicId":"2425700400"},{"UniStopId":"2425800560","Name":"福營消防分隊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.427796,"Latitude":25.029625,"PublicId":"2425800560"},{"UniStopId":"2426701260","Name":"富國公園站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.420103,"Latitude":25.025914,"PublicId":"2426701260"},{"UniStopId":"2425701950","Name":"丹鳳國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.415911,"Latitude":25.024242,"PublicId":"2425701950"},{"UniStopId":"2424300740","Name":"捷運迴龍站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.412762,"Latitude":25.022547,"PublicId":"2424300740"},{"UniStopId":"2426100860","Name":"雙鳳福德宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.413082,"Latitude":25.028,"PublicId":"2426100860"},{"UniStopId":"3330500020","Name":"林口長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367396,"Latitude":25.062056,"PublicId":"3330500020"}],"LastStop":"林口長庚醫院","BackDirStops":[{"UniStopId":"3330500020","Name":"林口長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367396,"Latitude":25.062056,"PublicId":"3330500020"},{"UniStopId":"2426100810","Name":"雙鳳福德宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.412956,"Latitude":25.027614,"PublicId":"2426100810"},{"UniStopId":"2425700900","Name":"捷運迴龍站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.411687,"Latitude":25.021617,"PublicId":"2425700900"},{"UniStopId":"2425701910","Name":"啞口橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.416489,"Latitude":25.024324,"PublicId":"2425701910"},{"UniStopId":"2426701220","Name":"富國公園站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.420003,"Latitude":25.025914,"PublicId":"2426701220"},{"UniStopId":"2425800520","Name":"福營消防分隊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.427786,"Latitude":25.029546,"PublicId":"2425800520"},{"UniStopId":"2425700440","Name":"建國一路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4345539,"Latitude":25.029839,"PublicId":"2425700440"},{"UniStopId":"2426201240","Name":"新樹民安路口(新泰醫院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4345132,"Latitude":25.021698,"PublicId":"2426201240"},{"UniStopId":"2426200840","Name":"西盛館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.432578,"Latitude":25.013078,"PublicId":"2426200840"},{"UniStopId":"2426201830","Name":"新樹路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4330311,"Latitude":25.005742,"PublicId":"2426201830"},{"UniStopId":"2426201000","Name":"許厝","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.432111,"Latitude":25.002077,"PublicId":"2426201000"},{"UniStopId":"2426401400","Name":"世界盃","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.43267,"Latitude":25.003153,"PublicId":"2426401400"},{"UniStopId":"2426300910","Name":"瓊林活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.441276,"Latitude":25.023519,"PublicId":"2426300910"},{"UniStopId":"2426300810","Name":"仁濟療養院新莊分院站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.443423,"Latitude":25.026265,"PublicId":"2426300810"},{"UniStopId":"2424100400","Name":"豐年國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4432295,"Latitude":25.030103,"PublicId":"2424100400"},{"UniStopId":"2424100800","Name":"海山活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.443143,"Latitude":25.032229,"PublicId":"2424100800"},{"UniStopId":"2424701260","Name":"新泰活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4457655,"Latitude":25.036563,"PublicId":"2424701260"}],"RouteMapUrl":"../MapOverview?nid=0454020600","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0700 - 0800","HeadwayDesc":"F206新泰活動中心班表:0700 0800;F206林口長庚醫院班表:1000 1200 1400 1600","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"新莊區公所新莊區公所站:(02)2992-9891","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.445789830531 25.036532852592, 121.444291217133 25.0365027184411, 121.444266936785 25.0342949256885, 121.443119599736 25.0340466942743, 121.443119599736 25.0330682110565, 121.443157288635 25.0321557191713, 121.443210922837 25.0303175806924, 121.443244263016 25.0288291214792, 121.44328919978 25.0286990897705, 121.443416762206 25.0286294767789, 121.444661220647 25.0286294767789, 121.444639477052 25.0278972245219, 121.444182499156 25.0273196287397, 121.443584912677 25.0264244976709, 121.443027189456 25.0260058262763, 121.442253842247 25.0253300383766, 121.441874054115 25.0247846111239, 121.441620016443 25.0241272055185, 121.44138482322 25.0237154221918, 121.440832173504 25.022910897352, 121.440416146046 25.0220334666987, 121.440154498115 25.0217280720732, 121.439409055188 25.0208043308016, 121.439323530379 25.0207596705427, 121.43896077473 25.0207163238052, 121.438718333642 25.0207058155029, 121.438563229328 25.0207478487067, 121.438468644689 25.020627988361, 121.436488527938 25.0193196968677, 121.436362052691 25.0191748775998, 121.43616599794 25.0184277913612, 121.434999816442 25.0149077225446, 121.434493915457 25.0132157942438, 121.434065204235 25.0118987209544, 121.43382421272 25.0112113610512, 121.43382421272 25.0111141516956, 121.433995262337 25.0105854102721, 121.434473983828 25.0092110003326, 121.434835289904 25.0082746850164, 121.434843987342 25.0081485725518, 121.434816445455 25.0080418366408, 121.434128985448 25.00653110303, 121.433857552899 25.0059271328071, 121.433649901564 25.0057497837273, 121.433258516847 25.005497553484, 121.433367234824 25.0051144449688, 121.433388978419 25.0049581140183, 121.433130954421 25.0040056732575, 121.432980198827 25.0036424301118, 121.432253237955 25.002469600652, 121.431804957497 25.0016961379648, 121.431735377992 25.001724383397, 121.432206489225 25.0025372578784, 121.432913156074 25.0036798711367, 121.4330729715 25.0040851530792, 121.433319398914 25.004970265801, 121.432883983417 25.0064630990543, 121.432843757766 25.0067514537161, 121.432710397048 25.009672402302, 121.432632120104 25.0111982041307, 121.432597330352 25.0134990222686, 121.432762581677 25.0166385218615, 121.432848106485 25.018336642424, 121.432930732147 25.0186032954628, 121.434320147891 25.0211867130799, 121.435022466021 25.0225393159232, 121.434949262583 25.0248346675566, 121.43491882155 25.0255869687445, 121.434863737775 25.0274760748811, 121.434824599303 25.0289441920384, 121.43477531382 25.0292518672392, 121.434689789012 25.0295079890165, 121.434309638486 25.0304441424005, 121.433635224637 25.0321785192379, 121.433171723663 25.032004819974, 121.432923574881 25.031800583474, 121.43274092868 25.0316948531908, 121.431940039584 25.0313385874357, 121.431755853211 25.0311556109119, 121.431554362561 25.0309231342889, 121.431265695609 25.0307343716639, 121.430862191442 25.0304811648051, 121.430473705872 25.0302486869042, 121.430322587884 25.0301751344823, 121.430177630582 25.030134417944, 121.429212939734 25.0299896114364, 121.428942956758 25.0299121185413, 121.428554108795 25.0297055800352, 121.428381609605 25.0296399079413, 121.427677841902 25.0295594595784, 121.427478525611 25.0294317271714, 121.427166505018 25.0291726499787, 121.426979147704 25.0290807086381, 121.42649680228 25.0289464084847, 121.425962815818 25.0288247501504, 121.425612562736 25.0286814197313, 121.425383349001 25.0285315218745, 121.425147430992 25.0284028033059, 121.424621598377 25.0282409198124, 121.424267540166 25.0280159900601, 121.424012958904 25.027803045236, 121.423824716156 25.0276795037626, 121.423696951985 25.027597652461, 121.422782814996 25.0274280512934, 121.422509932875 25.0273531837131, 121.422121084911 25.0270261301133, 121.421800366879 25.0267998846173, 121.421442865932 25.0266182968922, 121.420676041803 25.0263035551447, 121.420376161383 25.0257589531458, 121.419429227805 25.0260636810016, 121.417915873568 25.0265276671134, 121.41732952128 25.0252447231735, 121.417068598136 25.0248480487725, 121.416549650993 25.0243856981839, 121.415944454256 25.0240573231284, 121.410562189618 25.0210756374209, 121.410446223776 25.0212358884504, 121.411392070174 25.0217639272477, 121.414046872569 25.023187535455, 121.412847169695 25.024960106137, 121.413804250284 25.0254457689604, 121.414433908567 25.0258593525203, 121.415038742911 25.0264330147458, 121.415329563499 25.026762861102, 121.415719498642 25.027287592453, 121.41435472564 25.0280290425644, 121.414169180293 25.0280858496733, 121.413777433183 25.0281239399745, 121.413485344219 25.028074028543, 121.413233758952 25.0279877246362, 121.41304141248 25.0278415460816, 121.412896455178 25.0275407630346, 121.412308653317 25.0276100482778, 121.411802752331 25.0275325538799, 121.411288878695 25.0275079264127, 121.410763678815 25.0275558456718, 121.410798198226 25.0275525842163, 121.410047319399 25.0275328822461, 121.409104734541 25.0276911546502, 121.40837233777 25.0278382624279, 121.408049807772 25.0279686234138, 121.407863900032 25.0279515484311, 121.407475414462 25.0278674869431, 121.407024234858 25.0278740542489, 121.406706053579 25.027988325314, 121.406267920133 25.0281896128796, 121.405891031146 25.0283984524846, 121.405438764363 25.0287130246777, 121.40525031987 25.028806279745, 121.405034333489 25.0288627581315, 121.404366805112 25.0288850867888, 121.404002237496 25.0289284306413, 121.403593457903 25.0290456559839, 121.402894038919 25.0294032418415, 121.402628404663 25.0294925560528, 121.402143884879 25.0295927061021, 121.401239473105 25.0298022710903, 121.400477963082 25.0301863807818, 121.399559658571 25.030659873683, 121.397572293955 25.0317818672504, 121.397248314384 25.0319069703749, 121.397030516037 25.0320629386587, 121.396759445882 25.0323509048427, 121.396514468041 25.0325137679725, 121.396291958582 25.0326520044513, 121.395599062676 25.0328319414874, 121.395057647152 25.0331359950764, 121.394490501706 25.0333806164773, 121.394074111855 25.0336843403567, 121.393779486138 25.0341259699533, 121.393596839937 25.0343574554637, 121.393271410793 25.0346283422085, 121.393113407333 25.0347219211268, 121.392748114931 25.0350437007221, 121.392438993484 25.035218709066, 121.391702247994 25.0354669381087, 121.391358442693 25.0356422523078, 121.390843013584 25.0361032689953, 121.390356319442 25.0364007476274, 121.390018568927 25.0365268310683, 121.389348141403 25.0367028223213, 121.388657419858 25.0367885194631, 121.388139559895 25.0367885194631, 121.387867040166 25.0367675056101, 121.387581111887 25.0367005239297, 121.386967217712 25.0363905690106, 121.3868657476 25.0363157069, 121.386725139017 25.0362815592554, 121.386548291108 25.0362723656572, 121.38636709448 25.0363511679054, 121.38623916966 25.0364746246593, 121.386179737166 25.0366440491511, 121.386227573076 25.0368873501922, 121.38647400049 25.037426156853, 121.38672658859 25.0379626627792, 121.387087532273 25.0387789090323, 121.38711507416 25.0391088863659, 121.386874807431 25.0401214679851, 121.386897638206 25.0402081477353, 121.385228454869 25.0402291609988, 121.385531415631 25.0451297497203, 121.385705364394 25.04743781123, 121.385519819047 25.048068827027, 121.385125535185 25.0485731120305, 121.384675442761 25.0488521751057, 121.384298553775 25.0490071369155, 121.383555995388 25.0492714988632, 121.382733014909 25.0496118800708, 121.381957493341 25.0499703908912, 121.380987012564 25.0505156841557, 121.379840622426 25.0513565425331, 121.378722771138 25.0523860436097, 121.373456622569 25.0575451436384, 121.371631687652 25.0594503972683, 121.370176088588 25.0610397172052, 121.369674536322 25.0617494489034, 121.369167185764 25.061775710867, 121.366552880815 25.0621295902777, 121.366608689376 25.0624375104918, 121.36976001642 25.0619994881451, 121.370400047621 25.0610653227681, 121.371991543126 25.059379129243, 121.37326150477 25.0580110009539, 121.376560732973 25.0547261412664, 121.379155201047 25.0521952205933, 121.37969470985 25.0517209066889, 121.380523309661 25.0510894855844, 121.381221110245 25.0506033634797, 121.3820886797 25.0501141888927, 121.382845356818 25.0497806298, 121.384485280991 25.049160350497, 121.38509944287 25.0489546075104, 121.386004701224 25.0487096888619, 121.385900331966 25.0472309739197, 121.385769145607 25.0456997103433, 121.385548448114 25.0420553311809, 121.38549227716 25.040252800916, 121.38699041088 25.0402212810254, 121.387034622857 25.0401293479649, 121.38723973744 25.0390707994752, 121.387235388721 25.0388606646932, 121.38719190153 25.0387211218656, 121.386956708307 25.0381977527638, 121.386510239816 25.0372409731122, 121.386294253435 25.0367267912597, 121.386326144042 25.0365363529896, 121.38642616458 25.0364312834726, 121.3865540894 25.0363918823805, 121.38674108432 25.0364010759698, 121.386870512045 25.0364647180891, 121.387325624642 25.0367294179924, 121.387620250359 25.0368463075403, 121.387900017953 25.036909349048, 121.388234869321 25.0369237960556, 121.389000243878 25.0368712614743, 121.389397426886 25.0368161001397, 121.39000552277 25.0366529143797, 121.39050635025 25.0364559091487, 121.391085092279 25.0360822550249, 121.391479738535 25.0357394641247, 121.391735225781 25.0355946642325, 121.392560757618 25.0353145859515, 121.392861181627 25.0351422045111, 121.393198932142 25.0348214102142, 121.393556251892 25.0345623444022, 121.39384761607 25.034254682518, 121.394185728978 25.0337289959123, 121.394499199144 25.0335001360179, 121.395143534353 25.0332489478375, 121.395623705418 25.0329409543079, 121.396373497064 25.0327439431159, 121.396689503983 25.0325850205238, 121.396895705746 25.0324257693727, 121.3971131417 25.0321841012518, 121.397310646024 25.0320212376844, 121.397804225639 25.0317286737572, 121.398669258341 25.0312115135935, 121.399872766344 25.0305666200245, 121.400698298181 25.030157485178, 121.401325963301 25.0298291255665, 121.402643262786 25.0295516610098, 121.40293643893 25.0294570930649, 121.403597806622 25.0291021342603, 121.404056234091 25.0289839238847, 121.404359194853 25.0289533861858, 121.405043030927 25.0289284306413, 121.405237273713 25.0288772060867, 121.405471017363 25.0287760703647, 121.405933431157 25.0284496772391, 121.406336412458 25.0282342704351, 121.406744104871 25.0280434906177, 121.407059024611 25.0279305330645, 121.407473964889 25.027934473446, 121.407868611144 25.0280211618073, 121.408059954784 25.0280316694833, 121.408481055747 25.0278727407878, 121.410025213411 25.0276090631798, 121.410851832428 25.0276103766438, 121.411265685526 25.0275735996476, 121.411704906152 25.0275827938977, 121.412054978038 25.027640257945, 121.412033234442 25.0281659706378, 121.412115860105 25.0286286353481, 121.412327497766 25.028540633962, 121.413034164615 25.0279308614296, 121.413230219367 25.0280556401158, 121.413453816006 25.0281344476417, 121.413781781902 25.0281856725063, 121.414188024742 25.0281502091408, 121.414361973505 25.0280871631322, 121.415076975399 25.0277046176461, 121.415799225159 25.0273155036322, 121.415351307094 25.0267329795871, 121.415062479669 25.026400013643, 121.414461994044 25.0258309484538, 121.413830704992 25.0254208127026, 121.413036338975 25.0250165862937, 121.41427952904 25.0231290841888, 121.410561736626 25.0210745701746, 121.410439247706 25.0212361347377, 121.414086826426 25.0232081411615, 121.41645579114 25.0245154060887, 121.41681637243 25.0248086439607, 121.417071497282 25.0251396439868, 121.417073009767 25.0251326489634, 121.417779613704 25.0266406259579, 121.419882944162 25.0259940665151, 121.420367101552 25.0258377621466, 121.420638352904 25.0263336009489, 121.421403546264 25.0266503128307, 121.42178152243 25.0268392887897, 121.422446688797 25.0273597159575, 121.422600168795 25.0274280512934, 121.423604640744 25.027621142296, 121.423683181041 25.0276403400365, 121.423990128129 25.027842120721, 121.42428076752 25.0280778868287, 121.424605653074 25.0282757264233, 121.424791923208 25.0283473097997, 121.425134384835 25.0284426995093, 121.425357256687 25.0285623880418, 121.425535735366 25.0286912706246, 121.425755526875 25.0287971676772, 121.425954299576 25.0288687507495, 121.426285708209 25.0289372143368, 121.426727284391 25.029051648593, 121.426942908379 25.0291186344495, 121.427149393349 25.0292021992682, 121.427463667487 25.0294681752497, 121.427661171812 25.029594594176, 121.42821853264 25.0296422064652, 121.428501113923 25.0297328091564, 121.428951654197 25.0299541485922, 121.429204242296 25.0300303280227, 121.42994157379 25.0301305208029, 121.430305193008 25.0302066569542, 121.430459210141 25.030282836228, 121.430906219778 25.0305420799582, 121.431402070923 25.0308739141074, 121.431536967685 25.0309612237093, 121.431808490832 25.0312814534764, 121.431901625899 25.0313582887948, 121.432032087471 25.0314318405075, 121.432625843798 25.0316867266612, 121.432915749312 25.0318385531862, 121.433103321936 25.0320028498487, 121.433242480946 25.0320777145911, 121.433694657131 25.0322376229011, 121.433979135837 25.0315142577761, 121.434305289767 25.030649366232, 121.434508600847 25.0301789896181, 121.434776763393 25.0294751529211, 121.434857939483 25.0292003144579, 121.434905775393 25.0288693253841, 121.434963508387 25.0270541533721, 121.435027539527 25.0247033181203, 121.435115238694 25.0225458835141, 121.434112858948 25.0206517757231, 121.433835990501 25.0201020586627, 121.432997412506 25.0185954141005, 121.432927833001 25.0183244919639, 121.432858253496 25.0170802128001, 121.432810417586 25.0158585804504, 121.432681405587 25.0135955729294, 121.432693002171 25.0121525595638, 121.432704598756 25.011530882899, 121.432833610755 25.0086963521034, 121.432911887698 25.0067711590214, 121.432956824462 25.0064722948854, 121.433371039953 25.0051182013429, 121.433391333976 25.0049572724252, 121.433130410831 25.0040054885161, 121.432987627888 25.0036455296707, 121.431815648099 25.0016972669611, 121.431731572863 25.0017261692635, 121.432907176586 25.0036672060544, 121.433070978337 25.0040797134753, 121.433319217718 25.004969424208, 121.433169911696 25.0055106699621, 121.4336049648 25.0057642344027, 121.433835809304 25.0059626025923, 121.434435420544 25.0073148259093, 121.434781655702 25.0080641690852, 121.434797601005 25.0081429894449, 121.43479035314 25.008269430333, 121.434447891513 25.0091912954188, 121.433935829843 25.0106510925603, 121.43377637681 25.0111430517823, 121.433799569978 25.0112576668321, 121.434031139269 25.0119327111795, 121.434621477883 25.0137931279884, 121.434924438645 25.0148285781264, 121.435079542958 25.0152522136297, 121.435858326066 25.0176281577565, 121.436129758614 25.0184264777989, 121.436320015074 25.019176191154, 121.436440329635 25.0193443259779, 121.436842223756 25.0195863477712, 121.437621369256 25.0201150504361, 121.438439653228 25.0206555726701, 121.438560330182 25.0208227203153, 121.438721232788 25.0207793736001, 121.438914388393 25.0207806871371, 121.439351072267 25.0208384827534, 121.439734121938 25.0213133252523, 121.440356713552 25.0220958590556, 121.440765493145 25.022941108176, 121.441371777062 25.0238372497793, 121.441560583949 25.024173178053, 121.441803323037 25.0248017373131, 121.442255654214 25.0254091760247, 121.442701584072 25.0258045645179, 121.443533815228 25.0264730962972, 121.444017247831 25.0271958344065, 121.44457134712 25.0279248071973, 121.444613384737 25.0281047511658, 121.444606136872 25.0286018942619, 121.443396468184 25.0285861328208, 121.443242787599 25.0286893789263, 121.443200775825 25.0288370021844, 121.443079011691 25.0330760914894, 121.443076112545 25.0341806604967, 121.444224223065 25.0344220769929, 121.444261833955 25.0370436823686, 121.445684981595 25.0370464519025)","wkt0":"LINESTRING (121.445247697771 25.037031594187, 121.445678695247 25.0370291796353, 121.445682317075 25.0370472887729, 121.444261833955 25.0370436823686, 121.444224223065 25.0344220769929, 121.443076112545 25.0341806604967, 121.443079011691 25.0330760914894, 121.443200775825 25.0288370021844, 121.443242787599 25.0286893789263, 121.443396468184 25.0285861328208, 121.444613274315 25.0286036015184, 121.444637419832 25.0280989602155, 121.44459154335 25.0279057960804, 121.444038611013 25.027150041402, 121.443553286124 25.0264631014466, 121.442701584072 25.0258045645179, 121.442255654214 25.0254091760247, 121.441803323037 25.0248017373131, 121.441560583949 25.024173178053, 121.441371777062 25.0238372497793, 121.440765493145 25.022941108176, 121.440356713552 25.0220958590556, 121.439734121938 25.0213133252523, 121.439351072267 25.0208384827534, 121.438914388393 25.0207806871371, 121.438721232788 25.0207793736001, 121.438560330182 25.0208227203153, 121.438439653228 25.0206555726701, 121.437621369256 25.0201150504361, 121.436842223756 25.0195863477712, 121.436440329635 25.0193443259779, 121.436320015074 25.019176191154, 121.436129758614 25.0184264777989, 121.435858326066 25.0176281577565, 121.435079542958 25.0152522136297, 121.434924438645 25.0148285781264, 121.434621477883 25.0137931279884, 121.434031139269 25.0119327111795, 121.433799569978 25.0112576668321, 121.43377637681 25.0111430517823, 121.433935829843 25.0106510925603, 121.434447891513 25.0091912954188, 121.43479035314 25.008269430333, 121.434797601005 25.0081429894449, 121.434781655702 25.0080641690852, 121.434435420544 25.0073148259093, 121.433835809304 25.0059626025923, 121.4336049648 25.0057642344027, 121.433169911696 25.0055106699621, 121.433319217718 25.004969424208, 121.433070978337 25.0040797134753, 121.432948575108 25.0036407588873, 121.431794419401 25.0017079102607, 121.431815648099 25.0016972669611, 121.432987627888 25.0036455296707, 121.433130410831 25.0040054885161, 121.433372328929 25.0049482386266, 121.433321623344 25.0051220863482, 121.432932880522 25.0064573334319, 121.432911887698 25.0067711590214, 121.432833610755 25.0086963521034, 121.432704598756 25.011530882899, 121.432693002171 25.0121525595638, 121.432681405587 25.0135955729294, 121.432810417586 25.0158585804504, 121.432858253496 25.0170802128001, 121.432927833001 25.0183244919639, 121.432997412506 25.0185954141005, 121.433835990501 25.0201020586627, 121.434112858948 25.0206517757231, 121.435115238694 25.0225458835141, 121.435027539527 25.0247033181203, 121.434963508387 25.0270541533721, 121.434905775393 25.0288693253841, 121.434857939483 25.0292003144579, 121.434776763393 25.0294751529211, 121.434508600847 25.0301789896181, 121.434305289767 25.030649366232, 121.433979135837 25.0315142577761, 121.433694657131 25.0322376229011, 121.433242480946 25.0320777145911, 121.433103321936 25.0320028498487, 121.432915749312 25.0318385531862, 121.432625843798 25.0316867266612, 121.432032087471 25.0314318405075, 121.431901625899 25.0313582887948, 121.431808490832 25.0312814534764, 121.431536967685 25.0309612237093, 121.431402070923 25.0308739141074, 121.430906219778 25.0305420799582, 121.430459210141 25.030282836228, 121.430305193008 25.0302066569542, 121.42994157379 25.0301305208029, 121.429204242296 25.0300303280227, 121.428951654197 25.0299541485922, 121.428501113923 25.0297328091564, 121.42821853264 25.0296422064652, 121.427661171812 25.029594594176, 121.427463667487 25.0294681752497, 121.427149393349 25.0292021992682, 121.426942908379 25.0291186344495, 121.426727284391 25.029051648593, 121.426285708209 25.0289372143368, 121.425954299576 25.0288687507495, 121.425755526875 25.0287971676772, 121.425535735366 25.0286912706246, 121.425357256687 25.0285623880418, 121.425134384835 25.0284426995093, 121.424791923208 25.0283473097997, 121.424605653074 25.0282757264233, 121.42428076752 25.0280778868287, 121.423990128129 25.027842120721, 121.423683181041 25.0276403400365, 121.423604640744 25.027621142296, 121.422600168795 25.0274280512934, 121.422446688797 25.0273597159575, 121.42178152243 25.0268392887897, 121.421403546264 25.0266503128307, 121.420638352904 25.0263336009489, 121.420365138984 25.0258099652149, 121.419862912232 25.0259548383162, 121.418840349592 25.0262759736907, 121.418301904566 25.0264449923089, 121.417761044988 25.0265971090653, 121.417073009767 25.0251326489634, 121.417071497282 25.0251396439868, 121.41681637243 25.0248086439607, 121.41645579114 25.0245154060887, 121.414086826426 25.0232081411615, 121.410439247706 25.0212361347377, 121.410561736626 25.0210745701746, 121.41427952904 25.0231290841888, 121.413036338975 25.0250165862937, 121.413830704992 25.0254208127026, 121.414461994044 25.0258309484538, 121.415062479669 25.026400013643, 121.415351307094 25.0267329795871, 121.415799225159 25.0273155036322, 121.415076975399 25.0277046176461, 121.414361973505 25.0280871631322, 121.414188024742 25.0281502091408, 121.413781781902 25.0281856725063, 121.413453816006 25.0281344476417, 121.413230219367 25.0280556401158, 121.413034164615 25.0279308614296, 121.412327497766 25.028540633962, 121.412115860105 25.0286286353481, 121.412033234442 25.0281659706378, 121.412054978038 25.027640257945, 121.411704906152 25.0275827938977, 121.411265685526 25.0275735996476, 121.410851832428 25.0276103766438, 121.410025213411 25.0276090631798, 121.408481055747 25.0278727407878, 121.408059954784 25.0280316694833, 121.407868611144 25.0280211618073, 121.407473964889 25.027934473446, 121.407059024611 25.0279305330645, 121.406744104871 25.0280434906177, 121.406336412458 25.0282342704351, 121.405933431157 25.0284496772391, 121.405471017363 25.0287760703647, 121.405237273713 25.0288772060867, 121.405043030927 25.0289284306413, 121.404359194853 25.0289533861858, 121.404056234091 25.0289839238847, 121.403597806622 25.0291021342603, 121.40293643893 25.0294570930649, 121.402643262786 25.0295516610098, 121.401325963301 25.0298291255665, 121.400698298181 25.030157485178, 121.399872766344 25.0305666200245, 121.398669258341 25.0312115135935, 121.397804225639 25.0317286737572, 121.397310646024 25.0320212376844, 121.3971131417 25.0321841012518, 121.396895705746 25.0324257693727, 121.396689503983 25.0325850205238, 121.396373497064 25.0327439431159, 121.395623705418 25.0329409543079, 121.395143534353 25.0332489478375, 121.394499199144 25.0335001360179, 121.394185728978 25.0337289959123, 121.39384761607 25.034254682518, 121.393556251892 25.0345623444022, 121.393198932142 25.0348214102142, 121.392861181627 25.0351422045111, 121.392560757618 25.0353145859515, 121.391735225781 25.0355946642325, 121.391479738535 25.0357394641247, 121.391085092279 25.0360822550249, 121.39050635025 25.0364559091487, 121.39000552277 25.0366529143797, 121.389397426886 25.0368161001397, 121.389000243878 25.0368712614743, 121.388234869321 25.0369237960556, 121.387900017953 25.036909349048, 121.387620250359 25.0368463075403, 121.387325624642 25.0367294179924, 121.386870512045 25.0364647180891, 121.38674108432 25.0364010759698, 121.3865540894 25.0363918823805, 121.38642616458 25.0364312834726, 121.386326144042 25.0365363529896, 121.386294253435 25.0367267912597, 121.386510239816 25.0372409731122, 121.386956708307 25.0381977527638, 121.38719190153 25.0387211218656, 121.387235388721 25.0388606646932, 121.38723973744 25.0390707994752, 121.387034622857 25.0401293479649, 121.38699041088 25.0402212810254, 121.38549227716 25.040252800916, 121.385548448114 25.0420553311809, 121.385769145607 25.0456997103433, 121.385900331966 25.0472309739197, 121.386004701224 25.0487096888619, 121.38509944287 25.0489546075104, 121.384485280991 25.049160350497, 121.382845356818 25.0497806298, 121.3820886797 25.0501141888927, 121.381221110245 25.0506033634797, 121.380523309661 25.0510894855844, 121.37969470985 25.0517209066889, 121.379155201047 25.0521952205933, 121.376560732973 25.0547261412664, 121.37326150477 25.0580110009539, 121.371991543126 25.059379129243, 121.370400047621 25.0610653227681, 121.36976001642 25.0619994881451, 121.366608689376 25.0624375104918, 121.366552880815 25.0621295902777, 121.367696898625 25.0619941550636)","wkt1":"LINESTRING (121.367812421484 25.0619533894394, 121.366875575429 25.0620717024721, 121.36682607712 25.0620548006103, 121.369077646569 25.0617578107526, 121.369674536322 25.0617494489034, 121.370176088588 25.0610397172052, 121.371631687652 25.0594503972683, 121.373456622569 25.0575451436384, 121.378722771138 25.0523860436097, 121.379840622426 25.0513565425331, 121.380987012564 25.0505156841557, 121.381957493341 25.0499703908912, 121.382733014909 25.0496118800708, 121.383555995388 25.0492714988632, 121.384298553775 25.0490071369155, 121.384675442761 25.0488521751057, 121.385125535185 25.0485731120305, 121.385519819047 25.048068827027, 121.385705364394 25.04743781123, 121.385531415631 25.0451297497203, 121.385228454869 25.0402291609988, 121.386897638206 25.0402081477353, 121.386874807431 25.0401214679851, 121.38711507416 25.0391088863659, 121.387087532273 25.0387789090323, 121.38672658859 25.0379626627792, 121.38647400049 25.037426156853, 121.386227573076 25.0368873501922, 121.386179737166 25.0366440491511, 121.38623916966 25.0364746246593, 121.38636709448 25.0363511679054, 121.386548291108 25.0362723656572, 121.386725139017 25.0362815592554, 121.3868657476 25.0363157069, 121.386967217712 25.0363905690106, 121.387581111887 25.0367005239297, 121.387867040166 25.0367675056101, 121.388139559895 25.0367885194631, 121.388657419858 25.0367885194631, 121.389348141403 25.0367028223213, 121.390018568927 25.0365268310683, 121.390356319442 25.0364007476274, 121.390843013584 25.0361032689953, 121.391358442693 25.0356422523078, 121.391702247994 25.0354669381087, 121.392438993484 25.035218709066, 121.392748114931 25.0350437007221, 121.393113407333 25.0347219211268, 121.393271410793 25.0346283422085, 121.393596839937 25.0343574554637, 121.393779486138 25.0341259699533, 121.394074111855 25.0336843403567, 121.394490501706 25.0333806164773, 121.395057647152 25.0331359950764, 121.395599062676 25.0328319414874, 121.396291958582 25.0326520044513, 121.396514468041 25.0325137679725, 121.396759445882 25.0323509048427, 121.397030516037 25.0320629386587, 121.397248314384 25.0319069703749, 121.397572293955 25.0317818672504, 121.399559658571 25.030659873683, 121.400477963082 25.0301863807818, 121.401239473105 25.0298022710903, 121.402143884879 25.0295927061021, 121.402628404663 25.0294925560528, 121.402894038919 25.0294032418415, 121.403593457903 25.0290456559839, 121.404002237496 25.0289284306413, 121.404366805112 25.0288850867888, 121.405034333489 25.0288627581315, 121.40525031987 25.028806279745, 121.405438764363 25.0287130246777, 121.405891031146 25.0283984524846, 121.406267920133 25.0281896128796, 121.406706053579 25.027988325314, 121.407024234858 25.0278740542489, 121.407475414462 25.0278674869431, 121.407863900032 25.0279515484311, 121.408049807772 25.0279686234138, 121.40837233777 25.0278382624279, 121.409104734541 25.0276911546502, 121.410047319399 25.0275328822461, 121.410798198226 25.0275525842163, 121.410763678815 25.0275558456718, 121.411288878695 25.0275079264127, 121.411802752331 25.0275325538799, 121.412308653317 25.0276100482778, 121.412896455178 25.0275407630346, 121.41304141248 25.0278415460816, 121.413233758952 25.0279877246362, 121.413485344219 25.028074028543, 121.413777433183 25.0281239399745, 121.414169180293 25.0280858496733, 121.41435472564 25.0280290425644, 121.415719498642 25.027287592453, 121.415329563499 25.026762861102, 121.415038742911 25.0264330147458, 121.414433908567 25.0258593525203, 121.413804250284 25.0254457689604, 121.412847169695 25.024960106137, 121.414046872569 25.023187535455, 121.411392070174 25.0217639272477, 121.410446223776 25.0212358884504, 121.410562189618 25.0210756374209, 121.415944454256 25.0240573231284, 121.416529233458 25.0244025868793, 121.417035492854 25.0248383315733, 121.41731755166 25.0252578036438, 121.417940929088 25.0265512325832, 121.419442780239 25.0261045405208, 121.420386869949 25.0258268670767, 121.420676041803 25.0263035551447, 121.421442865932 25.0266182968922, 121.421800366879 25.0267998846173, 121.422121084911 25.0270261301133, 121.422509932875 25.0273531837131, 121.422782814996 25.0274280512934, 121.423696951985 25.027597652461, 121.423824716156 25.0276795037626, 121.424012958904 25.027803045236, 121.424267540166 25.0280159900601, 121.424621598377 25.0282409198124, 121.425147430992 25.0284028033059, 121.425383349001 25.0285315218745, 121.425612562736 25.0286814197313, 121.425962815818 25.0288247501504, 121.42649680228 25.0289464084847, 121.426979147704 25.0290807086381, 121.427166505018 25.0291726499787, 121.427478525611 25.0294317271714, 121.427677841902 25.0295594595784, 121.428381609605 25.0296399079413, 121.428554108795 25.0297055800352, 121.428942956758 25.0299121185413, 121.429212939734 25.0299896114364, 121.430177630582 25.030134417944, 121.430322587884 25.0301751344823, 121.430473705872 25.0302486869042, 121.430862191442 25.0304811648051, 121.431265695609 25.0307343716639, 121.431554362561 25.0309231342889, 121.431755853211 25.0311556109119, 121.431940039584 25.0313385874357, 121.43274092868 25.0316948531908, 121.432923574881 25.031800583474, 121.433171723663 25.032004819974, 121.433635224637 25.0321785192379, 121.434309638486 25.0304441424005, 121.434689789012 25.0295079890165, 121.43477531382 25.0292518672392, 121.434824599303 25.0289441920384, 121.434863737775 25.0274760748811, 121.43491882155 25.0255869687445, 121.434949262583 25.0248346675566, 121.435022466021 25.0225393159232, 121.434320147891 25.0211867130799, 121.432930732147 25.0186032954628, 121.432848106485 25.018336642424, 121.432762581677 25.0166385218615, 121.432597330352 25.0134990222686, 121.432632120104 25.0111982041307, 121.432710397048 25.009672402302, 121.432843757766 25.0067514537161, 121.432883983417 25.0064630990543, 121.433319398914 25.004970265801, 121.4330729715 25.0040851530792, 121.432913156074 25.0036798711367, 121.432206489225 25.0025372578784, 121.431735377992 25.001724383397, 121.431782346642 25.0016958375023, 121.432233867808 25.0024781522493, 121.432532064942 25.0029658916904, 121.432947367832 25.0036443807148, 121.433130954421 25.0040056732575, 121.433388978419 25.0049581140183, 121.433367234824 25.0051144449688, 121.433258516847 25.005497553484, 121.433649901564 25.0057497837273, 121.433857552899 25.0059271328071, 121.434128985448 25.00653110303, 121.434816445455 25.0080418366408, 121.434843987342 25.0081485725518, 121.434835289904 25.0082746850164, 121.434473983828 25.0092110003326, 121.433995262337 25.0105854102721, 121.43382421272 25.0111141516956, 121.43382421272 25.0112113610512, 121.434065204235 25.0118987209544, 121.434493915457 25.0132157942438, 121.434999816442 25.0149077225446, 121.43616599794 25.0184277913612, 121.436362052691 25.0191748775998, 121.436488527938 25.0193196968677, 121.438468644689 25.020627988361, 121.438563229328 25.0207478487067, 121.438718333642 25.0207058155029, 121.43896077473 25.0207163238052, 121.439323530379 25.0207596705427, 121.439409055188 25.0208043308016, 121.440154498115 25.0217280720732, 121.440416146046 25.0220334666987, 121.440832173504 25.022910897352, 121.44138482322 25.0237154221918, 121.441620016443 25.0241272055185, 121.441874054115 25.0247846111239, 121.442253842247 25.0253300383766, 121.443027189456 25.0260058262763, 121.443584912677 25.0264244976709, 121.444182499156 25.0273196287397, 121.444639477052 25.0278972245219, 121.444661220647 25.0286294767789, 121.443416762206 25.0286294767789, 121.44328919978 25.0286990897705, 121.443244263016 25.0288291214792, 121.443181445164 25.0303287986998, 121.443128325027 25.0321867962241, 121.443113837716 25.0330801803488, 121.443084863096 25.0340435864725, 121.444266936785 25.0342949256885, 121.444291217133 25.0365027184411, 121.445747509971 25.0365016000913, 121.445891779434 25.0364991855397, 121.445893590348 25.036511861936, 121.445606862335 25.0365142764877)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454020600'=='0100020200' || '0454020600'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
