
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492967</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454065700">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454065700">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454065700" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454065700" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454065700" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454065700',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="QSIlH7t5geq3Q_afiDBJDWjsh3NyA0XidIiS2QQDoo3vg4uf7SU_cdl6hA0zphl-ORFaLGXebJxbvy77MwJLIW9-abU1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F657 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454065700" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454065700" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">昌福國小 - 長庚總院</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0630 - 1600 <br>
                        [假日] 0630 - 1600
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> F657昌福國小班表:0630 0900 1300 1600<br/>F657長庚醫院(總院)班表:0730 1130 1400 1700<br>
[假日]<br /> F657昌福國小班表:0630 0900 1300 1600<br/>F657長庚醫院(總院)班表:0730 1130 1400 1700<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">鶯歌區公所鶯歌區公所站:(02)2678 0202</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 長庚總院</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 昌福國小</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">昌福國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394102920" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.956067" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.339709" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">鶯桃路182巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394205970" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.957446" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.339839" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">永吉街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394300660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.959181" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.33686" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">永吉公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302370" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.960175" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.335178" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">福安街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.961966" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.334061" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">鶯桃鳳鳴路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302470" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.964579" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.332991" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">鳳鳴國中(永和街口)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394202010" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.966917" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.331917" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">鳳鳴活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394205020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.967843" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.333152" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">鳳鳴國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394205120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.96938" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.33496" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">永和街174巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394201920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.970376" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.336003" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">鳳鳴火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394205370" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972503" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.33655" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">鳳福鳳三路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394303070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.975736" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.331239" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">鳳福公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302950" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.975607" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.32899" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">鳳吉一街94號</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394301320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974477" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.327104" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">鶯桃路二段27號</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394206120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972458" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.325434" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">鶯桃路668巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394206020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.969229" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.328914" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">鶯歌路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302010" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.968169" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.330887" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">大同社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394100120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972002" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.339766" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">長庚醫院(分院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3337800120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029849" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.366444" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3337500340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059661" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3678435" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3337500340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059661" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3678435" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">長庚醫院(分院)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3337800120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.029849" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.366444" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">大同社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972044" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.3394978" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">鳳鳴火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394205370" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972503" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.33655" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">鳳福鳳三路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394303070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.975736" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.331239" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">鳳福公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302950" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.975607" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.32899" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">鳳吉一街94號</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394301320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.974477" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.327104" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">鶯桃路二段27號</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394206120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.972458" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.325434" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">鶯桃路668巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394206020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.969229" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.328914" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">金金戲院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394203220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.968103" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.330276" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">鳳鳴國中(永和街口)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394202020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.966984" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.331105" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">鳳鳴街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394205220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.965577" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.332201" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">福安街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394302240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.963328" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.333569" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">永吉公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394301520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95993" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.33524" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">永吉街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394300630" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.959109" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.336639" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">鶯桃路182巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394105320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.957419" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.339763" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">昌福國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2394102960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956132" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.339477" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454065700";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 20;
        var existBackNum = 17;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454065700',
                        url: './StopStatusRecent3OfRoute?routeid=0454065700&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454065700',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454065700',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454065700');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454065700","Name":"F657","BeginStop":"昌福國小","GoDirStops":[{"UniStopId":"2394102920","Name":"昌福國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.339709,"Latitude":24.956067,"PublicId":"2394102920"},{"UniStopId":"2394205970","Name":"鶯桃路182巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.339839,"Latitude":24.957446,"PublicId":"2394205970"},{"UniStopId":"2394300660","Name":"永吉街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.33686,"Latitude":24.959181,"PublicId":"2394300660"},{"UniStopId":"2394302370","Name":"永吉公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.335178,"Latitude":24.960175,"PublicId":"2394302370"},{"UniStopId":"2394302200","Name":"福安街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.334061,"Latitude":24.961966,"PublicId":"2394302200"},{"UniStopId":"2394302470","Name":"鶯桃鳳鳴路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.332991,"Latitude":24.964579,"PublicId":"2394302470"},{"UniStopId":"2394202010","Name":"鳳鳴國中(永和街口)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.331917,"Latitude":24.966917,"PublicId":"2394202010"},{"UniStopId":"2394205020","Name":"鳳鳴活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.333152,"Latitude":24.967843,"PublicId":"2394205020"},{"UniStopId":"2394205120","Name":"鳳鳴國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.33496,"Latitude":24.96938,"PublicId":"2394205120"},{"UniStopId":"2394201920","Name":"永和街174巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.336003,"Latitude":24.970376,"PublicId":"2394201920"},{"UniStopId":"2394205370","Name":"鳳鳴火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.33655,"Latitude":24.972503,"PublicId":"2394205370"},{"UniStopId":"2394303070","Name":"鳳福鳳三路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.331239,"Latitude":24.975736,"PublicId":"2394303070"},{"UniStopId":"2394302950","Name":"鳳福公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.32899,"Latitude":24.975607,"PublicId":"2394302950"},{"UniStopId":"2394301320","Name":"鳳吉一街94號","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.327104,"Latitude":24.974477,"PublicId":"2394301320"},{"UniStopId":"2394206120","Name":"鶯桃路二段27號","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.325434,"Latitude":24.972458,"PublicId":"2394206120"},{"UniStopId":"2394206020","Name":"鶯桃路668巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.328914,"Latitude":24.969229,"PublicId":"2394206020"},{"UniStopId":"2394302010","Name":"鶯歌路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.330887,"Latitude":24.968169,"PublicId":"2394302010"},{"UniStopId":"2394100120","Name":"大同社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.339766,"Latitude":24.972002,"PublicId":"2394100120"},{"UniStopId":"3337800120","Name":"長庚醫院(分院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.366444,"Latitude":25.029849,"PublicId":"3337800120"},{"UniStopId":"3337500340","Name":"長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3678435,"Latitude":25.059661,"PublicId":"3337500340"}],"LastStop":"長庚總院","BackDirStops":[{"UniStopId":"3337500340","Name":"長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3678435,"Latitude":25.059661,"PublicId":"3337500340"},{"UniStopId":"3337800120","Name":"長庚醫院(分院)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.366444,"Latitude":25.029849,"PublicId":"3337800120"},{"UniStopId":"2394100160","Name":"大同社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.3394978,"Latitude":24.972044,"PublicId":"2394100160"},{"UniStopId":"2394205370","Name":"鳳鳴火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.33655,"Latitude":24.972503,"PublicId":"2394205370"},{"UniStopId":"2394303070","Name":"鳳福鳳三路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.331239,"Latitude":24.975736,"PublicId":"2394303070"},{"UniStopId":"2394302950","Name":"鳳福公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.32899,"Latitude":24.975607,"PublicId":"2394302950"},{"UniStopId":"2394301320","Name":"鳳吉一街94號","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.327104,"Latitude":24.974477,"PublicId":"2394301320"},{"UniStopId":"2394206120","Name":"鶯桃路二段27號","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.325434,"Latitude":24.972458,"PublicId":"2394206120"},{"UniStopId":"2394206020","Name":"鶯桃路668巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.328914,"Latitude":24.969229,"PublicId":"2394206020"},{"UniStopId":"2394203220","Name":"金金戲院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.330276,"Latitude":24.968103,"PublicId":"2394203220"},{"UniStopId":"2394202020","Name":"鳳鳴國中(永和街口)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.331105,"Latitude":24.966984,"PublicId":"2394202020"},{"UniStopId":"2394205220","Name":"鳳鳴街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.332201,"Latitude":24.965577,"PublicId":"2394205220"},{"UniStopId":"2394302240","Name":"福安街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.333569,"Latitude":24.963328,"PublicId":"2394302240"},{"UniStopId":"2394301520","Name":"永吉公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.33524,"Latitude":24.95993,"PublicId":"2394301520"},{"UniStopId":"2394300630","Name":"永吉街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.336639,"Latitude":24.959109,"PublicId":"2394300630"},{"UniStopId":"2394105320","Name":"鶯桃路182巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.339763,"Latitude":24.957419,"PublicId":"2394105320"},{"UniStopId":"2394102960","Name":"昌福國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.339477,"Latitude":24.956132,"PublicId":"2394102960"}],"RouteMapUrl":"../MapOverview?nid=0454065700","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0630 - 1600","HeadwayDesc":"F657昌福國小班表:0630 0900 1300 1600;F657長庚醫院(總院)班表:0730 1130 1400 1700","HolidayBusTimeDesc":"0630 - 1600","HolidayHeadwayDesc":"F657昌福國小班表:0630 0900 1300 1600;F657長庚醫院(總院)班表:0730 1130 1400 1700","RouteNote":"","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"鶯歌區公所鶯歌區公所站:(02)2678 0202","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.339038161532 24.9559249434497, 121.339325176991 24.9560678658997, 121.339654864255 24.9561555906317, 121.340020428452 24.9561735791224, 121.340065002823 24.9567376278603, 121.340245474664 24.9573068487374, 121.339943238689 24.9573613065275, 121.339662957219 24.9576569067789, 121.339609202705 24.9576624256381, 121.339430633428 24.957605134211, 121.339059089743 24.9575208603215, 121.338765415308 24.9574821731657, 121.338640661429 24.957478723355, 121.338431379324 24.9573934637181, 121.338190025415 24.9572584281029, 121.337991343313 24.957093329613, 121.337459440611 24.9562673410074, 121.336916394317 24.9555088656828, 121.336620409626 24.9557062471381, 121.336624758345 24.9559043675315, 121.336728040423 24.9561877481372, 121.336856146966 24.9564462068683, 121.33720694311 24.9569523796822, 121.337747271455 24.9575649685925, 121.338009825369 24.9579350831826, 121.338213127986 24.9583613789014, 121.33779537916 24.9585991674905, 121.336580183974 24.9593233726021, 121.33509944513 24.9602055221032, 121.334735215333 24.9604041153475, 121.334372665455 24.9606069226744, 121.33423323465 24.9607333303181, 121.334129952572 24.9609546049842, 121.334000218601 24.9619658580216, 121.333857502457 24.9631324899538, 121.333736121701 24.9634267925508, 121.333337670316 24.9640575829817, 121.333155024115 24.9643190150993, 121.332355403396 24.9655155342734, 121.331485115991 24.9667613211176, 121.332126552055 24.9671082468544, 121.332594582945 24.9674142700235, 121.333019126644 24.9677833694193, 121.33350672677 24.9682510251413, 121.33425525004 24.9688783413533, 121.335149998989 24.9696367342945, 121.33598930177 24.9703699908611, 121.335471260611 24.9710638210078, 121.336918296882 24.9721489083217, 121.335679999126 24.973269465285, 121.334189785918 24.9745891183325, 121.332226537862 24.9763292313857, 121.331510664716 24.977044001592, 121.330512090099 24.9764640314164, 121.327255443104 24.9745141880988, 121.32488376044 24.9730703873089, 121.325408324678 24.9725963439005, 121.32591525454 24.9721271130464, 121.328615504994 24.969538670753, 121.329577659088 24.9687585946722, 121.330141361798 24.9682978398944, 121.330520243947 24.9679026242612, 121.332087413583 24.9690010446218, 121.33397312689 24.970142819771, 121.335462019583 24.9710485449601, 121.336532891654 24.971847824654, 121.337340666222 24.9725401681573, 121.337989444531 24.9721686680067, 121.338546594526 24.9720501962187, 121.339057323075 24.9719409586332, 121.339214420552 24.9719271610111, 121.339358471871 24.9719409586332, 121.339606348858 24.9720296575955, 121.339943918176 24.9720730215093, 121.340403761177 24.9723494931473, 121.341339222898 24.9724492586284, 121.341545333974 24.972506659807, 121.343334288283 24.973404483333, 121.344503550123 24.973539008467, 121.344738380953 24.9735035293251, 121.345245550315 24.9732768567878, 121.345599970919 24.9730560970457, 121.346126709517 24.9728703234737, 121.347412843182 24.9728151333929, 121.347811294567 24.9727776829668, 121.348283130587 24.9728151333929, 121.348848464066 24.9729018606515, 121.349007192312 24.9729570506934, 121.349662761712 24.9735666033481, 121.349283769129 24.9740454953223, 121.349262679558 24.9741155430895, 121.349199623131 24.9751237330379, 121.349173714809 24.9752426592505, 121.349034371806 24.9754218521387, 121.348430848148 24.9760220565878, 121.348396740872 24.9761220596149, 121.348425007546 24.9767966399654, 121.348337489575 24.9769390454247, 121.348002638206 24.9772529281561, 121.347804914203 24.9775122505486, 121.346896966062 24.9781108170989, 121.346346694462 24.9782105779074, 121.346154099402 24.9786407954673, 121.346160977797 24.9788901962622, 121.346469171144 24.9792273652117, 121.345901119715 24.9795708066043, 121.345022134872 24.9801547040446, 121.344400268045 24.9817743274133, 121.345192278506 24.9825897974882, 121.345844586367 24.9832047224034, 121.345961504341 24.9834853154008, 121.345782666071 24.9838219930911, 121.345541806802 24.9839945613524, 121.345328719567 24.9841128150317, 121.345046677806 24.9843581815837, 121.344674237347 24.984826769204, 121.343746873005 24.986166469123, 121.343629728435 24.9864530351415, 121.343651201185 24.9865995650183, 121.343844719184 24.9873869186081, 121.343877350655 24.987600201727, 121.34384295868 24.9880989664688, 121.343409619795 24.988454335113, 121.34343974472 24.9885334501435, 121.343422349844 24.9886181954966, 121.344152486455 24.9892772901343, 121.344769365576 24.9898213761249, 121.344418750101 24.9904293670987, 121.343896360223 24.9911772805574, 121.3432043703 24.9919941663424, 121.341860072517 24.9931756356962, 121.3412376621 24.9940654253853, 121.342327559818 24.9946556588456, 121.342541190642 24.9947921314543, 121.344354062905 24.9964256032078, 121.345114545153 24.9971446589174, 121.345233319543 24.9973705484518, 121.345287678531 24.9975952058974, 121.345281155452 24.9978144435789, 121.345248540059 24.9979942674526, 121.34515069388 24.9982149824227, 121.345048498982 24.9983706650651, 121.344948478443 24.9984672276175, 121.347204920052 25.0001580453202, 121.348747628143 25.0013000238328, 121.349129228241 25.0015222108259, 121.349424941138 25.0016345358048, 121.349446684733 25.002066099242, 121.349542356553 25.0025040656096, 121.349738592501 25.0027016179822, 121.35011910542 25.0029834128366, 121.350754018404 25.0037051397172, 121.351131269784 25.0042578860378, 121.351966767436 25.0060412395629, 121.352641362482 25.0066427460593, 121.353186039545 25.0071186287188, 121.353992726933 25.0082876369897, 121.355159270824 25.009501462712, 121.356310594199 25.0108389231858, 121.356468237064 25.0109399004421, 121.356942245644 25.0110581372332, 121.358399610123 25.0120123295509, 121.359988523354 25.0131906507727, 121.360149425959 25.0134448356407, 121.360491343996 25.014557134552, 121.360611477361 25.0148063905878, 121.360985467201 25.0152517005068, 121.361357282682 25.0156876494715, 121.36202154952 25.0170570610103, 121.362121570058 25.0172895638987, 121.362371621405 25.0187904776693, 121.362480339382 25.0195012748672, 121.362461857326 25.0201889167498, 121.363422924241 25.0215848770339, 121.364904750264 25.0226975947678, 121.366789919982 25.0239836849024, 121.367428094506 25.0244614706039, 121.367682494572 25.0246033282685, 121.36834839218 25.0247712914719, 121.368138566484 25.026528734313, 121.368173356237 25.0267848617739, 121.368210320349 25.0269350901321, 121.367992884395 25.0269567624046, 121.367834156149 25.0269488815787, 121.367686299701 25.0269311497185, 121.367510176578 25.0268424903789, 121.367037253379 25.0263829384427, 121.366900268729 25.0263415639074, 121.366739366123 25.0263395936911, 121.36656759172 25.0263868788739, 121.366421366041 25.0265016438772, 121.366319171143 25.0267104863548, 121.366310473705 25.0268488935556, 121.366266986514 25.0269730166065, 121.366177837773 25.0271010799402, 121.366012042858 25.0272335760947, 121.365857663331 25.0272690397252, 121.365472258103 25.0272769205306, 121.365313529857 25.0273557285565, 121.365241775993 25.0274502981209, 121.365180893926 25.0275468378093, 121.3652091606 25.0277832612154, 121.365340165762 25.0279118162513, 121.3654401863 25.0279679666845, 121.365896801803 25.0280044151975, 121.3660742839 25.0281869038737, 121.366116683911 25.028365451911, 121.36607537108 25.0285075513357, 121.365954694126 25.0286592552193, 121.365817709475 25.0287203307558, 121.365673114566 25.0287370772686, 121.365535042735 25.0287055544191, 121.365168391358 25.0285496639586, 121.365060488766 25.0285526192298, 121.364975688744 25.0285772464873, 121.364888714363 25.0286402922441, 121.364839791273 25.0287232860229, 121.364837616914 25.0288444519138, 121.3651607811 25.029309166325, 121.365726658169 25.0298667227873, 121.365972360797 25.0296283332318, 121.366057160819 25.0295613476535, 121.366309386525 25.0295633178181, 121.366448545535 25.0296480348655, 121.366476812209 25.029807617982, 121.366457242973 25.0299814845362, 121.366400709625 25.0300918133267, 121.366309386525 25.0301450075296, 121.366057160819 25.0301627389254, 121.366157181357 25.0303700975585, 121.366226760862 25.0305789334524, 121.366289273699 25.0308926791627, 121.366261007025 25.0311251558434, 121.366278401901 25.0314955415095, 121.366434955788 25.0321742506396, 121.366463222462 25.0329357006809, 121.366400166035 25.0332292467828, 121.366391468597 25.0335385529892, 121.366437130148 25.0338562313225, 121.366693704573 25.0344556314568, 121.365603806855 25.0364478647625, 121.365096637494 25.0374456930655, 121.364733519451 25.0381416070131, 121.364019785933 25.0396068057076, 121.36366264738 25.0403110798598, 121.363201139568 25.0411749182975, 121.362385754742 25.0424324966172, 121.361235518548 25.0440946373275, 121.360562554271 25.0458557431691, 121.360303805486 25.0465092567154, 121.359855887422 25.0477468353717, 121.359346543701 25.0483033230955, 121.359213907769 25.0483781778886, 121.359220430848 25.0500840668375, 121.3591638975 25.0516476133704, 121.359092143635 25.0522956790951, 121.358837743569 25.0534455441175, 121.359705313024 25.0540290903346, 121.361283354457 25.0550351470356, 121.364142637247 25.056896551756, 121.364684596362 25.0573008372453, 121.367477017596 25.0590932684166, 121.370269647141 25.0609274528732, 121.370135475308 25.0610587841314, 121.36972579838 25.0607817022836, 121.364125785961 25.0570861376875, 121.36173833919 25.0555418655655, 121.358961682063 25.0537552917804, 121.358624656335 25.053555851801, 121.358839917929 25.0526389161648, 121.358981251299 25.05162397565, 121.359044307725 25.0489779995147, 121.35902256413 25.0480314816203, 121.358948635906 25.0476552362653, 121.359139979545 25.0477064529784, 121.359803702793 25.0477291065177, 121.360464708092 25.045944881243, 121.36117681084 25.0440847876712, 121.361949795655 25.0429616754153, 121.363131560063 25.0411788582536, 121.363806698699 25.0398890083535, 121.364676986103 25.0381238767705, 121.365523355553 25.0364754455157, 121.366600207113 25.034487152829, 121.366361027564 25.0338818425631, 121.366295796778 25.0335759848975, 121.366311017294 25.0333691242083, 121.36633058653 25.0331918147686, 121.366369725002 25.0329554017836, 121.366356678845 25.0324288887279, 121.366295796778 25.0319141941742, 121.366215345475 25.0315492276369, 121.36619360188 25.031294587723, 121.366182730082 25.0308173211611, 121.366053899279 25.0303912766866, 121.365945181303 25.0302139629434, 121.365660340203 25.0299317380402, 121.365964750538 25.0296362138857, 121.366056073639 25.0295593774889, 121.366325694221 25.0295633178181, 121.366453981434 25.0296480348655, 121.366484422467 25.0298056478213, 121.366456155794 25.0299908427857, 121.366397448086 25.0300932909438, 121.366306124986 25.0301425448355, 121.366060422358 25.0301602762317, 121.365943006943 25.030217410713, 121.365638596608 25.0299179469288, 121.36523226317 25.0295148025059, 121.364757165611 25.0289439457673, 121.364721288679 25.0288040632968, 121.364732160476 25.0286659045735, 121.364806088701 25.0285319323296, 121.364895237442 25.0284718417904, 121.365008575932 25.0284255425023, 121.36520535547 25.0284324381421, 121.365406483728 25.028537104055, 121.365702468419 25.0286336428885, 121.365822058194 25.0286188665413, 121.365948171047 25.0285302084211, 121.365990571058 25.0283913105707, 121.365988396698 25.0282551215683, 121.365875330002 25.028123857884, 121.365726114579 25.0280605655883, 121.36539452475 25.0280507146444, 121.365249929841 25.0279748623499, 121.36515860674 25.0278871888602, 121.365089570825 25.0277537083146, 121.365072175949 25.0275921523308, 121.365106965701 25.027440447128, 121.365241775993 25.0272749503292, 121.365485304261 25.0271705296152, 121.365820699219 25.0271784104269, 121.365925068477 25.0271567381935, 121.366138699301 25.0270183313399, 121.366232196761 25.0265804524011, 121.366293078828 25.0264799715243, 121.366439304507 25.026329742609, 121.366561068641 25.0262765467523, 121.366722514837 25.0262351721812, 121.367005181576 25.0262647254477, 121.367133468789 25.0263435341237, 121.367366125259 25.026556317296, 121.367584104803 25.0267538309754, 121.367764576644 25.0268286989204, 121.367897212576 25.0268326393373, 121.368095079294 25.0267932351627, 121.368079858777 25.026522823673, 121.368259243439 25.0249052678212, 121.367525397095 25.02468804874, 121.366689355854 25.0240684058016, 121.364930842579 25.0228433950161, 121.363325078062 25.0216794510449, 121.362305303439 25.0201770948588, 121.362353139349 25.0194633460839, 121.362304216259 25.0192229659903, 121.361995457205 25.0172757713668, 121.361205077514 25.0157152348907, 121.360704974821 25.0151078616388, 121.360441333727 25.0148113165913, 121.359990697713 25.013460599026, 121.359892851534 25.0133029650816, 121.358874707681 25.0124881914054, 121.358121292102 25.0119650388311, 121.35686172929 25.0111452115703, 121.356408617029 25.0110479589734, 121.356260583929 25.010935475938, 121.355067947724 25.0095724002079, 121.353897055114 25.0083447816516, 121.353068080541 25.007181685496, 121.351984810483 25.0062068434906, 121.351838480223 25.006045180647, 121.350985587695 25.0042795623135, 121.350543105529 25.0036282870907, 121.350012561803 25.0030666702836, 121.349632048884 25.0027745299995, 121.349427115498 25.0025178598006, 121.349335792397 25.0021941885549, 121.349303177004 25.0016463594808, 121.349111833365 25.001579358635, 121.348645433244 25.0013000238328, 121.347302791367 25.0003180704809, 121.344863678421 24.9984889049148, 121.34501153487 24.9983568704085, 121.345087637454 24.9982484837675, 121.345176786195 24.9980711236032, 121.3452463657 24.9978297163016, 121.34524419134 24.9975991472524, 121.345200704149 24.9973823725381, 121.345068883603 24.9971614097369, 121.34496424255 24.9970291274684, 121.343633534514 24.9958459707908, 121.342911103558 24.9951673071768, 121.342478134215 24.9947896680511, 121.341936175101 24.9944778008141, 121.341152862078 24.9940614839169, 121.34179919045 24.9931401622196, 121.343078257447 24.9920316109165, 121.343681098629 24.9913393771431, 121.344255673136 24.9905559904483, 121.344695437352 24.9898154637182, 121.343368349425 24.9886351363095, 121.343304934429 24.9886536702782, 121.343233180564 24.9886319912462, 121.343196216452 24.9885413334346, 121.343230781524 24.9884730386974, 121.343285365193 24.9884309673129, 121.343377231884 24.9884324454313, 121.34380168831 24.9880740282798, 121.343840370465 24.9877401913898, 121.34382920189 24.9876064362987, 121.343796883274 24.9873849477669, 121.343614237073 24.9865443810982, 121.34360909325 24.9863969234579, 121.343716431971 24.9861605565405, 121.344620217316 24.984832020631, 121.344984772251 24.9843644163199, 121.345324370848 24.9840793098341, 121.345554852959 24.9839551434341, 121.345775787676 24.9837908192696, 121.345913355576 24.983472845839, 121.345816319693 24.9832155623983, 121.344889498941 24.9823370269799, 121.344361129574 24.9817762983444, 121.344971015461 24.9801558975001, 121.346408289077 24.9792076554901, 121.346126585822 24.9788901962622, 121.346119707427 24.9786096203324, 121.346326059277 24.9781856377129, 121.346910722852 24.9780796418297, 121.347770522228 24.9774873102124, 121.347954802297 24.9772450441412, 121.348298351103 24.976931654142, 121.348368942593 24.9768076841059, 121.348355428041 24.9761260016584, 121.348381520356 24.9760037982519, 121.349001756413 24.9754159390396, 121.349139322834 24.9752239536537, 121.349221863574 24.9740953773853, 121.349269202636 24.9740145265346, 121.349588833488 24.9735843429113, 121.348955551273 24.9729964721367, 121.348711479415 24.9729393110398, 121.347949360498 24.9728358491033, 121.347393273946 24.9728860920636, 121.346146278753 24.9729333978214, 121.345613017076 24.9731152291583, 121.345142975336 24.9733970266633, 121.344881888682 24.9735114135797, 121.344529098848 24.9735981403475, 121.343316893406 24.973453759956, 121.341577949368 24.9725855029696, 121.341332344503 24.9725053766759, 121.340492400369 24.9724159901075, 121.340337477252 24.9723706552327, 121.339956964333 24.972140038437, 121.339747682228 24.9720907612878, 121.339615046296 24.9720907612878, 121.339344882124 24.9720000912818, 121.339186153878 24.9719823514902, 121.338700728112 24.9720730215093, 121.337991343313 24.9722267661715, 121.337418943165 24.9725795897342, 121.337244994402 24.9725993005179, 121.336513866008 24.9719503213045, 121.335369065713 24.971129360159, 121.333799721717 24.9701566175932, 121.331844972495 24.9690040013255, 121.330420766999 24.9680105448656, 121.331879553415 24.9661362656854, 121.333221613876 24.9641164730171, 121.333708942207 24.9633292168673, 121.333802711462 24.962974888356, 121.333903843152 24.9623320273047, 121.333929911495 24.9619254490406, 121.334053849988 24.9609504160466, 121.334182137201 24.9607008043871, 121.334342224422 24.9605566552712, 121.334459639837 24.960475833129, 121.335085520923 24.9601663384428, 121.335545732425 24.9598551271643, 121.337133014886 24.9589098936489, 121.338120717705 24.9583426514905, 121.337941333044 24.9579626815628, 121.337653773995 24.9575669399115, 121.337099040518 24.9569314343116, 121.336794358388 24.9564873916159, 121.336636717322 24.9561658169658, 121.336559527558 24.9559221096408, 121.336539958323 24.9557799262769, 121.336558440379 24.9556784018334, 121.336898999441 24.95542409752, 121.337556199611 24.9563486587473, 121.338022871526 24.9570686880283, 121.338219379269 24.9572239299292, 121.33845094856 24.9573619225657, 121.338647999893 24.9574373256196, 121.338784984544 24.9574471822245, 121.339075941029 24.9574826659958, 121.339453464203 24.9575689112305, 121.33963529502 24.9576318702136, 121.339910623296 24.9573346936738, 121.340191115676 24.9572822071955, 121.340061741284 24.9568798101182, 121.34003130025 24.9567257998661, 121.339981018186 24.9562088168431, 121.339616812964 24.9561861464226, 121.339323274426 24.9561063070821, 121.339019679476 24.9559554992978)","wkt0":"LINESTRING (121.339038161532 24.9559249434497, 121.339325176991 24.9560678658997, 121.339654864255 24.9561555906317, 121.340009624284 24.9561731234599, 121.340065002823 24.9567376278603, 121.340245474664 24.9573068487374, 121.339901426002 24.9573595735914, 121.339623841443 24.9576565592218, 121.339430633428 24.957605134211, 121.339059089743 24.9575208603215, 121.338765415308 24.9574821731657, 121.338640661429 24.957478723355, 121.338431379324 24.9573934637181, 121.338190025415 24.9572584281029, 121.337996390036 24.9570984053234, 121.337459440611 24.9562673410074, 121.336916394317 24.9555088656828, 121.336620409626 24.9557062471381, 121.336624758345 24.9559043675315, 121.336728040423 24.9561877481372, 121.336856146966 24.9564462068683, 121.33720694311 24.9569523796822, 121.337747271455 24.9575649685925, 121.338009825369 24.9579350831826, 121.338213127986 24.9583613789014, 121.33779537916 24.9585991674905, 121.336580183974 24.9593233726021, 121.33509944513 24.9602055221032, 121.334313171263 24.9606980502506, 121.334208703956 24.96083535014, 121.334101251868 24.9610293608534, 121.334000218601 24.9619658580216, 121.333787849947 24.9632500373259, 121.333736121701 24.9634267925508, 121.333337670316 24.9640575829817, 121.333155024115 24.9643190150993, 121.332355403396 24.9655155342734, 121.331489569189 24.966789986649, 121.332126552055 24.9671082468544, 121.332594582945 24.9674142700235, 121.333019126644 24.9677833694193, 121.33350672677 24.9682510251413, 121.33425525004 24.9688783413533, 121.335149998989 24.9696367342945, 121.33598930177 24.9703699908611, 121.335419032329 24.9711223951165, 121.336854711608 24.9721819920892, 121.335679999126 24.973269465285, 121.334189785918 24.9745891183325, 121.332339012165 24.9762275697783, 121.331307389131 24.9755669070816, 121.330512090099 24.9764640314164, 121.327255443104 24.9745141880988, 121.32488376044 24.9730703873089, 121.325408324678 24.9725963439005, 121.32591525454 24.9721271130464, 121.328615504994 24.969538670753, 121.329577659088 24.9687585946722, 121.330443403727 24.9680331476043, 121.331971611192 24.9690420033136, 121.333935596567 24.9702060675936, 121.335368291065 24.9710925473144, 121.33732630688 24.9725819526367, 121.337989444531 24.9721686680067, 121.338546594526 24.9720501962187, 121.339057323075 24.9719409586332, 121.339214420552 24.9719271610111, 121.339358471871 24.9719409586332, 121.339606348858 24.9720296575955, 121.339943918176 24.9720730215093, 121.340403761177 24.9723494931473, 121.341339222898 24.9724492586284, 121.341545333974 24.972506659807, 121.343334288283 24.973404483333, 121.344503550123 24.973539008467, 121.344738380953 24.9735035293251, 121.345245550315 24.9732768567878, 121.345599970919 24.9730560970457, 121.346126709517 24.9728703234737, 121.347412843182 24.9728151333929, 121.347811294567 24.9727776829668, 121.348283130587 24.9728151333929, 121.348848464066 24.9729018606515, 121.349007192312 24.9729570506934, 121.349662761712 24.9735666033481, 121.349283769129 24.9740454953223, 121.349262679558 24.9741155430895, 121.349199623131 24.9751237330379, 121.349173714809 24.9752426592505, 121.349034371806 24.9754218521387, 121.348430848148 24.9760220565878, 121.348396740872 24.9761220596149, 121.348425007546 24.9767966399654, 121.348337489575 24.9769390454247, 121.348002638206 24.9772529281561, 121.347804914203 24.9775122505486, 121.346896966062 24.9781108170989, 121.346346694462 24.9782105779074, 121.346154099402 24.9786407954673, 121.346160977797 24.9788901962622, 121.346469171144 24.9792273652117, 121.345901119715 24.9795708066043, 121.345022134872 24.9801547040446, 121.344400268045 24.9817743274133, 121.345192278506 24.9825897974882, 121.345844586367 24.9832047224034, 121.345961504341 24.9834853154008, 121.345782666071 24.9838219930911, 121.345541806802 24.9839945613524, 121.345328719567 24.9841128150317, 121.345046677806 24.9843581815837, 121.344674237347 24.984826769204, 121.343746873005 24.986166469123, 121.343629728435 24.9864530351415, 121.343651201185 24.9865995650183, 121.343844719184 24.9873869186081, 121.343877350655 24.987600201727, 121.34384295868 24.9880989664688, 121.343409619795 24.988454335113, 121.34343974472 24.9885334501435, 121.343422349844 24.9886181954966, 121.344152486455 24.9892772901343, 121.344769365576 24.9898213761249, 121.344418750101 24.9904293670987, 121.343896360223 24.9911772805574, 121.3432043703 24.9919941663424, 121.341860072517 24.9931756356962, 121.3412376621 24.9940654253853, 121.342327559818 24.9946556588456, 121.342541190642 24.9947921314543, 121.344354062905 24.9964256032078, 121.345114545153 24.9971446589174, 121.345233319543 24.9973705484518, 121.345287678531 24.9975952058974, 121.345281155452 24.9978144435789, 121.345248540059 24.9979942674526, 121.34515069388 24.9982149824227, 121.345048498982 24.9983706650651, 121.344948478443 24.9984672276175, 121.347204920052 25.0001580453202, 121.348747628143 25.0013000238328, 121.349129228241 25.0015222108259, 121.349424941138 25.0016345358048, 121.349446684733 25.002066099242, 121.349542356553 25.0025040656096, 121.349738592501 25.0027016179822, 121.35011910542 25.0029834128366, 121.350754018404 25.0037051397172, 121.351131269784 25.0042578860378, 121.351966767436 25.0060412395629, 121.352641362482 25.0066427460593, 121.353186039545 25.0071186287188, 121.353992726933 25.0082876369897, 121.355159270824 25.009501462712, 121.356310594199 25.0108389231858, 121.356468237064 25.0109399004421, 121.356942245644 25.0110581372332, 121.358399610123 25.0120123295509, 121.359988523354 25.0131906507727, 121.360149425959 25.0134448356407, 121.360491343996 25.014557134552, 121.360611477361 25.0148063905878, 121.360985467201 25.0152517005068, 121.361357282682 25.0156876494715, 121.36202154952 25.0170570610103, 121.362121570058 25.0172895638987, 121.362371621405 25.0187904776693, 121.362480339382 25.0195012748672, 121.362461857326 25.0201889167498, 121.363422924241 25.0215848770339, 121.364904750264 25.0226975947678, 121.366789919982 25.0239836849024, 121.367428094506 25.0244614706039, 121.367682494572 25.0246033282685, 121.36834839218 25.0247712914719, 121.368138566484 25.026528734313, 121.368173356237 25.0267848617739, 121.368210320349 25.0269350901321, 121.367992884395 25.0269567624046, 121.367834156149 25.0269488815787, 121.367686299701 25.0269311497185, 121.367510176578 25.0268424903789, 121.367037253379 25.0263829384427, 121.366900268729 25.0263415639074, 121.366739366123 25.0263395936911, 121.36656759172 25.0263868788739, 121.366421366041 25.0265016438772, 121.366319171143 25.0267104863548, 121.366310473705 25.0268488935556, 121.366266986514 25.0269730166065, 121.366177837773 25.0271010799402, 121.366012042858 25.0272335760947, 121.365857663331 25.0272690397252, 121.365472258103 25.0272769205306, 121.365313529857 25.0273557285565, 121.365241775993 25.0274502981209, 121.365180893926 25.0275468378093, 121.3652091606 25.0277832612154, 121.365340165762 25.0279118162513, 121.3654401863 25.0279679666845, 121.365896801803 25.0280044151975, 121.3660742839 25.0281869038737, 121.366116683911 25.028365451911, 121.36607537108 25.0285075513357, 121.365954694126 25.0286592552193, 121.365817709475 25.0287203307558, 121.365673114566 25.0287370772686, 121.365535042735 25.0287055544191, 121.365168391358 25.0285496639586, 121.365060488766 25.0285526192298, 121.364975688744 25.0285772464873, 121.364888714363 25.0286402922441, 121.364839791273 25.0287232860229, 121.364837616914 25.0288444519138, 121.3651607811 25.029309166325, 121.365726658169 25.0298667227873, 121.365972360797 25.0296283332318, 121.366057160819 25.0295613476535, 121.366341355253 25.0295703610902, 121.366400709625 25.0300918133267, 121.366309386525 25.0301450075296, 121.366057160819 25.0301627389254, 121.366157181357 25.0303700975585, 121.366226760862 25.0305789334524, 121.366289273699 25.0308926791627, 121.366261007025 25.0311251558434, 121.366278401901 25.0314955415095, 121.366434955788 25.0321742506396, 121.366463222462 25.0329357006809, 121.366400166035 25.0332292467828, 121.366391468597 25.0335385529892, 121.366437130148 25.0338562313225, 121.366693704573 25.0344556314568, 121.365603806855 25.0364478647625, 121.365096637494 25.0374456930655, 121.364733519451 25.0381416070131, 121.364019785933 25.0396068057076, 121.36366264738 25.0403110798598, 121.363201139568 25.0411749182975, 121.362385754742 25.0424324966172, 121.361235518548 25.0440946373275, 121.360562554271 25.0458557431691, 121.360303805486 25.0465092567154, 121.359855887422 25.0477468353717, 121.359346543701 25.0483033230955, 121.359213907769 25.0483781778886, 121.359220430848 25.0500840668375, 121.3591638975 25.0516476133704, 121.359092143635 25.0522956790951, 121.358837743569 25.0534455441175, 121.359705313024 25.0540290903346, 121.361283354457 25.0550351470356, 121.364335582955 25.0570363085364, 121.367477017596 25.0590932684166, 121.368430701396 25.0597285802813, 121.368326234089 25.0598539410499, 121.366821904866 25.0588570244614)","wkt1":"LINESTRING (121.36820087332 25.0597614128635, 121.36173833919 25.0555418655655, 121.358961682063 25.0537552917804, 121.358624656335 25.053555851801, 121.358839917929 25.0526389161648, 121.358981251299 25.05162397565, 121.359044307725 25.0489779995147, 121.35902256413 25.0480314816203, 121.358948635906 25.0476552362653, 121.359139979545 25.0477064529784, 121.359803702793 25.0477291065177, 121.360464708092 25.045944881243, 121.36117681084 25.0440847876712, 121.361949795655 25.0429616754153, 121.363131560063 25.0411788582536, 121.363806698699 25.0398890083535, 121.364676986103 25.0381238767705, 121.365523355553 25.0364754455157, 121.366600207113 25.034487152829, 121.366361027564 25.0338818425631, 121.366295796778 25.0335759848975, 121.366311017294 25.0333691242083, 121.36633058653 25.0331918147686, 121.366369725002 25.0329554017836, 121.366356678845 25.0324288887279, 121.366295796778 25.0319141941742, 121.366215345475 25.0315492276369, 121.36619360188 25.031294587723, 121.366182730082 25.0308173211611, 121.366053899279 25.0303912766866, 121.365945181303 25.0302139629434, 121.365660340203 25.0299317380402, 121.365964750538 25.0296362138857, 121.366056073639 25.0295593774889, 121.366339862862 25.0295658839199, 121.366397448086 25.0300932909438, 121.366306124986 25.0301425448355, 121.366060422358 25.0301602762317, 121.365943006943 25.030217410713, 121.365638596608 25.0299179469288, 121.36523226317 25.0295148025059, 121.364757165611 25.0289439457673, 121.364721288679 25.0288040632968, 121.364732160476 25.0286659045735, 121.364806088701 25.0285319323296, 121.364895237442 25.0284718417904, 121.365008575932 25.0284255425023, 121.36520535547 25.0284324381421, 121.365406483728 25.028537104055, 121.365702468419 25.0286336428885, 121.365822058194 25.0286188665413, 121.365948171047 25.0285302084211, 121.365990571058 25.0283913105707, 121.365988396698 25.0282551215683, 121.365875330002 25.028123857884, 121.365726114579 25.0280605655883, 121.36539452475 25.0280507146444, 121.365249929841 25.0279748623499, 121.36515860674 25.0278871888602, 121.365089570825 25.0277537083146, 121.365072175949 25.0275921523308, 121.365106965701 25.027440447128, 121.365241775993 25.0272749503292, 121.365485304261 25.0271705296152, 121.365820699219 25.0271784104269, 121.365925068477 25.0271567381935, 121.366138699301 25.0270183313399, 121.366232196761 25.0265804524011, 121.366293078828 25.0264799715243, 121.366439304507 25.026329742609, 121.366561068641 25.0262765467523, 121.366722514837 25.0262351721812, 121.367005181576 25.0262647254477, 121.367133468789 25.0263435341237, 121.367366125259 25.026556317296, 121.367584104803 25.0267538309754, 121.367764576644 25.0268286989204, 121.367897212576 25.0268326393373, 121.368095079294 25.0267932351627, 121.368079858777 25.026522823673, 121.368259243439 25.0249052678212, 121.367525397095 25.02468804874, 121.366689355854 25.0240684058016, 121.364930842579 25.0228433950161, 121.363325078062 25.0216794510449, 121.362305303439 25.0201770948588, 121.362353139349 25.0194633460839, 121.362304216259 25.0192229659903, 121.361995457205 25.0172757713668, 121.361205077514 25.0157152348907, 121.360704974821 25.0151078616388, 121.360441333727 25.0148113165913, 121.359990697713 25.013460599026, 121.359892851534 25.0133029650816, 121.358874707681 25.0124881914054, 121.358121292102 25.0119650388311, 121.35686172929 25.0111452115703, 121.356408617029 25.0110479589734, 121.356260583929 25.010935475938, 121.355067947724 25.0095724002079, 121.353897055114 25.0083447816516, 121.353068080541 25.007181685496, 121.351984810483 25.0062068434906, 121.351838480223 25.006045180647, 121.350985587695 25.0042795623135, 121.350543105529 25.0036282870907, 121.350012561803 25.0030666702836, 121.349632048884 25.0027745299995, 121.349427115498 25.0025178598006, 121.349335792397 25.0021941885549, 121.349303177004 25.0016463594808, 121.349111833365 25.001579358635, 121.348645433244 25.0013000238328, 121.347302791367 25.0003180704809, 121.344863678421 24.9984889049148, 121.34501153487 24.9983568704085, 121.345087637454 24.9982484837675, 121.345176786195 24.9980711236032, 121.3452463657 24.9978297163016, 121.34524419134 24.9975991472524, 121.345200704149 24.9973823725381, 121.345068883603 24.9971614097369, 121.34496424255 24.9970291274684, 121.343633534514 24.9958459707908, 121.342911103558 24.9951673071768, 121.342478134215 24.9947896680511, 121.341936175101 24.9944778008141, 121.341152862078 24.9940614839169, 121.34179919045 24.9931401622196, 121.343078257447 24.9920316109165, 121.343681098629 24.9913393771431, 121.344255673136 24.9905559904483, 121.344695437352 24.9898154637182, 121.343368349425 24.9886351363095, 121.343304934429 24.9886536702782, 121.343233180564 24.9886319912462, 121.343196216452 24.9885413334346, 121.343230781524 24.9884730386974, 121.343285365193 24.9884309673129, 121.343377231884 24.9884324454313, 121.34380168831 24.9880740282798, 121.343840370465 24.9877401913898, 121.34382920189 24.9876064362987, 121.343796883274 24.9873849477669, 121.343614237073 24.9865443810982, 121.34360909325 24.9863969234579, 121.343716431971 24.9861605565405, 121.344620217316 24.984832020631, 121.344984772251 24.9843644163199, 121.345324370848 24.9840793098341, 121.345554852959 24.9839551434341, 121.345775787676 24.9837908192696, 121.345913355576 24.983472845839, 121.345816319693 24.9832155623983, 121.344889498941 24.9823370269799, 121.344361129574 24.9817762983444, 121.344971015461 24.9801558975001, 121.346408289077 24.9792076554901, 121.346126585822 24.9788901962622, 121.346119707427 24.9786096203324, 121.346326059277 24.9781856377129, 121.346910722852 24.9780796418297, 121.347770522228 24.9774873102124, 121.347954802297 24.9772450441412, 121.348298351103 24.976931654142, 121.348368942593 24.9768076841059, 121.348355428041 24.9761260016584, 121.348381520356 24.9760037982519, 121.349001756413 24.9754159390396, 121.349139322834 24.9752239536537, 121.349221863574 24.9740953773853, 121.349269202636 24.9740145265346, 121.349588833488 24.9735843429113, 121.348955551273 24.9729964721367, 121.348711479415 24.9729393110398, 121.347949360498 24.9728358491033, 121.347393273946 24.9728860920636, 121.346146278753 24.9729333978214, 121.345613017076 24.9731152291583, 121.345142975336 24.9733970266633, 121.344881888682 24.9735114135797, 121.344529098848 24.9735981403475, 121.343316893406 24.973453759956, 121.341577949368 24.9725855029696, 121.341332344503 24.9725053766759, 121.340550634068 24.9723832609342, 121.340401233682 24.9723370826331, 121.339993778085 24.9721007583866, 121.339800915768 24.9720409982323, 121.339635217159 24.9720409982323, 121.339374445576 24.9719540743715, 121.339195165114 24.9719404925182, 121.338687203802 24.9720301327497, 121.338005394769 24.9721768167648, 121.337418943165 24.9725795897342, 121.337244994402 24.9725993005179, 121.336841280097 24.9721984083804, 121.332716313853 24.9758846119335, 121.332341661882 24.9762425848396, 121.331306505892 24.975571323276, 121.330515123838 24.9764430800698, 121.324914098398 24.9730819033211, 121.328531652006 24.9696702995468, 121.330322520129 24.9681808942245, 121.331879553415 24.9661362656854, 121.333221613876 24.9641164730171, 121.333708942207 24.9633292168673, 121.333802711462 24.962974888356, 121.333903843152 24.9623320273047, 121.333929911495 24.9619254490406, 121.334053849988 24.9609504160466, 121.334182137201 24.9607008043871, 121.334342224422 24.9605566552712, 121.334459639837 24.960475833129, 121.335085520923 24.9601663384428, 121.335545732425 24.9598551271643, 121.337133014886 24.9589098936489, 121.338120717705 24.9583426514905, 121.337941333044 24.9579626815628, 121.337653773995 24.9575669399115, 121.337099040518 24.9569314343116, 121.336794358388 24.9564873916159, 121.336636717322 24.9561658169658, 121.336559527558 24.9559221096408, 121.336539958323 24.9557799262769, 121.336558440379 24.9556784018334, 121.336898999441 24.95542409752, 121.337556199611 24.9563486587473, 121.338022871526 24.9570686880283, 121.338219379269 24.9572239299292, 121.33845094856 24.9573619225657, 121.338647999893 24.9574373256196, 121.338784984544 24.9574471822245, 121.339075941029 24.9574826659958, 121.339453464203 24.9575689112305, 121.33963529502 24.9576318702136, 121.339910623296 24.9573346936738, 121.340191115676 24.9572822071955, 121.340061741284 24.9568798101182, 121.34003130025 24.9567257998661, 121.339985628973 24.9561692445254, 121.339630689874 24.9561366480776, 121.339359052809 24.9560768879233, 121.339009546453 24.9558957965466)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454065700'=='0100020200' || '0454065700'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
