
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231491992</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400057100">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400057100">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400057100" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0400057100" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400057100" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0400057100',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="4t1otUx5xq8cDCicB_EsZWsK9R_XrsOz5NUbIOq-N8FBhmSNu7a3eAM5Xem7qQoSNmcDRdoObgQVzpdAbvgCsEdzC2E1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">571 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0400057100" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0400057100" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">善息寺 - 南天母廣場</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 停駛 <br>
                        [假日] 0600 - 1700
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> <br>
[假日]<br /> 571南天母廣場班表:0645 0815 0945 1115 1315 1445 1615 1745<br/>571善息寺班表:0600 0730 0900 1030 1230 1400 1530 1700<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">臺北客運樹林站:02-2681-1321</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">平日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 南天母廣場</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 善息寺</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">善息寺</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367600560" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="24.942349" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.445303" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">媽祖田</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.951976" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.411206" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">太陽城社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.953331" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.412149" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">頂埔國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956227" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.414282" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">頂埔</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958169" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.417136" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">捷運頂埔站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367600320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958842" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.418269" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">福安街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367900320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.964861" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.41954" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">金安街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367800430" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.963991" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.42151" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">福德宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2368000520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.963818" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.427371" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">土城國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367100300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.964872" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.430929" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">承天路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.965803" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.43615" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">登山口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367401040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958272" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4444488" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">南天母路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95693" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.445521" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">南天母路52巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367401100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955605" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446815" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">南天母路一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956802" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4467179" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">南天母路二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.954049" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4474823" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">南天母廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.951182" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4478693" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">南天母路二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.953864" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.447697" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">南天母路一</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.957082" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4466871" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">南天母路52巷口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367401140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.955529" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446745" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">南天母路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956508" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446029" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">登山口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367401000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958433" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.444583" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">承天路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367400300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.966064" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.436047" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">土城國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2368000040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.96478" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.42989" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">福德宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2368000560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.964222" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.427601" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">金安街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367800470" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.964264" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.421417" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">福安街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367900360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.964921" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.419454" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">捷運頂埔站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367600360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.960185" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.419797" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">頂埔</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500240" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.958125" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.416875" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">頂埔國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.956231" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.413997" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">太陽城社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.95344" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.41202" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">媽祖田</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367500440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.951531" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.410662" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">善息寺</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2367600560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="24.942349" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.445303" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0400057100";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 16;
        var existBackNum = 17;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0400057100',
                        url: './StopStatusRecent3OfRoute?routeid=0400057100&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0400057100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0400057100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0400057100');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0400057100","Name":"571","BeginStop":"善息寺","GoDirStops":[{"UniStopId":"2367600560","Name":"善息寺","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.445303,"Latitude":24.942349,"PublicId":"2367600560"},{"UniStopId":"2367500400","Name":"媽祖田","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.411206,"Latitude":24.951976,"PublicId":"2367500400"},{"UniStopId":"2367500600","Name":"太陽城社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.412149,"Latitude":24.953331,"PublicId":"2367500600"},{"UniStopId":"2367500300","Name":"頂埔國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.414282,"Latitude":24.956227,"PublicId":"2367500300"},{"UniStopId":"2367500200","Name":"頂埔","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.417136,"Latitude":24.958169,"PublicId":"2367500200"},{"UniStopId":"2367600320","Name":"捷運頂埔站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.418269,"Latitude":24.958842,"PublicId":"2367600320"},{"UniStopId":"2367900320","Name":"福安街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.41954,"Latitude":24.964861,"PublicId":"2367900320"},{"UniStopId":"2367800430","Name":"金安街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.42151,"Latitude":24.963991,"PublicId":"2367800430"},{"UniStopId":"2368000520","Name":"福德宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.427371,"Latitude":24.963818,"PublicId":"2368000520"},{"UniStopId":"2367100300","Name":"土城國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.430929,"Latitude":24.964872,"PublicId":"2367100300"},{"UniStopId":"2367400340","Name":"承天路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.43615,"Latitude":24.965803,"PublicId":"2367400340"},{"UniStopId":"2367401040","Name":"登山口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4444488,"Latitude":24.958272,"PublicId":"2367401040"},{"UniStopId":"2367400440","Name":"南天母路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.445521,"Latitude":24.95693,"PublicId":"2367400440"},{"UniStopId":"2367401100","Name":"南天母路52巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446815,"Latitude":24.955605,"PublicId":"2367401100"},{"UniStopId":"2367400540","Name":"南天母路一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4467179,"Latitude":24.956802,"PublicId":"2367400540"},{"UniStopId":"2367400640","Name":"南天母路二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4474823,"Latitude":24.954049,"PublicId":"2367400640"}],"LastStop":"南天母廣場","BackDirStops":[{"UniStopId":"2367400720","Name":"南天母廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4478693,"Latitude":24.951182,"PublicId":"2367400720"},{"UniStopId":"2367400600","Name":"南天母路二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.447697,"Latitude":24.953864,"PublicId":"2367400600"},{"UniStopId":"2367400500","Name":"南天母路一","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4466871,"Latitude":24.957082,"PublicId":"2367400500"},{"UniStopId":"2367401140","Name":"南天母路52巷口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446745,"Latitude":24.955529,"PublicId":"2367401140"},{"UniStopId":"2367400400","Name":"南天母路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446029,"Latitude":24.956508,"PublicId":"2367400400"},{"UniStopId":"2367401000","Name":"登山口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.444583,"Latitude":24.958433,"PublicId":"2367401000"},{"UniStopId":"2367400300","Name":"承天路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.436047,"Latitude":24.966064,"PublicId":"2367400300"},{"UniStopId":"2368000040","Name":"土城國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.42989,"Latitude":24.96478,"PublicId":"2368000040"},{"UniStopId":"2368000560","Name":"福德宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.427601,"Latitude":24.964222,"PublicId":"2368000560"},{"UniStopId":"2367800470","Name":"金安街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.421417,"Latitude":24.964264,"PublicId":"2367800470"},{"UniStopId":"2367900360","Name":"福安街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.419454,"Latitude":24.964921,"PublicId":"2367900360"},{"UniStopId":"2367600360","Name":"捷運頂埔站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.419797,"Latitude":24.960185,"PublicId":"2367600360"},{"UniStopId":"2367500240","Name":"頂埔","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.416875,"Latitude":24.958125,"PublicId":"2367500240"},{"UniStopId":"2367500340","Name":"頂埔國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.413997,"Latitude":24.956231,"PublicId":"2367500340"},{"UniStopId":"2367500640","Name":"太陽城社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.41202,"Latitude":24.95344,"PublicId":"2367500640"},{"UniStopId":"2367500440","Name":"媽祖田","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.410662,"Latitude":24.951531,"PublicId":"2367500440"},{"UniStopId":"2367600560","Name":"善息寺","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.445303,"Latitude":24.942349,"PublicId":"2367600560"}],"RouteMapUrl":"../MapOverview?nid=0400057100","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"停駛","HeadwayDesc":"","HolidayBusTimeDesc":"0600 - 1700","HolidayHeadwayDesc":"571南天母廣場班表:0645 0815 0945 1115 1315 1445 1615 1745;571善息寺班表:0600 0730 0900 1030 1230 1400 1530 1700","RouteNote":"平日停駛","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"臺北客運樹林站:02-2681-1321","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.446076354644 24.9421572433444, 121.445786263315 24.9421403339077, 121.445477523259 24.942153485692, 121.445199864416 24.9422605787405, 121.445131485746 24.9422850034579, 121.444719141643 24.942320701113, 121.444058147831 24.9424822798434, 121.443790849393 24.9424691280942, 121.443546343844 24.9424804010222, 121.443349496157 24.9424935527702, 121.443192018008 24.9425367656466, 121.443055260667 24.9425593114892, 121.442806610957 24.9426213125349, 121.442566249571 24.9427039805473, 121.442124896336 24.9428373765413, 121.441793363389 24.9428993774471, 121.441590299459 24.9429012562619, 121.441490839575 24.9428618011443, 121.441424532986 24.9427847696877, 121.441385163448 24.9426927076398, 121.441424532986 24.9421253032953, 121.441393451772 24.9421797892564, 121.441372730963 24.9422605787405, 121.44125255027 24.9428148307497, 121.441138585819 24.9429670147633, 121.440979035589 24.9430233791651, 121.44077804374 24.943015863913, 121.440585340214 24.9429576206938, 121.440244482904 24.9428148307497, 121.439672588571 24.9425480385684, 121.438816819152 24.9421102726811, 121.438754656724 24.942057665517, 121.438659341002 24.9420351195827, 121.438559881118 24.9420539078616, 121.438421051697 24.9421083938542, 121.438083302507 24.9421309397752, 121.437318704649 24.9423958540372, 121.436413205288 24.942343246995, 121.435973924134 24.9422530634419, 121.434846712115 24.9427077381829, 121.434786621769 24.9427152534538, 121.434709954775 24.9427114958184, 121.434573197434 24.9427641027033, 121.434322475643 24.9428110731173, 121.433721572178 24.9427828908711, 121.43320769611 24.9427171322715, 121.432787063684 24.9427659815202, 121.432084628253 24.9427678603371, 121.431744806983 24.9428411341729, 121.431380120742 24.9428148307497, 121.430932551264 24.9427509509842, 121.430283989937 24.9425705844089, 121.430045700631 24.9425442809279, 121.429720383927 24.9425405232873, 121.428959930231 24.9422511846172, 121.428334161794 24.9421948198621, 121.428004700928 24.942063302, 121.427768483704 24.9420445137225, 121.427412085786 24.9420219677857, 121.427140643186 24.9419543299507, 121.426972804632 24.941944935804, 121.42638453389 24.9419401366975, 121.425926403769 24.9420463925504, 121.425634240359 24.9421779104306, 121.425151445506 24.9424634916298, 121.424714236432 24.9426325854489, 121.424359910596 24.9429501054377, 121.424163062909 24.9430684706679, 121.423734142159 24.9431530171913, 121.42305864378 24.94313422908, 121.422720894591 24.943194351026, 121.422389361644 24.9432826550811, 121.421912783033 24.9433164736386, 121.421695214537 24.9432958067434, 121.421541880549 24.9432300484176, 121.421330528295 24.9432112603181, 121.420961697892 24.9432187755582, 121.420615660379 24.9431492595693, 121.420081063503 24.9428655587751, 121.419558899112 24.9425630691292, 121.419301631826 24.9425110081999, 121.419076104258 24.9425799785079, 121.418987004779 24.94267204064, 121.418740427149 24.9431116833427, 121.418595381485 24.9433446557628, 121.418479344954 24.9434292020966, 121.418284569348 24.9434949603161, 121.417026816231 24.9432666852035, 121.416467354384 24.9434376567268, 121.415876811322 24.9434301415, 121.415646810341 24.943480869272, 121.415445818492 24.9435391122438, 121.415275907857 24.9436067492087, 121.415078024129 24.9437443715297, 121.414489553149 24.9438026143769, 121.414122794826 24.9439735851563, 121.413989145607 24.9440698735403, 121.413802658325 24.9441149646601, 121.413596486273 24.9441055706782, 121.413515675118 24.9441243586413, 121.413468017257 24.9441638133546, 121.41336234113 24.9442464803319, 121.413111619339 24.944353571561, 121.412885762519 24.9444775718151, 121.412821528011 24.9445226627857, 121.412443373243 24.9451154196349, 121.4121657144 24.945647113526, 121.411966794632 24.9461496842637, 121.411724361165 24.9466607073598, 121.411561702813 24.9469415812836, 121.411476747496 24.9470054588771, 121.411400080502 24.947108790205, 121.411342062236 24.9472158789455, 121.411269539404 24.9473793300015, 121.411244674433 24.9475277508875, 121.411203232815 24.947650808575, 121.411130709983 24.9477447456583, 121.410848906978 24.9479833455278, 121.41060440143 24.9481608860757, 121.410169264437 24.9484276661002, 121.409962056345 24.9485366324229, 121.409889533513 24.94858923682, 121.409829443167 24.9486756582808, 121.409775569063 24.948869166984, 121.409684397503 24.9491284305952, 121.409553856405 24.9493388470378, 121.409412954903 24.9498949459055, 121.409740343687 24.9500903313981, 121.409982777155 24.9503101397067, 121.410556743569 24.9511874903292, 121.41107890796 24.9519013898637, 121.412183327088 24.95344189581, 121.412454769688 24.953811990099, 121.413331259916 24.9550518917934, 121.41403991159 24.9560287752432, 121.414504057715 24.9563763184474, 121.415208565227 24.9568497270715, 121.416377218864 24.9576500089391, 121.417123167994 24.9581684986396, 121.417697134408 24.9585460930255, 121.417873261286 24.9586174788987, 121.418171640938 24.9588203648384, 121.419898720382 24.9600442483914, 121.420381515235 24.9603805089711, 121.42113782477 24.9608877159291, 121.421889990143 24.9614005563949, 121.421374041995 24.9621068826227, 121.42082079639 24.9628620460744, 121.420466470553 24.9633241587372, 121.419384844315 24.9647931394987, 121.41991736911 24.9650016506921, 121.420470614715 24.9651951337358, 121.421297375001 24.9641995381307, 121.422260892627 24.9631081306758, 121.424554686202 24.9636021769017, 121.42540838354 24.9626967370582, 121.427215238099 24.9638182040959, 121.427749834976 24.9640755577367, 121.428245062315 24.9641957811509, 121.428908128208 24.9643066120068, 121.430675421399 24.9648842130807, 121.43153552681 24.9653172351158, 121.431454715655 24.9652815435405, 121.431800753168 24.9653848595317, 121.432194448542 24.9654186720191, 121.432644090101 24.9653848595317, 121.433029497151 24.9653735887006, 121.433332020965 24.9654205504904, 121.434401214718 24.9656384529607, 121.434952388242 24.9657849733704, 121.435690049049 24.9663428764104, 121.436365547427 24.9656403314286, 121.436786179853 24.9652759081203, 121.437266902626 24.964873914147, 121.437621228463 24.9646034127904, 121.438369249674 24.9640304739261, 121.438626187708 24.9638482600233, 121.43885826077 24.9637393072515, 121.440039346893 24.963121280282, 121.440816377237 24.963846381528, 121.44089097215 24.9636773168383, 121.441425569026 24.9634819529137, 121.441670074574 24.963333551253, 121.441978814631 24.9632358690536, 121.442266833878 24.9628526535226, 121.442416023704 24.9627080081345, 121.442892602315 24.9625502129719, 121.442956836824 24.9624788293794, 121.443475893093 24.9617640519147, 121.443654092052 24.9608980479009, 121.443647875809 24.9606162665393, 121.443589857544 24.9603551485684, 121.443488325579 24.9601203297762, 121.443370216966 24.9600583375403, 121.443314270782 24.9599831953943, 121.443279045406 24.9594891346423, 121.443339135753 24.9593426067377, 121.44344688396 24.9592505570674, 121.444194905171 24.959053307542, 121.444306797541 24.9589828612064, 121.444378284332 24.9587912469694, 121.444420761991 24.9586278110611, 121.444520221875 24.9582596098288, 121.444555447251 24.9582126453067, 121.445315900947 24.9572677153157, 121.44566193846 24.9568318803508, 121.446148877476 24.956200668356, 121.446187210973 24.9561039198029, 121.446240049036 24.9556774738182, 121.446237976955 24.9554792792564, 121.446265950048 24.9552435118504, 121.446298067302 24.9551702453932, 121.446390274903 24.9550857071192, 121.446495951029 24.9550687994575, 121.446614059642 24.9550828891758, 121.446687618514 24.9551232796926, 121.446749780942 24.9551974854914, 121.44679122256 24.9552895381922, 121.446796402762 24.9558155523053, 121.446704195162 24.9561086163364, 121.446369036073 24.9567802187764, 121.44622606249 24.9571596960178, 121.446242639137 24.9572235683097, 121.446282008675 24.9572479900596, 121.446346243183 24.9572761689958, 121.446416693934 24.9572686546135, 121.446483000524 24.9572461114637, 121.446547235032 24.9572115922575, 121.446891200464 24.9565878966338, 121.447433049624 24.956156755794, 121.447911700316 24.955740642397, 121.448054673899 24.9555358727598, 121.448031881009 24.9552803798908, 121.44796661046 24.9551103641218, 121.447780123178 24.9548172977146, 121.447494176011 24.9544143302657, 121.447494176011 24.9543091264255, 121.447573951126 24.953932458368, 121.447638185635 24.9536036947826, 121.447659942484 24.9527080443902, 121.447577059248 24.9517898433342, 121.447665122687 24.951441817513, 121.447747487903 24.9512144964703, 121.448049493697 24.9509261175239, 121.448065034304 24.9509477224848, 121.447772352874 24.9512290563038, 121.447697239941 24.9514465142242, 121.447608140462 24.9517860859757, 121.44769516786 24.9527268310411, 121.44767341101 24.9535999374794, 121.447619536907 24.9538948854313, 121.447525257225 24.9543110050663, 121.447535617629 24.9544011797906, 121.447796699825 24.9547750284637, 121.447997691674 24.9550878205768, 121.448060890142 24.9552785012648, 121.448089899275 24.9555396300039, 121.447924132801 24.9557782147705, 121.44744755419 24.9561886922043, 121.446918137516 24.9566085612985, 121.44663374441 24.9571451368878, 121.446584532489 24.9572423542716, 121.446456063472 24.9573081051157, 121.446342099021 24.9573043479256, 121.446263359947 24.9572761689958, 121.446207413762 24.9572385970795, 121.446184620872 24.9571672104068, 121.44622606249 24.9570469801276, 121.446263877967 24.9569398999364, 121.446336918819 24.9567539183302, 121.446681920292 24.9560644689148, 121.446762213427 24.9557920695804, 121.446760141346 24.9553167782639, 121.446709375364 24.9552143931354, 121.446662753543 24.9551533377431, 121.446603699237 24.95512046175, 121.446502167272 24.9551091899789, 121.446409959671 24.9551260976351, 121.44633847288 24.9551786992174, 121.446308427707 24.9552651160538, 121.446285634816 24.9554811578794, 121.446279418574 24.9556737165783, 121.446232796753 24.9561039198029, 121.446197571377 24.9562100614154, 121.445355270485 24.9572940156521, 121.444563735574 24.9582652455703, 121.44441868991 24.95880815412, 121.444333734593 24.9590129183145, 121.444207337657 24.9590890003367, 121.443482109336 24.9592824926751, 121.443376433209 24.9593707851944, 121.443326703267 24.9594910132041, 121.443364000724 24.9599831953943, 121.443527695116 24.9600752445168, 121.443652019971 24.9603382416303, 121.443712110318 24.9606087523608, 121.443712110318 24.9609111976821, 121.443538055521 24.9617584163334, 121.442998278442 24.9625239137584, 121.442927827691 24.9626046898961, 121.442440888675 24.9627549709415, 121.442310347578 24.9628902237254, 121.442005751683 24.9632959811855, 121.441701155788 24.963391784835, 121.441462866483 24.9635383079195, 121.441226649258 24.9635984199036, 121.440946918334 24.9637167652867, 121.440839170127 24.9639515772178, 121.440039346893 24.9632095699866, 121.438930783602 24.9637599707156, 121.438653124759 24.9638933439006, 121.438251141062 24.9641939026609, 121.437623300544 24.9646710381853, 121.437237893493 24.9649697165683, 121.436701224536 24.9654280643751, 121.436377979913 24.9657154701209, 121.435636174945 24.966474368341, 121.434821847144 24.9658958027951, 121.434351484776 24.9657624317758, 121.433323732642 24.9655520434066, 121.432996343857 24.9654938108467, 121.43266481091 24.9655107170766, 121.432182016056 24.9655445295294, 121.431732374497 24.9654881754363, 121.431164624326 24.9652665157527, 121.430565792941 24.9649565672207, 121.428860470347 24.9644118073031, 121.428226413586 24.964316004445, 121.427710465438 24.9641939026609, 121.427451455324 24.9640774362284, 121.427107489891 24.9639064933618, 121.425858025099 24.9631024951561, 121.425393878973 24.9628019337305, 121.424560902445 24.9636773168383, 121.424509100422 24.9636472608692, 121.422291973841 24.9631701213757, 121.421390618642 24.9641713607794, 121.420480975119 24.9652590018582, 121.419297816916 24.964823195188, 121.419815837145 24.9640999781272, 121.420207460438 24.963581513411, 121.420725480668 24.9628733171356, 121.421737663687 24.9615055815271, 121.417719927298 24.9587208004838, 121.417616323252 24.958591178845, 121.416812355856 24.9580595408403, 121.414232615115 24.9562974168331, 121.413954956272 24.9560569544585, 121.413163421362 24.954956081653, 121.41223305703 24.9536598194854, 121.411151430792 24.9521681617853, 121.410473177543 24.9512098194698, 121.409910254323 24.9505111606369, 121.409802506115 24.9503984386603, 121.409671965017 24.9502725656646, 121.409296918371 24.9500546359947, 121.409499982301 24.9493256960206, 121.409613946751 24.9491115221154, 121.409717550797 24.9488597733646, 121.409765208658 24.9486512348306, 121.409848091895 24.9485497835243, 121.409924758889 24.9484915429218, 121.41017548068 24.948365667977, 121.410548455245 24.9481317656859, 121.410892420677 24.9478818936713, 121.411076835879 24.9477146857995, 121.411143142468 24.9476414148627, 121.411184584086 24.9475239933989, 121.411203232815 24.9473755725084, 121.411269539404 24.9471895764564, 121.411387648016 24.9470167313887, 121.41150990079 24.9469171574895, 121.411709856599 24.9465498606183, 121.411840397697 24.9462849552896, 121.41187147891 24.9461797445045, 121.412107696135 24.9456250379419, 121.412366706249 24.9450872379158, 121.4127521133 24.94451420823, 121.412812203647 24.9444465717633, 121.413097114773 24.9443061320368, 121.41333954824 24.9441971619715, 121.413447296447 24.9440957069964, 121.413577837545 24.9440431006801, 121.413637927892 24.9440487370722, 121.413795406041 24.9440524946668, 121.413955992313 24.9440153884152, 121.414110362341 24.9439115847912, 121.414477120663 24.9437481291335, 121.415059375401 24.9436748558373, 121.4152386104 24.9435635367076, 121.41541888144 24.943482748078, 121.415648882422 24.9434188686589, 121.415864378837 24.9433737772843, 121.416454921898 24.9433775348995, 121.417028888312 24.9432065632927, 121.418292857671 24.9434348385168, 121.418413038365 24.9433972623773, 121.418556011948 24.9433033219784, 121.418672048479 24.9431079257194, 121.418926914432 24.9426513736368, 121.419040878882 24.9425292503649, 121.419347546858 24.9424578551652, 121.419581692002 24.9425123409792, 121.420095568069 24.9428054366686, 121.420646741593 24.943094774037, 121.42093476084 24.943160532435, 121.421291158758 24.9431492595693, 121.421554313034 24.943169926489, 121.42172422367 24.9432375636566, 121.421908638871 24.9432563517522, 121.422374857077 24.9432281696078, 121.423114589965 24.943062834231, 121.423727925916 24.9430985316607, 121.424129909614 24.943015863913, 121.424318468977 24.9429068927063, 121.424681083138 24.9425799785079, 121.425124508454 24.9424052481495, 121.425698474868 24.9420783326199, 121.425893250474 24.9420013006734, 121.426378117409 24.9418754190962, 121.427159291914 24.9418904497391, 121.427434878676 24.94195620878, 121.428023349656 24.9420106948158, 121.428354882603 24.9421384550813, 121.428984795202 24.9421985775133, 121.429705879361 24.9424785222009, 121.430053988955 24.9424860374858, 121.430555432537 24.9425743420486, 121.430996785772 24.9427021017295, 121.431402913632 24.9427565874354, 121.431736518659 24.9427791332378, 121.432084628253 24.9426964652758, 121.432797424089 24.9427002229116, 121.433218056515 24.9426532524554, 121.433678058478 24.9427152534538, 121.434330763967 24.9427565874354, 121.434566981192 24.9427021017295, 121.434707882694 24.942643858362, 121.434838423792 24.9426513736367, 121.435950823839 24.9422017864645, 121.436442214421 24.9422868822821, 121.437337353377 24.9423376105249, 121.438072942103 24.9420726961376, 121.438421051697 24.942057665517, 121.43854123239 24.9419994218449, 121.438700782621 24.9419693605839, 121.438856188689 24.9420614231724, 121.439714030189 24.9425010680541, 121.440064211864 24.9426645253665, 121.440638178278 24.942908771521, 121.440806016832 24.9429632571356, 121.440969711224 24.9429594995078, 121.441104396484 24.9429125291504, 121.441197640125 24.9427772544211, 121.441327145183 24.9421760316047, 121.441358226396 24.9420896055836, 121.441436965471 24.9420520290338, 121.44150119998 24.9421159091617, 121.441484623332 24.9422774881608, 121.441463902523 24.9426814347313, 121.441484623332 24.9427547086184, 121.441557146164 24.9428298612779, 121.441671110615 24.9428448918043, 121.44181822836 24.9428392553571, 121.44220363541 24.9427528298013, 121.442423275988 24.9426908288218, 121.442611835351 24.9426175548966, 121.442887422113 24.9425348868262, 121.443057332748 24.942489795128, 121.443183729684 24.9424747645583, 121.443299766215 24.9424409457698, 121.44351319055 24.9424146422611, 121.443805353959 24.9424071269719, 121.444041571184 24.9424259151941, 121.444186616848 24.9424014905047, 121.444470491933 24.942333852878, 121.444706709158 24.9422605787405, 121.445183287769 24.942224881068, 121.445477523259 24.942112151508, 121.445786263315 24.9421008785463, 121.446082570887 24.9421140303349)","wkt0":"LINESTRING (121.446076354644 24.9421572433444, 121.445786263315 24.9421403339077, 121.445477523259 24.942153485692, 121.445199864416 24.9422605787405, 121.445131485746 24.9422850034579, 121.444719141643 24.942320701113, 121.444058147831 24.9424822798434, 121.443790849393 24.9424691280942, 121.443546343844 24.9424804010222, 121.443349496157 24.9424935527702, 121.443192018008 24.9425367656466, 121.443055260667 24.9425593114892, 121.442806610957 24.9426213125349, 121.442566249571 24.9427039805473, 121.442124896336 24.9428373765413, 121.441793363389 24.9428993774471, 121.441590299459 24.9429012562619, 121.441490839575 24.9428618011443, 121.441424532986 24.9427847696877, 121.441385163448 24.9426927076398, 121.441424532986 24.9421253032953, 121.441393451772 24.9421797892564, 121.441372730963 24.9422605787405, 121.44125255027 24.9428148307497, 121.441138585819 24.9429670147633, 121.440979035589 24.9430233791651, 121.44077804374 24.943015863913, 121.440585340214 24.9429576206938, 121.440244482904 24.9428148307497, 121.439672588571 24.9425480385684, 121.438816819152 24.9421102726811, 121.438754656724 24.942057665517, 121.438659341002 24.9420351195827, 121.438559881118 24.9420539078616, 121.438421051697 24.9421083938542, 121.438083302507 24.9421309397752, 121.437318704649 24.9423958540372, 121.436413205288 24.942343246995, 121.435973924134 24.9422530634419, 121.434846712115 24.9427077381829, 121.434786621769 24.9427152534538, 121.434709954775 24.9427114958184, 121.434573197434 24.9427641027033, 121.434322475643 24.9428110731173, 121.433721572178 24.9427828908711, 121.43320769611 24.9427171322715, 121.432787063684 24.9427659815202, 121.432084628253 24.9427678603371, 121.431744806983 24.9428411341729, 121.431380120742 24.9428148307497, 121.430932551264 24.9427509509842, 121.430283989937 24.9425705844089, 121.430045700631 24.9425442809279, 121.429720383927 24.9425405232873, 121.428959930231 24.9422511846172, 121.428334161794 24.9421948198621, 121.428004700928 24.942063302, 121.427768483704 24.9420445137225, 121.427412085786 24.9420219677857, 121.427140643186 24.9419543299507, 121.426972804632 24.941944935804, 121.42638453389 24.9419401366975, 121.425926403769 24.9420463925504, 121.425634240359 24.9421779104306, 121.425151445506 24.9424634916298, 121.424714236432 24.9426325854489, 121.424359910596 24.9429501054377, 121.424163062909 24.9430684706679, 121.423734142159 24.9431530171913, 121.42305864378 24.94313422908, 121.422720894591 24.943194351026, 121.422389361644 24.9432826550811, 121.421912783033 24.9433164736386, 121.421695214537 24.9432958067434, 121.421541880549 24.9432300484176, 121.421330528295 24.9432112603181, 121.420961697892 24.9432187755582, 121.420615660379 24.9431492595693, 121.420081063503 24.9428655587751, 121.419558899112 24.9425630691292, 121.419301631826 24.9425110081999, 121.419076104258 24.9425799785079, 121.418987004779 24.94267204064, 121.418740427149 24.9431116833427, 121.418595381485 24.9433446557628, 121.418479344954 24.9434292020966, 121.418284569348 24.9434949603161, 121.417026816231 24.9432666852035, 121.416467354384 24.9434376567268, 121.415876811322 24.9434301415, 121.415646810341 24.943480869272, 121.415445818492 24.9435391122438, 121.415275907857 24.9436067492087, 121.415078024129 24.9437443715297, 121.414489553149 24.9438026143769, 121.414122794826 24.9439735851563, 121.413989145607 24.9440698735403, 121.413802658325 24.9441149646601, 121.413596486273 24.9441055706782, 121.413515675118 24.9441243586413, 121.413468017257 24.9441638133546, 121.41336234113 24.9442464803319, 121.413111619339 24.944353571561, 121.412885762519 24.9444775718151, 121.412821528011 24.9445226627857, 121.412443373243 24.9451154196349, 121.4121657144 24.945647113526, 121.411966794632 24.9461496842637, 121.411724361165 24.9466607073598, 121.411561702813 24.9469415812836, 121.411476747496 24.9470054588771, 121.411400080502 24.947108790205, 121.411342062236 24.9472158789455, 121.411269539404 24.9473793300015, 121.411244674433 24.9475277508875, 121.411203232815 24.947650808575, 121.411130709983 24.9477447456583, 121.410848906978 24.9479833455278, 121.41060440143 24.9481608860757, 121.410169264437 24.9484276661002, 121.409962056345 24.9485366324229, 121.409889533513 24.94858923682, 121.409829443167 24.9486756582808, 121.409775569063 24.948869166984, 121.409684397503 24.9491284305952, 121.409553856405 24.9493388470378, 121.409412954903 24.9498949459055, 121.409740343687 24.9500903313981, 121.409982777155 24.9503101397067, 121.410556743569 24.9511874903292, 121.41107890796 24.9519013898637, 121.412183327088 24.95344189581, 121.412454769688 24.953811990099, 121.413331259916 24.9550518917934, 121.41403991159 24.9560287752432, 121.414314546883 24.9562595772057, 121.414508425692 24.9563888297449, 121.415208565227 24.9568497270715, 121.416377218864 24.9576500089391, 121.417123167994 24.9581684986396, 121.417697134408 24.9585460930255, 121.417873261286 24.9586174788987, 121.418171640938 24.9588203648384, 121.419898720382 24.9600442483914, 121.420381515235 24.9603805089711, 121.42113782477 24.9608877159291, 121.421889990143 24.9614005563949, 121.421374041995 24.9621068826227, 121.42082079639 24.9628620460744, 121.420466470553 24.9633241587372, 121.419366995495 24.964810129793, 121.419925432748 24.9650255506915, 121.420482813614 24.9652284455455, 121.421330101292 24.9642105818, 121.422291748464 24.9631199042816, 121.424554686202 24.9636021769017, 121.42540838354 24.9626967370582, 121.427215238099 24.9638182040959, 121.427749834976 24.9640755577367, 121.428245062315 24.9641957811509, 121.428908128208 24.9643066120068, 121.430675421399 24.9648842130807, 121.43153552681 24.9653172351158, 121.431454715655 24.9652815435405, 121.431800753168 24.9653848595317, 121.432194448542 24.9654186720191, 121.432644090101 24.9653848595317, 121.433029497151 24.9653735887006, 121.433332020965 24.9654205504904, 121.434401214718 24.9656384529607, 121.434952388242 24.9657849733704, 121.435690049049 24.9663428764104, 121.436365547427 24.9656403314286, 121.436786179853 24.9652759081203, 121.437266902626 24.964873914147, 121.437621228463 24.9646034127904, 121.438369249674 24.9640304739261, 121.438626187708 24.9638482600233, 121.43885826077 24.9637393072515, 121.440039346893 24.963121280282, 121.440816377237 24.963846381528, 121.44089097215 24.9636773168383, 121.441425569026 24.9634819529137, 121.441670074574 24.963333551253, 121.441978814631 24.9632358690536, 121.442266833878 24.9628526535226, 121.442416023704 24.9627080081345, 121.442892602315 24.9625502129719, 121.442956836824 24.9624788293794, 121.443475893093 24.9617640519147, 121.443654092052 24.9608980479009, 121.443647875809 24.9606162665393, 121.443589857544 24.9603551485684, 121.443488325579 24.9601203297762, 121.443370216966 24.9600583375403, 121.443314270782 24.9599831953943, 121.443279045406 24.9594891346423, 121.443339135753 24.9593426067377, 121.44344688396 24.9592505570674, 121.444194905171 24.959053307542, 121.444306797541 24.9589828612064, 121.444378284332 24.9587912469694, 121.444420761991 24.9586278110611, 121.444520221875 24.9582596098288, 121.444555447251 24.9582126453067, 121.445315900947 24.9572677153157, 121.44566193846 24.9568318803508, 121.446148877476 24.956200668356, 121.446187210973 24.9561039198029, 121.446240049036 24.9556774738182, 121.446237976955 24.9554792792564, 121.446265950048 24.9552435118504, 121.446298067302 24.9551702453932, 121.446390274903 24.9550857071192, 121.446495951029 24.9550687994575, 121.446614059642 24.9550828891758, 121.446687618514 24.9551232796926, 121.446749780942 24.9551974854914, 121.44679122256 24.9552895381922, 121.446796402762 24.9558155523053, 121.446704195162 24.9561086163364, 121.446369036073 24.9567802187764, 121.44622606249 24.9571596960178, 121.446242639137 24.9572235683097, 121.446282008675 24.9572479900596, 121.446346243183 24.9572761689958, 121.446416693934 24.9572686546135, 121.446483000524 24.9572461114637, 121.446547235032 24.9572115922575, 121.446891200464 24.9565878966338, 121.447433049624 24.956156755794, 121.447911700316 24.955740642397, 121.448054673899 24.9555358727598, 121.448031881009 24.9552803798908, 121.44796661046 24.9551103641218, 121.447780123178 24.9548172977146, 121.447494176011 24.9544143302657, 121.447494176011 24.9543091264255, 121.447573951126 24.953932458368, 121.447638185635 24.9536036947826, 121.447659942484 24.9527080443902, 121.447577059248 24.9517898433342, 121.447665122687 24.951441817513, 121.447747487903 24.9512144964703, 121.448049493697 24.9509261175239)","wkt1":"LINESTRING (121.448049493697 24.9509261175239, 121.447772998637 24.9512184650159, 121.447686795933 24.9514100265792, 121.447610171308 24.9517819752812, 121.447693181319 24.9527150397288, 121.447667639777 24.9536002137857, 121.447527161297 24.9543137806088, 121.447528757643 24.9544055705246, 121.448002872512 24.9550935958059, 121.448071515406 24.9552819646764, 121.448092267909 24.9555341874014, 121.448010854244 24.9556906293447, 121.447453729364 24.9561807076774, 121.446909375256 24.9566260883119, 121.446585316944 24.9572311035825, 121.446505499626 24.957286177532, 121.446428875001 24.9573117190737, 121.446344268644 24.9573101227274, 121.44626285498 24.9572829848392, 121.446211771896 24.9572366907948, 121.446191019393 24.9571544789572, 121.446393755381 24.956648437161, 121.446674712341 24.9560913122812, 121.446760915044 24.9558047681095, 121.446752933312 24.9552955336205, 121.446713024653 24.955209330917, 121.446645978106 24.9551327062917, 121.446559775403 24.955111953789, 121.44641610423 24.9551135501354, 121.446336286912 24.9551790003362, 121.44631074537 24.9552540286151, 121.446285203829 24.955483902491, 121.446286800175 24.9557169690597, 121.446232524399 24.9561168538229, 121.446183037662 24.9562206163364, 121.445464681799 24.9571584698231, 121.444551571681 24.9582759122754, 121.444460579939 24.9586271084747, 121.44442067128 24.9587907339767, 121.444331275883 24.9590150206403, 121.44420995356 24.9590916452656, 121.443472441542 24.9592871976948, 121.443395816916 24.9593622259737, 121.443327174023 24.9594803556044, 121.443365486335 24.9599800120152, 121.443381449799 24.9600143334619, 121.443521928279 24.9600749946236, 121.443636865217 24.9603942638957, 121.443697526378 24.9606560646988, 121.443707104457 24.9609497924292, 121.443509157508 24.961786277922, 121.442928087433 24.9625828547559, 121.442439605446 24.9627424893919, 121.442002206544 24.9632884398472, 121.441679744579 24.9633810279361, 121.441443485317 24.963531084494, 121.440958196024 24.9636987008618, 121.440830488315 24.9639205930059, 121.440030718788 24.9631854755069, 121.438661053611 24.9638846752128, 121.437253076121 24.9649446491962, 121.436157982518 24.9659072460515, 121.435615224755 24.9664947015121, 121.434823436961 24.965878511817, 121.433482506018 24.9655720133158, 121.433067455964 24.9654890033051, 121.43245572123 24.965518952626, 121.431713754251 24.9655097558077, 121.430583541027 24.9649701907379, 121.428932918891 24.9644513781708, 121.428399739206 24.9643172850765, 121.427716502964 24.9642119262167, 121.427132240196 24.9639245838718, 121.425379451892 24.9627975633414, 121.424558929863 24.963659590376, 121.422272961875 24.9631647230043, 121.420501017415 24.9652559367364, 121.419303757644 24.96482013418, 121.421776498157 24.9614869629795, 121.420306263159 24.9604525305379, 121.418537511391 24.9592265365331, 121.417745723597 24.9587444399322, 121.417595667039 24.9585608601008, 121.41512133018 24.9568783110369, 121.414141173515 24.95620146018, 121.413981538879 24.9560378346781, 121.412389981557 24.953814124198, 121.410975618682 24.9518546090405, 121.409915644699 24.950373199618, 121.409535714265 24.9501497111276, 121.40930105135 24.9500299851505, 121.409498998299 24.9493180146738, 121.4096298987 24.9491072969542, 121.409725679482 24.9488359180729, 121.409779955258 24.9486507418951, 121.409904470274 24.9485166488008, 121.410657945756 24.9480712681663, 121.411069803117 24.9477456135088, 121.411184740055 24.9475923642581, 121.411216666982 24.947365683075, 121.411376301618 24.9470496064956, 121.411679607427 24.9466664833691, 121.411903095917 24.9461253219529, 121.412148933257 24.9455921422685, 121.41237561444 24.9450845041259, 121.41277470103 24.9445130121289, 121.412854518348 24.9444268094254, 121.41341962496 24.9441426597732, 121.413566488825 24.9440660351479, 121.413754857696 24.9440756132261, 121.413981538879 24.944030915528, 121.414109246588 24.9439191712828, 121.414549838183 24.9437627293395, 121.415038320169 24.9436956827923, 121.415316084436 24.9435296627708, 121.415887576433 24.9433859915984, 121.416465453816 24.9433891842911, 121.417027367734 24.9432199715769, 121.418291674052 24.9434402673746, 121.41844173061 24.943379606213, 121.418553474855 24.9432997888949, 121.418677191698 24.9431014428597, 121.41894378154 24.9426369060688, 121.419057122132 24.9425331435553, 121.41934286813 24.9424660970082, 121.41958870547 24.942513987399, 121.420125077847 24.9428396420565, 121.420616752526 24.943085479396, 121.420951985262 24.9431748747922, 121.421389384164 24.9431684894068, 121.421558596879 24.9431844528704, 121.4217246169 24.9432387286466, 121.421954490776 24.9432674628811, 121.422395082371 24.9432291505685, 121.423100667463 24.943085479396, 121.423736013314 24.9431142136305, 121.424195761066 24.943005662078, 121.424337561747 24.9429341419741, 121.424671472281 24.9426097681806, 121.42516314696 24.9424054358465, 121.4255845824 24.9421324606189, 121.425894273593 24.9420143309882, 121.426385948272 24.9418802378939, 121.42714580914 24.9418770452012, 121.427445922256 24.9419728259828, 121.428020606946 24.94200475291, 121.428339876218 24.9421356533116, 121.428978414762 24.9421867363951, 121.429719119473 24.9425012166281, 121.430338501861 24.9425427216335, 121.430967462327 24.9427023562695, 121.431395283152 24.9427630174312, 121.4317688282 24.9427853662803, 121.432094482857 24.942708741655, 121.432793682563 24.9427183197331, 121.43321192531 24.9426608512642, 121.433783417307 24.9427215124259, 121.434327771416 24.9427678064703, 121.43472047262 24.9426560622251, 121.434852969368 24.9426656403032, 121.435983182591 24.9421963144733, 121.436455701114 24.9422984806403, 121.43733049892 24.9423495637239, 121.438064818245 24.9420686067644, 121.438435170601 24.9420526433008, 121.438620346779 24.9419887894464, 121.43875124718 24.9419951748319, 121.439839955398 24.9425762449071, 121.440503099808 24.94290016733, 121.440844459078 24.9430294198691, 121.441146048335 24.9429863356894, 121.441212331689 24.9428835964917, 121.441328327557 24.9423864713412, 121.441366062519 24.9420853684012, 121.441439494451 24.9420678085913, 121.441482595803 24.9421268734066, 121.44148077927 24.9425588080601, 121.441513920947 24.9427874856293, 121.441619974312 24.9428637114857, 121.441855280217 24.9428736539887, 121.442252980337 24.9427941139646, 121.442756733823 24.9426383480841, 121.443247230638 24.942528980551, 121.443598532411 24.942489210539, 121.444191768424 24.9424958388743, 121.444722035251 24.9423500154969, 121.445235917666 24.9422901589953, 121.44549877259 24.9421363609019, 121.445512754235 24.9421615278627, 121.445247102982 24.9423125296271)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0400057100'=='0100020200' || '0400057100'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
