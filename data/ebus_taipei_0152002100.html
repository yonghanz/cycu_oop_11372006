
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493167</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152002100">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152002100">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152002100" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0152002100" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152002100" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0152002100',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="bxZV7bu3IQ8kUpPLQQH-u0-ZkgGw3DkX47wuQFhB0LRs7Qgz4u4g3PVA8bcjB0nPvL_ZSBJZG1av7lT_LN0o_XCfeBA1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">內科通勤專車21 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0152002100" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0152002100" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">板橋 - 內科</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0650 - 1830 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 內科21往內科班表:0650 0700 0710 0720<br/>內科21往板橋班表:1800 1815 1830<br>
[假日]<br /> 例假日停駛<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">臺北客運歡仔園站:02-2969-7468</span>
                </li>

            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 內科</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 板橋</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">歡仔園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700820" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.011818" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.4447909" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">僑中一街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011585" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.447012" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">大觀路一段28巷</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700041" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.009382" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4497662" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">接雲寺</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205600400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00964" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.45425" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">林家花園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205600220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011186" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4545959" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">北門街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205500020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.010986" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.456883" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">捷運府中站(府中路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205500420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.009036" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.458454" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">萬坪公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205000520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.013298" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.460871" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">新北板橋公車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2206300640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.012813" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.462602" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中山國中(縣民大道)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2204100101" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.016752" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.469" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">華翠大橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2207000620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.017856" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.470382" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">雙園街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1085900320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.031173" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.49433" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">時報大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1085500220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03295" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.49703" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">萬華車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1086200220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.032837" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5007597" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">艋舺大道</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1086200320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.033257" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.502732" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">聯合醫院和平院區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1006500101" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0357" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.506607" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">捷運西門站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1084600300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04173" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5082859" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">中華路北站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1004200200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045696" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5093807" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">捷運北門站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1034100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04925" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5103325" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">潭美國小(舊宗)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149401900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.057957" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.581074" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">潭美國小(行善)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059965" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.581902" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">行善行愛路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.061324" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.583819" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">行善石潭路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0639" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.58537" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">麗寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.070424" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.58271" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">公館山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.071952" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.581177" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">瑞光路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147400070" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.074746" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5776" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">瑞光港墘路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.077273" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.573134" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">仁寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079478" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.568256" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">基湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.080515" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5659034" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">基湖站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.07973" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5646071" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">治磐新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149300020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082945" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5638416" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">內湖基湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081989" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5652273" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">基湖路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08025" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5662362" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">仁寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.079213" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5684974" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">瑞光港墘路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149200720" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.077397" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.572469" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">瑞光路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100230" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.074821" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.577343" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">公館山</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.071988" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5809507" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">麗寶大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149100340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.070391" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.582671" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">行善石潭路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149400660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062312" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.584293" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">行善行愛路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.061151" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.583175" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">潭美國小(行善)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146900660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.060371" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.582062" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">潭美國小(舊宗)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1149401940" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.058297" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.580495" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">捷運北門站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1034100140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049002" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.510134" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">中華路北站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1084300040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045511" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5091441" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">捷運西門站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1084400340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.042516" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5082667" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">小南門</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1085000040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037868" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5069037" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">聯合醫院和平院區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1006500140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.036493" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5065075" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">艋舺大道</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1085100160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.033519" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.503077" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">萬華車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1086000560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.033084" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.499973" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">時報大樓</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1085500260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03317" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.49716" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">雙園街口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1088400160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.031279" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4939253" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">華翠大橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2207000662" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01788" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.469996" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">中山國中(縣民大道)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205000041" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.016898" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.468616" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">新北板橋公車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2206300640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.012813" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.462602" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">萬坪公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205000560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01352" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.460677" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">北門街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205500060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.01123" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.45679" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 25</span>
                                    <span class="auto-list-stationlist-place">林家花園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205600260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011092" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.454152" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 26</span>
                                    <span class="auto-list-stationlist-place">接雲寺</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205600460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.009166" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4539276" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 27</span>
                                    <span class="auto-list-stationlist-place">大觀國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205800260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.008563" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.449581" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 28</span>
                                    <span class="auto-list-stationlist-place">國立臺灣藝術大學</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205800900" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0062" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4476" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 29</span>
                                    <span class="auto-list-stationlist-place">馥華原美公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205801360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.004274" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446521" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 30</span>
                                    <span class="auto-list-stationlist-place">僑中三街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.005096" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4453502" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 31</span>
                                    <span class="auto-list-stationlist-place">藍天世紀城</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.006397" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4456875" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 32</span>
                                    <span class="auto-list-stationlist-place">僑中二街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.00785" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 33</span>
                                    <span class="auto-list-stationlist-place">大觀里</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.009064" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4464443" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 34</span>
                                    <span class="auto-list-stationlist-place">僑中一街</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011737" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4471728" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 35</span>
                                    <span class="auto-list-stationlist-place">歡仔園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2205700860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.011966" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.444872" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0152002100";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 32;
        var existBackNum = 35;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0152002100',
                        url: './StopStatusRecent3OfRoute?routeid=0152002100&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0152002100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0152002100',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0152002100');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0152002100","Name":"內科通勤專車21","BeginStop":"板橋","GoDirStops":[{"UniStopId":"2205700820","Name":"歡仔園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4447909,"Latitude":25.011818,"PublicId":"2205700820"},{"UniStopId":"2205700420","Name":"僑中一街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.447012,"Latitude":25.011585,"PublicId":"2205700420"},{"UniStopId":"2205700041","Name":"大觀路一段28巷","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4497662,"Latitude":25.009382,"PublicId":"2205700041"},{"UniStopId":"2205600400","Name":"接雲寺","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.45425,"Latitude":25.00964,"PublicId":"2205600400"},{"UniStopId":"2205600220","Name":"林家花園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4545959,"Latitude":25.011186,"PublicId":"2205600220"},{"UniStopId":"2205500020","Name":"北門街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.456883,"Latitude":25.010986,"PublicId":"2205500020"},{"UniStopId":"2205500420","Name":"捷運府中站(府中路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.458454,"Latitude":25.009036,"PublicId":"2205500420"},{"UniStopId":"2205000520","Name":"萬坪公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.460871,"Latitude":25.013298,"PublicId":"2205000520"},{"UniStopId":"2206300640","Name":"新北板橋公車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.462602,"Latitude":25.012813,"PublicId":"2206300640"},{"UniStopId":"2204100101","Name":"中山國中(縣民大道)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.469,"Latitude":25.016752,"PublicId":"2204100101"},{"UniStopId":"2207000620","Name":"華翠大橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.470382,"Latitude":25.017856,"PublicId":"2207000620"},{"UniStopId":"1085900320","Name":"雙園街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.49433,"Latitude":25.031173,"PublicId":"1085900320"},{"UniStopId":"1085500220","Name":"時報大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.49703,"Latitude":25.03295,"PublicId":"1085500220"},{"UniStopId":"1086200220","Name":"萬華車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5007597,"Latitude":25.032837,"PublicId":"1086200220"},{"UniStopId":"1086200320","Name":"艋舺大道","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.502732,"Latitude":25.033257,"PublicId":"1086200320"},{"UniStopId":"1006500101","Name":"聯合醫院和平院區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.506607,"Latitude":25.0357,"PublicId":"1006500101"},{"UniStopId":"1084600300","Name":"捷運西門站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5082859,"Latitude":25.04173,"PublicId":"1084600300"},{"UniStopId":"1004200200","Name":"中華路北站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5093807,"Latitude":25.045696,"PublicId":"1004200200"},{"UniStopId":"1034100100","Name":"捷運北門站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5103325,"Latitude":25.04925,"PublicId":"1034100100"},{"UniStopId":"1149401900","Name":"潭美國小(舊宗)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.581074,"Latitude":25.057957,"PublicId":"1149401900"},{"UniStopId":"1146900620","Name":"潭美國小(行善)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.581902,"Latitude":25.059965,"PublicId":"1146900620"},{"UniStopId":"1146900420","Name":"行善行愛路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.583819,"Latitude":25.061324,"PublicId":"1146900420"},{"UniStopId":"1146900320","Name":"行善石潭路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.58537,"Latitude":25.0639,"PublicId":"1146900320"},{"UniStopId":"1149100300","Name":"麗寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.58271,"Latitude":25.070424,"PublicId":"1149100300"},{"UniStopId":"1149100000","Name":"公館山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.581177,"Latitude":25.071952,"PublicId":"1149100000"},{"UniStopId":"1147400070","Name":"瑞光路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5776,"Latitude":25.074746,"PublicId":"1147400070"},{"UniStopId":"1149200760","Name":"瑞光港墘路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.573134,"Latitude":25.077273,"PublicId":"1149200760"},{"UniStopId":"1149200060","Name":"仁寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.568256,"Latitude":25.079478,"PublicId":"1149200060"},{"UniStopId":"1149200560","Name":"基湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5659034,"Latitude":25.080515,"PublicId":"1149200560"},{"UniStopId":"1149200340","Name":"基湖站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5646071,"Latitude":25.07973,"PublicId":"1149200340"},{"UniStopId":"1149300020","Name":"治磐新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5638416,"Latitude":25.082945,"PublicId":"1149300020"},{"UniStopId":"1149200140","Name":"內湖基湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5652273,"Latitude":25.081989,"PublicId":"1149200140"}],"LastStop":"內科","BackDirStops":[{"UniStopId":"1149200520","Name":"基湖路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5662362,"Latitude":25.08025,"PublicId":"1149200520"},{"UniStopId":"1149200020","Name":"仁寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5684974,"Latitude":25.079213,"PublicId":"1149200020"},{"UniStopId":"1149200720","Name":"瑞光港墘路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.572469,"Latitude":25.077397,"PublicId":"1149200720"},{"UniStopId":"1149100230","Name":"瑞光路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.577343,"Latitude":25.074821,"PublicId":"1149100230"},{"UniStopId":"1149100040","Name":"公館山","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5809507,"Latitude":25.071988,"PublicId":"1149100040"},{"UniStopId":"1149100340","Name":"麗寶大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.582671,"Latitude":25.070391,"PublicId":"1149100340"},{"UniStopId":"1149400660","Name":"行善石潭路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.584293,"Latitude":25.062312,"PublicId":"1149400660"},{"UniStopId":"1146900460","Name":"行善行愛路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.583175,"Latitude":25.061151,"PublicId":"1146900460"},{"UniStopId":"1146900660","Name":"潭美國小(行善)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.582062,"Latitude":25.060371,"PublicId":"1146900660"},{"UniStopId":"1149401940","Name":"潭美國小(舊宗)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.580495,"Latitude":25.058297,"PublicId":"1149401940"},{"UniStopId":"1034100140","Name":"捷運北門站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.510134,"Latitude":25.049002,"PublicId":"1034100140"},{"UniStopId":"1084300040","Name":"中華路北站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5091441,"Latitude":25.045511,"PublicId":"1084300040"},{"UniStopId":"1084400340","Name":"捷運西門站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5082667,"Latitude":25.042516,"PublicId":"1084400340"},{"UniStopId":"1085000040","Name":"小南門","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5069037,"Latitude":25.037868,"PublicId":"1085000040"},{"UniStopId":"1006500140","Name":"聯合醫院和平院區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5065075,"Latitude":25.036493,"PublicId":"1006500140"},{"UniStopId":"1085100160","Name":"艋舺大道","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.503077,"Latitude":25.033519,"PublicId":"1085100160"},{"UniStopId":"1086000560","Name":"萬華車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.499973,"Latitude":25.033084,"PublicId":"1086000560"},{"UniStopId":"1085500260","Name":"時報大樓","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.49716,"Latitude":25.03317,"PublicId":"1085500260"},{"UniStopId":"1088400160","Name":"雙園街口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4939253,"Latitude":25.031279,"PublicId":"1088400160"},{"UniStopId":"2207000662","Name":"華翠大橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.469996,"Latitude":25.01788,"PublicId":"2207000662"},{"UniStopId":"2205000041","Name":"中山國中(縣民大道)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.468616,"Latitude":25.016898,"PublicId":"2205000041"},{"UniStopId":"2206300640","Name":"新北板橋公車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.462602,"Latitude":25.012813,"PublicId":"2206300640"},{"UniStopId":"2205000560","Name":"萬坪公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.460677,"Latitude":25.01352,"PublicId":"2205000560"},{"UniStopId":"2205500060","Name":"北門街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.45679,"Latitude":25.01123,"PublicId":"2205500060"},{"UniStopId":"2205600260","Name":"林家花園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.454152,"Latitude":25.011092,"PublicId":"2205600260"},{"UniStopId":"2205600460","Name":"接雲寺","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4539276,"Latitude":25.009166,"PublicId":"2205600460"},{"UniStopId":"2205800260","Name":"大觀國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.449581,"Latitude":25.008563,"PublicId":"2205800260"},{"UniStopId":"2205800900","Name":"國立臺灣藝術大學","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4476,"Latitude":25.0062,"PublicId":"2205800900"},{"UniStopId":"2205801360","Name":"馥華原美公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446521,"Latitude":25.004274,"PublicId":"2205801360"},{"UniStopId":"2205700600","Name":"僑中三街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4453502,"Latitude":25.005096,"PublicId":"2205700600"},{"UniStopId":"2205700700","Name":"藍天世紀城","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4456875,"Latitude":25.006397,"PublicId":"2205700700"},{"UniStopId":"2205700500","Name":"僑中二街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446,"Latitude":25.00785,"PublicId":"2205700500"},{"UniStopId":"2205700200","Name":"大觀里","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4464443,"Latitude":25.009064,"PublicId":"2205700200"},{"UniStopId":"2205700460","Name":"僑中一街","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4471728,"Latitude":25.011737,"PublicId":"2205700460"},{"UniStopId":"2205700860","Name":"歡仔園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.444872,"Latitude":25.011966,"PublicId":"2205700860"}],"RouteMapUrl":"../MapOverview?nid=0152002100","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0650 - 1830","HeadwayDesc":"內科21往內科班表:0650 0700 0710 0720;內科21往板橋班表:1800 1815 1830","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"例假日停駛","RouteNote":"","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"臺北客運歡仔園站:02-2969-7468","aliasName":"內科21","aliasEname":"NH21","memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.444662654817 25.0120625808435, 121.444656163861 25.0119452179613, 121.445889511131 25.0117978710729, 121.446690725261 25.0117187105719, 121.447463624356 25.0116082209143, 121.447688299803 25.0115008398986, 121.447920332504 25.0114389838075, 121.449751923067 25.0110740380717, 121.449813525567 25.0105246760259, 121.449890725661 25.0096790186671, 121.449924905152 25.0094044809575, 121.449943544671 25.0091864822961, 121.450043679914 25.0085229118772, 121.453314762137 25.0086502847137, 121.453312079678 25.0087461249155, 121.453314661781 25.0088368340469, 121.453380962127 25.0089416458927, 121.453451909079 25.0090023922202, 121.453520782979 25.009052090248, 121.453659963496 25.0090985596058, 121.454316082411 25.0092321061681, 121.453909023367 25.0104992700505, 121.453878889795 25.0107141448342, 121.453913075991 25.010848515859, 121.453992568803 25.0109729056043, 121.454137029809 25.011090865621, 121.454318446876 25.0111883879846, 121.454824067819 25.0113732889525, 121.455179847698 25.0115413336166, 121.455763841643 25.0119211497878, 121.456128067326 25.0120063643508, 121.456084880708 25.0116839808251, 121.457960155036 25.0102700072166, 121.457914242956 25.0100651534685, 121.457796454183 25.0094701540106, 121.459375116019 25.0085391343714, 121.459667729347 25.0086855367047, 121.461015866566 25.0102078051076, 121.462059210284 25.0113440870732, 121.460227687871 25.0126691557109, 121.461445698445 25.0141409046406, 121.462256206663 25.0136037362731, 121.46322985969 25.0129342090256, 121.462315273709 25.0135640036699, 121.462118135187 25.0133221482586, 121.462097997647 25.0132426965463, 121.462102177445 25.0131770405607, 121.462134548955 25.0131181631373, 121.462211282664 25.0130593661907, 121.462884410866 25.0126087528574, 121.463229256723 25.0129345672811, 121.463413779246 25.0128908130717, 121.464869787459 25.0139893153139, 121.465529353641 25.0145039725353, 121.466778942731 25.0153771780914, 121.467884812254 25.0161070042637, 121.471427374139 25.0186287989864, 121.476097374012 25.021981061922, 121.480256471075 25.0249916401485, 121.481224916621 25.0256481888024, 121.481845549473 25.0259866221811, 121.482477173971 25.0263159087515, 121.483036751251 25.026545624924, 121.484119379014 25.0268451214474, 121.489452797666 25.0276898133987, 121.489953599821 25.0278261051457, 121.490571098301 25.0280881826458, 121.491037949865 25.0283697521741, 121.491458747955 25.0287152632331, 121.492790185927 25.0298340662533, 121.495416818905 25.0322121955715, 121.495716511527 25.0324531698571, 121.496073779488 25.0326614580039, 121.496330381712 25.0327968554892, 121.496593490184 25.0328819153213, 121.497058139766 25.0330112944024, 121.49750044266 25.0330682818402, 121.497991622993 25.0331040130291, 121.498478593073 25.0330672117224, 121.498989651945 25.0329626734002, 121.499496541075 25.03287241188, 121.50023561779 25.0328988755065, 121.500686138649 25.0329085414013, 121.501320920566 25.0330074612778, 121.502811642128 25.0333521883375, 121.504706942672 25.03379315018, 121.505022015156 25.0339717386593, 121.505422609627 25.034215058464, 121.505738202201 25.0344613435523, 121.505989304249 25.0347425286843, 121.506173627529 25.0349797122908, 121.506473958687 25.0356325155699, 121.507005008365 25.0374053477242, 121.507128010825 25.037605368933, 121.508283819226 25.041321914224, 121.509354274778 25.0450825595966, 121.509598505404 25.0459290430589, 121.509801481519 25.0464433836381, 121.509927849325 25.0469271879789, 121.510455504551 25.0475931631079, 121.510663574962 25.0479814522233, 121.510611079534 25.0482640355855, 121.510325993969 25.0483849623806, 121.510245702115 25.0484988888892, 121.510549764625 25.0499744451283, 121.511907805391 25.0497011497165, 121.513244163583 25.0493288907431, 121.51501548179 25.0488719361241, 121.515997606607 25.0487001910036, 121.517696460531 25.048397188228, 121.518759339904 25.0482952058934, 121.521302912145 25.0478442409085, 121.524260955153 25.0476536783673, 121.52466270996 25.0476092645671, 121.525201621372 25.0475202195385, 121.525936214121 25.0473338115372, 121.530627712738 25.0458998721744, 121.533208661928 25.0451794666956, 121.534604177624 25.0448258133353, 121.535300732982 25.044721974993, 121.540127967471 25.0444421357331, 121.540961922842 25.0444224292321, 121.541496669037 25.0444357023673, 121.543973468108 25.0447088175741, 121.545936317221 25.0449458252694, 121.546535948217 25.0449534670676, 121.553083754257 25.0442219396094, 121.55383403749 25.0442341019578, 121.554568466698 25.0443391824663, 121.55728609104 25.0448842605558, 121.557664435755 25.0449809158203, 121.558660694376 25.0453265454111, 121.563031217922 25.047138563731, 121.56499891648 25.0478824609747, 121.56586373278 25.0481500680671, 121.566722989527 25.0484607346058, 121.569014397093 25.0489614855616, 121.569187567936 25.0489408629313, 121.570460492399 25.0509898791396, 121.570620372087 25.0511875075947, 121.570952160733 25.051453786241, 121.571663065597 25.0518561735448, 121.574545782565 25.0533486603489, 121.577393368875 25.0548788043614, 121.581508255815 25.0570853584984, 121.580380510271 25.0589292809264, 121.580756605161 25.059124825401, 121.582706481744 25.0606009761242, 121.583665102671 25.0613751220266, 121.583935651821 25.0616103530516, 121.584750941054 25.0626318982056, 121.584967865597 25.0630140376711, 121.585353810536 25.0638438752951, 121.585489706041 25.0641803436608, 121.585545784995 25.0644268889302, 121.585698597979 25.0648004739257, 121.585797022795 25.0651549982703, 121.585805360867 25.0654161707525, 121.585808201245 25.0657846883074, 121.585763971404 25.0662018290597, 121.585666222518 25.0666057963677, 121.585515189631 25.0671648455692, 121.585405310276 25.0674037173628, 121.585088392521 25.0679618824361, 121.584663583864 25.0684574804846, 121.584262492511 25.0688359902721, 121.58140325288 25.071680060996, 121.579917270813 25.0730828837593, 121.579665195572 25.0732911671621, 121.579276231149 25.0737013184632, 121.579191774121 25.0737776029095, 121.579026322282 25.073866996055, 121.576968404073 25.0751322634173, 121.576065297889 25.0757454398335, 121.574899532526 25.0763918527828, 121.573981275549 25.0768700174187, 121.572811545165 25.0773891204496, 121.569653519789 25.0787905891703, 121.567502300683 25.0797580621678, 121.565020152739 25.0808882584336, 121.564700053215 25.0798328593929, 121.564445032892 25.0790001338232, 121.564336261124 25.0789312131284, 121.564059770091 25.0791666814872, 121.563774261747 25.0794406016282, 121.563557559742 25.0796855065848, 121.563294710157 25.0799856476316, 121.562980300027 25.0803457667129, 121.562703130742 25.0806746420685, 121.562574465155 25.0808710553698, 121.562341513257 25.0813114737764, 121.562011177561 25.0820801227018, 121.563522826681 25.0831176354893, 121.564029317562 25.0828679723235, 121.56470896894 25.0825601763531, 121.564939034026 25.0824653197357, 121.565173050981 25.0824015776618, 121.56545845635 25.0823238382938, 121.565006597488 25.0808287015742, 121.567470243843 25.079695233024, 121.569616168752 25.0787293152022, 121.572776509729 25.0773164859727, 121.573948130061 25.0768205309887, 121.574846378435 25.0763352853687, 121.576038450086 25.0756824766876, 121.576911070354 25.0750736374412, 121.579018759972 25.0737675104214, 121.579213778797 25.073666081177, 121.579622059704 25.0732390783389, 121.579880249318 25.0730277592173, 121.581347099427 25.0715971685343, 121.584185319238 25.0688120770096, 121.584601141266 25.0684198267472, 121.585011829718 25.0679332850625, 121.585323700785 25.0674229505799, 121.585429625202 25.0671355181142, 121.585578184382 25.0666464563363, 121.585682568802 25.0662020741638, 121.585745570429 25.0657877916159, 121.585734948342 25.0654197402782, 121.585735011273 25.0651898895704, 121.58564483805 25.064869629337, 121.585466496675 25.0644402129222, 121.58539259237 25.0641871190048, 121.585323426073 25.0639502509473, 121.584879695064 25.0630272920932, 121.584694177202 25.0626819299013, 121.583899864912 25.0617017427527, 121.583587615038 25.0614037326336, 121.582586153936 25.0606010101249, 121.580714691493 25.0592006421724, 121.580361177208 25.0590073382863, 121.580194835172 25.0589340694476, 121.581293563374 25.0571890000346, 121.577316362326 25.0550115411645, 121.574524037879 25.0534615207404, 121.571642869367 25.0519716336706, 121.570858515791 25.051557947796, 121.570456926454 25.0512716985153, 121.570121259458 25.0507612139277, 121.569021108203 25.049032598165, 121.566647042013 25.0485776609956, 121.565828331883 25.0483270812156, 121.564902364446 25.0480453760315, 121.562951601857 25.0473410117309, 121.55919997953 25.0457440722445, 121.558518020132 25.0454803698504, 121.55786524099 25.0452960728144, 121.557298484235 25.0451717758967, 121.554535272803 25.0446644551096, 121.553833984837 25.0445627959752, 121.553106905558 25.0445648923836, 121.546536927877 25.0452490472647, 121.545951887907 25.0452494132568, 121.543966142818 25.0450273715581, 121.541475753716 25.0447721788894, 121.540955448488 25.0447751830557, 121.540113830033 25.0447834264117, 121.535329853386 25.0450174851956, 121.534715664415 25.0451332923885, 121.53326389363 25.0455052009824, 121.526034509698 25.0476444361389, 121.525228140835 25.0478293833642, 121.524747359384 25.0479237413677, 121.524343137426 25.0479761820535, 121.521299812811 25.0481448553534, 121.518772762444 25.0485849652453, 121.517631425415 25.0487815595148, 121.516039963786 25.0489888962988, 121.515167714632 25.0491627659253, 121.513366784846 25.0495473592059, 121.512024297927 25.0500099591953, 121.510424749073 25.050321368851, 121.510042723249 25.04855795613, 121.509953594377 25.0482846818187, 121.509713741969 25.0480040050996, 121.509491782394 25.0470454228507, 121.509172394639 25.0460671887369, 121.508904753186 25.0451099330308, 121.507831831445 25.0413576151348, 121.506760321366 25.037622193319, 121.506804172138 25.037481253294, 121.506287357548 25.0356596162097, 121.506034333164 25.0350900539082, 121.505854930436 25.0348680823217, 121.505632602234 25.0346212991383, 121.50532523627 25.0343354513013, 121.504877848231 25.0340463413589, 121.504580455364 25.0339016058185, 121.502730350575 25.033441050741, 121.501309232552 25.0331372453091, 121.500527171097 25.0330412077757, 121.49952683568 25.0330402855579, 121.499030688795 25.0331114306994, 121.498539491481 25.0331977691335, 121.498160238452 25.0332220818768, 121.497917114409 25.0332230187643, 121.49747959028 25.0332303431517, 121.497010705099 25.0331486077478, 121.496541736385 25.0330216129209, 121.496288524431 25.0329060222541, 121.49597566106 25.0327797238353, 121.495630964968 25.0325796021944, 121.495313196558 25.0323310597879, 121.492646478941 25.0299647997792, 121.491382689056 25.0287600912439, 121.490849302931 25.0283518867071, 121.490504916446 25.0281791120424, 121.489976722811 25.0279588741155, 121.489400191847 25.0277507221174, 121.484062201959 25.0269250124175, 121.483023251779 25.0266418381648, 121.482414273887 25.0263991940024, 121.481783207972 25.0261026859766, 121.481132047627 25.0257330102816, 121.480235650652 25.0251166388516, 121.47604588996 25.0220713657039, 121.471321957499 25.0187149134102, 121.467795233751 25.0162720542497, 121.466637259393 25.0155107349673, 121.46552268647 25.014652592698, 121.464752548989 25.0141037433695, 121.463617583025 25.0132297639276, 121.463286317773 25.0129792283824, 121.462815299578 25.0125222927061, 121.462451601245 25.0127764298725, 121.462099167231 25.0130105807409, 121.462056284337 25.0130683560165, 121.462038348881 25.0131208093092, 121.462032500963 25.0131610851052, 121.462044223354 25.0132306406419, 121.462355412297 25.0136229418154, 121.461363378586 25.0142773360906, 121.460456395236 25.0131375927323, 121.460160674518 25.0127788905467, 121.460118825434 25.0126490280863, 121.460015245173 25.0124565527263, 121.459068050871 25.0114581871904, 121.45786446435 25.0102944365362, 121.456084566039 25.0116461305734, 121.455945705098 25.0115675070183, 121.454846717965 25.0113140023484, 121.45436358797 25.0111602560611, 121.454136107368 25.0110502560317, 121.45400550974 25.010943268866, 121.4539603004 25.0108378279977, 121.453930999238 25.0107050602866, 121.453941718791 25.0105165892321, 121.454344842796 25.009267938017, 121.454375275535 25.0091964940887, 121.453651328398 25.0090447031658, 121.453524150275 25.0089965054077, 121.453469505947 25.0089325975942, 121.453441582042 25.008787637977, 121.453462474927 25.0086924620661, 121.453533710616 25.0086222733048, 121.450058158701 25.0084518112493, 121.449430721368 25.0084442750281, 121.449197272115 25.0084207183814, 121.448802818565 25.0082917058032, 121.448397165702 25.0080582631648, 121.448117241654 25.0078144524623, 121.447845421116 25.0074906291799, 121.447761549999 25.0073028431302, 121.447689223676 25.0070862086573, 121.447228557837 25.0051936799272, 121.447123513147 25.0051672791342, 121.446861085256 25.0041872376655, 121.444912148676 25.0042841808071, 121.44509107137 25.0047880462085, 121.445197184958 25.0050628629078, 121.445323783088 25.0051552415717, 121.44538238541 25.0052548218683, 121.44571100142 25.0067819200956, 121.445894958053 25.0076330604712, 121.445955250676 25.0079423116776, 121.44606567464 25.0082365979223, 121.446140198085 25.0084857161676, 121.446207277834 25.0086492982806, 121.446331917624 25.0089140125267, 121.44677397005 25.0104871694694, 121.446995558171 25.0108930216965, 121.447257646019 25.0112664248733, 121.447492879559 25.0115452702462, 121.447497721158 25.01162945875, 121.446685075353 25.01174323026, 121.445895002326 25.0118254576066, 121.444702536596 25.0119745620698, 121.444762471052 25.0120273202792)","wkt0":"LINESTRING (121.444801757967 25.0119216237474, 121.445889511131 25.0117978710729, 121.447148171944 25.0116475916535, 121.447429080659 25.0115861964011, 121.447598452091 25.0114813751675, 121.447803350212 25.0114619083571, 121.449655282229 25.0110639611533, 121.44973005352 25.0109958270719, 121.449895707042 25.0093620952509, 121.450000634709 25.0085744220986, 121.450130348439 25.0084441410714, 121.451710046863 25.0084987992203, 121.452697358378 25.0085384825187, 121.453164988769 25.0085579497925, 121.453383106124 25.0087151853521, 121.453410370794 25.0088409736548, 121.453537605918 25.0089585257022, 121.453933356726 25.0090947960877, 121.454374548649 25.0091719160741, 121.454392725096 25.0093006988559, 121.453963926203 25.010525626007, 121.453988712267 25.0107906758733, 121.454090335125 25.0109666267397, 121.454249792132 25.0110804331234, 121.45468106963 25.0112533886755, 121.455862538639 25.0115603654626, 121.456103789654 25.0116157709473, 121.457014264373 25.0109703703724, 121.4577710655 25.0104088241895, 121.457880124178 25.0103025044897, 121.457747931841 25.0095657513657, 121.457967701601 25.0094369688618, 121.458683192623 25.0089862290346, 121.459294582181 25.008583406992, 121.45951435194 25.0085512111211, 121.461063480886 25.0102762989158, 121.461900423618 25.0112376654535, 121.461821108216 25.011483246976, 121.460340554045 25.0125643988142, 121.460282719897 25.0126707165557, 121.460299243939 25.012772541912, 121.461198151829 25.0138446978914, 121.461470798523 25.0140723052187, 121.461736835601 25.0139794654388, 121.462257342927 25.0136260746666, 121.463135595763 25.0129589719411, 121.46315790322 25.0128975773443, 121.462979443566 25.0126564909478, 121.462872037292 25.0126534960827, 121.462265604948 25.0130263562194, 121.462095407314 25.0131903244753, 121.462279650383 25.0134606095699, 121.462421757145 25.0134823221971, 121.463128986147 25.0129604693699, 121.463431376117 25.0129133003538, 121.464023763026 25.0133625283439, 121.465057341858 25.0141359453499, 121.466181596371 25.0149696280222, 121.467011103284 25.0154952158055, 121.467683631797 25.0160058274232, 121.468870058019 25.0168458612708, 121.470474542505 25.0179599079892, 121.47169732162 25.0188695555746, 121.472948191606 25.0197529928685, 121.476776812157 25.0225005919516, 121.478139219427 25.0234596168248, 121.479342995893 25.0242591728178, 121.480016350608 25.0247383049994, 121.480852467138 25.0253641685942, 121.481501861992 25.0257804110361, 121.481872826736 25.0259885317276, 121.482434644167 25.026275258577, 121.483083212819 25.0265522525474, 121.483735912482 25.0267416561726, 121.484801713196 25.0269625019277, 121.488903806644 25.0275793706773, 121.489520153414 25.0276879212893, 121.490401711059 25.0279888680013, 121.491127942709 25.0284462756451, 121.493395041283 25.0304390857785, 121.493804837527 25.0306876233148, 121.494735141096 25.0315410315049, 121.495495247032 25.0322536976558, 121.496085155335 25.0326908773636, 121.496808908378 25.0329558793734, 121.497236881068 25.0330561907192, 121.498228323593 25.0330696653714, 121.498950424232 25.0329828286982, 121.499846027313 25.0328570651316, 121.500022834564 25.0328061607941, 121.5012935334 25.0329543821885, 121.501964409509 25.0331070949529, 121.503069867924 25.0333720960637, 121.50406131045 25.0336281135423, 121.504648740146 25.0338347237495, 121.505322094861 25.0341251751915, 121.505545169429 25.0342599204723, 121.505843428389 25.0346110060922, 121.506150775571 25.0348505522072, 121.506354021289 25.0352615224211, 121.506654758855 25.0360804644249, 121.506897662274 25.0371247198357, 121.507024071196 25.0374960085061, 121.509344872907 25.0456498531121, 121.509548118624 25.0463474670767, 121.509653872494 25.0466723202938, 121.509792674447 25.0469432801528, 121.509898428317 25.046991184596, 121.510118198076 25.0482112445745, 121.510537908745 25.0499342779241, 121.510632921987 25.0500225995719, 121.511253399768 25.0499223021026, 121.512154786263 25.0497067371146, 121.513556851234 25.0492486602567, 121.515462949895 25.0488184043946, 121.516243355401 25.0486827852643, 121.516566541919 25.0487180042002, 121.517121819294 25.0486239117967, 121.517821573227 25.0484572787039, 121.519588945102 25.048202860548, 121.521015143417 25.0479400313202, 121.521848349593 25.0478475152979, 121.52276046666 25.0478086164949, 121.524042768644 25.0477287162123, 121.524973452979 25.0476025577654, 121.526248792238 25.0472955716689, 121.528883023462 25.0464755365463, 121.530769922128 25.0459498701215, 121.53327882429 25.0452580896721, 121.534975408453 25.0448564767391, 121.536124258195 25.0447155964981, 121.538440524946 25.0446146672707, 121.540803209868 25.0444737867519, 121.541787275101 25.0445347649068, 121.544639671731 25.0448732982496, 121.546039179597 25.0450309997983, 121.54739691111 25.0449679192032, 121.55081560943 25.044606256498, 121.553110988004 25.0443329060712, 121.553828148752 25.0442887494067, 121.55650415633 25.0448102175734, 121.558047560528 25.045094080361, 121.558917901241 25.0451865984609, 121.561807432408 25.0450898749912, 121.563828943771 25.0447849852938, 121.564307050936 25.0447008776576, 121.564991718964 25.0447660610807, 121.565945612385 25.0451066964696, 121.566793904467 25.0454515362699, 121.567234877095 25.0456681119901, 121.567471609769 25.0460991596153, 121.568276965042 25.0474721939005, 121.570049558961 25.050448976146, 121.57078064516 25.051304728529, 121.57272556654 25.0523917567259, 121.574547479766 25.0533778532698, 121.57522054325 25.0537836433603, 121.575951629449 25.0541957396937, 121.576401885711 25.0544080949165, 121.577054061019 25.0547676261875, 121.578249328932 25.0553857652056, 121.580379922997 25.0565400368626, 121.580776798362 25.0565610617465, 121.58147771275 25.0569184842197, 121.58147771275 25.0571287322465, 121.58050525206 25.0589053136711, 121.580858030162 25.0591786316043, 121.583021116947 25.0607911950012, 121.583784695866 25.0613882795845, 121.584402057545 25.0620904809701, 121.584919620156 25.0628872854525, 121.585244547356 25.0635411237824, 121.585576437281 25.0643778635647, 121.585801565412 25.0650926618675, 121.585824774498 25.0659588236337, 121.585666952715 25.0667703191493, 121.585344346424 25.0675439678995, 121.584559879328 25.0686161360785, 121.583111632382 25.0700162474528, 121.581733012692 25.0713890137865, 121.579911099466 25.0731065267189, 121.579300700513 25.0736846315288, 121.578530158868 25.0742038724316, 121.576808044711 25.0752507563022, 121.575109139639 25.0763186527158, 121.574498740686 25.0766276682476, 121.572939090128 25.077331884403, 121.565177971876 25.080855006495, 121.564972571468 25.0808192712787, 121.564430639318 25.0790367013687, 121.564343605246 25.0789894040542, 121.564210153004 25.0790251398046, 121.563743650381 25.0794812952321, 121.563017206 25.0803042625911, 121.562445102038 25.0810820299785, 121.562197925275 25.0816117498027, 121.562023857132 25.0820311097045, 121.562142223469 25.0821698449949, 121.56300908282 25.0827563151669, 121.56355913815 25.0831115591735, 121.563848091267 25.0829581107054, 121.564752085154 25.0825471621483, 121.565415865005 25.0823243454741, 121.565407741825 25.0822350084861, 121.565321868208 25.0819627930265)","wkt1":"LINESTRING (121.566236229437 25.0802500295849, 121.567517447713 25.0797009639445, 121.572804477431 25.077300352423, 121.574821346977 25.0763817171734, 121.575199655073 25.0761862172491, 121.576510968414 25.0753958057711, 121.577875662652 25.0745149954804, 121.57902915421 25.0738023543556, 121.57948405229 25.0734218569535, 121.581080837385 25.0719419000154, 121.584518102974 25.0685719881623, 121.585304890978 25.0674872057932, 121.585676236349 25.0664402555597, 121.585731938155 25.0656750091665, 121.585653027264 25.0649749306692, 121.585451108218 25.0643757612106, 121.585102971933 25.063478052713, 121.584720022019 25.0627653473715, 121.584239593946 25.0620631498537, 121.583770770415 25.0615585743022, 121.583090744205 25.060965695374, 121.582020805355 25.0601751856739, 121.580890522882 25.0593384171906, 121.580324221191 25.0589053136711, 121.580454192071 25.0584953356284, 121.58126651007 25.0573116477364, 121.581210808264 25.0571161173751, 121.581122613739 25.0569500214468, 121.579347118684 25.0560585660358, 121.577759617224 25.0552249232102, 121.576514449777 25.0545678867227, 121.57426432892 25.0533252896883, 121.573988140801 25.0532159573666, 121.572312444815 25.0522971415019, 121.570957034211 25.0515654479695, 121.570669241548 25.0513614981319, 121.569972968978 25.0504594891108, 121.569097986448 25.0490002809773, 121.568132488484 25.0473938703828, 121.567338737753 25.046062888593, 121.567083437811 25.0457916440864, 121.56666335336 25.0455687605543, 121.565890490807 25.0452554613195, 121.565184934602 25.0449631881573, 121.564356370243 25.0447907676917, 121.563054340537 25.0450031392062, 121.562100447115 25.0451839701068, 121.561025866448 25.0452239210837, 121.558860458754 25.0452659747296, 121.558352179778 25.045249153273, 121.557588600859 25.0451208895903, 121.556189092992 25.044839129554, 121.555070415063 25.0446288604484, 121.55402136439 25.0444690556869, 121.553019892343 25.0444879799459, 121.551854796242 25.0446099362112, 121.550258011147 25.044782356931, 121.548820208289 25.0449453153154, 121.547347591803 25.0451103761678, 121.546920544626 25.0451429677748, 121.546369328841 25.0451713540061, 121.545955046662 25.0451587379041, 121.54484681282 25.0450515009848, 121.543501846305 25.0448916967741, 121.542167323879 25.0447413544648, 121.541516309025 25.0446929925638, 121.540994104598 25.0446530414139, 121.539392677686 25.0446940439097, 121.538444586536 25.0447413544648, 121.537088015478 25.0447876136565, 121.535833564397 25.0448570024114, 121.53508159002 25.0449442639717, 121.534504844241 25.0450493982991, 121.533398931309 25.04535954404, 121.532371929267 25.0456476109068, 121.531051332292 25.0460260918928, 121.525195679975 25.0477471143084, 121.524059595231 25.047899555569, 121.52268329645 25.0479784044226, 121.52074649825 25.0481339993448, 121.520080397491 25.0482790809187, 121.517554088515 25.0487006575614, 121.517103832252 25.0486817339527, 121.516398276048 25.0488047373573, 121.516315883794 25.0488814830088, 121.514947708193 25.0491432589107, 121.513868485709 25.0494092394754, 121.512738203236 25.0497425028468, 121.512120841557 25.0499821996011, 121.511739052097 25.0500484315163, 121.510521735554 25.0502713069049, 121.510438182845 25.0500652523145, 121.509920620234 25.0482370283063, 121.509502856692 25.0465696305986, 121.509161683133 25.0454068543383, 121.508683575968 25.0437057748087, 121.508091744283 25.0416598221881, 121.507662376198 25.0402005093301, 121.507288709918 25.0389956168953, 121.50688023001 25.0376098708218, 121.506648139153 25.0368991178997, 121.506423011022 25.0358939632458, 121.506067912011 25.0351074975852, 121.505640864835 25.0346238397285, 121.504823905019 25.0340329334114, 121.504283133323 25.0338100285098, 121.503846802512 25.0337301191068, 121.502971819982 25.0335093165384, 121.501525893944 25.0331854720527, 121.50107795859 25.0330677102096, 121.500226185146 25.0330319610563, 121.499432434415 25.0330109321377, 121.498840602731 25.0330992535715, 121.498186106514 25.03320860383, 121.497450378498 25.0331875749417, 121.496744822294 25.0330550928626, 121.496011415186 25.0327733051073, 121.495284970804 25.0322749177167, 121.494080419258 25.0312297696524, 121.492433734629 25.0297629723947, 121.49160517027 25.029020629609, 121.490962278596 25.0284654468, 121.490384372363 25.0281205592448, 121.489758887504 25.0278829227433, 121.489118316739 25.0276894484376, 121.487969466998 25.0275327760861, 121.483834768384 25.0268608702433, 121.482870430874 25.0265590897396, 121.48183182429 25.026127973447, 121.480544880489 25.0252794059786, 121.478928367671 25.0241248400755, 121.478239057826 25.0236306236645, 121.476114846259 25.022079612431, 121.47563964023 25.0217515316114, 121.474883024037 25.0211952643717, 121.470773855417 25.018280340762, 121.469085394434 25.0171067805465, 121.466583454998 25.015481023578, 121.464810280852 25.0141644180715, 121.464155784636 25.0136554389963, 121.463482721151 25.013150664276, 121.462983435695 25.0126548262546, 121.46297734331 25.0126521972036, 121.462876093674 25.012648516532, 121.462265404607 25.0130189492811, 121.462084953966 25.0131851047005, 121.462267725515 25.0134674632362, 121.462200419167 25.0137408824285, 121.461714769049 25.0140868619954, 121.46134516436 25.0142607277522, 121.460859320833 25.0136984674398, 121.460254337333 25.0129020444367, 121.460142933721 25.0127421983525, 121.459360013898 25.0117803131364, 121.458566263168 25.0110021060269, 121.457976752391 25.0103977652122, 121.457863801508 25.0103977652122, 121.456183463704 25.0116639329273, 121.456123120082 25.0118349977749, 121.456053492825 25.0119962472081, 121.455708451084 25.0119261387849, 121.455482549317 25.0117873239888, 121.454944098529 25.0114297700037, 121.454687251314 25.0113133894624, 121.454178198702 25.0111058672597, 121.454038944187 25.0110161278202, 121.453896595129 25.0108198225677, 121.453882669677 25.010529570655, 121.454292696858 25.0093264901956, 121.454284960496 25.0092409560545, 121.453811495148 25.0091638350566, 121.453407657057 25.0089661246407, 121.453303989808 25.0088301109074, 121.453286969811 25.0087487830362, 121.453232815278 25.0086758683472, 121.452078550084 25.0086267911283, 121.450356435926 25.008544060915, 121.449855119676 25.0085244300087, 121.449397127051 25.008487972603, 121.448985552599 25.0084150577592, 121.448604923594 25.0082524014132, 121.448089681891 25.00786258619, 121.44781581468 25.0075008141207, 121.447727620155 25.0072974921411, 121.447028639858 25.0046732061795, 121.446994213047 25.0046581319731, 121.446947408058 25.004542446142, 121.446868368089 25.0042983740579, 121.446832166046 25.0042267906657, 121.445044278807 25.0043438593167, 121.444999849027 25.0044176796189, 121.445170985956 25.0049403857423, 121.445223746628 25.0050486584894, 121.445293373885 25.0051538269979, 121.445424892037 25.0053669682324, 121.445967984642 25.0079358519154, 121.446142826421 25.0084981386114, 121.446429071811 25.0092497198011, 121.446702939022 25.010367267656, 121.446914915338 25.0108398036523, 121.447437893402 25.0114329248963, 121.447493595208 25.0115878650803, 121.447421647042 25.0116411476324, 121.446962107146 25.0117091529613, 121.446163714598 25.0117862723609, 121.444846985804 25.0119433153521)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0152002100'=='0100020200' || '0152002100'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
