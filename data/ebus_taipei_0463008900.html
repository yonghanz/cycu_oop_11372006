
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231493253</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463008900">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463008900">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463008900" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0463008900" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463008900" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0463008900',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="j4-oW8ztxu9B_QGANEozjvc1CoxXa_rAHJ6ixQFFLEnp7VL6qTc28o5W-hmyNu4MuVMnDS8EwZm_dotzdsXzh6-7S_k1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title"><font style="border-style:solid;}">瑞芳(經東碇路)-松山車站</font></span> 

                        <a href="../EBus/VsSimpleMap?routeid=0463008900" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0463008900" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">瑞芳 - 松山車站</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0615 - 0800 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 瑞芳(經東碇路)-松山車站去班表:0615 0800<br/>瑞芳(經東碇路)-松山車站返班表:1730 1925<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content">四腳亭</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">五段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">基隆客運瑞芳站:02-2497-2055</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 松山車站</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 瑞芳</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">瑞芳火車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100460" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.108227" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.8058805" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901061" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.11067" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7936866" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">四腳亭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099105" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7609117" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">寶祥吉祥</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099587" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7585153" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">台北大鎮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054300200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.090757" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.754501" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">寫意山水社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054400060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.092942" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.737571" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">暖暖郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054400110" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099157" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.735728" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">國道1號2Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2069000160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103605" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.720956" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">國道3號14Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2219700041" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051499" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.629252" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">南港展覽館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054699" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.616456" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">南港轉運站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156100660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052323" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.606012" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">玉成國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157000060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054384" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5928002" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">松山車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049806" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.578206" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">松山車站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1056700120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049806" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.578206" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">玉成國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156300120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054083" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5921075" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">南港轉運站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156100660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052323" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.606012" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">捷運南港展覽館站(南港路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054878" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6179651" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">國道3號14Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2219700010" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051348" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.629393" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">國道1號2Km(虛擬站不停靠)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2069000110" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103386" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.720831" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">暖暖郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054400150" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099185" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.735562" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">寫意山水社區</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054400020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.092828" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.73785" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">台北大鎮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2054300200" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.090757" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.754501" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">寶祥吉祥</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.099459" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7585247" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">四腳亭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244900320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098772" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7614982" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">魚桀魚坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244901020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.110433" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.7938803" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">區民廣場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2244100120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.107574" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.808298" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0463008900";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 13;
        var existBackNum = 13;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0463008900',
                        url: './StopStatusRecent3OfRoute?routeid=0463008900&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0463008900',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0463008900',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0463008900');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0463008900","Name":"瑞芳(經東碇路)-松山車站","BeginStop":"瑞芳","GoDirStops":[{"UniStopId":"2244100460","Name":"瑞芳火車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.8058805,"Latitude":25.108227,"PublicId":"2244100460"},{"UniStopId":"2244901061","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7936866,"Latitude":25.11067,"PublicId":"2244901061"},{"UniStopId":"2244900360","Name":"四腳亭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7609117,"Latitude":25.099105,"PublicId":"2244900360"},{"UniStopId":"2244901360","Name":"寶祥吉祥","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7585153,"Latitude":25.099587,"PublicId":"2244901360"},{"UniStopId":"2054300200","Name":"台北大鎮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.754501,"Latitude":25.090757,"PublicId":"2054300200"},{"UniStopId":"2054400060","Name":"寫意山水社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.737571,"Latitude":25.092942,"PublicId":"2054400060"},{"UniStopId":"2054400110","Name":"暖暖郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.735728,"Latitude":25.099157,"PublicId":"2054400110"},{"UniStopId":"2069000160","Name":"國道1號2Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.720956,"Latitude":25.103605,"PublicId":"2069000160"},{"UniStopId":"2219700041","Name":"國道3號14Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.629252,"Latitude":25.051499,"PublicId":"2219700041"},{"UniStopId":"1157100540","Name":"南港展覽館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.616456,"Latitude":25.054699,"PublicId":"1157100540"},{"UniStopId":"1156100660","Name":"南港轉運站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.606012,"Latitude":25.052323,"PublicId":"1156100660"},{"UniStopId":"1157000060","Name":"玉成國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5928002,"Latitude":25.054384,"PublicId":"1157000060"},{"UniStopId":"1056700120","Name":"松山車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.578206,"Latitude":25.049806,"PublicId":"1056700120"}],"LastStop":"松山車站","BackDirStops":[{"UniStopId":"1056700120","Name":"松山車站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.578206,"Latitude":25.049806,"PublicId":"1056700120"},{"UniStopId":"1156300120","Name":"玉成國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5921075,"Latitude":25.054083,"PublicId":"1156300120"},{"UniStopId":"1156100660","Name":"南港轉運站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.606012,"Latitude":25.052323,"PublicId":"1156100660"},{"UniStopId":"1156800620","Name":"捷運南港展覽館站(南港路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6179651,"Latitude":25.054878,"PublicId":"1156800620"},{"UniStopId":"2219700010","Name":"國道3號14Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.629393,"Latitude":25.051348,"PublicId":"2219700010"},{"UniStopId":"2069000110","Name":"國道1號2Km(虛擬站不停靠)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.720831,"Latitude":25.103386,"PublicId":"2069000110"},{"UniStopId":"2054400150","Name":"暖暖郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.735562,"Latitude":25.099185,"PublicId":"2054400150"},{"UniStopId":"2054400020","Name":"寫意山水社區","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.73785,"Latitude":25.092828,"PublicId":"2054400020"},{"UniStopId":"2054300200","Name":"台北大鎮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.754501,"Latitude":25.090757,"PublicId":"2054300200"},{"UniStopId":"2244901320","Name":"寶祥吉祥","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7585247,"Latitude":25.099459,"PublicId":"2244901320"},{"UniStopId":"2244900320","Name":"四腳亭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7614982,"Latitude":25.098772,"PublicId":"2244900320"},{"UniStopId":"2244901020","Name":"魚桀魚坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.7938803,"Latitude":25.110433,"PublicId":"2244901020"},{"UniStopId":"2244100120","Name":"區民廣場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.808298,"Latitude":25.107574,"PublicId":"2244100120"}],"RouteMapUrl":"../MapOverview?nid=0463008900","RouteTracks":null,"StopDirection":null,"TicketPrice":"五段票","BusTimeDesc":"0615 - 0800","HeadwayDesc":"瑞芳(經東碇路)-松山車站去班表:0615 0800;瑞芳(經東碇路)-松山車站返班表:1730 1925","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"四腳亭","StopLng":0,"StopLat":0,"IsNtpcMainLine":true,"orgphone":"基隆客運瑞芳站:02-2497-2055","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.806175862131 25.1081107948022, 121.805004215714 25.1083943177398, 121.804315876472 25.1062122960936, 121.801418892236 25.1066911738688, 121.800763899235 25.1068117357952, 121.800398579591 25.1069704900477, 121.800063145507 25.1071604246296, 121.799408847135 25.1076473413119, 121.799190006023 25.1079314401423, 121.798910145541 25.1086597136694, 121.798563068807 25.1090671317098, 121.797938583014 25.1094834475397, 121.797220559768 25.1098691404208, 121.796731785592 25.1100165676282, 121.794390047228 25.1105523648234, 121.793431668744 25.110519305666, 121.792008025434 25.1104321469784, 121.791227905308 25.1101556543448, 121.790271004145 25.1097262880367, 121.789677248008 25.1093978130668, 121.789182247866 25.1089766436439, 121.788673243506 25.1084898236078, 121.787549914763 25.106698125126, 121.786598278026 25.1051498288919, 121.785754499296 25.1038347440767, 121.785615569256 25.1034629610836, 121.785548957071 25.1029645455767, 121.785599333256 25.1016609660321, 121.78558716337 25.1012596348085, 121.785445181373 25.100468907423, 121.78526357359 25.0999925699403, 121.784946176514 25.0997433795225, 121.782915873499 25.0990674430749, 121.782591343219 25.0989021316736, 121.781657304505 25.0979690364638, 121.7811086455 25.0976824939866, 121.780753652286 25.0976509960964, 121.780339315769 25.0978024469721, 121.779312875705 25.0987719425483, 121.779083373718 25.0990068289204, 121.77847049338 25.0992895719008, 121.777694992612 25.0996019484099, 121.776785597234 25.0999543193705, 121.77630154072 25.100359619496, 121.775201180238 25.1016361698619, 121.775120047668 25.1019814790383, 121.775152500696 25.1028126048404, 121.775014575327 25.1037383162118, 121.774676861004 25.1056402270115, 121.774547048891 25.1060222586406, 121.774259028267 25.1063418418751, 121.773906101587 25.1065328567429, 121.773572796425 25.1066508114722, 121.772313874899 25.1069993725695, 121.771936608448 25.1069442723677, 121.771559751776 25.1067566630073, 121.770833205494 25.1062279674851, 121.7702839575 25.1057329582758, 121.76976529804 25.1053674777383, 121.769574966817 25.1051419523047, 121.768586847459 25.1031606657912, 121.768306940092 25.1026757679421, 121.768112632553 25.1017426733844, 121.768087182893 25.1010706927371, 121.768041799335 25.1004882019607, 121.767890935409 25.0999389980564, 121.767247145895 25.0990720350551, 121.766541194357 25.098707579224, 121.765879047931 25.0985310986041, 121.765053172259 25.0983922903325, 121.76417830643 25.0983804808982, 121.763206342506 25.0983959090273, 121.759641981603 25.0994586791678, 121.759272828409 25.0995615391535, 121.758769806474 25.0995762334301, 121.755087401948 25.0988800901366, 121.752773095386 25.0984319113552, 121.751316274654 25.0983536671052, 121.748760424129 25.098315805033, 121.748733153939 25.0958225304824, 121.748686405041 25.095333614926, 121.749419778376 25.0952245341644, 121.749655470736 25.0952216123582, 121.750004139599 25.0952410910657, 121.750810558086 25.0954173733679, 121.75176501475 25.0955770987688, 121.752838291529 25.0957290326867, 121.753560951575 25.0958001299688, 121.75375963439 25.0958235044178, 121.754608906034 25.0962666450117, 121.754838754782 25.0959666729173, 121.754852389877 25.0951855767495, 121.754723830408 25.0946898436455, 121.754577740102 25.0940158803686, 121.754443337021 25.092737103226, 121.754513460368 25.0923903822338, 121.754392692382 25.0920855404626, 121.754312829681 25.0912830177166, 121.754312829681 25.0910132376188, 121.754451128504 25.0904298503313, 121.754515408239 25.0904434854265, 121.754458919987 25.0905963932798, 121.754367370062 25.0910911524485, 121.754437493409 25.092078722915, 121.75457189649 25.0923981737168, 121.75449398166 25.0927497643859, 121.754632280483 25.0940149064332, 121.754772527177 25.0947258792543, 121.75491277387 25.0951992118447, 121.754893295163 25.0959958909785, 121.754642019837 25.0963046284912, 121.753749895037 25.0958566182204, 121.752744793734 25.0957436417173, 121.751494260717 25.095556646126, 121.750539804053 25.0953949728544, 121.749986608762 25.0952722569976, 121.749600930355 25.0952469346779, 121.748704909813 25.0953540675688, 121.748541288671 25.0951212970151, 121.748243264447 25.0949635194849, 121.74751670866 25.0948310642744, 121.745907767427 25.0947385404141, 121.745691553774 25.0947638627338, 121.745111088293 25.0949216402639, 121.744220911364 25.0951144794675, 121.744037811514 25.0950911050186, 121.742384069253 25.0945252485678, 121.739008409256 25.0945700495949, 121.739035679447 25.0940830819092, 121.738842840243 25.0932396538777, 121.738127971681 25.0929426035894, 121.736748879195 25.0927965132837, 121.735743777892 25.0926660059439, 121.735498346178 25.0935922184821, 121.73505812739 25.094572971401, 121.734528306548 25.0955663854798, 121.734300405671 25.0961410073488, 121.734269239739 25.0963981262869, 121.734327675862 25.0968763285542, 121.734674396854 25.0975541875726, 121.73484775735 25.0981901673701, 121.734982160431 25.0985144878488, 121.735217852791 25.0987784243344, 121.735771048082 25.0992936361458, 121.736351513563 25.0998672840795, 121.736193736033 25.1000270094804, 121.736034010632 25.100503263877, 121.735946356449 25.1013914929357, 121.735930773483 25.1026459216939, 121.73587038949 25.1028251258023, 121.735665863062 25.1032185956923, 121.735496398307 25.1036432315142, 121.735176947506 25.1043775787842, 121.734941255146 25.1048548071161, 121.733538788211 25.1050593335441, 121.733067403491 25.1052521727476, 121.732144112759 25.1058228988752, 121.731851932148 25.1059514583442, 121.73154416857 25.1060410603984, 121.731142907198 25.1060527476229, 121.730714375634 25.1059631455687, 121.730367654642 25.1058190031337, 121.730067682548 25.1055988937398, 121.729763814712 25.1053651492507, 121.729428780944 25.1050846558638, 121.729109330142 25.1048703900821, 121.728649632647 25.1047340391301, 121.728303057 25.1047324313998, 121.726423264925 25.1049533017527, 121.724556201655 25.1051929913522, 121.723611007213 25.1051489105416, 121.722794610726 25.1046153478028, 121.722088757366 25.1040900479613, 121.721436654334 25.1037924994976, 121.718511825181 25.1030633190287, 121.711938565766 25.1015829039978, 121.710886884826 25.1012780023988, 121.709790346615 25.1007497398663, 121.708520703996 25.0999070870215, 121.707096161426 25.0986446235562, 121.706399282043 25.0981642214066, 121.705769760231 25.0978979788009, 121.704872032655 25.0974724437219, 121.70314795892 25.0974384984611, 121.701193056994 25.0976759488126, 121.699900424978 25.0974839221283, 121.698900784728 25.0969985378476, 121.698016216733 25.0962580372871, 121.697415835714 25.0953322693015, 121.696352999046 25.0926036008847, 121.695966056029 25.0913013505833, 121.695544715816 25.0901660246916, 121.695018130804 25.0893929680507, 121.694196900995 25.0886211603829, 121.693297202461 25.0882379690774, 121.69174516382 25.0878311416429, 121.689315564639 25.087306967879, 121.686237849232 25.0865776283687, 121.684697699648 25.086251438204, 121.682221226567 25.0860117465926, 121.679695975322 25.0859603109147, 121.678266013773 25.0858353956071, 121.677024685451 25.0856810882863, 121.675961321773 25.0853453939482, 121.673841953935 25.0846972210684, 121.672907382279 25.084351956639, 121.667137890232 25.0809327908364, 121.664222778381 25.0792599695745, 121.661065529355 25.0771126457909, 121.658777736642 25.075912183319, 121.657178456829 25.0752915152294, 121.655129620556 25.0745578567457, 121.651078602127 25.0737960081244, 121.650155311395 25.0738836623079, 121.649676135192 25.0740005345524, 121.64885802948 25.0742966109053, 121.648230815101 25.074544964425, 121.647956165326 25.074597556935, 121.64770294213 25.0746384622206, 121.647412709389 25.0746423579621, 121.647027030982 25.074613139901, 121.646746537595 25.0745469122957, 121.646273205004 25.0743891347656, 121.64529147815 25.0738661314712, 121.644397405479 25.0732515782519, 121.643892906957 25.0727685063077, 121.643626048665 25.0724432118937, 121.643505280679 25.0722328418534, 121.643359190373 25.0718607985416, 121.643292962768 25.0715598525119, 121.643283223414 25.0712248187441, 121.643304649993 25.0709589343878, 121.643392304176 25.0706190309432, 121.643713702849 25.0696782093745, 121.643889011215 25.0691045614407, 121.643972769657 25.0686546032992, 121.643994196236 25.0679874575698, 121.643762399617 25.0668791191173, 121.643030000218 25.0645689444165, 121.641713239596 25.0606264540333, 121.64119900172 25.0596681016279, 121.640984735938 25.0591655509763, 121.640271815246 25.058078639102, 121.639667975316 25.057412467308, 121.639091405576 25.056822262473, 121.637910995906 25.0558346920064, 121.636664358631 25.0550302213897, 121.636025457027 25.0546679174316, 121.634899587738 25.0541673146507, 121.632320606875 25.0532303888235, 121.631260965191 25.052757056233, 121.630357153166 25.0522817757718, 121.629231283877 25.0515669072093, 121.627926210479 25.0504819432056, 121.627228872754 25.0498488852142, 121.626796445449 25.0493599696578, 121.626067941791 25.0485068022725, 121.625684211255 25.0479672420768, 121.625393978514 25.0473926202077, 121.624595351509 25.0476945401729, 121.623827890437 25.0481074887703, 121.623488960928 25.0482282567563, 121.6229980975 25.0483801906743, 121.622748770045 25.0484834278236, 121.622530608522 25.0486587361905, 121.621992996197 25.0492586803792, 121.621755355967 25.0494554153242, 121.620781420595 25.0499462787514, 121.619616593891 25.0504585687567, 121.619675030014 25.0505832324842, 121.619655551306 25.0511403235166, 121.619713987428 25.0514363998695, 121.619939940435 25.0517753293787, 121.620251599753 25.0520168653508, 121.62082037801 25.0523460555063, 121.620991790636 25.0524979894243, 121.621112558622 25.0526810892741, 121.62136967756 25.0537796883729, 121.621505054576 25.0543070743765, 121.621705685263 25.0546328557582, 121.621692050168 25.0549829855242, 121.621021982632 25.0549946727487, 121.620336332131 25.0548427388307, 121.619327335086 25.0547881984499, 121.618283276368 25.0549674025583, 121.616573045856 25.0552128342718, 121.616339301367 25.0539213959694, 121.616234116347 25.0532240582436, 121.614071979822 25.0530136882034, 121.611504686183 25.0526786544356, 121.609011411633 25.0524020567902, 121.606485997215 25.052107928308, 121.606456779154 25.0522910281579, 121.606371072841 25.0523416727972, 121.606297053753 25.0523436206679, 121.605438042755 25.052199478233, 121.605299743933 25.0530175839449, 121.60332655087 25.0527176118505, 121.601686443705 25.0524887370382, 121.599454183834 25.0521683123011, 121.597169331453 25.0518225652443, 121.595533120029 25.0515479154696, 121.595135754398 25.0531919183764, 121.594874739718 25.0543489535975, 121.594672161161 25.0544580343591, 121.59414623606 25.0545671151207, 121.593369906557 25.0545015095875, 121.592492509668 25.054293266193, 121.591079939766 25.0539089270558, 121.589780804487 25.053361359875, 121.589054501939 25.0531782832812, 121.5883131649 25.0530626782552, 121.586559400222 25.0530823701354, 121.586214506396 25.0530575152951, 121.585496667786 25.0528108250418, 121.579458665871 25.0503253413933, 121.578739726722 25.0501733050727, 121.578384066011 25.0501240219567, 121.578222392739 25.0499720880387, 121.578212653386 25.049659089559, 121.578552877689 25.0496538681365, 121.57856521799 25.0500246805488, 121.578979016932 25.0500915244024, 121.579788821398 25.0503304026641, 121.58074111494 25.050716741329, 121.582608685288 25.0514783899701, 121.584346443524 25.0522602463186, 121.585473172092 25.0527255908849, 121.586117161867 25.0529281737029, 121.586323587158 25.0529834962069, 121.586576067967 25.0529851357048, 121.587858976732 25.0529538984812, 121.588413213602 25.0529869731882, 121.589149998754 25.0530917097017, 121.589771169994 25.0532777546037, 121.59110171409 25.0538236372066, 121.59251781612 25.0542210028381, 121.593322286736 25.0543982590757, 121.594001726447 25.0544528168674, 121.594289891528 25.0544187117185, 121.594712579479 25.0543154745691, 121.595143058913 25.0526870546283, 121.595439135266 25.0514482088361, 121.598750515528 25.0519566030999, 121.601709331186 25.0524046133707, 121.60534016225 25.0529500171786, 121.60769903372 25.0533317998441, 121.607911351631 25.0521591816571, 121.611236366988 25.0525584951593, 121.614160120973 25.0528993725393, 121.616341736204 25.0531155861917, 121.616581324306 25.0546212902757, 121.616674822101 25.0550907271247, 121.61850776847 25.0548336081866, 121.619080442468 25.0546972572347, 121.620202416016 25.0547069965884, 121.621008834504 25.0548978879212, 121.621661371202 25.0548784092137, 121.621667214815 25.0546271338879, 121.621468531999 25.0542911261848, 121.621297119373 25.0536405373568, 121.62105168766 25.0526646541148, 121.620942606898 25.0524971372309, 121.62079067298 25.0523666298912, 121.62010697035 25.0519507594876, 121.619910235405 25.0518114867295, 121.619826476963 25.0516790315191, 121.619684282399 25.0514491827714, 121.619627794147 25.0512436824081, 121.619616106923 25.0505755627434, 121.619542087834 25.0504392117914, 121.620993251538 25.0498051798647, 121.621754868998 25.0494126839101, 121.621988613487 25.0492140010943, 121.622493112009 25.0486393792253, 121.622736595852 25.0484406964095, 121.623030724334 25.0483199284235, 121.62383129921 25.0480754706453, 121.624575385833 25.047649860888, 121.625409074511 25.0473352797631, 121.626281720604 25.0470119332198, 121.62679595848 25.0482176652095, 121.627115409282 25.0489188986768, 121.627390059056 25.049341586628, 121.627814694878 25.0500038626804, 121.628178946707 25.05037006238, 121.629037957704 25.051198881381, 121.629910603797 25.0518066170527, 121.631242947385 25.0525779738667, 121.632773973789 25.0532402499192, 121.634361488444 25.0538207154005, 121.635970429677 25.0544946786774, 121.636809961967 25.0549407410775, 121.637933883386 25.0556848277011, 121.638849382635 25.0564094356174, 121.639348037545 25.0568769245956, 121.640072645461 25.0576482814097, 121.640532342956 25.0582102421189, 121.641159557336 25.0591861253609, 121.641784823844 25.0604201014763, 121.642497744536 25.0623981642154, 121.643382077853 25.0651427140917, 121.644184600599 25.0676184578055, 121.644507947142 25.0684463028711, 121.645166327453 25.0703649555526, 121.64555200586 25.0713135686042, 121.645744845064 25.0716369151475, 121.646003911872 25.0719417569187, 121.646335049899 25.0721969279859, 121.646956420665 25.0725816324576, 121.647357682038 25.0727481754061, 121.648643276728 25.073096844269, 121.650573946356 25.0734369171461, 121.652753370021 25.0738420139609, 121.654816165616 25.0742912013792, 121.655827280271 25.0745814729449, 121.657175095092 25.0750086118142, 121.658556377098 25.0755974180064, 121.660127306487 25.0764167816623, 121.662294560267 25.0777147086084, 121.664669716257 25.0792045978788, 121.666513453913 25.0803885968295, 121.669648213591 25.0823276114955, 121.671954406897 25.0837108973603, 121.672950309195 25.0842114850063, 121.673867107237 25.0846156276673, 121.675247375086 25.0850647755591, 121.676493774195 25.0853917615355, 121.677780739588 25.0856232229909, 121.679815138784 25.0857968187951, 121.682238974316 25.0858519285227, 121.683672992493 25.0859511259699, 121.684607031207 25.0860944110295, 121.687220514122 25.0866418318919, 121.690391783456 25.0873444742091, 121.692443423323 25.0877936120867, 121.693669539289 25.0881509005503, 121.694102584382 25.0883731720245, 121.694528530375 25.0886450407168, 121.695116741509 25.0891814285276, 121.695365210005 25.0894689093831, 121.695912854853 25.0906160706731, 121.696752576954 25.0931941593239, 121.697475670985 25.0950916419518, 121.697577086697 25.0953166560909, 121.698093292675 25.0960706800459, 121.698413766327 25.0964453942413, 121.699019218131 25.0969128669593, 121.699514126809 25.0971883903178, 121.700005993015 25.0973610513062, 121.700472505294 25.0974749339524, 121.701260505381 25.0975190175289, 121.702754358828 25.0973683985769, 121.703261437391 25.0973022731248, 121.703972361537 25.0972839049373, 121.704764418253 25.0973463567635, 121.705299893216 25.0975079966363, 121.705876948621 25.0977366799551, 121.706489499525 25.0981297571106, 121.707038158531 25.098505383399, 121.707967126458 25.0992777555901, 121.708621257805 25.0998701185914, 121.709144562882 25.1002595153427, 121.709806807486 25.1006571763117, 121.710805752256 25.1010906528465, 121.711238797348 25.1012734105015, 121.713097747361 25.1017472934, 121.715351204496 25.1022478072582, 121.717134092725 25.1026335229625, 121.72033680093 25.1033544407196, 121.721481468314 25.10355362946, 121.722509944066 25.1038750281326, 121.723265717914 25.1043658915597, 121.72385787062 25.1047944231231, 121.724340942564 25.1049931059389, 121.724808431542 25.1051021867005, 121.727283777247 25.1047411622899, 121.728656945996 25.1045538180428, 121.728524968919 25.1045996360488, 121.729085955693 25.1047632571912, 121.729405406495 25.104946357041, 121.729662525433 25.1051723100472, 121.729946914562 25.1054430640804, 121.730313114261 25.1056923915355, 121.730585816165 25.1058326382289, 121.730920849933 25.105945614732, 121.731166281646 25.1059806764054, 121.731688311005 25.1059261360246, 121.731937638461 25.1058209510045, 121.733102465165 25.105158674952, 121.73492567218 25.1046152190148, 121.735510033403 25.1035322028819, 121.735671706674 25.1031017234477, 121.735882076714 25.1026585828538, 121.735903503293 25.1013992844187, 121.735958043673 25.1007409041076, 121.7360028447 25.1004633325268, 121.73615867436 25.1000133743853, 121.736265807251 25.0998741016272, 121.735866493748 25.0994494658053, 121.735130198608 25.0987608934977, 121.734923724309 25.0985115660427, 121.734789321228 25.0982008806592, 121.734629595827 25.0975444482189, 121.734286770576 25.0968948333263, 121.734240021678 25.0966464798066, 121.734234178066 25.0962413226921, 121.73427118761 25.0960689361314, 121.734487401263 25.095538141354, 121.735032805071 25.0945057698604, 121.735455493022 25.0935630004209, 121.735720403443 25.0926056219509, 121.737083912963 25.09278677393, 121.738166929096 25.0929016983038, 121.738897380624 25.0932045922043, 121.739088271957 25.094069446814, 121.739062949637 25.0945096656019, 121.74109068308 25.0944814214761, 121.742391860736 25.0944853172176, 121.744067029575 25.0950443561207, 121.744234546459 25.0950618869574, 121.745150045708 25.0948651520124, 121.745730511189 25.094709322353, 121.745987630127 25.0946976351286, 121.747448533184 25.094769706346, 121.748268586767 25.0949177445225, 121.748556871637 25.0950784438587, 121.748652317303 25.0951738895251, 121.748743867228 25.0953199798308, 121.74942951773 25.0952245341644, 121.749655470736 25.0952245341644, 121.750002191728 25.0952362213889, 121.750816401698 25.0954134776265, 121.75176501475 25.0955809945103, 121.7528402394 25.0957280587514, 121.753755738649 25.0958215565471, 121.754616697517 25.0962685928825, 121.754846546265 25.0959588814344, 121.754850442006 25.0951914203618, 121.754725778279 25.0946869218395, 121.754575792232 25.094016854304, 121.754447232763 25.0927293117431, 121.754511512497 25.0923913561692, 121.754396588123 25.0920806707858, 121.754314777552 25.0912762001691, 121.75430893394 25.0910132376188, 121.754451128504 25.0904191370423, 121.754507616756 25.0904327721375, 121.754464763599 25.0905905496677, 121.754367370062 25.0910882306424, 121.754437493409 25.0920777489797, 121.754581635844 25.0923981737168, 121.754497877402 25.0927497643859, 121.754632280483 25.0940207500455, 121.754778370789 25.0947239313836, 121.754914721741 25.0952001857802, 121.754897190904 25.0959988127846, 121.754645915578 25.0963036545559, 121.753750868972 25.095855644285, 121.752743819798 25.095742667782, 121.751493286781 25.0955576200614, 121.750538830118 25.0953998425313, 121.749987582697 25.0952683612561, 121.749594112807 25.095239143195, 121.748744841164 25.0953521196981, 121.748824703864 25.0973077819237, 121.748842234701 25.09825542104, 121.751202673075 25.0982959879575, 121.752169164817 25.0983106823862, 121.753664032421 25.0984870153922, 121.754784676046 25.0987184520768, 121.75604324504 25.098975603435, 121.758117196364 25.0994017387813, 121.758783497596 25.09953398738, 121.759157721575 25.0995192930983, 121.759433572314 25.0994605159539, 121.761312805469 25.0988837637263, 121.76195476693 25.0986780425285, 121.763002391242 25.098375888892, 121.763274185352 25.0983281320179, 121.765312641176 25.0983685416818, 121.766356208859 25.0985926313938, 121.766977887178 25.0988424358348, 121.767318643972 25.0990665246787, 121.76753465944 25.0993429615804, 121.768022469018 25.1001226755879, 121.76809954496 25.1004386006966, 121.768176620901 25.1017840284317, 121.768188790787 25.1019677034248, 121.768363225813 25.1026592372996, 121.768984904131 25.1037520916256, 121.769650191206 25.1051342169344, 121.769804343089 25.1053289070848, 121.77153348099 25.1066715260031, 121.771968554397 25.1068882538037, 121.772309311192 25.1069470273783, 121.772650067986 25.1068772337553, 121.773709862183 25.1065282650427, 121.774200714233 25.1063262300697, 121.774460338457 25.1060286870472, 121.774602320455 25.1056200233823, 121.775061733633 25.1028667885363, 121.775053620376 25.1019879076572, 121.775086073404 25.1017785181776, 121.775155036089 25.1015691283396, 121.775387278071 25.1012550429103, 121.776291906228 25.1002558417943, 121.77655558708 25.1000060402398, 121.776721908849 25.0998958335095, 121.778268498467 25.0993144913636, 121.779036215412 25.0989462147357, 121.780213651836 25.0978321941464, 121.780424596518 25.0977219854575, 121.780802877126 25.0976044294132, 121.781054388094 25.0976191239249, 121.781395144888 25.0977440272032, 121.781688236298 25.0979313818816, 121.782475222228 25.0987028392983, 121.782649657253 25.0988754981491, 121.782942748663 25.0990077473168, 121.784959907188 25.0996919507966, 121.785305734768 25.0999463449399, 121.785524792707 25.1004422742396, 121.78562620842 25.1010493257008, 121.785670831333 25.1015966796545, 121.785622151791 25.1021045411154, 121.785605925277 25.1030421966077, 121.785646491562 25.103314032703, 121.785824983217 25.103840254238, 121.786690059245 25.1051746243496, 121.788671722271 25.1083924810877, 121.788789364497 25.1085430864632, 121.789431325958 25.109128058022, 121.789772082753 25.1093998805883, 121.791010368604 25.109977501535, 121.791972803717 25.1103530914336, 121.793219202826 25.110437576044, 121.79417758131 25.1104963479125, 121.794680603245 25.110437576044, 121.796779908497 25.1099563803084, 121.797153118319 25.1098461825452, 121.797381303673 25.1097433312098, 121.798298101715 25.10920244196, 121.798634801881 25.1089342922427, 121.798867043863 25.1086174707571, 121.799151007859 25.1079195422694, 121.799333556141 25.1076477164121, 121.800275708112 25.1069745774817, 121.80049882268 25.1068607036808, 121.800786843304 25.1067505031275, 121.802307064836 25.1064786746712, 121.804351605603 25.1061554184231, 121.804709115462 25.1072245136143, 121.805038305617 25.1083591483218, 121.806099895172 25.1081059251253, 121.80832436356 25.1076024005384)","wkt0":"LINESTRING (121.806175862131 25.1081107948022, 121.805004215714 25.1083943177398, 121.804315876472 25.1062122960936, 121.801418892236 25.1066911738688, 121.800763899235 25.1068117357952, 121.800398579591 25.1069704900477, 121.800063145507 25.1071604246296, 121.799408847135 25.1076473413119, 121.799190006023 25.1079314401423, 121.798910145541 25.1086597136694, 121.798563068807 25.1090671317098, 121.797938583014 25.1094834475397, 121.797220559768 25.1098691404208, 121.796731785592 25.1100165676282, 121.794390047228 25.1105523648234, 121.793431668744 25.110519305666, 121.792008025434 25.1104321469784, 121.791227905308 25.1101556543448, 121.790271004145 25.1097262880367, 121.789677248008 25.1093978130668, 121.789182247866 25.1089766436439, 121.788673243506 25.1084898236078, 121.787549914763 25.106698125126, 121.786598278026 25.1051498288919, 121.785754499296 25.1038347440767, 121.785615569256 25.1034629610836, 121.785548957071 25.1029645455767, 121.785599333256 25.1016609660321, 121.78558716337 25.1012596348085, 121.785445181373 25.100468907423, 121.78526357359 25.0999925699403, 121.784946176514 25.0997433795225, 121.782915873499 25.0990674430749, 121.782591343219 25.0989021316736, 121.781657304505 25.0979690364638, 121.7811086455 25.0976824939866, 121.780753652286 25.0976509960964, 121.780339315769 25.0978024469721, 121.779312875705 25.0987719425483, 121.779083373718 25.0990068289204, 121.77847049338 25.0992895719008, 121.777694992612 25.0996019484099, 121.776785597234 25.0999543193705, 121.77630154072 25.100359619496, 121.775201180238 25.1016361698619, 121.775120047668 25.1019814790383, 121.775152500696 25.1028126048404, 121.775014575327 25.1037383162118, 121.774676861004 25.1056402270115, 121.774547048891 25.1060222586406, 121.774259028267 25.1063418418751, 121.773906101587 25.1065328567429, 121.773572796425 25.1066508114722, 121.772313874899 25.1069993725695, 121.771936608448 25.1069442723677, 121.771559751776 25.1067566630073, 121.770833205494 25.1062279674851, 121.7702839575 25.1057329582758, 121.76976529804 25.1053674777383, 121.769574966817 25.1051419523047, 121.768586847459 25.1031606657912, 121.768306940092 25.1026757679421, 121.768112632553 25.1017426733844, 121.768087182893 25.1010706927371, 121.768041799335 25.1004882019607, 121.767890935409 25.0999389980564, 121.767247145895 25.0990720350551, 121.766541194357 25.098707579224, 121.765879047931 25.0985310986041, 121.765053172259 25.0983922903325, 121.76417830643 25.0983804808982, 121.763206342506 25.0983959090273, 121.759641981603 25.0994586791678, 121.759272828409 25.0995615391535, 121.758769806474 25.0995762334301, 121.755087401948 25.0988800901366, 121.752773095386 25.0984319113552, 121.751316274654 25.0983536671052, 121.748760424129 25.098315805033, 121.748733153939 25.0958225304824, 121.748686405041 25.095333614926, 121.749419778376 25.0952245341644, 121.749655470736 25.0952216123582, 121.750004139599 25.0952410910657, 121.750810558086 25.0954173733679, 121.75176501475 25.0955770987688, 121.752838291529 25.0957290326867, 121.753560951575 25.0958001299688, 121.75375963439 25.0958235044178, 121.754608906034 25.0962666450117, 121.754838754782 25.0959666729173, 121.754852389877 25.0951855767495, 121.754723830408 25.0946898436455, 121.754577740102 25.0940158803686, 121.754443337021 25.092737103226, 121.754513460368 25.0923903822338, 121.754392692382 25.0920855404626, 121.754312829681 25.0912830177166, 121.754312829681 25.0910132376188, 121.754451128504 25.0904298503313, 121.754515408239 25.0904434854265, 121.754458919987 25.0905963932798, 121.754367370062 25.0910911524485, 121.754437493409 25.092078722915, 121.75457189649 25.0923981737168, 121.75449398166 25.0927497643859, 121.754632280483 25.0940149064332, 121.754772527177 25.0947258792543, 121.75491277387 25.0951992118447, 121.754893295163 25.0959958909785, 121.754642019837 25.0963046284912, 121.753749895037 25.0958566182204, 121.752744793734 25.0957436417173, 121.751494260717 25.095556646126, 121.750539804053 25.0953949728544, 121.749986608762 25.0952722569976, 121.749600930355 25.0952469346779, 121.748704909813 25.0953540675688, 121.748541288671 25.0951212970151, 121.748243264447 25.0949635194849, 121.74751670866 25.0948310642744, 121.745907767427 25.0947385404141, 121.745691553774 25.0947638627338, 121.745111088293 25.0949216402639, 121.744220911364 25.0951144794675, 121.744037811514 25.0950911050186, 121.742384069253 25.0945252485678, 121.739008409256 25.0945700495949, 121.739035679447 25.0940830819092, 121.738842840243 25.0932396538777, 121.738127971681 25.0929426035894, 121.736748879195 25.0927965132837, 121.735743777892 25.0926660059439, 121.735498346178 25.0935922184821, 121.73505812739 25.094572971401, 121.734528306548 25.0955663854798, 121.734300405671 25.0961410073488, 121.734269239739 25.0963981262869, 121.734327675862 25.0968763285542, 121.734674396854 25.0975541875726, 121.73484775735 25.0981901673701, 121.734982160431 25.0985144878488, 121.735217852791 25.0987784243344, 121.735771048082 25.0992936361458, 121.736351513563 25.0998672840795, 121.736193736033 25.1000270094804, 121.736034010632 25.100503263877, 121.735946356449 25.1013914929357, 121.735930773483 25.1026459216939, 121.73587038949 25.1028251258023, 121.735665863062 25.1032185956923, 121.735496398307 25.1036432315142, 121.735176947506 25.1043775787842, 121.734941255146 25.1048548071161, 121.733538788211 25.1050593335441, 121.733067403491 25.1052521727476, 121.732144112759 25.1058228988752, 121.731851932148 25.1059514583442, 121.73154416857 25.1060410603984, 121.731142907198 25.1060527476229, 121.730714375634 25.1059631455687, 121.730367654642 25.1058190031337, 121.730067682548 25.1055988937398, 121.729763814712 25.1053651492507, 121.729428780944 25.1050846558638, 121.729109330142 25.1048703900821, 121.728649632647 25.1047340391301, 121.728303057 25.1047324313998, 121.726423264925 25.1049533017527, 121.724556201655 25.1051929913522, 121.723611007213 25.1051489105416, 121.722794610726 25.1046153478028, 121.722088757366 25.1040900479613, 121.721436654334 25.1037924994976, 121.718511825181 25.1030633190287, 121.711938565766 25.1015829039978, 121.710886884826 25.1012780023988, 121.709790346615 25.1007497398663, 121.708520703996 25.0999070870215, 121.707096161426 25.0986446235562, 121.706399282043 25.0981642214066, 121.705769760231 25.0978979788009, 121.704872032655 25.0974724437219, 121.70314795892 25.0974384984611, 121.701193056994 25.0976759488126, 121.699900424978 25.0974839221283, 121.698900784728 25.0969985378476, 121.698016216733 25.0962580372871, 121.697415835714 25.0953322693015, 121.696352999046 25.0926036008847, 121.695966056029 25.0913013505833, 121.695544715816 25.0901660246916, 121.695018130804 25.0893929680507, 121.694196900995 25.0886211603829, 121.693297202461 25.0882379690774, 121.69174516382 25.0878311416429, 121.689315564639 25.087306967879, 121.686237849232 25.0865776283687, 121.684697699648 25.086251438204, 121.682221226567 25.0860117465926, 121.679695975322 25.0859603109147, 121.678266013773 25.0858353956071, 121.677024685451 25.0856810882863, 121.675961321773 25.0853453939482, 121.673841953935 25.0846972210684, 121.672907382279 25.084351956639, 121.667137890232 25.0809327908364, 121.664222778381 25.0792599695745, 121.661065529355 25.0771126457909, 121.658777736642 25.075912183319, 121.657178456829 25.0752915152294, 121.655129620556 25.0745578567457, 121.651078602127 25.0737960081244, 121.650155311395 25.0738836623079, 121.649676135192 25.0740005345524, 121.64885802948 25.0742966109053, 121.648230815101 25.074544964425, 121.647956165326 25.074597556935, 121.64770294213 25.0746384622206, 121.647412709389 25.0746423579621, 121.647027030982 25.074613139901, 121.646746537595 25.0745469122957, 121.646273205004 25.0743891347656, 121.64529147815 25.0738661314712, 121.644397405479 25.0732515782519, 121.643892906957 25.0727685063077, 121.643626048665 25.0724432118937, 121.643505280679 25.0722328418534, 121.643359190373 25.0718607985416, 121.643292962768 25.0715598525119, 121.643283223414 25.0712248187441, 121.643304649993 25.0709589343878, 121.643392304176 25.0706190309432, 121.643713702849 25.0696782093745, 121.643889011215 25.0691045614407, 121.643972769657 25.0686546032992, 121.643994196236 25.0679874575698, 121.643762399617 25.0668791191173, 121.643030000218 25.0645689444165, 121.641713239596 25.0606264540333, 121.64119900172 25.0596681016279, 121.640984735938 25.0591655509763, 121.640271815246 25.058078639102, 121.639667975316 25.057412467308, 121.639091405576 25.056822262473, 121.637910995906 25.0558346920064, 121.636664358631 25.0550302213897, 121.636025457027 25.0546679174316, 121.634899587738 25.0541673146507, 121.632320606875 25.0532303888235, 121.631260965191 25.052757056233, 121.630357153166 25.0522817757718, 121.629231283877 25.0515669072093, 121.627926210479 25.0504819432056, 121.627228872754 25.0498488852142, 121.626796445449 25.0493599696578, 121.626067941791 25.0485068022725, 121.625684211255 25.0479672420768, 121.625393978514 25.0473926202077, 121.624595351509 25.0476945401729, 121.623827890437 25.0481074887703, 121.623488960928 25.0482282567563, 121.6229980975 25.0483801906743, 121.622748770045 25.0484834278236, 121.622530608522 25.0486587361905, 121.621992996197 25.0492586803792, 121.621755355967 25.0494554153242, 121.620781420595 25.0499462787514, 121.619616593891 25.0504585687567, 121.619675030014 25.0505832324842, 121.619655551306 25.0511403235166, 121.619713987428 25.0514363998695, 121.619939940435 25.0517753293787, 121.620251599753 25.0520168653508, 121.62082037801 25.0523460555063, 121.620991790636 25.0524979894243, 121.621112558622 25.0526810892741, 121.62136967756 25.0537796883729, 121.621505054576 25.0543070743765, 121.621705685263 25.0546328557582, 121.621692050168 25.0549829855242, 121.621021982632 25.0549946727487, 121.620336332131 25.0548427388307, 121.619327335086 25.0547881984499, 121.618283276368 25.0549674025583, 121.616573045856 25.0552128342718, 121.616339301367 25.0539213959694, 121.616234116347 25.0532240582436, 121.614071979822 25.0530136882034, 121.611504686183 25.0526786544356, 121.609011411633 25.0524020567902, 121.606485997215 25.052107928308, 121.606456779154 25.0522910281579, 121.606371072841 25.0523416727972, 121.606297053753 25.0523436206679, 121.605438042755 25.052199478233, 121.605299743933 25.0530175839449, 121.60332655087 25.0527176118505, 121.601686443705 25.0524887370382, 121.599454183834 25.0521683123011, 121.597169331453 25.0518225652443, 121.595533120029 25.0515479154696, 121.595135754398 25.0531919183764, 121.594874739718 25.0543489535975, 121.594672161161 25.0544580343591, 121.59414623606 25.0545671151207, 121.593369906557 25.0545015095875, 121.592492509668 25.054293266193, 121.591079939766 25.0539089270558, 121.589780804487 25.053361359875, 121.589054501939 25.0531782832812, 121.5883131649 25.0530626782552, 121.586559400222 25.0530823701354, 121.586214506396 25.0530575152951, 121.585496667786 25.0528108250418, 121.579458665871 25.0503253413933, 121.578739726722 25.0501733050727, 121.578384066011 25.0501240219567, 121.578222392739 25.0499720880387, 121.578212653386 25.049659089559)","wkt1":"LINESTRING (121.578222392739 25.0499720880387, 121.578212653386 25.049659089559, 121.578552877689 25.0496538681365, 121.57856521799 25.0500246805488, 121.578979016932 25.0500915244024, 121.579788821398 25.0503304026641, 121.58074111494 25.050716741329, 121.582608685288 25.0514783899701, 121.584346443524 25.0522602463186, 121.585473172092 25.0527255908849, 121.586117161867 25.0529281737029, 121.586323587158 25.0529834962069, 121.586576067967 25.0529851357048, 121.587858976732 25.0529538984812, 121.588413213602 25.0529869731882, 121.589149998754 25.0530917097017, 121.589771169994 25.0532777546037, 121.59110171409 25.0538236372066, 121.59251781612 25.0542210028381, 121.593322286736 25.0543982590757, 121.594001726447 25.0544528168674, 121.594289891528 25.0544187117185, 121.594712579479 25.0543154745691, 121.595143058913 25.0526870546283, 121.595439135266 25.0514482088361, 121.598750515528 25.0519566030999, 121.601709331186 25.0524046133707, 121.60534016225 25.0529500171786, 121.60769903372 25.0533317998441, 121.607911351631 25.0521591816571, 121.611236366988 25.0525584951593, 121.614160120973 25.0528993725393, 121.616341736204 25.0531155861917, 121.616581324306 25.0546212902757, 121.616674822101 25.0550907271247, 121.61850776847 25.0548336081866, 121.619080442468 25.0546972572347, 121.620202416016 25.0547069965884, 121.621008834504 25.0548978879212, 121.621661371202 25.0548784092137, 121.621667214815 25.0546271338879, 121.621468531999 25.0542911261848, 121.621297119373 25.0536405373568, 121.62105168766 25.0526646541148, 121.620942606898 25.0524971372309, 121.62079067298 25.0523666298912, 121.62010697035 25.0519507594876, 121.619910235405 25.0518114867295, 121.619826476963 25.0516790315191, 121.619684282399 25.0514491827714, 121.619627794147 25.0512436824081, 121.619616106923 25.0505755627434, 121.619542087834 25.0504392117914, 121.620993251538 25.0498051798647, 121.621754868998 25.0494126839101, 121.621988613487 25.0492140010943, 121.622493112009 25.0486393792253, 121.622736595852 25.0484406964095, 121.623030724334 25.0483199284235, 121.62383129921 25.0480754706453, 121.624575385833 25.047649860888, 121.625409074511 25.0473352797631, 121.626281720604 25.0470119332198, 121.62679595848 25.0482176652095, 121.627115409282 25.0489188986768, 121.627390059056 25.049341586628, 121.627814694878 25.0500038626804, 121.628178946707 25.05037006238, 121.629037957704 25.051198881381, 121.629910603797 25.0518066170527, 121.631242947385 25.0525779738667, 121.632773973789 25.0532402499192, 121.634361488444 25.0538207154005, 121.635970429677 25.0544946786774, 121.636809961967 25.0549407410775, 121.637933883386 25.0556848277011, 121.638849382635 25.0564094356174, 121.639348037545 25.0568769245956, 121.640072645461 25.0576482814097, 121.640532342956 25.0582102421189, 121.641159557336 25.0591861253609, 121.641784823844 25.0604201014763, 121.642497744536 25.0623981642154, 121.643382077853 25.0651427140917, 121.644184600599 25.0676184578055, 121.644507947142 25.0684463028711, 121.645166327453 25.0703649555526, 121.64555200586 25.0713135686042, 121.645744845064 25.0716369151475, 121.646003911872 25.0719417569187, 121.646335049899 25.0721969279859, 121.646956420665 25.0725816324576, 121.647357682038 25.0727481754061, 121.648643276728 25.073096844269, 121.650573946356 25.0734369171461, 121.652753370021 25.0738420139609, 121.654816165616 25.0742912013792, 121.655827280271 25.0745814729449, 121.657175095092 25.0750086118142, 121.658556377098 25.0755974180064, 121.660127306487 25.0764167816623, 121.662294560267 25.0777147086084, 121.664669716257 25.0792045978788, 121.666513453913 25.0803885968295, 121.669648213591 25.0823276114955, 121.671954406897 25.0837108973603, 121.672950309195 25.0842114850063, 121.673867107237 25.0846156276673, 121.675247375086 25.0850647755591, 121.676493774195 25.0853917615355, 121.677780739588 25.0856232229909, 121.679815138784 25.0857968187951, 121.682238974316 25.0858519285227, 121.683672992493 25.0859511259699, 121.684607031207 25.0860944110295, 121.687220514122 25.0866418318919, 121.690391783456 25.0873444742091, 121.692443423323 25.0877936120867, 121.693669539289 25.0881509005503, 121.694102584382 25.0883731720245, 121.694528530375 25.0886450407168, 121.695116741509 25.0891814285276, 121.695365210005 25.0894689093831, 121.695912854853 25.0906160706731, 121.696752576954 25.0931941593239, 121.697475670985 25.0950916419518, 121.697577086697 25.0953166560909, 121.698093292675 25.0960706800459, 121.698413766327 25.0964453942413, 121.699019218131 25.0969128669593, 121.699514126809 25.0971883903178, 121.700005993015 25.0973610513062, 121.700472505294 25.0974749339524, 121.701260505381 25.0975190175289, 121.702754358828 25.0973683985769, 121.703261437391 25.0973022731248, 121.703972361537 25.0972839049373, 121.704764418253 25.0973463567635, 121.705299893216 25.0975079966363, 121.705876948621 25.0977366799551, 121.706489499525 25.0981297571106, 121.707038158531 25.098505383399, 121.707967126458 25.0992777555901, 121.708621257805 25.0998701185914, 121.709144562882 25.1002595153427, 121.709806807486 25.1006571763117, 121.710805752256 25.1010906528465, 121.711238797348 25.1012734105015, 121.713097747361 25.1017472934, 121.715351204496 25.1022478072582, 121.717134092725 25.1026335229625, 121.72033680093 25.1033544407196, 121.721481468314 25.10355362946, 121.722509944066 25.1038750281326, 121.723265717914 25.1043658915597, 121.72385787062 25.1047944231231, 121.724340942564 25.1049931059389, 121.724808431542 25.1051021867005, 121.727283777247 25.1047411622899, 121.728656945996 25.1045538180428, 121.728524968919 25.1045996360488, 121.729085955693 25.1047632571912, 121.729405406495 25.104946357041, 121.729662525433 25.1051723100472, 121.729946914562 25.1054430640804, 121.730313114261 25.1056923915355, 121.730585816165 25.1058326382289, 121.730920849933 25.105945614732, 121.731166281646 25.1059806764054, 121.731688311005 25.1059261360246, 121.731937638461 25.1058209510045, 121.733102465165 25.105158674952, 121.73492567218 25.1046152190148, 121.735510033403 25.1035322028819, 121.735671706674 25.1031017234477, 121.735882076714 25.1026585828538, 121.735903503293 25.1013992844187, 121.735958043673 25.1007409041076, 121.7360028447 25.1004633325268, 121.73615867436 25.1000133743853, 121.736265807251 25.0998741016272, 121.735866493748 25.0994494658053, 121.735130198608 25.0987608934977, 121.734923724309 25.0985115660427, 121.734789321228 25.0982008806592, 121.734629595827 25.0975444482189, 121.734286770576 25.0968948333263, 121.734240021678 25.0966464798066, 121.734234178066 25.0962413226921, 121.73427118761 25.0960689361314, 121.734487401263 25.095538141354, 121.735032805071 25.0945057698604, 121.735455493022 25.0935630004209, 121.735720403443 25.0926056219509, 121.737083912963 25.09278677393, 121.738166929096 25.0929016983038, 121.738897380624 25.0932045922043, 121.739088271957 25.094069446814, 121.739062949637 25.0945096656019, 121.74109068308 25.0944814214761, 121.742391860736 25.0944853172176, 121.744067029575 25.0950443561207, 121.744234546459 25.0950618869574, 121.745150045708 25.0948651520124, 121.745730511189 25.094709322353, 121.745987630127 25.0946976351286, 121.747448533184 25.094769706346, 121.748268586767 25.0949177445225, 121.748556871637 25.0950784438587, 121.748652317303 25.0951738895251, 121.748743867228 25.0953199798308, 121.74942951773 25.0952245341644, 121.749655470736 25.0952245341644, 121.750002191728 25.0952362213889, 121.750816401698 25.0954134776265, 121.75176501475 25.0955809945103, 121.7528402394 25.0957280587514, 121.753755738649 25.0958215565471, 121.754616697517 25.0962685928825, 121.754846546265 25.0959588814344, 121.754850442006 25.0951914203618, 121.754725778279 25.0946869218395, 121.754575792232 25.094016854304, 121.754447232763 25.0927293117431, 121.754511512497 25.0923913561692, 121.754396588123 25.0920806707858, 121.754314777552 25.0912762001691, 121.75430893394 25.0910132376188, 121.754451128504 25.0904191370423, 121.754507616756 25.0904327721375, 121.754464763599 25.0905905496677, 121.754367370062 25.0910882306424, 121.754437493409 25.0920777489797, 121.754581635844 25.0923981737168, 121.754497877402 25.0927497643859, 121.754632280483 25.0940207500455, 121.754778370789 25.0947239313836, 121.754914721741 25.0952001857802, 121.754897190904 25.0959988127846, 121.754645915578 25.0963036545559, 121.753750868972 25.095855644285, 121.752743819798 25.095742667782, 121.751493286781 25.0955576200614, 121.750538830118 25.0953998425313, 121.749987582697 25.0952683612561, 121.749594112807 25.095239143195, 121.748744841164 25.0953521196981, 121.748824703864 25.0973077819237, 121.748842234701 25.09825542104, 121.751202673075 25.0982959879575, 121.752169164817 25.0983106823862, 121.753664032421 25.0984870153922, 121.754784676046 25.0987184520768, 121.75604324504 25.098975603435, 121.758117196364 25.0994017387813, 121.758783497596 25.09953398738, 121.759157721575 25.0995192930983, 121.759433572314 25.0994605159539, 121.761312805469 25.0988837637263, 121.76195476693 25.0986780425285, 121.763002391242 25.098375888892, 121.763274185352 25.0983281320179, 121.765312641176 25.0983685416818, 121.766356208859 25.0985926313938, 121.766977887178 25.0988424358348, 121.767318643972 25.0990665246787, 121.76753465944 25.0993429615804, 121.768022469018 25.1001226755879, 121.76809954496 25.1004386006966, 121.768176620901 25.1017840284317, 121.768188790787 25.1019677034248, 121.768363225813 25.1026592372996, 121.768984904131 25.1037520916256, 121.769650191206 25.1051342169344, 121.769804343089 25.1053289070848, 121.77153348099 25.1066715260031, 121.771968554397 25.1068882538037, 121.772309311192 25.1069470273783, 121.772650067986 25.1068772337553, 121.773709862183 25.1065282650427, 121.774200714233 25.1063262300697, 121.774460338457 25.1060286870472, 121.774602320455 25.1056200233823, 121.775061733633 25.1028667885363, 121.775053620376 25.1019879076572, 121.775086073404 25.1017785181776, 121.775155036089 25.1015691283396, 121.775387278071 25.1012550429103, 121.776291906228 25.1002558417943, 121.77655558708 25.1000060402398, 121.776721908849 25.0998958335095, 121.778268498467 25.0993144913636, 121.779036215412 25.0989462147357, 121.780213651836 25.0978321941464, 121.780424596518 25.0977219854575, 121.780802877126 25.0976044294132, 121.781054388094 25.0976191239249, 121.781395144888 25.0977440272032, 121.781688236298 25.0979313818816, 121.782475222228 25.0987028392983, 121.782649657253 25.0988754981491, 121.782942748663 25.0990077473168, 121.784959907188 25.0996919507966, 121.785305734768 25.0999463449399, 121.785524792707 25.1004422742396, 121.78562620842 25.1010493257008, 121.785670831333 25.1015966796545, 121.785622151791 25.1021045411154, 121.785605925277 25.1030421966077, 121.785646491562 25.103314032703, 121.785824983217 25.103840254238, 121.786690059245 25.1051746243496, 121.788671722271 25.1083924810877, 121.788789364497 25.1085430864632, 121.789431325958 25.109128058022, 121.789772082753 25.1093998805883, 121.791010368604 25.109977501535, 121.791972803717 25.1103530914336, 121.793219202826 25.110437576044, 121.79417758131 25.1104963479125, 121.794680603245 25.110437576044, 121.796779908497 25.1099563803084, 121.797153118319 25.1098461825452, 121.797381303673 25.1097433312098, 121.798298101715 25.10920244196, 121.798634801881 25.1089342922427, 121.798867043863 25.1086174707571, 121.799151007859 25.1079195422694, 121.799333556141 25.1076477164121, 121.800275708112 25.1069745774817, 121.80049882268 25.1068607036808, 121.800786843304 25.1067505031275, 121.802307064836 25.1064786746712, 121.804351605603 25.1061554184231, 121.804709115462 25.1072245136143, 121.805038305617 25.1083591483218, 121.806099895172 25.1081059251253, 121.80832436356 25.1076024005384)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0463008900'=='0100020200' || '0463008900'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
