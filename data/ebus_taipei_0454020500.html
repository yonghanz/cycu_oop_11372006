
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492886</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020500">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020500">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020500" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0454020500" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020500" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0454020500',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="Y9n1N5qIallSbCTq1uYyQdPhAppta35x12o--n33QCen7T6SjOECXn-kPOX7M8PTdkcWfbizdmSFShGHWf9S9N4oOIg1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/new_taipei_city.svg" width="100%" class="vipstop-city" alt="新北市">                
 <span class="stationlist-title">F205 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0454020500" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0454020500" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">新北市政府交通局公車申訴服務電話02-89682460</a></div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">福興里站 - 林口長庚醫院</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0730 - 1300 <br>
                        [假日] 停駛
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> F205林口長庚醫院班表:1130<br/>F205福興里班表:0730 1300<br>
[假日]<br /> <br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">新莊區公所新莊區公所站:(02)2992-9891</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">例假日停駛</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 林口長庚醫院</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 福興里站</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">福興里站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2488900100" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.065762" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.460595" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">中山路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425300640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059946" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.464893" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">中原路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425300540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054933" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4659345" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">頭前國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425200540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052813" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.466189" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">幸福東路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424700840" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.05024" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4658136" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">福壽公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425100440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051924" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4577241" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">幸福路站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425101040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.048232" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.458099" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">思賢國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425400440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045887" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4577133" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">頂好超市站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425400660" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040628" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.456336" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中港社區活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425400000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.041815" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4549281" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">中華路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424900400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.046303" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.453663" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">天莊社區站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424500260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.050872" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4523735" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">幸福路郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424801860" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04917" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.44878" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">中港國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424801040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.044765" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.447964" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">中美市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424700040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.042346" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.452475" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">材試所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424200100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039479" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446462" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">新泰國中北站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424200300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.043704" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.443917" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">新泰游泳池</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424200500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045687" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.442745" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">新莊高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424900700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04801" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4449156" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">林口長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3330500020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062056" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.367396" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">林口長庚醫院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="3330500020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.062056" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.367396" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">新莊高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424900740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047888" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4447176" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">新泰游泳池</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424200540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045563" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.44267" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">新泰國中北站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424200340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.043577" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.44377" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">材試所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424200140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039119" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.446484" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">中美市場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424500000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.042015" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4527197" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">中港國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424800100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.044984" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.44798" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">幸福路郵局</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424801820" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.048981" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4486287" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">天莊社區站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424500220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.050817" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4524287" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中華路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424900440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04652" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.45338" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">中港社區活動中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425400040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.041697" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.4548368" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">頂好超市站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425400620" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040552" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.456373" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">思賢國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425400400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045227" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.457863" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">幸福路站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425101010" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04823" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.458149" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">福壽公園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425100400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051721" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.457786" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">幸福東路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2424700800" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.050224" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.46594" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">頭前國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425200500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053343" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.466381" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">中原路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425300500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.055358" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.46612" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">中山路</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2425300600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.059964" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.464997" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">福興里站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="2488900100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.065762" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.460595" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0454020500";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 20;
        var existBackNum = 20;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0454020500',
                        url: './StopStatusRecent3OfRoute?routeid=0454020500&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0454020500',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0454020500',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0454020500');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0454020500","Name":"F205","BeginStop":"福興里站","GoDirStops":[{"UniStopId":"2488900100","Name":"福興里站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.460595,"Latitude":25.065762,"PublicId":"2488900100"},{"UniStopId":"2425300640","Name":"中山路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.464893,"Latitude":25.059946,"PublicId":"2425300640"},{"UniStopId":"2425300540","Name":"中原路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4659345,"Latitude":25.054933,"PublicId":"2425300540"},{"UniStopId":"2425200540","Name":"頭前國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.466189,"Latitude":25.052813,"PublicId":"2425200540"},{"UniStopId":"2424700840","Name":"幸福東路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4658136,"Latitude":25.05024,"PublicId":"2424700840"},{"UniStopId":"2425100440","Name":"福壽公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4577241,"Latitude":25.051924,"PublicId":"2425100440"},{"UniStopId":"2425101040","Name":"幸福路站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.458099,"Latitude":25.048232,"PublicId":"2425101040"},{"UniStopId":"2425400440","Name":"思賢國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4577133,"Latitude":25.045887,"PublicId":"2425400440"},{"UniStopId":"2425400660","Name":"頂好超市站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.456336,"Latitude":25.040628,"PublicId":"2425400660"},{"UniStopId":"2425400000","Name":"中港社區活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4549281,"Latitude":25.041815,"PublicId":"2425400000"},{"UniStopId":"2424900400","Name":"中華路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.453663,"Latitude":25.046303,"PublicId":"2424900400"},{"UniStopId":"2424500260","Name":"天莊社區站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4523735,"Latitude":25.050872,"PublicId":"2424500260"},{"UniStopId":"2424801860","Name":"幸福路郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.44878,"Latitude":25.04917,"PublicId":"2424801860"},{"UniStopId":"2424801040","Name":"中港國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.447964,"Latitude":25.044765,"PublicId":"2424801040"},{"UniStopId":"2424700040","Name":"中美市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.452475,"Latitude":25.042346,"PublicId":"2424700040"},{"UniStopId":"2424200100","Name":"材試所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446462,"Latitude":25.039479,"PublicId":"2424200100"},{"UniStopId":"2424200300","Name":"新泰國中北站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.443917,"Latitude":25.043704,"PublicId":"2424200300"},{"UniStopId":"2424200500","Name":"新泰游泳池","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.442745,"Latitude":25.045687,"PublicId":"2424200500"},{"UniStopId":"2424900700","Name":"新莊高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4449156,"Latitude":25.04801,"PublicId":"2424900700"},{"UniStopId":"3330500020","Name":"林口長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367396,"Latitude":25.062056,"PublicId":"3330500020"}],"LastStop":"林口長庚醫院","BackDirStops":[{"UniStopId":"3330500020","Name":"林口長庚醫院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.367396,"Latitude":25.062056,"PublicId":"3330500020"},{"UniStopId":"2424900740","Name":"新莊高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4447176,"Latitude":25.047888,"PublicId":"2424900740"},{"UniStopId":"2424200540","Name":"新泰游泳池","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.44267,"Latitude":25.045563,"PublicId":"2424200540"},{"UniStopId":"2424200340","Name":"新泰國中北站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.44377,"Latitude":25.043577,"PublicId":"2424200340"},{"UniStopId":"2424200140","Name":"材試所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.446484,"Latitude":25.039119,"PublicId":"2424200140"},{"UniStopId":"2424500000","Name":"中美市場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4527197,"Latitude":25.042015,"PublicId":"2424500000"},{"UniStopId":"2424800100","Name":"中港國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.44798,"Latitude":25.044984,"PublicId":"2424800100"},{"UniStopId":"2424801820","Name":"幸福路郵局","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4486287,"Latitude":25.048981,"PublicId":"2424801820"},{"UniStopId":"2424500220","Name":"天莊社區站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4524287,"Latitude":25.050817,"PublicId":"2424500220"},{"UniStopId":"2424900440","Name":"中華路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.45338,"Latitude":25.04652,"PublicId":"2424900440"},{"UniStopId":"2425400040","Name":"中港社區活動中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.4548368,"Latitude":25.041697,"PublicId":"2425400040"},{"UniStopId":"2425400620","Name":"頂好超市站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.456373,"Latitude":25.040552,"PublicId":"2425400620"},{"UniStopId":"2425400400","Name":"思賢國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.457863,"Latitude":25.045227,"PublicId":"2425400400"},{"UniStopId":"2425101010","Name":"幸福路站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.458149,"Latitude":25.04823,"PublicId":"2425101010"},{"UniStopId":"2425100400","Name":"福壽公園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.457786,"Latitude":25.051721,"PublicId":"2425100400"},{"UniStopId":"2424700800","Name":"幸福東路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.46594,"Latitude":25.050224,"PublicId":"2424700800"},{"UniStopId":"2425200500","Name":"頭前國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.466381,"Latitude":25.053343,"PublicId":"2425200500"},{"UniStopId":"2425300500","Name":"中原路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.46612,"Latitude":25.055358,"PublicId":"2425300500"},{"UniStopId":"2425300600","Name":"中山路","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.464997,"Latitude":25.059964,"PublicId":"2425300600"},{"UniStopId":"2488900100","Name":"福興里站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.460595,"Latitude":25.065762,"PublicId":"2488900100"}],"RouteMapUrl":"../MapOverview?nid=0454020500","RouteTracks":null,"StopDirection":null,"TicketPrice":"","BusTimeDesc":"0730 - 1300","HeadwayDesc":"F205林口長庚醫院班表:1130;F205福興里班表:0730 1300","HolidayBusTimeDesc":"停駛","HolidayHeadwayDesc":"","RouteNote":"例假日停駛","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"新莊區公所新莊區公所站:(02)2992-9891","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.46070500428 25.0655780555131, 121.460332464013 25.0658787452629, 121.459611301433 25.0651437610454, 121.458462514812 25.0639597017167, 121.457966579641 25.0634412002737, 121.458815304646 25.0627505181467, 121.459634313405 25.0620657410535, 121.459770573269 25.0618897862063, 121.459872043381 25.0617505978646, 121.459906833133 25.0616271665614, 121.459930751088 25.0606232977806, 121.462112358489 25.0608675360697, 121.463853295691 25.0610960166091, 121.464639689057 25.0612352056944, 121.464944099392 25.0600941131509, 121.465217343907 25.0589740200318, 121.465521754242 25.0577830070903, 121.465626123499 25.0573700236047, 121.46577977824 25.0566760243744, 121.465924735542 25.0561553582279, 121.46604360053 25.0556451951797, 121.466159566372 25.0546255192998, 121.466330615989 25.0533537030458, 121.466290027945 25.0527693328667, 121.466107381743 25.0517017010531, 121.466020407362 25.0511449004524, 121.465939231273 25.050594663412, 121.465868202195 25.0493352810339, 121.462967606574 25.0494245807319, 121.459733609157 25.049444935801, 121.459713315135 25.0524856825171, 121.459338962901 25.0524975012947, 121.459231694497 25.0525224520439, 121.458027824101 25.0525211388467, 121.457962593315 25.0523067592158, 121.457781396687 25.051712535002, 121.457617594935 25.0514246142779, 121.457879967653 25.0511156814831, 121.458022025809 25.0507538909718, 121.458113348909 25.0504505376693, 121.458197424145 25.0500834923017, 121.45823366347 25.0498392325215, 121.45826700365 25.0494853176217, 121.458272801942 25.048839863513, 121.458238012189 25.0486123450543, 121.458169882257 25.0482928992331, 121.458030723247 25.0479366816882, 121.457925991596 25.0477853299573, 121.45773609753 25.047592282359, 121.457533157307 25.0474448699577, 121.457628829126 25.047321424247, 121.4577216018 25.0470952162257, 121.457763639417 25.0468522637498, 121.457831769349 25.0462566998329, 121.457868008675 25.0450524305495, 121.457920193304 25.0433983467532, 121.457992671955 25.0414651613931, 121.457966579641 25.0412901619615, 121.45793976254 25.0411921556041, 121.457796979597 25.0409741445316, 121.457650210328 25.040839857398, 121.457522647902 25.0407755045874, 121.45729651451 25.0407019584769, 121.457129813613 25.0406691253776, 121.456103515912 25.0405325395902, 121.455200069524 25.0404104002477, 121.454960527582 25.0414104946181, 121.454824267718 25.0420458096884, 121.454731495044 25.0423560786428, 121.454664452292 25.0424654113255, 121.454555734315 25.0425599692426, 121.454325252204 25.0426689734178, 121.454145142756 25.0427362801643, 121.45389400423 25.0431138539111, 121.453807029848 25.0432924623046, 121.453588144322 25.0435117825495, 121.453200745931 25.0438499552124, 121.453074633078 25.0439970436135, 121.452903583461 25.0442771020682, 121.453007952719 25.0444901824569, 121.453386653671 25.0449028810165, 121.45358234603 25.045205263089, 121.453653375108 25.0454091489515, 121.453676568276 25.0457811330734, 121.453672219557 25.0459876445128, 121.453604089625 25.046214839526, 121.453543207558 25.0463425544569, 121.45305143991 25.0471324798399, 121.452759713339 25.0477214732598, 121.452640848351 25.0481069111233, 121.452575617565 25.0488784398332, 121.452601709879 25.0492888254667, 121.452801750956 25.0501092643066, 121.452827480877 25.0508239838629, 121.452031665287 25.0508134781394, 121.452241853376 25.0500944905465, 121.452402755981 25.049196570896, 121.451350728359 25.0491581588301, 121.449788088639 25.0491213882942, 121.448356272885 25.0490714854063, 121.447365489723 25.049079364811, 121.447365489723 25.0486203886434, 121.447493052149 25.0474942810384, 121.447578576958 25.0469893349694, 121.447796375304 25.0457932808148, 121.44795727791 25.0451382860167, 121.448156231808 25.0440416954147, 121.448270748077 25.0434713987614, 121.448481298558 25.0427379217918, 121.449737353584 25.0431598193314, 121.450307760568 25.0432793293433, 121.45159788056 25.04353016866, 121.452691583406 25.043712059676, 121.45262852698 25.0434860091578, 121.452609682531 25.0432087396525, 121.452622728688 25.0428324794988, 121.45265751844 25.0423357223969, 121.452663316732 25.0417532696695, 121.452641573137 25.041250269936, 121.452624178261 25.041088403395, 121.452471973093 25.040281037478, 121.452383186746 25.0400456231537, 121.452010646478 25.0400246098587, 121.451090530001 25.039869636697, 121.44977141855 25.0395370347375, 121.448792231972 25.0392254453117, 121.447717373575 25.0387782523604, 121.446925181917 25.0384433490824, 121.445915554306 25.04018877613, 121.445103068626 25.0414699221622, 121.444131129913 25.0431581777095, 121.44345907162 25.0443076359525, 121.442753854344 25.0454515020108, 121.442101546483 25.0465795982692, 121.441480404442 25.0476288891973, 121.440709231594 25.048901421465, 121.440935364985 25.0489775891281, 121.441106414602 25.0490274920542, 121.441274565073 25.0490485038064, 121.442034866124 25.0490642626183, 121.444823119836 25.0490616361498, 121.444776733499 25.0494037331979, 121.444680336893 25.0524930692532, 121.444642647994 25.0543098645351, 121.444567270197 25.0543912815465, 121.444523783006 25.0559900643197, 121.444422312894 25.0562448171021, 121.4442715573 25.0564129011222, 121.443314114318 25.0572434691658, 121.44242625084 25.0566578043795, 121.442214613179 25.0572644795097, 121.442174025134 25.0579190812329, 121.442130537944 25.0583195880856, 121.441910202844 25.0587870632811, 121.441457211274 25.059528979523, 121.440531658898 25.0610876455624, 121.439640896275 25.0625419011778, 121.438637066956 25.0642764805624, 121.437879665051 25.0656361582843, 121.437752102625 25.0661357753264, 121.437596998311 25.066871081853, 121.437504225637 25.0673444330943, 121.437353470043 25.0676884486601, 121.437193292224 25.0678781820225, 121.436804806653 25.0681591706836, 121.436540984363 25.0682589608941, 121.436074221849 25.0682799693492, 121.435403069539 25.0682405784931, 121.432519144008 25.0681276579687, 121.43185378999 25.0681959355075, 121.429587382567 25.0681013973667, 121.428186370239 25.0680278676511, 121.426979600697 25.0678020261061, 121.426111306455 25.067570275483, 121.425113275428 25.0672288856646, 121.424196420491 25.0667791687786, 121.422641028636 25.0658114512236, 121.421013882917 25.0648017079318, 121.418819954145 25.0634558082899, 121.417209478515 25.0624276623094, 121.415799043963 25.0615498577962, 121.414424123949 25.0607035616269, 121.413042680858 25.0598723604754, 121.411957675449 25.0592046379309, 121.410683500761 25.0584055984029, 121.409250597827 25.0575303913635, 121.408498269427 25.0570412444214, 121.407288600739 25.0563314854537, 121.406615274069 25.0560077919788, 121.405689721693 25.0556453593251, 121.405062781361 25.0554772742523, 121.404610514577 25.0553906052966, 121.40397415202 25.055309188949, 121.403000038947 25.0552986836099, 121.402576038838 25.0553380786269, 121.401667881338 25.0554904059069, 121.400704640064 25.0557930901558, 121.400081323664 25.0560662275781, 121.399523238049 25.0563767893404, 121.398841938728 25.0568127563217, 121.398168612058 25.05739119807, 121.397754034174 25.0578087774763, 121.396795866405 25.0590293355389, 121.395647079783 25.0605065950391, 121.394967954822 25.0612248650013, 121.393737992111 25.0625051346571, 121.393070463733 25.0630940542065, 121.392399311423 25.0635910554587, 121.391854271966 25.0639350815648, 121.391250524802 25.0642377449548, 121.390132904 25.0646270700813, 121.389535679914 25.0647321154347, 121.388841334436 25.0648476652195, 121.387640363185 25.0649185707152, 121.386885860426 25.0648923094253, 121.386142954251 25.0648371606981, 121.384599883767 25.0645850519148, 121.383427903978 25.0644274836617, 121.382818358521 25.0644117268253, 121.382270419918 25.0644484927738, 121.381802932618 25.064514146226, 121.381277462396 25.0646402007554, 121.380656320356 25.0648214039143, 121.37866895574 25.0655101047795, 121.37768179651 25.0657727161013, 121.376646076585 25.0659092737661, 121.375914766994 25.0659197781955, 121.375345809582 25.0658882649045, 121.374118746018 25.0657536767994, 121.3737650502 25.0656512584349, 121.372787313195 25.0655199527143, 121.372021213852 25.06537289014, 121.370964475117 25.0651227520525, 121.369119893444 25.0646474226256, 121.368780693357 25.064518085432, 121.369241657578 25.0630198649431, 121.36971711753 25.0620422694793, 121.369888167147 25.0617507620019, 121.369194546455 25.061771771573, 121.367402149411 25.0620265123361, 121.366541103035 25.0621236813536, 121.366601985102 25.0624493283099, 121.367906600823 25.0622471121566, 121.369490984138 25.0620475218599, 121.369140187467 25.0627073503845, 121.369018423333 25.0630119864346, 121.368519770212 25.0648161516526, 121.368424098393 25.0658830126885, 121.369383715735 25.0658541254967, 121.36992078254 25.0659250304099, 121.371009411881 25.0660720923213, 121.373118540631 25.0662611716623, 121.375149392438 25.0664476246155, 121.376396723013 25.0664747710115, 121.377265044266 25.0663977287826, 121.378166678687 25.0662244062577, 121.37937127387 25.0658830126885, 121.379972121888 25.0656046449202, 121.381242672644 25.0651969400425, 121.381665947967 25.0650892689626, 121.382972738048 25.0649317013581, 121.383753333121 25.0649763455333, 121.384479569206 25.0650872993688, 121.386178468791 25.0654129384478, 121.386994578403 25.0654838436164, 121.387916506846 25.0654733391496, 121.388822489986 25.0654096558001, 121.390003892001 25.0652337057554, 121.39055255539 25.0650938646813, 121.391201964105 25.0649100357966, 121.392179320418 25.0644634560312, 121.392980590206 25.0639377077146, 121.39389816993 25.0631354163427, 121.395661575513 25.0613325394773, 121.39636679279 25.0604882114748, 121.397121295549 25.0595073130062, 121.398197603519 25.0581350924685, 121.398568694213 25.0577378678661, 121.398975299446 25.0573537734311, 121.399546431218 25.0569204346746, 121.400165398899 25.0565468429107, 121.401418554778 25.0560655709985, 121.401912134393 25.0559578918945, 121.402750712387 25.0558528390189, 121.403894425503 25.0558213231387, 121.40526862073 25.0560314288538, 121.406180402162 25.0563209802022, 121.407269031503 25.0567707354754, 121.408603363472 25.0575349873658, 121.408847616526 25.0577509992784, 121.410353722898 25.0587161542369, 121.412213525088 25.0598598858496, 121.41352327919 25.0606386737841, 121.416672774103 25.0627316425111, 121.417665731624 25.0633789930838, 121.418482272885 25.0638372738472, 121.419521185095 25.0644038484063, 121.420377157966 25.0648877136989, 121.42193254982 25.0658396818982, 121.42308785952 25.0665677684456, 121.424046713843 25.0672046930314, 121.425312954112 25.0677376874501, 121.425815231165 25.0678637386626, 121.427463395693 25.0680738237285, 121.428699418087 25.0682290662673, 121.430185693832 25.0683246123041, 121.431063412726 25.0684131608392, 121.431704121575 25.0684690452821, 121.434385106883 25.068642364631, 121.436343480038 25.0688393181389, 121.438600465237 25.0691918641271, 121.438829497774 25.0692758972855, 121.439009244829 25.0694085119964, 121.439103467076 25.0696780082808, 121.439103467076 25.0698739753649, 121.43899040038 25.0700761789287, 121.438781299471 25.0702547480322, 121.43855081736 25.0703650405837, 121.438308376272 25.0704526837011, 121.437931124893 25.0704185455654, 121.437793415455 25.0703607733142, 121.437676000041 25.0702701758653, 121.437593374378 25.0701204929768, 121.437546988041 25.0699498017404, 121.437770222287 25.0685146729375, 121.437744129973 25.0679966831602, 121.43781733341 25.0676520119426, 121.437860820601 25.067157653246, 121.438026071926 25.0663928048506, 121.438342078845 25.0654303364791, 121.441458660847 25.0602482400515, 121.442184545846 25.059157714775, 121.44247408675 25.0586895633348, 121.442589983327 25.0578035383883, 121.442624842344 25.0576380690859, 121.442617594479 25.0571981655994, 121.443096315971 25.0575408965113, 121.443469218631 25.0572845049903, 121.444225170963 25.0566115157316, 121.444464712905 25.056452295781, 121.444585027466 25.0564142142777, 121.444638661668 25.0563301722973, 121.444648808679 25.0559519826726, 121.444711140319 25.052899831505, 121.444745930072 25.051498318108, 121.444779270251 25.0504887851778, 121.444812610431 25.0494424734943, 121.444868781386 25.0490031972111, 121.441348130904 25.0489953178015, 121.441039009456 25.0489611736874, 121.440827371795 25.048861367761, 121.441622462598 25.0474877147829, 121.442060233652 25.0467568883555, 121.44323873652 25.0447607185032, 121.444277095487 25.0430417086608, 121.444764412128 25.0421997951194, 121.445260890889 25.0413172491318, 121.445778750851 25.040539106218, 121.446060330411 25.0400551448017, 121.446540501476 25.0392073868907, 121.44697283663 25.0385132848424, 121.448776105472 25.0392540104447, 121.449699845881 25.0395560781119, 121.451072591535 25.0399027983433, 121.451580485683 25.0399940749079, 121.452349121779 25.040086664735, 121.452432109835 25.0402908874398, 121.452565470553 25.0409770995035, 121.452598810733 25.0412292568474, 121.452619104755 25.0416104468478, 121.452623453474 25.0422900849944, 121.452583361088 25.0426314415954, 121.452569819272 25.0431739372783, 121.452595911587 25.0435104692557, 121.452618742362 25.0436312922184, 121.450426625556 25.0432510934718, 121.449793886931 25.043113853911, 121.448458830176 25.042655512064, 121.448308074582 25.0431788621432, 121.448205154897 25.0436060113366, 121.448031206134 25.0445394305679, 121.447936983888 25.0450824717618, 121.447819206079 25.045526686863, 121.447745277855 25.045906878554, 121.447487253857 25.0472611787551, 121.447326351251 25.0486125092091, 121.447328163217 25.049148966197, 121.448077592471 25.0491371470965, 121.448700184085 25.0491515926637, 121.449505421899 25.0491804837928, 121.450983986384 25.0492133146132, 121.452325928611 25.0492582928228, 121.452151979848 25.0501309324848, 121.451947590052 25.0508512330791, 121.452901771495 25.0508607538881, 121.452871330461 25.0500705242207, 121.452661142373 25.0492996596287, 121.452648096215 25.0488748284335, 121.452716226148 25.0481426970304, 121.452823494551 25.0477680935768, 121.452939098 25.0474811485271, 121.453165231392 25.0470727267261, 121.453672944343 25.0462470145082, 121.453743973422 25.0459502163921, 121.453754120433 25.0457857295162, 121.453732739231 25.0454528152836, 121.453648663995 25.0451780126178, 121.453439563087 25.0448546180107, 121.453095651887 25.0444905107776, 121.452985484337 25.044308292595, 121.453139139077 25.0440177279057, 121.453241696369 25.0438932937774, 121.45362583322 25.0435774472171, 121.453812103354 25.0433843929938, 121.453893641836 25.0432803143154, 121.453963221341 25.0431450447338, 121.454195515418 25.0427924238123, 121.454582551416 25.0426216945102, 121.454713375381 25.0425163018801, 121.454791652325 25.0424046709582, 121.454882975425 25.0421206683015, 121.455023584008 25.0414449691637, 121.455268924243 25.0404563666811, 121.457080528129 25.0406930935409, 121.457459229082 25.040782399533, 121.457589690654 25.0408401857285, 121.457746606934 25.0409744728617, 121.457911858259 25.0412134970285, 121.45795099673 25.0414531773874, 121.457911858259 25.0427517114619, 121.45787416936 25.0437278191737, 121.457800241136 25.0460759616994, 121.45774950608 25.0466741530138, 121.457691523159 25.0470815912009, 121.457597300913 25.0473025462349, 121.457463940194 25.0474499588073, 121.457700220597 25.0476180548875, 121.457903523214 25.0478094608856, 121.458002094179 25.0479683637513, 121.458114073696 25.0482470998923, 121.458167707897 25.048433908565, 121.458219892526 25.0487310289782, 121.458238736976 25.0490268354368, 121.458222791672 25.0494027482749, 121.458196699358 25.0497576483332, 121.458164808751 25.0500508258673, 121.45800100699999 25.0507291040146, 121.457822709518 25.0511407966649, 121.457565772699 25.0514205104997, 121.457737184709 25.0517192651818, 121.457989772809 25.0525406726534, 121.459243291081 25.0525459254413, 121.459349109912 25.0525104691188, 121.460042005818 25.0524976654443, 121.460052152829 25.0495015688383, 121.462034806332 25.04949631592, 121.465791012431 25.0494004501213, 121.46587218852 25.0505731594679, 121.466028742407 25.051618148294, 121.466234581776 25.0528033117707, 121.466254875798 25.0534533411662, 121.46598235607 25.0556561929253, 121.465880885958 25.0561249914391, 121.465570677331 25.0573101113378, 121.464946636144 25.0598369062724, 121.464622656573 25.0610016371275, 121.463824666624 25.060844064266, 121.461206375349 25.0605262917121, 121.459783981819 25.0603608395603, 121.459785431392 25.0616962684099, 121.459622771021 25.0619566006063, 121.45787416936 25.0633773517327, 121.460337356321 25.0659227325661, 121.460711346161 25.0656167906968)","wkt0":"LINESTRING (121.460711346161 25.0656167906968, 121.460337356321 25.0659227325661, 121.45787416936 25.0633773517327, 121.459622771021 25.0619566006063, 121.459785431392 25.0616962684099, 121.459783981819 25.0603608395603, 121.461206375349 25.0605262917121, 121.463824666624 25.060844064266, 121.464622656573 25.0610016371275, 121.464946636144 25.0598369062724, 121.465570677331 25.0573101113378, 121.465880885958 25.0561249914391, 121.46598235607 25.0556561929253, 121.466254875798 25.0534533411662, 121.466234581776 25.0528033117707, 121.466028742407 25.051618148294, 121.46587218852 25.0505731594679, 121.465791012431 25.0494004501213, 121.462034806332 25.04949631592, 121.460052152829 25.0495015688383, 121.460042005818 25.0524976654443, 121.459349109912 25.0525104691188, 121.459243291081 25.0525459254413, 121.457989772809 25.0525406726534, 121.457737184709 25.0517192651818, 121.457565772699 25.0514205104997, 121.457822709518 25.0511407966649, 121.45800100699999 25.0507291040146, 121.458164808751 25.0500508258673, 121.458196699358 25.0497576483332, 121.458222791672 25.0494027482749, 121.458238736976 25.0490268354368, 121.458219892526 25.0487310289782, 121.458167707897 25.048433908565, 121.458114073696 25.0482470998923, 121.458002094179 25.0479683637513, 121.457903523214 25.0478094608856, 121.457700220597 25.0476180548875, 121.457463940194 25.0474499588073, 121.457597300913 25.0473025462349, 121.457691523159 25.0470815912009, 121.45774950608 25.0466741530138, 121.457800241136 25.0460759616994, 121.45787416936 25.0437278191737, 121.457911858259 25.0427517114619, 121.45795099673 25.0414531773874, 121.457911858259 25.0412134970285, 121.457746606934 25.0409744728617, 121.457589690654 25.0408401857285, 121.457459229082 25.040782399533, 121.457080528129 25.0406930935409, 121.455236396287 25.0404382248004, 121.454990112015 25.041425776441, 121.454944235533 25.0416575734031, 121.454845238914 25.0420994363621, 121.454763144156 25.0424036698748, 121.454713375381 25.0425163018801, 121.454582551416 25.0426216945102, 121.454195515418 25.0427924238123, 121.453963221341 25.0431450447338, 121.453893641836 25.0432803143154, 121.453812103354 25.0433843929938, 121.45362583322 25.0435774472171, 121.453241696369 25.0438932937774, 121.453139139077 25.0440177279057, 121.452985484337 25.044308292595, 121.453095651887 25.0444905107776, 121.453439563087 25.0448546180107, 121.453648663995 25.0451780126178, 121.453732739231 25.0454528152836, 121.453754120433 25.0457857295162, 121.453743973422 25.0459502163921, 121.453672944343 25.0462470145082, 121.453165231392 25.0470727267261, 121.452939098 25.0474811485271, 121.452823494551 25.0477680935768, 121.452716226148 25.0481426970304, 121.452648096215 25.0488748284335, 121.452661142373 25.0492996596287, 121.452871330461 25.0500705242207, 121.452901771495 25.0508607538881, 121.451947590052 25.0508512330791, 121.452151979848 25.0501309324848, 121.452325928611 25.0492582928228, 121.450983986384 25.0492133146132, 121.449505421899 25.0491804837928, 121.448700184085 25.0491515926637, 121.448077592471 25.0491371470965, 121.447328163217 25.049148966197, 121.447326351251 25.0486125092091, 121.447487253857 25.0472611787551, 121.447745277855 25.045906878554, 121.447819206079 25.045526686863, 121.447936983888 25.0450824717618, 121.448031206134 25.0445394305679, 121.448205154897 25.0436060113366, 121.448308074582 25.0431788621432, 121.448458830176 25.042655512064, 121.449793886931 25.043113853911, 121.450426625556 25.0432510934718, 121.452618742362 25.0436312922184, 121.452595911587 25.0435104692557, 121.452569819272 25.0431739372783, 121.452583361088 25.0426314415954, 121.452623453474 25.0422900849944, 121.452619104755 25.0416104468478, 121.452598810733 25.0412292568474, 121.452565470553 25.0409770995035, 121.452432109835 25.0402908874398, 121.452349121779 25.040086664735, 121.451580485683 25.0399940749079, 121.451072591535 25.0399027983433, 121.449699845881 25.0395560781119, 121.448776105472 25.0392540104447, 121.44697283663 25.0385132848424, 121.446540501476 25.0392073868907, 121.446060330411 25.0400551448017, 121.445778750851 25.040539106218, 121.445260890889 25.0413172491318, 121.444764412128 25.0421997951194, 121.444277095487 25.0430417086608, 121.44323873652 25.0447607185032, 121.442370527538 25.0462423568643, 121.442894165369 25.046449056008, 121.444819599211 25.046388925348, 121.444829620987 25.0471205150445, 121.444868781386 25.0490031972111, 121.444812610431 25.0494424734943, 121.444779270251 25.0504887851778, 121.444745930072 25.051498318108, 121.444711140319 25.052899831505, 121.444648808679 25.0559519826726, 121.444638661668 25.0563301722973, 121.444585027466 25.0564142142777, 121.444464712905 25.056452295781, 121.444225170963 25.0566115157316, 121.443469218631 25.0572845049903, 121.443096315971 25.0575408965113, 121.442617594479 25.0571981655994, 121.442624842344 25.0576380690859, 121.442589983327 25.0578035383883, 121.44247408675 25.0586895633348, 121.442184545846 25.059157714775, 121.441458660847 25.0602482400515, 121.438342078845 25.0654303364791, 121.438026071926 25.0663928048506, 121.437860820601 25.067157653246, 121.43781733341 25.0676520119426, 121.437744129973 25.0679966831602, 121.437770222287 25.0685146729375, 121.437546988041 25.0699498017404, 121.437593374378 25.0701204929768, 121.437676000041 25.0702701758653, 121.437793415455 25.0703607733142, 121.437931124893 25.0704185455654, 121.438308376272 25.0704526837011, 121.43855081736 25.0703650405837, 121.438781299471 25.0702547480322, 121.43899040038 25.0700761789287, 121.439103467076 25.0698739753649, 121.439103467076 25.0696780082808, 121.439009244829 25.0694085119964, 121.438829497774 25.0692758972855, 121.438600465237 25.0691918641271, 121.436343480038 25.0688393181389, 121.434385106883 25.068642364631, 121.431704121575 25.0684690452821, 121.431063412726 25.0684131608392, 121.430185693832 25.0683246123041, 121.428699418087 25.0682290662673, 121.427463395693 25.0680738237285, 121.425815231165 25.0678637386626, 121.425312954112 25.0677376874501, 121.424046713843 25.0672046930314, 121.42308785952 25.0665677684456, 121.42193254982 25.0658396818982, 121.420377157966 25.0648877136989, 121.419521185095 25.0644038484063, 121.418482272885 25.0638372738472, 121.417665731624 25.0633789930838, 121.416672774103 25.0627316425111, 121.41352327919 25.0606386737841, 121.412213525088 25.0598598858496, 121.410353722898 25.0587161542369, 121.408847616526 25.0577509992784, 121.408603363472 25.0575349873658, 121.407269031503 25.0567707354754, 121.406180402162 25.0563209802022, 121.40526862073 25.0560314288538, 121.403894425503 25.0558213231387, 121.402750712387 25.0558528390189, 121.401912134393 25.0559578918945, 121.401418554778 25.0560655709985, 121.400165398899 25.0565468429107, 121.399546431218 25.0569204346746, 121.398975299446 25.0573537734311, 121.398568694213 25.0577378678661, 121.398197603519 25.0581350924685, 121.397121295549 25.0595073130062, 121.39636679279 25.0604882114748, 121.395661575513 25.0613325394773, 121.39389816993 25.0631354163427, 121.392980590206 25.0639377077146, 121.392179320418 25.0644634560312, 121.391201964105 25.0649100357966, 121.39055255539 25.0650938646813, 121.390003892001 25.0652337057554, 121.388822489986 25.0654096558001, 121.387916506846 25.0654733391496, 121.386994578403 25.0654838436164, 121.386178468791 25.0654129384478, 121.384479569206 25.0650872993688, 121.383753333121 25.0649763455333, 121.382972738048 25.0649317013581, 121.381665947967 25.0650892689626, 121.381242672644 25.0651969400425, 121.379972121888 25.0656046449202, 121.37937127387 25.0658830126885, 121.378166678687 25.0662244062577, 121.377265044266 25.0663977287826, 121.376396723013 25.0664747710115, 121.375149392438 25.0664476246155, 121.373118540631 25.0662611716623, 121.371009411881 25.0660720923213, 121.36992078254 25.0659250304099, 121.369383715735 25.0658541254967, 121.368424098393 25.0658830126885, 121.368519770212 25.0648161516526, 121.369018423333 25.0630119864346, 121.369140187467 25.0627073503845, 121.369490984138 25.0620475218599, 121.367906600823 25.0622471121566, 121.366601985102 25.0624493283099, 121.366587941959 25.062149873583, 121.367303252897 25.0620641569981, 121.367669057478 25.0620146586885)","wkt1":"LINESTRING (121.366608440925 25.0621152957047, 121.369194546455 25.061771771573, 121.369888167147 25.0617507620019, 121.36971711753 25.0620422694793, 121.369241657578 25.0630198649431, 121.368780693357 25.064518085432, 121.369119893444 25.0646474226256, 121.370964475117 25.0651227520525, 121.372021213852 25.06537289014, 121.372787313195 25.0655199527143, 121.3737650502 25.0656512584349, 121.374118746018 25.0657536767994, 121.375345809582 25.0658882649045, 121.375914766994 25.0659197781955, 121.376646076585 25.0659092737661, 121.37768179651 25.0657727161013, 121.37866895574 25.0655101047795, 121.380656320356 25.0648214039143, 121.381277462396 25.0646402007554, 121.381802932618 25.064514146226, 121.382270419918 25.0644484927738, 121.382818358521 25.0644117268253, 121.383427903978 25.0644274836617, 121.384599883767 25.0645850519148, 121.386142954251 25.0648371606981, 121.386885860426 25.0648923094253, 121.387640363185 25.0649185707152, 121.388841334436 25.0648476652195, 121.389535679914 25.0647321154347, 121.390132904 25.0646270700813, 121.391250524802 25.0642377449548, 121.391854271966 25.0639350815648, 121.392399311423 25.0635910554587, 121.393070463733 25.0630940542065, 121.393737992111 25.0625051346571, 121.394967954822 25.0612248650013, 121.395647079783 25.0605065950391, 121.396795866405 25.0590293355389, 121.397754034174 25.0578087774763, 121.398168612058 25.05739119807, 121.398841938728 25.0568127563217, 121.399523238049 25.0563767893404, 121.400081323664 25.0560662275781, 121.400704640064 25.0557930901558, 121.401667881338 25.0554904059069, 121.402576038838 25.0553380786269, 121.403000038947 25.0552986836099, 121.40397415202 25.055309188949, 121.404610514577 25.0553906052966, 121.405062781361 25.0554772742523, 121.405689721693 25.0556453593251, 121.406615274069 25.0560077919788, 121.407288600739 25.0563314854537, 121.408498269427 25.0570412444214, 121.409250597827 25.0575303913635, 121.410683500761 25.0584055984029, 121.411957675449 25.0592046379309, 121.413042680858 25.0598723604754, 121.414424123949 25.0607035616269, 121.415799043963 25.0615498577962, 121.417209478515 25.0624276623094, 121.418819954145 25.0634558082899, 121.421013882917 25.0648017079318, 121.422641028636 25.0658114512236, 121.424196420491 25.0667791687786, 121.425113275428 25.0672288856646, 121.426111306455 25.067570275483, 121.426979600697 25.0678020261061, 121.428186370239 25.0680278676511, 121.429587382567 25.0681013973667, 121.43185378999 25.0681959355075, 121.432519144008 25.0681276579687, 121.435403069539 25.0682405784931, 121.436074221849 25.0682799693492, 121.436540984363 25.0682589608941, 121.436804806653 25.0681591706836, 121.437193292224 25.0678781820225, 121.437353470043 25.0676884486601, 121.437504225637 25.0673444330943, 121.437596998311 25.066871081853, 121.437752102625 25.0661357753264, 121.437879665051 25.0656361582843, 121.438637066956 25.0642764805624, 121.439640896275 25.0625419011778, 121.440531658898 25.0610876455624, 121.441457211274 25.059528979523, 121.441910202844 25.0587870632811, 121.442130537944 25.0583195880856, 121.442174025134 25.0579190812329, 121.442214613179 25.0572644795097, 121.44242625084 25.0566578043795, 121.443314114318 25.0572434691658, 121.4442715573 25.0564129011222, 121.444422312894 25.0562448171021, 121.444523783006 25.0559900643197, 121.444567270197 25.0543912815465, 121.444642647994 25.0543098645351, 121.444680336893 25.0524930692532, 121.444776733499 25.0494037331979, 121.444823119836 25.0490616361498, 121.444823357377 25.0471568439849, 121.444780764826 25.0463951889584, 121.44287694044 25.0464515614521, 121.442302567365 25.0462260714772, 121.442766074536 25.0454556473961, 121.44345907162 25.0443076359525, 121.444131129913 25.0431581777095, 121.445103068626 25.0414699221622, 121.445915554306 25.04018877613, 121.446925181917 25.0384433490824, 121.447717373575 25.0387782523604, 121.448792231972 25.0392254453117, 121.44977141855 25.0395370347375, 121.451090530001 25.039869636697, 121.452010646478 25.0400246098587, 121.452383186746 25.0400456231537, 121.452471973093 25.040281037478, 121.452624178261 25.041088403395, 121.452641573137 25.041250269936, 121.452663316732 25.0417532696695, 121.45265751844 25.0423357223969, 121.452622728688 25.0428324794988, 121.452609682531 25.0432087396525, 121.45262852698 25.0434860091578, 121.452691583406 25.043712059676, 121.45159788056 25.04353016866, 121.450307760568 25.0432793293433, 121.449737353584 25.0431598193314, 121.448481298558 25.0427379217918, 121.448270748077 25.0434713987614, 121.448156231808 25.0440416954147, 121.44795727791 25.0451382860167, 121.447796375304 25.0457932808148, 121.447578576958 25.0469893349694, 121.447493052149 25.0474942810384, 121.447365489723 25.0486203886434, 121.447365489723 25.049079364811, 121.448356272885 25.0490714854063, 121.449788088639 25.0491213882942, 121.451350728359 25.0491581588301, 121.452402755981 25.049196570896, 121.452241853376 25.0500944905465, 121.452031665287 25.0508134781394, 121.452827480877 25.0508239838629, 121.452801750956 25.0501092643066, 121.452601709879 25.0492888254667, 121.452575617565 25.0488784398332, 121.452640848351 25.0481069111233, 121.452759713339 25.0477214732598, 121.45305143991 25.0471324798399, 121.453543207558 25.0463425544569, 121.453604089625 25.046214839526, 121.453672219557 25.0459876445128, 121.453676568276 25.0457811330734, 121.453653375108 25.0454091489515, 121.45358234603 25.045205263089, 121.453386653671 25.0449028810165, 121.453007952719 25.0444901824569, 121.452903583461 25.0442771020682, 121.453074633078 25.0439970436135, 121.453200745931 25.0438499552124, 121.453588144322 25.0435117825495, 121.453807029848 25.0432924623046, 121.45389400423 25.0431138539111, 121.454145142756 25.0427362801643, 121.454325252204 25.0426689734178, 121.454555734315 25.0425599692426, 121.454664452292 25.0424654113255, 121.454731495044 25.0423560786428, 121.454824267718 25.0420458096884, 121.454960527582 25.0414104946181, 121.455200069524 25.0404104002477, 121.456103515912 25.0405325395902, 121.457129813613 25.0406691253776, 121.45729651451 25.0407019584769, 121.457522647902 25.0407755045874, 121.457650210328 25.040839857398, 121.457796979597 25.0409741445316, 121.45793976254 25.0411921556041, 121.457966579641 25.0412901619615, 121.457992671955 25.0414651613931, 121.457920193304 25.0433983467532, 121.457868008675 25.0450524305495, 121.457831769349 25.0462566998329, 121.457763639417 25.0468522637498, 121.4577216018 25.0470952162257, 121.457628829126 25.047321424247, 121.457533157307 25.0474448699577, 121.45773609753 25.047592282359, 121.457925991596 25.0477853299573, 121.458030723247 25.0479366816882, 121.458169882257 25.0482928992331, 121.458238012189 25.0486123450543, 121.458272801942 25.048839863513, 121.45826700365 25.0494853176217, 121.45823366347 25.0498392325215, 121.458197424145 25.0500834923017, 121.458113348909 25.0504505376693, 121.458022025809 25.0507538909718, 121.457879967653 25.0511156814831, 121.457617594935 25.0514246142779, 121.457781396687 25.051712535002, 121.457962593315 25.0523067592158, 121.458027824101 25.0525211388467, 121.459231694497 25.0525224520439, 121.459338962901 25.0524975012947, 121.459713315135 25.0524856825171, 121.459733609157 25.049444935801, 121.462967606574 25.0494245807319, 121.465868202195 25.0493352810339, 121.465939231273 25.050594663412, 121.466020407362 25.0511449004524, 121.466107381743 25.0517017010531, 121.466290027945 25.0527693328667, 121.466330615989 25.0533537030458, 121.466159566372 25.0546255192998, 121.46604360053 25.0556451951797, 121.465924735542 25.0561553582279, 121.46577977824 25.0566760243744, 121.465626123499 25.0573700236047, 121.465521754242 25.0577830070903, 121.465217343907 25.0589740200318, 121.464944099392 25.0600941131509, 121.464639689057 25.0612352056944, 121.463853295691 25.0610960166091, 121.462112358489 25.0608675360697, 121.459930751088 25.0606232977806, 121.459906833133 25.0616271665614, 121.459872043381 25.0617505978646, 121.459770573269 25.0618897862063, 121.459634313405 25.0620657410535, 121.458815304646 25.0627505181467, 121.457966579641 25.0634412002737, 121.458462514812 25.0639597017167, 121.459611301433 25.0651437610454, 121.460332464013 25.0658787452629, 121.46070500428 25.0655780555131)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0454020500'=='0100020200' || '0454020500'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
