
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492709</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000220">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000220">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000220" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0151000220" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000220" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000220',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="_-ko9EZ50TqZxlUK66LXL0U8X-zhfsbtkab8RiXL3JNQoEIm3J3mIpL7oydl-giFryEP5G3YCPbxc7sbn4Iez5brWuQ1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">小2區 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0151000220" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0151000220" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">國立臺灣戲曲學院 - 石崁(經白石湖)</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0510 - 2250 <br>
                        [假日] 0430 - 2250
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0510 0600 0630 0700 0730 0830 0930 1000 1100 1210 1230 1330 1430 1500 1530 1550 1610 1630 1650 1710 1730 1800 1830 1900 1930 2030 2120 2200 2250<br>
[假日]<br /> 班表:0430 0500 0530 0600 0630 0700 0730 0800 0830 0900 0920 0940 1000 1020 1040 1100 1120 1140 1200 1230 1300 1330 1400 1420 1440 1500 1520 1540 1600 1620 1640 1700 1720 1740 1800 1830 1900 1930 2000 2030 2100 2200 2250<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">東南客運內湖站:02-8791-7712</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">城門仔(玄明宮)站至碧山路口站山區路段於禁止停車黃線路段公車停靠區隨招隨停，市區路段停靠固定站位</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 石崁(經白石湖)</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 國立臺灣戲曲學院</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">國立臺灣戲曲學院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400540" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.08164" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.58736" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">內湖派出所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1144900011" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.082457" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.590992" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">碧湖國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1148900300" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.083647" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5924131" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">捷運內湖站(內湖)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145000010" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084524" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.593532" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">貿商三村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145500360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.085121" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5923401" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">碧山路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145300160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.086236" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.591745" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">碧霞宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.093545" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.588088" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">圓覺寺(鯉魚山)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401410" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.095894" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.589001" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">碧山巖(白石湖吊橋)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400700" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.098367" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.587864" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">城門仔(玄明宮)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097808" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.588532" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">恆光禪寺</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.105487" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5899414" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">石崁</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103707" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5949014" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">觀光草莓園二</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401340" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103908" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.589918" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">觀光草莓園</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.103652" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5895912" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">碧山巖(白石湖吊橋)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400740" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.09841" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.58787" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">城門仔(玄明宮)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401640" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.097808" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.588532" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">碧霞宮</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.093529" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.588013" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">太陽廟</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.087604" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.590991" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">碧山路口</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1148900220" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.086155" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5916137" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">貿商三村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1145500320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.085066" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5922477" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">捷運內湖站(內湖)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146401250" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.084374" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.593177" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">碧湖國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0838" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5924824" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">內湖派出所</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1147200060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.081987" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.590028" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">國立臺灣戲曲學院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1146400540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.08164" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.58736" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0151000220";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 12;
        var existBackNum = 12;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0151000220',
                        url: './StopStatusRecent3OfRoute?routeid=0151000220&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0151000220',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0151000220',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0151000220');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0151000220","Name":"小2區","BeginStop":"國立臺灣戲曲學院","GoDirStops":[{"UniStopId":"1146400540","Name":"國立臺灣戲曲學院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.58736,"Latitude":25.08164,"PublicId":"1146400540"},{"UniStopId":"1144900011","Name":"內湖派出所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.590992,"Latitude":25.082457,"PublicId":"1144900011"},{"UniStopId":"1148900300","Name":"碧湖國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5924131,"Latitude":25.083647,"PublicId":"1148900300"},{"UniStopId":"1145000010","Name":"捷運內湖站(內湖)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.593532,"Latitude":25.084524,"PublicId":"1145000010"},{"UniStopId":"1145500360","Name":"貿商三村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5923401,"Latitude":25.085121,"PublicId":"1145500360"},{"UniStopId":"1145300160","Name":"碧山路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.591745,"Latitude":25.086236,"PublicId":"1145300160"},{"UniStopId":"1146401500","Name":"碧霞宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.588088,"Latitude":25.093545,"PublicId":"1146401500"},{"UniStopId":"1146401410","Name":"圓覺寺(鯉魚山)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.589001,"Latitude":25.095894,"PublicId":"1146401410"},{"UniStopId":"1146400700","Name":"碧山巖(白石湖吊橋)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.587864,"Latitude":25.098367,"PublicId":"1146400700"},{"UniStopId":"1146401640","Name":"城門仔(玄明宮)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.588532,"Latitude":25.097808,"PublicId":"1146401640"},{"UniStopId":"1146400460","Name":"恆光禪寺","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5899414,"Latitude":25.105487,"PublicId":"1146400460"},{"UniStopId":"1146400100","Name":"石崁","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5949014,"Latitude":25.103707,"PublicId":"1146400100"}],"LastStop":"石崁(經白石湖)","BackDirStops":[{"UniStopId":"1146401340","Name":"觀光草莓園二","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.589918,"Latitude":25.103908,"PublicId":"1146401340"},{"UniStopId":"1146401040","Name":"觀光草莓園","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5895912,"Latitude":25.103652,"PublicId":"1146401040"},{"UniStopId":"1146400740","Name":"碧山巖(白石湖吊橋)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.58787,"Latitude":25.09841,"PublicId":"1146400740"},{"UniStopId":"1146401640","Name":"城門仔(玄明宮)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.588532,"Latitude":25.097808,"PublicId":"1146401640"},{"UniStopId":"1146401540","Name":"碧霞宮","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.588013,"Latitude":25.093529,"PublicId":"1146401540"},{"UniStopId":"1146401140","Name":"太陽廟","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.590991,"Latitude":25.087604,"PublicId":"1146401140"},{"UniStopId":"1148900220","Name":"碧山路口","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5916137,"Latitude":25.086155,"PublicId":"1148900220"},{"UniStopId":"1145500320","Name":"貿商三村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5922477,"Latitude":25.085066,"PublicId":"1145500320"},{"UniStopId":"1146401250","Name":"捷運內湖站(內湖)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.593177,"Latitude":25.084374,"PublicId":"1146401250"},{"UniStopId":"1146400960","Name":"碧湖國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5924824,"Latitude":25.0838,"PublicId":"1146400960"},{"UniStopId":"1147200060","Name":"內湖派出所","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.590028,"Latitude":25.081987,"PublicId":"1147200060"},{"UniStopId":"1146400540","Name":"國立臺灣戲曲學院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.58736,"Latitude":25.08164,"PublicId":"1146400540"}],"RouteMapUrl":"../MapOverview?nid=0151000220","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"0510 - 2250","HeadwayDesc":"班表:0510 0600 0630 0700 0730 0830 0930 1000 1100 1210 1230 1330 1430 1500 1530 1550 1610 1630 1650 1710 1730 1800 1830 1900 1930 2030 2120 2200 2250","HolidayBusTimeDesc":"0430 - 2250","HolidayHeadwayDesc":"班表:0430 0500 0530 0600 0630 0700 0730 0800 0830 0900 0920 0940 1000 1020 1040 1100 1120 1140 1200 1230 1300 1330 1400 1420 1440 1500 1520 1540 1600 1620 1640 1700 1720 1740 1800 1830 1900 1930 2000 2030 2100 2200 2250","RouteNote":"城門仔(玄明宮)站至碧山路口站山區路段於禁止停車黃線路段公車停靠區隨招隨停，市區路段停靠固定站位","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"東南客運內湖站:02-8791-7712","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.592151336848 25.0861520731706, 121.591601662354 25.0852923355892, 121.592356827539 25.0850587243088, 121.593040672485 25.0848946123217, 121.593637458791 25.0848016732327, 121.593681297132 25.0847650231768, 121.593657591912 25.0846963764283, 121.59296686667 25.0841659074805, 121.590314772577 25.0820390252765, 121.587799980353 25.081435001887, 121.587739177403 25.0816144872825, 121.587676458048 25.0816938427134, 121.587581893815 25.0817280311808, 121.587506195876 25.0817278748108, 121.587430281007 25.0816856692258, 121.587521030698 25.0813331042073, 121.590334340038 25.0820041113264, 121.592989435657 25.0841324619219, 121.593691393297 25.0846768432466, 121.593728807682 25.0847591278143, 121.59374501037 25.0848260120283, 121.593045757361 25.0849352728866, 121.592370412112 25.085097000905, 121.591664367746 25.0853069512565, 121.592219144606 25.0861952025252, 121.591605763791 25.08619330074, 121.591514773693 25.0862066340503, 121.591455823641 25.0862274196597, 121.591387876481 25.0862625756652, 121.591407501506 25.086334550167, 121.591422230987 25.0864062380237, 121.591394220005 25.0867945246525, 121.591380165826 25.0868841185317, 121.591281314472 25.087201464467, 121.591254916196 25.0872823723042, 121.591084317293 25.0875491984821, 121.591014923318 25.0877614269667, 121.591018637141 25.0878306027458, 121.591014781322 25.087908686475, 121.590976448748 25.0880986512029, 121.590948801342 25.088165774864, 121.590900459195 25.0882410734164, 121.590257686992 25.0886892700099, 121.590215494793 25.088718994597, 121.590146658112 25.0887403790491, 121.589925736735 25.0887788006777, 121.589864050032 25.0888086472972, 121.589338003876 25.0891532966552, 121.589250041371 25.0891790772262, 121.589114313924 25.0892342101991, 121.589092348202 25.0892973609401, 121.58910309322 25.0893456799449, 121.589141584173 25.08938874972, 121.589312929941 25.0895049152232, 121.589758716016 25.0899445109207, 121.589794278589 25.0900140244586, 121.589806031682 25.0900814395571, 121.589796870439 25.0901391554469, 121.589746179817 25.0901969419328, 121.589718652679 25.0902873645378, 121.58972770061 25.0903639385886, 121.589751535051 25.0904545183835, 121.589767598535 25.090578592994, 121.589761779431 25.0906363726222, 121.589712138929 25.0906908019166, 121.589598888898 25.0907527047159, 121.589545470237 25.0908026850544, 121.589484684034 25.0908803774023, 121.58927616863 25.0913072171138, 121.589243751866 25.0913685558557, 121.58917901003 25.0914175095127, 121.588887889357 25.0915946794335, 121.588836602163 25.0916639008538, 121.588784587818 25.0917483933091, 121.588478990932 25.0922131374391, 121.58844568633 25.0922986754684, 121.58821254466 25.0930677445494, 121.587929050434 25.0938956503491, 121.587892039661 25.0939879139184, 121.587887062803 25.0940624637205, 121.587886721448 25.0944143085441, 121.587863724758 25.094494062191, 121.587656864376 25.0948539331081, 121.587600434973 25.0949151138726, 121.587526839592 25.0949949059915, 121.587318752415 25.0951422325287, 121.587133656456 25.0952522806182, 121.586331667182 25.0955795826882, 121.5862802404 25.0956476257827, 121.586288571158 25.095693794496, 121.586311179931 25.0957278853199, 121.586359860115 25.0957485319677, 121.586431386852 25.0957254919345, 121.58663208081 25.0956197586451, 121.586734719066 25.0955786291651, 121.58687541233 25.0955473754608, 121.587223834666 25.095529359325, 121.587356563076 25.0955451103269, 121.587724660231 25.0956115654105, 121.587942195689 25.0956069398733, 121.588365033602 25.095638842142, 121.588740927299 25.0958182947455, 121.589059736843 25.0959374326099, 121.58911505889 25.0959774686123, 121.589119652428 25.0960260628135, 121.589107869878 25.0960809401171, 121.588993235989 25.0962984996224, 121.588982608109 25.0963938042298, 121.58900556105 25.0964754051417, 121.58904475474 25.096539814607, 121.589223427756 25.0967525300811, 121.589277165111 25.096798053897, 121.589323558468 25.0968461422732, 121.589340685439 25.0969398765883, 121.589328940009 25.09703972907, 121.589166706902 25.0972939343969, 121.589120850792 25.097365633006, 121.589037755984 25.0976116497291, 121.588995226771 25.0976792214535, 121.588897508755 25.0977652556428, 121.588790658733 25.0978541446972, 121.588471926277 25.0980420813649, 121.588397432435 25.0981193301025, 121.588349168856 25.0982395444238, 121.58833873397 25.0984467216864, 121.588326808322 25.0988870628006, 121.58831430265 25.0989459939778, 121.588275067157 25.0989944348516, 121.588222658476 25.0990217350919, 121.588156712985 25.0990186924604, 121.588106677787 25.0989648995186, 121.588059554559 25.0986344841681, 121.58800670941 25.0985095624281, 121.587960320272 25.0984320148958, 121.587892653059 25.0983960915126, 121.587831616429 25.0984419560598, 121.587776740711 25.0983847758346, 121.587855692877 25.0983291091285, 121.587924722702 25.0983265142506, 121.587999723432 25.0983670864749, 121.588072674959 25.0984737855472, 121.588121045768 25.0986457860689, 121.588150328881 25.098896470097, 121.588169988275 25.0989531362668, 121.588211806777 25.0989785028225, 121.588246324156 25.0989493275807, 121.58827245848 25.0989041581559, 121.58826718845 25.0984519398576, 121.588276322602 25.0982502710903, 121.588292862696 25.0981474150582, 121.58833760645 25.0980582775984, 121.588434284449 25.0979890306915, 121.588714287242 25.0978013518577, 121.588846559286 25.0977166921698, 121.58898607341 25.097935450218, 121.589054011534 25.0980713402423, 121.589092535768 25.0984301951709, 121.589290902752 25.098919382111, 121.589306694756 25.0990101575642, 121.589316403121 25.0994244915431, 121.589323489235 25.0994820517324, 121.58934993148 25.0995438864815, 121.589420942706 25.0996161608558, 121.589889546912 25.0999633845702, 121.58994241493 25.1000070119307, 121.589898476746 25.100045772687, 121.589784329592 25.1001256085671, 121.589676584376 25.1002415185141, 121.589614342289 25.1003530123912, 121.58958323331 25.1004309546419, 121.589580309498 25.1005264101085, 121.589580809176 25.1006556626169, 121.589548472783 25.100729626467, 121.58949387512 25.1008092713715, 121.589327494078 25.1009923261508, 121.589007974217 25.1014113979148, 121.588938563333 25.101528448096, 121.588896432871 25.1016114026716, 121.588807853276 25.1019738279505, 121.588789117227 25.1020663770183, 121.588780996071 25.1023918208937, 121.58872984166 25.1026910770022, 121.588714988464 25.1027610166983, 121.588667285314 25.1028110684875, 121.588557761733 25.1029029230605, 121.588516989329 25.1029374894275, 121.588506146812 25.1029764360996, 121.588494254381 25.1030363119258, 121.588500825676 25.1031485817338, 121.588516656823 25.1032222810484, 121.588553919568 25.1032680346374, 121.588579845064 25.103305519882, 121.588625017745 25.1033324452907, 121.588966048094 25.1034768508915, 121.589311805354 25.1035854639117, 121.589398703162 25.1035889578412, 121.589491892183 25.103588195844, 121.589771445962 25.1035533387609, 121.589925130303 25.1037255440935, 121.5899736 25.1037987502871, 121.589985026969 25.1038687632921, 121.589962679955 25.1039816847181, 121.589964528181 25.1040935648361, 121.589989833658 25.1041865455507, 121.590035341357 25.1042731416958, 121.590098588096 25.1043347907556, 121.590367632388 25.1044698531685, 121.590748654947 25.104609488495, 121.591237133405 25.1047890560984, 121.591555807897 25.1049578800091, 121.591745663369 25.1050487643181, 121.591774065512 25.105053355818, 121.591804722724 25.1050523108866, 121.591850610087 25.1050289620259, 121.591842872191 25.105082915472, 121.591850586698 25.1052037217771, 121.591898625832 25.1056084936122, 121.591907346549 25.105665439549, 121.591921573529 25.1057583825804, 121.591930633475 25.1058208177094, 121.591928066262 25.1058572211596, 121.591916040946 25.1058796101876, 121.59188869373 25.1059014896265, 121.591844077125 25.105923841518, 121.591796150371 25.1059327097116, 121.591735502109 25.1059379266628, 121.5916543365 25.1059231937947, 121.591598102636 25.1058827529603, 121.591544999323 25.1058241554703, 121.591513141356 25.1057505830501, 121.591502723398 25.1056706941558, 121.591486627414 25.1054657724338, 121.591470789375 25.1054247704419, 121.591433835165 25.1053868537793, 121.59140338556 25.105353536091, 121.591356010794 25.1053350904743, 121.591301074145 25.1053400466964, 121.591253259819 25.1053574467598, 121.59120386106 25.1053970586455, 121.591169339773 25.1054275061956, 121.591145171291 25.1054636554749, 121.591069500428 25.1056419701649, 121.591029325793 25.1057291969903, 121.59099974491 25.1057709147992, 121.590961805795 25.1057969005071, 121.590912427145 25.1058175740465, 121.590848577048 25.10582322875, 121.590763410616 25.1058203398577, 121.590704860244 25.105808588923, 121.590650766423 25.105790001035, 121.590470288353 25.1056909434387, 121.590409029358 25.1056492154245, 121.590103470598 25.1054821676742, 121.590052415813 25.105462729189, 121.590009541616 25.1054600685058, 121.589968054115 25.1054633107457, 121.589922782992 25.1054897694087, 121.589806209553 25.1056259670258, 121.589759217831 25.1056583985269, 121.589690966747 25.1056788262489, 121.589169696169 25.1057607979991, 121.589122160915 25.1057767706408, 121.589068518176 25.1057947954997, 121.589001354999 25.1058237850749, 121.588954441119 25.1058514987567, 121.588771107976 25.1060481220503, 121.588728778482 25.106078194258, 121.588679314262 25.1061024676891, 121.588608753913 25.1061168538347, 121.588545884169 25.1061143338898, 121.588487174924 25.1061116710347, 121.588418518454 25.1061027126327, 121.588354129092 25.1060738432556, 121.588200193109 25.1060091214488, 121.588213505748 25.1059838748354, 121.588370171827 25.1060515048729, 121.588429253432 25.1060803846298, 121.588489886639 25.1060882151671, 121.588543599762 25.1060930876551, 121.58862205924 25.1060891220063, 121.588676001752 25.1060734262566, 121.588722580005 25.1060500508953, 121.58875031163 25.1060244604826, 121.588939055679 25.1058288354151, 121.588984465293 25.1058059684965, 121.589042171765 25.105784459974, 121.58911331683 25.1057578697658, 121.589155711662 25.105742406813, 121.589688822005 25.1056524223479, 121.589754090397 25.1056288050521, 121.589786284082 25.1055987391311, 121.589910722042 25.1054644192504, 121.589963975264 25.105438001311, 121.590007728119 25.1054342840206, 121.590062823424 25.1054366522607, 121.590106660262 25.1054586812002, 121.590429331364 25.1056307603001, 121.590486372401 25.1056730967154, 121.59066754467 25.105771082592, 121.590711495317 25.1057835236365, 121.590768993314 25.10579172445, 121.590847186378 25.1057890969776, 121.590896017033 25.1057835554658, 121.590950572308 25.1057625937844, 121.590998474835 25.1057078727452, 121.591035541931 25.1056270343609, 121.591109316999 25.105454226899, 121.591140985684 25.1054071953832, 121.591174594601 25.1053742500724, 121.591211836599 25.1053435452399, 121.591248385006 25.1053265487844, 121.591300540844 25.1053110220859, 121.591357975596 25.1053104178407, 121.591418689559 25.1053337193785, 121.591462713223 25.1053759050456, 121.591493552014 25.1054195876261, 121.591518123028 25.1054656327013, 121.591528748256 25.1056786001714, 121.591543433657 25.1057490327426, 121.59156999636 25.1058125148083, 121.59161004571 25.1058576993799, 121.591661716814 25.1058948980767, 121.591726510289 25.1059165268536, 121.591780704527 25.105913374115, 121.591836169411 25.1059019931511, 121.591874400744 25.1058840428828, 121.59189299013 25.1058571845532, 121.591891283759 25.105822021088, 121.59188412083 25.1057691905911, 121.591874356611 25.1056842104568, 121.591863891993 25.10561280894, 121.591808723832 25.1051021571687, 121.591805476029 25.1050502184711, 121.591847588441 25.1050260867961, 121.591965958386 25.1049189047976, 121.592022384899 25.1048787686603, 121.592081277031 25.1048558254352, 121.592153567398 25.104861151675, 121.592304390359 25.1048786248699, 121.592587086654 25.1049017366203, 121.592632685076 25.1049095426191, 121.592691632174 25.1049279099303, 121.592883043117 25.105051846218, 121.592930895493 25.1050779331598, 121.592994274008 25.1050870471065, 121.59320639925 25.105113740381, 121.593366908458 25.1051750428249, 121.593479771001 25.1052032756866, 121.593563611629 25.1052014164577, 121.593634839884 25.1051793825288, 121.593831465735 25.1051287671337, 121.593909993708 25.1051251142988, 121.593990449851 25.1051477834947, 121.594214764197 25.1052261051047, 121.594264299098 25.1052452541498, 121.594353499374 25.1052576410009, 121.594422137959 25.1052645974969, 121.594469181344 25.1052664592823, 121.594544767257 25.1052652118747, 121.594589203749 25.1052599615146, 121.594630840367 25.1052333356718, 121.594685921427 25.1051946644508, 121.59481556023 25.1050701321318, 121.594838716755 25.1050263936884, 121.594853118659 25.1049894120828, 121.594879858732 25.1048809554369, 121.594895741608 25.1048525298734, 121.594919086361 25.1048263521624, 121.594994349155 25.1047235986623, 121.595005245458 25.1046950235535, 121.595010694042 25.1046651201952, 121.595027786603 25.1043496053084, 121.595017178771 25.104290074436, 121.595009627618 25.1042542130322, 121.594992560275 25.104216502134, 121.594931450751 25.1041530132345, 121.594909423906 25.1041229896388, 121.594896369052 25.1040905609905, 121.594888613287 25.1040452282628, 121.594869701235 25.1038729988211, 121.594870142789 25.1038343062089, 121.594876753053 25.1037835145541, 121.59488252367 25.1037046687289, 121.594865295304 25.1036038414774, 121.594905948421 25.1036096679082, 121.594918346692 25.103708715275, 121.594908218039 25.1037932395797, 121.594903188208 25.1038340353487, 121.594899389057 25.1038743246785, 121.594917774641 25.1040404455206, 121.594922676848 25.1040810384892, 121.594937226068 25.1041129873215, 121.594958626832 25.1041389285782, 121.595014116922 25.1042023722646, 121.595029647078 25.1042444449232, 121.595043932174 25.1042933334706, 121.595054047767 25.1043482557444, 121.595043195288 25.10466487047, 121.59503268756 25.1047068394488, 121.595015192914 25.104741001346, 121.594934172192 25.1048415274888, 121.594915234515 25.1048635178589, 121.594906898854 25.1048980510676, 121.59488069297 25.1049957539089, 121.594863607141 25.1050402369507, 121.594837254141 25.1050858269095, 121.594705409337 25.1052147656693, 121.59464867815 25.1052595095218, 121.594597604745 25.1052816438203, 121.594539510794 25.1052925542381, 121.594466713167 25.1052935160663, 121.594414185594 25.1052953212399, 121.594342475607 25.1052859319698, 121.594261172946 25.1052740524309, 121.594198770828 25.1052578378702, 121.593977195654 25.1051718674462, 121.59390652168 25.1051563820687, 121.593829281709 25.1051593506923, 121.593640759964 25.1052086556363, 121.593563386245 25.1052373994924, 121.593473850145 25.1052375859004, 121.59335715454 25.1052067130423, 121.593197313225 25.1051402665552, 121.592978325916 25.1051168656362, 121.592919436321 25.1051056555515, 121.592857757237 25.1050788275138, 121.592684632034 25.104972357792, 121.592625821889 25.1049482282982, 121.592574803825 25.104935944606, 121.592297092725 25.1049116490392, 121.592144773287 25.1048965865965, 121.592081358906 25.1048955422948, 121.592031865105 25.1049184356644, 121.591993931425 25.1049466735949, 121.591884491588 25.1050444499451, 121.591842182557 25.1050862962431, 121.591808516858 25.1050977792838, 121.591766227006 25.1050899128359, 121.591729677274 25.1050809653644, 121.591528841635 25.1049880982834, 121.59128268532 25.1048589393066, 121.590733967111 25.1046625255292, 121.590560428408 25.1045882461393, 121.590354442264 25.1045229711945, 121.590090013063 25.1043822433358, 121.589994930678 25.1043081889244, 121.589936173116 25.1042104805308, 121.58991809168 25.1040974561232, 121.589907894001 25.1039717639061, 121.589931383804 25.1038621721432, 121.58990632188 25.1037979640845, 121.589869283733 25.1037243229613, 121.589763045858 25.1035898655362, 121.589503103745 25.1036276817236, 121.589401720216 25.1036318825788, 121.589301516687 25.1036335133988, 121.588943250412 25.1035132843194, 121.588591873199 25.1033647533213, 121.588547359536 25.1033318102191, 121.588500493437 25.1032829218201, 121.588463573774 25.1032252292504, 121.588450439821 25.1031553768252, 121.588447611257 25.1030293487043, 121.588452468474 25.1029554477529, 121.588479857808 25.1028971524225, 121.588528608515 25.1028620780264, 121.588641826048 25.102779450284, 121.588667774507 25.1027596881914, 121.588677558575 25.1026939287039, 121.588721914365 25.1023878526407, 121.588739790131 25.1020588690777, 121.58875980957 25.1019709083845, 121.588843186813 25.1016045684517, 121.588889471077 25.1014919951987, 121.588961944109 25.1013647388946, 121.589303567575 25.1009468847231, 121.589456395475 25.100773475078, 121.589523717892 25.1006525190918, 121.589530643306 25.100543929731, 121.589524659337 25.1004170933101, 121.589561353389 25.1003327795836, 121.58963865078 25.1002032624018, 121.589748801588 25.1000947287527, 121.589876152938 25.100006640167, 121.589385522406 25.0996275507634, 121.58930538208 25.0995411078228, 121.589283024539 25.0994776511928, 121.589281842467 25.0994176774901, 121.589262876285 25.0990342859276, 121.589248937813 25.0989429516887, 121.589026604888 25.0984094087734, 121.588997968639 25.0980911716791, 121.58893457043 25.0979540912301, 121.588872129251 25.0978739458909, 121.58878971928 25.0977474430768, 121.588952809683 25.0976455038579, 121.58899382783 25.0975912517734, 121.589075640223 25.097343495345, 121.589115920111 25.0972651891341, 121.589278564284 25.0970021203627, 121.589278827099 25.0969325070508, 121.589266189546 25.0968673101074, 121.589209683924 25.0968065736482, 121.588975084963 25.0965587409037, 121.58893961133 25.0964756130762, 121.588904638876 25.096393659697, 121.588914366828 25.0963043806251, 121.589049549071 25.0960719709427, 121.589066940498 25.0960076740918, 121.58903731114 25.0959605235885, 121.58871123698 25.0958530984122, 121.588365343035 25.0956830269175, 121.587939836037 25.0956454901422, 121.587712133229 25.0956518855696, 121.587354283834 25.0955809419569, 121.587231033486 25.0955719461681, 121.586879818349 25.0955794893948, 121.586752487853 25.0956024252453, 121.586666152035 25.0956373793751, 121.586436391182 25.0957837940381, 121.586360879547 25.0958046133209, 121.586282272583 25.09578770038, 121.586249237045 25.0957553348726, 121.586216209636 25.0957107701206, 121.586211692973 25.0956386392202, 121.586250044809 25.0955859008621, 121.586294325068 25.0955453452054, 121.587106989415 25.0952066633972, 121.587273599474 25.0951070553372, 121.587488870658 25.0949543195122, 121.587558481075 25.0948836241479, 121.587615811603 25.0948068280699, 121.587811354028 25.0944656274603, 121.587832700165 25.0944031729009, 121.587830472532 25.0940416069451, 121.587836841956 25.0939644139968, 121.587872254524 25.0938717898561, 121.588161380832 25.0930573587887, 121.588394915922 25.0922681013022, 121.588431958049 25.0921800473191, 121.588741288166 25.091693386538, 121.588789989322 25.0916044900466, 121.588860106497 25.0915296744081, 121.589134692859 25.091377971653, 121.589187545262 25.0913379837768, 121.589223235559 25.0912882049259, 121.589453597703 25.0908335290408, 121.589501495104 25.0907682375235, 121.589562789238 25.0907261038744, 121.589681460959 25.0906359361683, 121.589702184178 25.0905887182145, 121.589678100817 25.0904362464628, 121.589658133645 25.0903481186723, 121.58964497232 25.0902862563845, 121.589672444509 25.090209861091, 121.589727872462 25.0901322420213, 121.589739979162 25.0900599483391, 121.589720034599 25.0899766533346, 121.58928853364 25.0895405720679, 121.589079156244 25.0894143700586, 121.589045179972 25.0893551698512, 121.589030376066 25.0892886944313, 121.589032885138 25.0892403350463, 121.589070694455 25.0891993610958, 121.589165781397 25.0891667677125, 121.589246717738 25.0891324901604, 121.589326192162 25.0891107858546, 121.589861020517 25.0887679571804, 121.589913770431 25.0887415176149, 121.590116526297 25.0887082545337, 121.590194663904 25.0886760467604, 121.590254425418 25.0886341588881, 121.590852022184 25.08821529304, 121.590901402639 25.088143606109, 121.590926984471 25.0880809486803, 121.590957102584 25.087906104105, 121.590956086641 25.0878255820443, 121.59095966705 25.0877287128234, 121.59102440658 25.0875081198353, 121.591211199504 25.0872417962423, 121.591227186437 25.0871763628934, 121.591318961926 25.0868741897469, 121.591336634926 25.0867857200395, 121.59136792965 25.0864145012567, 121.591351074771 25.0863422608751, 121.591304283481 25.086257278049, 121.591375878316 25.0862138043474, 121.591448211798 25.0861710351548, 121.591526699444 25.0861552061017, 121.591611574247 25.0861556946365, 121.592146559476 25.0861565848888)","wkt0":"LINESTRING (121.587454019394 25.0816472692644, 121.587499260387 25.0813826786259, 121.58752124517 25.0813148685745, 121.588947035805 25.0816560504409, 121.59020744475 25.0819556239786, 121.590408742666 25.0820395952175, 121.590784610144 25.0823490022582, 121.592146085678 25.0834171692096, 121.593779856318 25.084714540754, 121.593692153906 25.0848446553921, 121.591924741496 25.0852304596107, 121.591685856832 25.0853076203085, 121.591796111292 25.0855103560277, 121.592156944071 25.0860361056753, 121.592070912182 25.0861919389499, 121.591517134097 25.0861911824781, 121.591404373853 25.0863265908429, 121.591424420119 25.0864498955363, 121.591414396986 25.0866670022712, 121.59137848076 25.0868266170816, 121.591296625176 25.0871367684875, 121.591233980597 25.087308486123, 121.591107020915 25.0874771776624, 121.59104020003 25.0875929165662, 121.591020153764 25.087753286631, 121.591006789587 25.0879030660301, 121.59094581553 25.0881148749684, 121.590846419463 25.0882654103839, 121.590722800826 25.0883713145853, 121.590515656082 25.088477218695, 121.590410413188 25.0885619419169, 121.590302664511 25.0886791927075, 121.590108048683 25.0887548383192, 121.589993617917 25.0887714803475, 121.589726334377 25.0888993213077, 121.589347125854 25.0891633238145, 121.589170050509 25.0892155190851, 121.589129122717 25.0892601498061, 121.589118264323 25.0893274740832, 121.58939891204 25.0895672692413, 121.589668701364 25.0898562331292, 121.589788978957 25.0899825600595, 121.589793990523 25.0900392936684, 121.589782296868 25.0901202335716, 121.589716311244 25.0902669842876, 121.589763085864 25.0904871100316, 121.589778120563 25.0905756140851, 121.589748051165 25.0906716825152, 121.589672877669 25.0907155562613, 121.589557611642 25.0907806104077, 121.58946907397 25.0909341683136, 121.589384712602 25.0910824309364, 121.589237706655 25.0913804685225, 121.589151674766 25.0914462787546, 121.588941188978 25.0915521802032, 121.588835946084 25.0916550558083, 121.588744067367 25.0918161769867, 121.588575344632 25.0920536979613, 121.588443373384 25.0922465888594, 121.588406621897 25.0923827469573, 121.588381564065 25.0925544572314, 121.588288014826 25.0928638376897, 121.588194465587 25.0930884973367, 121.588168572494 25.0932216287847, 121.588130985746 25.0933986328719, 121.588054976989 25.0936119451495, 121.587938875702 25.0938176928096, 121.587895442126 25.0939561184303, 121.58789043056 25.0940173887371, 121.587875395861 25.0944500621284, 121.587844491202 25.094512088608, 121.587667415856 25.0948063357477, 121.587492011033 25.0950128378164, 121.587344169825 25.095145210754, 121.587016747488 25.0952972503514, 121.586498050367 25.0954984566922, 121.586338515504 25.0955756109156, 121.586292576146 25.0956542779168, 121.586341021288 25.0957185730244, 121.586444593659 25.0957110088959, 121.58664171527 25.0956088931146, 121.586734429248 25.095577123743, 121.587042640581 25.0955272004282, 121.587170435523 25.0955113157329, 121.587540456174 25.0955710724332, 121.587707508387 25.0956096495281, 121.587996508715 25.0956035982199, 121.588289685348 25.0956315855178, 121.588474278043 25.0956731882461, 121.588710656924 25.0958070732938, 121.58909988858 25.0959175094376, 121.589180908903 25.0959379325491, 121.589207637257 25.0959992018633, 121.589140816372 25.0960703044858, 121.589084018619 25.0961429198874, 121.589007174602 25.0962647018703, 121.588994645686 25.0963584966068, 121.589033067695 25.0965052398407, 121.589303692279 25.0968509177937, 121.589310374368 25.0969220199211, 121.589302021757 25.0970634676475, 121.589206801996 25.0972124792465, 121.589141651633 25.097299465629, 121.589071489704 25.0974462077341, 121.589025550345 25.0975959752681, 121.588980446248 25.0976625385577, 121.588824252429 25.0978342414216, 121.588614601902 25.0979355989461, 121.588463419649 25.0980248540102, 121.588365694105 25.0981806720167, 121.588353165189 25.098246478591, 121.588336459968 25.0985452551206, 121.588317248963 25.0987767118799, 121.588355670972 25.0989355545005, 121.588313072658 25.0989877456023, 121.588225370246 25.0990308599739, 121.588135997313 25.0990134629486, 121.588110939481 25.0989423620368, 121.588090057954 25.0987714171224, 121.588071682211 25.0986329969502, 121.58799233241 25.0984575132281, 121.587931775983 25.0984136422582, 121.587869966664 25.0984106166735, 121.587836973852 25.0983081249473, 121.587854931965 25.0982782472693, 121.58799233241 25.098344053791, 121.588085464018 25.0985119737205, 121.588143932293 25.0987146875625, 121.588174001691 25.0989211830338, 121.588247504665 25.0989332853217, 121.588276738802 25.0988939528817, 121.588297620328 25.0986284585812, 121.588286761935 25.0984764231241, 121.588298455589 25.0982676577108, 121.588325183943 25.0981383137433, 121.588376134868 25.0980460331684, 121.588446296798 25.0979749316942, 121.588712745077 25.0978334850218, 121.588784159898 25.0977941522282, 121.588917384037 25.0978160878262, 121.588992975164 25.0979102595729, 121.589033902956 25.0980793146952, 121.589046014241 25.0981757554322, 121.589050190546 25.0983323296432, 121.58905311396 25.0984053219001, 121.589134551914 25.0985369347714, 121.58926485264 25.0988360887884, 121.589320815131 25.0989283687674, 121.589337520352 25.0990153539297, 121.589313297781 25.099238489498, 121.589314968303 25.0994502788135, 121.589390141799 25.0995834033383, 121.589611485981 25.0997815770785, 121.589928049924 25.0999691610865, 121.589916356269 25.1000432869458, 121.589826148074 25.1000894264886, 121.589662436906 25.1002308705523, 121.58963403803 25.1003201239415, 121.589550929554 25.1004248831331, 121.589558864534 25.1005326677671, 121.589568052406 25.1006185172148, 121.589561787948 25.1006476379388, 121.589519189633 25.1007482367504, 121.589413946739 25.1008790907198, 121.589310374368 25.1009785547706, 121.589058960788 25.1013208163804, 121.588944947652 25.1014807902629, 121.588917801668 25.1015583189014, 121.588870609418 25.1017258562303, 121.588804206163 25.1019894528725, 121.588775807287 25.1021267346864, 121.588789589095 25.1022458634082, 121.588771630982 25.1023865486065, 121.588746155519 25.1025877432864, 121.588743649736 25.1027375045249, 121.588726526884 25.1027666247444, 121.58868351094 25.1028116287064, 121.588521887924 25.1029560950943, 121.588509359008 25.1029980735154, 121.588512700052 25.1031875435067, 121.588527734751 25.1032314127642, 121.588595390897 25.1033044020975, 121.58872276821 25.1033660459047, 121.588808800099 25.1033959223399, 121.588939936086 25.1034556751884, 121.589080677575 25.1035120243669, 121.589263182118 25.1035551371437, 121.589416452523 25.1035774498906, 121.589678724497 25.1035509771396, 121.58981528968 25.1035468171354, 121.589871252172 25.1036058135461, 121.589934314382 25.1037071662879, 121.589970230608 25.1038130571224, 121.589983594785 25.1038633552367, 121.58997190113 25.1039647077651, 121.589991529765 25.1041159800392, 121.590017005227 25.1042237614203, 121.59012141286 25.1043349463245, 121.59033315154 25.1044502911012, 121.590453429133 25.1044835708855, 121.590533196564 25.1045036143875, 121.59077333412 25.1046053445641, 121.591226045616 25.1047668268641, 121.591454071887 25.1048950292875, 121.591696297595 25.1050220970437, 121.59181031073 25.1050232315766, 121.591870867157 25.1050602929803, 121.591860426394 25.1051336593993, 121.59186543796 25.1053038390678, 121.591879219768 25.1055541918385, 121.591934764629 25.1057338253083, 121.591941446717 25.105813998477, 121.591929753062 25.1058661866435, 121.59185750298 25.1059145930388, 121.591743907476 25.105923291061, 121.591672910285 25.1059198874872, 121.591625300405 25.1058900116686, 121.591565579239 25.1058272346083, 121.591541356668 25.1057890389112, 121.591520892772 25.1057198328159, 121.591505022812 25.1055901185535, 121.591496670201 25.1054808256718, 121.591479129719 25.1054172920485, 121.591429014055 25.1053651036905, 121.591333794294 25.1053272860258, 121.591240245054 25.1053598092181, 121.591170083125 25.1054271246352, 121.591104097501 25.105579907804, 121.591059828665 25.1056857970169, 121.591021824286 25.105749708676, 121.590955838662 25.1057916861381, 121.590892358822 25.1057981151175, 121.590822614523 25.1057807190548, 121.590695237211 25.1057323126065, 121.590403313469 25.1056233980276, 121.590265913024 25.1055625117103, 121.59008173796 25.1054653204453, 121.589996958962 25.1054282591644, 121.589957701692 25.1054479243353, 121.589929302816 25.1054789347906, 121.589842853295 25.1055693188777, 121.589790231849 25.1056354996522, 121.589635290921 25.1056702918165, 121.589510419392 25.1057039494442, 121.589136222436 25.1057875262101, 121.58895872946 25.1058336635858, 121.588855992349 25.1058850953939, 121.588758684435 25.1059902279932, 121.588675575959 25.1060953605022, 121.588599149572 25.1061176727856, 121.588435020773 25.1061048148601, 121.588328524988 25.1060707791683, 121.588279244585 25.1060439287825, 121.588242910729 25.10601783474, 121.588263374625 25.1059940097397, 121.5883068082 25.1060053549785, 121.588371540932 25.106042794259, 121.588474278043 25.1060738045635, 121.588595808528 25.1060745609123, 121.588658453108 25.1060280454529, 121.588761607849 25.1059221565364, 121.588837616606 25.1058563540921, 121.588939936086 25.1058109730753, 121.589038914522 25.1057841226325, 121.589342114288 25.1057126474813, 121.589606056784 25.1056491139785, 121.58970503522 25.1056203726212, 121.589870416911 25.105467589503, 121.589943919884 25.1053942232843, 121.589978165588 25.1053908196958, 121.590029951774 25.1053953578138, 121.59012141286 25.1054513279222, 121.590259230936 25.1055322576283, 121.590306840816 25.1055560827185, 121.590438812064 25.1056052455883, 121.590795468538 25.1057236145707, 121.59091491087 25.1057221018688, 121.590991754888 25.1056960077576, 121.591043123443 25.1056173472148, 121.591099503565 25.1054883891961, 121.59115045449 25.1054093503433, 121.59122145168 25.1053322023228, 121.591270732083 25.1052958973552, 121.59133922349 25.1052845520506, 121.591403120962 25.1052947628248, 121.591473700522 25.1053579183351, 121.591515463575 25.1054324191047, 121.591535927471 25.1054887673723, 121.591540939037 25.1055950348401, 121.591551379801 25.1056948732309, 121.591573096588 25.1057727773732, 121.591639917473 25.105843496139, 121.59170799125 25.1058722374439, 121.591766877155 25.105874506494, 121.591829939365 25.1058419834386, 121.59188089029 25.1057829881066, 121.591883396073 25.1057323126065, 121.591847062217 25.1056222635002, 121.59181031073 25.105343547623, 121.591813651774 25.1051015143242, 121.591880472659 25.1049880610505, 121.592011608646 25.1048851966581, 121.59210849893 25.1048420843502, 121.59228975058 25.1048466224886, 121.592540328899 25.1048746076716, 121.592748308904 25.1049290653066, 121.592856892843 25.1049994063826, 121.592981346741 25.1050538639621, 121.593168445219 25.1050727728382, 121.593438234543 25.1051158850647, 121.593748951658 25.1051279867396, 121.593869229251 25.1051128596458, 121.59399368315 25.1051121032911, 121.594122313353 25.1051582409216, 121.594335304925 25.1052300945739, 121.594531591274 25.1052512724844, 121.594625975775 25.1052346326979, 121.594683608788 25.1051937895759, 121.594818085819 25.1050417622799, 121.594843143651 25.1049865483395, 121.594876554094 25.104866287753, 121.594922493452 25.1048027538104, 121.59499182012 25.1046575332464, 121.59499182012 25.1045206324527, 121.594931681324 25.1041515289964, 121.594906623492 25.1040653038482, 121.594899941403 25.1039964749581, 121.594912470319 25.1038557916118, 121.594889918271 25.1038081407643, 121.594875718832 25.1037298571887, 121.594916646625 25.1036470353803, 121.594948804176 25.103665944474, 121.594932215053 25.1037065241669)","wkt1":"LINESTRING (121.594932215053 25.1037065241669, 121.594919956945 25.1037490208535, 121.594920931416 25.1037792753772, 121.594948495031 25.1038443225779, 121.594933321122 25.1039600460004, 121.594926639033 25.1040243367434, 121.594945850038 25.1040971995446, 121.5949781468 25.1041829204317, 121.594991510977 25.1042522534581, 121.595011000402 25.1044196610398, 121.595027705624 25.1045250470205, 121.595034666133 25.1046672423145, 121.595016011969 25.1047176661379, 121.594912161174 25.1048981832553, 121.594874852846 25.1050212171155, 121.594810816164 25.1051102148922, 121.594694158033 25.1052201384023, 121.594634019235 25.1052713183515, 121.594563578884 25.1052851848365, 121.594486178024 25.1052872017796, 121.594288777989 25.1052473671464, 121.594053512786 25.1051618991237, 121.593953003036 25.1051515622791, 121.593798201316 25.1051571088788, 121.593688225274 25.1051644203051, 121.593304562018 25.1051248377501, 121.59295709341 25.1050814734076, 121.592815655867 25.1050098717852, 121.5927176519 25.1049564226594, 121.592584010128 25.1049110413079, 121.592307817131 25.1048696938396, 121.592106240791 25.1048646514645, 121.592027169409 25.1048938972374, 121.591908005495 25.1050219734708, 121.591791625784 25.1050935750862, 121.591551627434 25.1049871811215, 121.591195249374 25.1047799395311, 121.590915715333 25.1046881682037, 121.590651772832 25.1045984137619, 121.59058049722 25.1045600916207, 121.590346624118 25.104497565996, 121.59024750647 25.1044461336033, 121.590041475404 25.1043362093975, 121.589955721933 25.1042484716577, 121.589941244075 25.1041607338549, 121.589923425172 25.1040346736833, 121.589936789349 25.1038854182721, 121.589935675668 25.1037845699181, 121.589862172693 25.1036363226868, 121.589785328673 25.1035758135612, 121.589485748367 25.1036070766132, 121.589374380223 25.103602034186, 121.589132711351 25.1035576608177, 121.588985705401 25.1035183298641, 121.588830903681 25.1034487442999, 121.588677215642 25.1033842011325, 121.588540232825 25.1033015051495, 121.588482321391 25.1032389788813, 121.588476752983 25.1031502318651, 121.588475639302 25.1029787885833, 121.588496799249 25.1029142451678, 121.588548028596 25.1028678545669, 121.588643805199 25.1027972601405, 121.588696148227 25.1027538949727, 121.588712853448 25.1025925360735, 121.588738468121 25.1024261344857, 121.588754059662 25.102314191472, 121.588749604936 25.1021356875355, 121.58875294598 25.1020328207419, 121.588854290991 25.1016929563087, 121.588904406656 25.1015305875072, 121.588958977046 25.1014257031979, 121.589034707384 25.1012915721712, 121.589146075528 25.1011604665143, 121.589233499521 25.1010419670496, 121.589323150877 25.100921450455, 121.589401108577 25.100844299602, 121.589474611552 25.1007610976471, 121.589525284058 25.1006657935202, 121.589545330323 25.1005901552713, 121.589540318757 25.1005215765519, 121.589526397739 25.1004746807879, 121.589528068261 25.1003894615577, 121.589540318757 25.1003435742553, 121.589626072228 25.100228099539, 121.589686767866 25.1001590163597, 121.589800363373 25.1000637117636, 121.589843240108 25.1000042093856, 121.589830432772 25.0999542878765, 121.589517488287 25.0997525846023, 121.589418370639 25.0996668606101, 121.589329276124 25.0995670172963, 121.589281387823 25.0994782676156, 121.589269137327 25.0994157393929, 121.589294752 25.0990244330148, 121.58928695623 25.0989376999883, 121.589207884848 25.098783395731, 121.589097630385 25.0985463920809, 121.589037491588 25.0984243602351, 121.589019672685 25.0983577973589, 121.589001853782 25.0981096990464, 121.58896176125 25.0979775814471, 121.588867098328 25.0978348741088, 121.588820602128 25.0978290750439, 121.588611786858 25.0979284155101, 121.588459212501 25.0980166620495, 121.588356753808 25.0981802961784, 121.588345895414 25.0982478676809, 121.588328633352 25.0985458878173, 121.588307473405 25.0987813786806, 121.588349793299 25.0989351786784, 121.588307612615 25.0989834617526, 121.588223947297 25.099025441538, 121.588139307508 25.099007288119, 121.588126082541 25.0989441293281, 121.58810269523 25.0987661247358, 121.58809434262 25.0986375376879, 121.588016384919 25.0984459175225, 121.587946222988 25.0983990209626, 121.587876061058 25.0983995252268, 121.587845434818 25.0983082533763, 121.587860469518 25.098290099851, 121.587988542883 25.098351115856, 121.588072068991 25.0985119760871, 121.588134435151 25.0987151941957, 121.588166175072 25.0989259758971, 121.588253599065 25.0989411037565, 121.588285338986 25.0988982414835, 121.588304271571 25.09862846095, 121.588296475801 25.098479703205, 121.588307055774 25.0982689207347, 121.588332113607 25.0981418459598, 121.588382786112 25.0980500696514, 121.588453504883 25.0979804809761, 121.588716333703 25.0978387821742, 121.588787609315 25.0978004579149, 121.588883942759 25.0977127154865, 121.588968582549 25.097616904717, 121.589009788762 25.0975241194792, 121.589054336019 25.0973768731964, 121.589084405418 25.0972982073015, 121.58917906834 25.097190293748, 121.589262594448 25.0970339702072, 121.58926370813 25.096873612303, 121.589190205155 25.0967566214981, 121.589028721346 25.0965569300382, 121.588989742496 25.096492383234, 121.588952991008 25.0963320246198, 121.588950763646 25.0962785717017, 121.589023152939 25.0961615803278, 121.589087746463 25.0959911357983, 121.589037630798 25.0959528109601, 121.58867568433 25.0958196824817, 121.588446265954 25.0957036992195, 121.588261394835 25.0956583144348, 121.587972951343 25.0956724341474, 121.587859355836 25.095674451249, 121.587675598399 25.0956472203737, 121.587360426552 25.0955937671564, 121.587139917627 25.0955645191597, 121.586903817162 25.0955947757079, 121.586636533617 25.0956512545779, 121.586437184639 25.09577530629, 121.586362567983 25.0958085884353, 121.586289065008 25.09577732339, 121.586226698848 25.0957057163206, 121.586330271221 25.095529219844, 121.586446094091 25.0954757665751, 121.587024094757 25.0952508591691, 121.587324788746 25.0951005844835, 121.587592072291 25.0948514710075, 121.587834854844 25.0944540986639, 121.587844877977 25.0942816346309, 121.587869378969 25.0939034231811, 121.588006361786 25.0935746304107, 121.588112161523 25.0932246567671, 121.588219074941 25.092865604957, 121.588360512483 25.0924773033585, 121.588383899794 25.0922786134925, 121.588707981092 25.0917995376157, 121.588842736546 25.0915796663747, 121.589187977792 25.0913718977748, 121.589297118573 25.0911651374102, 121.589468625514 25.0908514661411, 121.589554378985 25.0907314438029, 121.589722544882 25.0906235244571, 121.589647928226 25.0902937142778, 121.589745932192 25.0901051068339, 121.589706953342 25.0899548258282, 121.58931827852 25.0895483601701, 121.589151226304 25.0894565774153, 121.589033176072 25.0893900096599, 121.58900087931 25.0893103300264, 121.589053222338 25.0892245987171, 121.589144544216 25.0891771943203, 121.589321619565 25.0891247468812, 121.589431874027 25.0890652391827, 121.589862868744 25.0887646744327, 121.589989828428 25.0887182784659, 121.590134607014 25.0886950804759, 121.590281612964 25.088638598395, 121.59039409479 25.0885185738864, 121.590458688313 25.0884641089445, 121.590707039274 25.0883370239858, 121.590874091489 25.0881756460703, 121.590943139739 25.0880172937839, 121.590972095456 25.0877953985155, 121.591001051173 25.0875967010474, 121.591082349918 25.0874504514358, 121.591191490699 25.0873052102693, 121.591365225004 25.0866677608889, 121.591359656597 25.0863268451424, 121.591347406101 25.0861926975617, 121.591501094139 25.0861231021424, 121.591948794077 25.086126128031, 121.592086890576 25.0861160417353, 121.592111391567 25.0860666188744, 121.591863040607 25.0856934251987, 121.591621371735 25.0853232562936, 121.59158684761 25.0852607208367, 121.591902019457 25.085141701653, 121.592405403467 25.0850085614121, 121.593039088205 25.0848522223079, 121.593617088872 25.0847523669046, 121.593621543598 25.0846615891946, 121.592996768311 25.0841602932944, 121.591802901809 25.0832272924405, 121.591019983758 25.0825958737736, 121.590404117923 25.0821026387152, 121.589979805295 25.0819583998666, 121.587866037925 25.0814581015639, 121.587797781433 25.081502096817, 121.587735597986 25.0816370139186, 121.587620331957 25.0817056032227, 121.587446040812 25.0816813952374, 121.587454017121 25.0816472818282)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0151000220'=='0100020200' || '0151000220'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
