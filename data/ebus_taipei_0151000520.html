
<!DOCTYPE html>
<!--[if lt IE 8]> <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if IE 9]>    <html class="no-js ie9 oldie" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<head>
    <script>
        var SitePath = '/';
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no" />
    <title>大臺北公車</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=4, minimum-scale=0.5, user-scalable=yes">

    <link rel="stylesheet" href="/styles/html5reset-1.6.1.min.css" />
    <link href="/web/css?v=sRaS4eVeEUiSbsmDNyPCQX6_bGwBuAfoNm1EFEuVJsQ1" rel="stylesheet"/>

    <link rel="stylesheet" type="text/css" media="screen and (max-width:768px)" href="/pad/css?v=-VA-V4vm8GvG2qYKGZXk3Qi1cWfbcBMLSWm5uytMv8A1">

    <link rel="stylesheet" type="text/css" media="screen and (max-width:480px)" href="/phone/css?v=tNT4bc9cbLmN5rC7jOPAfHE2gTc_N47eqhKenWJ5sQk1">

    
    
    
    <link href="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1" rel="stylesheet"/>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <link href="/CustomScrollbar/css?v=cTpwHD23PH7gbg8rY79THNO6JzhoW_RwUaR7zeCFjOI1" rel="stylesheet"/>

    <link href="/toastr/css?v=bUMX5PdhipTCZJVvmdqKc60mrvySkxFZQUqXQRjL8kI1" rel="stylesheet"/>

    <link href="/simpleRouteMap/css?v=eN0OvNIAPpKksgTz7sjIy-B4L9bOLNcs7ckhBHKid1Q1" rel="stylesheet"/>




    <script>
        var viccknCulture = null;
        function Mybus(event, _elem) {
            event.preventDefault();
            var islogin = jQuery('a.login-link');
            if (islogin.length>0) {
                //
                alert(i18n._('Please Login'));
            } else {
                window.location.replace(_elem.href);
            }
        }
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <script src="/bundles/jquery?v=q7mEgdXrcJJy32YRlrFef8zHiCgDFSUdNzefyodQYIQ1"></script>

    

    

</head>
<body class="tebus">
    <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or
    <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
    <a href="javascript:void(0);" class="tebus-up web-none" title="置頂"></a>  
    <!-- being header web-->
    <header class="tebus-main-header-c  pad-none">
        <div class="teBUS-main-header">
            <div class="teBUS-logo-c">
                <a href="/Dybus.aspx" class="teBUS-logo" title="首頁"></a>
                <p class="teBUS-visite">到訪人數<span class="teBUS-visite-number">231492713</span></p>
            </div>
            <nav class="teBUS-nav-language-marquee-c">
                <ul class="teBUS-nav-language-c">
                    
                            <li class="pad-none">
                               
                            <a class="nav-language-link" href="https://e-bus.tpc.gov.tw" target="_blank">無障礙 </a> /
                            </li>


                    <li><a class="nav-language-link" href="/Home/SetCulture?culture=zh-TW&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000520">中文</a> / </li>
                        <li><a class="nav-language-link" href="/Home/SetCulture?culture=en&amp;returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000520">English</a> / </li>
                    <li><a class="nav-language-link login-link" href="javascript:void(0);" alt="會員登入">會員登入</a>/</li>
                    <li><a href="/MyBus" class="nav-language-link" onclick="Mybus(event, this)">我的公車</a></li>
                    <li>/<a class="nav-language-link" href="https://www.pto.gov.taipei/Questionnaire_Content.aspx?n=63FD5A257079935F&s=E4505D512A861F41&sms=7F78FC0503254E9A" target="_blank">滿意度調查</a> </li>

                      
                    
                </ul>
                <input id="marqueeSpeed" name="marqueeSpeed" type="hidden" value="6" />
                
                <marquee scrollamount="6"><div class='teBUS-marquee2' ></div></marquee>
            </nav>
        </div>
    </header>
    <!-- end header web-->
    <!-- being header pad-->
    <header class="teBUS-pad-main-header-c web-none">

        <div class="teBUS-pad-main-nav-icon">
            <ul class="teBUS-nav-main-language-pad-c">
                <li class="nav-main-language-title">語言</li>

                <li>
                    <span class="label-checkbox-language-c">

<form action="/Home/SetCulture?returnURL=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000520" id="SetCultureForm" method="get" role="form">                            <label class="label-radio label-checkbox-language">
                                <input checked="checked" class="radio fast-search-radio" id="culture" name="culture" type="radio" value="zh-TW" />
                                中文
                            </label>
                            <label class="label-radio label-checkbox-language">
                                <input class="radio fast-search-radio" id="culture" name="culture" type="radio" value="en" />
                                English
                            </label>
<input id="returnURL" name="returnURL" type="hidden" value="/Route/StopsOfRoute?routeid=0151000520" /></form>                    </span>
                </li>
                <li class="nav-main-language-title">功能選單</li>
                
                <li><a href="/ebus" class="main-nav-pad">公車動態</a></li>
                <li><a href="/Query/BusRoute" class="main-nav-pad">GIS動態</a></li>
                <li><a href="/Transfer/TransPlan" class="main-nav-pad">轉乘規劃</a></li>
                
                    <li><a href="https://pda.5284.gov.taipei" class="main-nav-pad">PDA</a></li>
                    <li><a href="/projectbus" class="main-nav-pad">專區</a></li>
                        <li><a href="/RelatedLinks" class="main-nav-pad">相關連結</a></li>
                        <li></li>
                
            </ul>
        </div>
        <div class="teBUS-main-nav-pad-c">
            <a href=javascript:history.back(); class="teBUS-pad-main-come-back-icon" title="回上一頁"></a>
            <a href="/Dybus.aspx" class="teBUS-logo-pad" title="logo" alt="logo"></a>
            <a href=javascript:toggleMenu(); class="teBUS-pad-main-nav-icon-c" title=""></a>
        </div>
    </header>
    <!-- end header pad-->
    <!-- being content -->
    <div class="teBUS-main-container">

        <!--begin main list-->
        <div class="teBUS-main-nav-c pad-none">

    <ul class="teBUS-main-nav-pool">
        <li class="main-nav-typt"><a href="javascript:void(0)" onclick="history.go(-1)" class="main-nav" title="回上一頁"><img src="/images/nav_011.svg" width="100%" alt="回上一頁"></a></li>
       
            <li class="main-nav-typt"><a href="/ebus" class="main-nav"><img src="/images/nav_013.svg" width="100%" alt="公車動態">公車動態</a></li>
        <li class="main-nav-typt"><a href="/Query/BusRoute" class="main-nav" title="GIS動態"><img src="/images/nav_002.svg" width="100%" alt="GIS動態">GIS動態</a></li>
        <li class="main-nav-typt"><a href="/Transfer/TransPlan" class="main-nav" title="轉乘規劃"><img src="/images/nav_003.svg" width="100%" alt="轉乘規劃">轉乘規劃</a></li>

       
        <li class="main-nav-typt"><a href="https://pda.5284.gov.taipei" target="_blank" class="main-nav"><img src="/images/atk-PDA.svg" width="100%" alt="PDA">PDA</a></li>
        <li class="main-nav-typt">
            <a href="/Query/NearBus" class="main-nav"><img src="/images/atk-nearbystop.svg" width="100%" alt="附近站牌">附近站牌</a>
        </li>
        

        
        <li class="main-nav-typt"><a href="/RelatedLinks" class="main-nav" title="相關連結"><img src="/images/nav_008.svg" width="100%" alt="相關連結">相關連結</a></li>
        
        <li class="main-nav-typt"><a href="/projectbus" class="main-nav" title="專區"><img src="/images/nav_012.svg" width="100%" alt="專區">專區</a></li>

        
    </ul>
</div>
<div id="Login_DL" class="teBus-dialog-c" style="display:none">
    <form id="LoginForm">
        <div class="teBus-dialog login-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img login-img" alt=" "></span>會員登入</h1>
            <span class="teBus-dialog-close-icon-c"><a href='javascript: void(0);' class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>

            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li" style=" margin:0 auto;width: 50%;">
                    

                   
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                    
                </li>

                <li>
                    <label class="teBus-login-dialog-enter-c">
                        <input class="teBus-dialog-checkbox-one login-enter-checkbox" data-val="true" data-val-required="記住我 欄位是必要項。" id="RememberMe" name="RememberMe" type="checkbox" value="true" /><input name="RememberMe" type="hidden" value="false" />
                        <label for="RememberMe">記住我</label>
                        
                        <a href="javascript:void(0)" class="teBus-dialog-submit login-enter-submit">登入</a>
                        <!--input type="submit" value="登入" class="teBus-dialog-submit login-enter-submit"-->
                    </label>
                </li>
            </ul>

            <div class="teBus-login-dialog-link-pool ">
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one register-link"><img src="/images/dialog_register_icon.svg" width="100%">註冊</a>
                <a href="javascript:void(0)" class="teBus-login-dialog-link-one forgot-password-link"><img src="/images/dialog_forgot_password_icon.svg" width="100%">忘記密碼</a>
                
    <a href="javascript:void(0)" class="teBus-login-dialog-link-one resend-confirm-email-link"><img src="/images/atk-resendmail.svg" width="100%">重發確認信</a>
                
                
            </div>
        </div>

    </form>
<form action="/Account/ExternalLogin?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000520" class="form-horizontal" id="ExternalLoginForm" method="post" role="form">        <input type="hidden" name="__RequestVerificationToken" class="verification-token" />
        <input type="hidden" name="provider" />
</form></div>

<script>
    function OpenLoginDialog() {
        $("#Login_DL").dialog('open');
        // Press enter key to submit
        $(".teBus-dialog-input-text-one").keyup(function (event) {
            if (event.keyCode == 13) {
                $(".login-enter-submit").click();
            }
        });
    }
    function CloseLoginDialog() {
        $("#Login_DL").dialog('close');
    }
    $(function () {
        $("#Login_DL").show();
        $("#Login_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Login_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#LoginForm").find('input[name="Email"]').val('');
                $("#LoginForm").find('input[name="Password"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $('.login-enter-submit').click(function () {
            if ($('#LoginForm').valid()) {
 
                    $.ajax({
                        url: '/Account/Login?ReturnUrl=%2FRoute%2FStopsOfRoute%3Frouteid%3D0151000520',
                        dataType: "json",
                        type: "post",
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest',
                            "Email": $("#LoginForm").find('input[name="Email"]').val(),
                            "Password": $("#LoginForm").find('input[name="Password"]').val(),
                            "RememberMe": $('input[name="RememberMe"]').is(":checked"),
                            "RecaptchaToken": $('[name=h-captcha-response]').val()
                            //"RecaptchaToken": $('#LoginForm textarea').val()
                        },
                        success: function (data) {
                            if (data.ErrorCode === 100) window.location.replace(data.Msg);
                            if (data.ErrorCode === 101 || data.ErrorCode === 103) $("#LoginForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                            if (data.ErrorCode === 102) $("#LoginForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        }
                    });
            }
        });

        // Register, forgot password link clicked
        $(".register-link,.forgot-password-link,.resend-confirm-email-link").click(function () {
            var startDate = new Date('2015-12-11 10:29:00');
            var endDate = new Date('2015-12-11 10:29:30');
            var now = new Date();
            if (now > startDate && now < endDate) {
                swal({
                    title: "HTML <small>系統公告</small>!",
                    text: "<h3>親愛的使用者您好</h3> <label> 由於系統設備將於2015/12/12進行維護，</label><label>會影響本系統部分功能的使用，</label><label>造成不便敬請見諒</label>",
                    html: true
                });
            } else {
                if ($(this).hasClass('register-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenRegisterDialog();
                    }, 400);

                }
                if ($(this).hasClass('forgot-password-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenForgotPasswordDialog();
                    }, 400);

                }
                if ($(this).hasClass('resend-confirm-email-link')) {
                    CloseLoginDialog();
                    setTimeout(function () {
                        OpenResendConfirmEmailDialog();
                    }, 400);

                }
            }

        });

        // External Login
        $('.facebook-login, .g-login').click(function () {
            if ($(this).hasClass('facebook-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Facebook');
            }
            if ($(this).hasClass('g-login')) {
                $('#ExternalLoginForm').find('input[name="provider"]').val('Google');
            }
            $('#ExternalLoginForm').submit();

        });
    });
</script>


<!-- dialog_會員註冊 BEGIN-->
<div id="Register_DL" class="teBus-dialog-c" style="display:none">
    <form id="RegisterForm">
        
        <div class="teBus-dialog register-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img register-img" alt=" "></span>註冊</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title"> 電子郵件</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" title="ex. ebus-taipei@mail.com" type="text" value="" /></label>
                    <a href="javascript:void(0)" class="register-a-one-icon register-check-icon" style="display:none"></a>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
           
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">名稱</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-required="名稱是必要項" id="Nickname" name="Nickname" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Nickname" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-length="密碼必須至少6個字元長度" data-val-length-max="100" data-val-length-min="6" data-val-required="密碼是必要項" id="Password" name="Password" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Password" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">確認密碼</span>
                    <label><input autocomplete="off" class="teBus-dialog-input-text-one" data-val="true" data-val-equalto="兩次密碼輸入並不相同" data-val-equalto-other="*.Password" id="ConfirmPassword" name="ConfirmPassword" type="password" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="ConfirmPassword" data-valmsg-replace="true"></span>
                </li>
                <!--li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">上傳照片</span>
                    <label><input name="" type="text" value="" class="teBus-dialog-input-text-one"></label>
                    <a href="javascript:void(0);" class="register-a-one-icon register-browse-icon">瀏覽</a>
                    <div class="teBus-dialog-gust-photo-img" title="預覽照片" ><img src="images/dialog_gust_photo_img.svg" width="100%" alt="預覽照片"></div>
                </li-->
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    <span class="teBus-dialog-li-title">認證</span>
                    <p class="teBus-diolag-note"></p>
                    <div class="col-md-10">
                        <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                        <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                        </div>

</li>
            </ul>
            <!--input type="submit" value="註冊" class="teBus-dialog-submit register-enter-submit"-->
            <!--input type="submit" value="取消" class="teBus-dialog-submit register-close-submit"-->
            <a href="javascript:void(0)" class="teBus-dialog-submit register-enter-submit">註冊</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit register-close-submit">取消</a>
        </div>
      
    </form>
</div>
<!-- dialog_會員註冊 END-->

<script>
    function OpenRegisterDialog() {
        $("#Register_DL").dialog('open');
    }
    function CloseRegisterDialog() {
        $("#Register_DL").dialog('close');
    }
    function verifyCallback(token) {
        alert(token)
    }

    $(function () {
        $("#Register_DL").show();
        $("#Register_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#Register_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#RegisterForm").find('input[name="Email"]').val('');
                $("#RegisterForm").find('input[name="Nickname"]').val('');
                $("#RegisterForm").find('input[name="Password"]').val('');
                $("#RegisterForm").find('input[name="ConfirmPassword"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        // Form subnit action
        $(".register-enter-submit").click(function () {
            debugger;
            //$("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text('');
            if ($('#RegisterForm').valid()) {
                
                $.ajax({
                    url: '/Account/Register',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#RegisterForm").find('input[name="Email"]').val(),
                        "Nickname": $("#RegisterForm").find('input[name="Nickname"]').val(),
                        "Password": $("#RegisterForm").find('input[name="Password"]').val(),
                        "ConfirmPassword": $("#RegisterForm").find('input[name="ConfirmPassword"]').val(),
                        "Tel": '',
                        "RecaptchaToken":$('#RegisterForm textarea').val()
                            //$('.h-captcha iframe').data("hcaptcha-response")
                            //$("iframe").attr("data-hcaptcha-response")
                          //  $('[name=h-captcha-response]').val()
                      
                    },
                    success: function (data) {
                        if (data.ErrorCode === 200) {
                            $(".register-close-submit").trigger('click');
                            alert('Welcome! 歡迎申請[大台北公車]會員');
                        }
                        if (data.ErrorCode === 201) $("#RegisterForm").find('input[name="recaptcha_challenge_field"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                        if (data.ErrorCode === 202) $("#RegisterForm").find('input[name="Password"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });


            }
        });

        $("#RegisterForm").find('input[name="Email"]').focusout(function () {
            if ($("#RegisterForm").find('input[name="Email"]').valid())
            $.ajax({
                url: '/Account/AccountAvailable',
                dataType: "json",
                type: "post",
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    "account": $("#RegisterForm").find('input[name="Email"]').val()
                },
                success: function (data) {
                    if (data.ErrorCode === 100) {
                        $(".register-check-icon").css("background-color", "#75bc59");
                        $(".register-check-icon").text('✔');
                        $(".register-check-icon").show();
                    }
                    if (data.ErrorCode === 101) {
                        $(".register-check-icon").css("background-color", "#FF0000");
                        $(".register-check-icon").text('✘');
                        $(".register-check-icon").show();
                    }
                }
            });
        });

        $(".register-close-submit").click(function () {

            CloseRegisterDialog();

        });
    });
</script>

<!-- dialog_忘記密碼 BEGIN-->
<div id="ForgetPw_DL" class="teBus-dialog-c" style="display:none">
    <form id="ForgotPasswordForm">
        <div class="teBus-dialog forgot-password-c">
            <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img forgot-password-img" alt=" "></span>忘記密碼</h1>
            <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0)" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
            <ul class="teBus-dialog-ul">
                <li class="teBus-dialog-li">
                    <span class="teBus-dialog-li-title">電子郵件 </span>
                    <label><input class="teBus-dialog-input-text-one" data-val="true" data-val-email="電子郵件欄位不是有效的電子郵件地址。" data-val-required="電子郵件是必要項" id="Email" name="Email" type="text" value="" /></label>
                    <span class="field-validation-valid teBus-diolag-note" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </li>
                <li class="teBus-dialog-li"  style=" margin:0 auto;width: 50%;">
                    
                    
                    <div class="h-captcha" data-sitekey="e57803e5-35a9-40c1-92dc-889ae1a81fc8"></div>
                    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
                </li>
            </ul>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-enter-submit">送出</a>
            <a href="javascript:void(0)" class="teBus-dialog-submit forgot-password-close-submit">取消</a>
        </div>
    </form>
</div>
<!-- dialog_忘記密碼 END-->

<script>
    function OpenForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('open');
    }
    function CloseForgotPasswordDialog() {
        $("#ForgetPw_DL").dialog('close');
    }

    $(function () {
        $("#ForgetPw_DL").show();
        $("#ForgetPw_DL").dialog({
            autoOpen: false,
            modal: true,
            width: $("#ForgetPw_DL").find('.teBus-dialog').width(),
            show: {
                effect: "clip",
                duration: 300
            },
            hide: {
                effect: "clip",
                duration: 300
            },
            close: function (event, ui) {
                $("#ForgotPasswordForm").find('input[name="Email"]').val('');
            },
            position: { my: "center", at: "center", of: window }
        });
        $('.forgot-password-enter-submit').click(function () {
            if ($('#ForgotPasswordForm').valid()) {
                $.ajax({
                    url: '/Account/ForgotPassword',
                    dataType: "json",
                    type: "post",
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest',
                        "Email": $("#ForgotPasswordForm").find('input[name="Email"]').val(),
                        "RecaptchaToken": $('#ForgotPasswordForm textarea').val()
                    },
                    success: function (data) {
                        if (data.ErrorCode === 300) {
                            $(".forgot-password-close-submit").trigger('click');
                            alert(data.Msg);
                        }
                        if (data.ErrorCode === 301 || data.ErrorCode === 103) $("#ForgotPasswordForm").find('input[name="Email"]').closest('.teBus-dialog-li').find('.teBus-diolag-note').text(data.Msg);
                    }
                });
            }
        });

        $(".forgot-password-close-submit").click(function () {
            CloseForgotPasswordDialog();
        });
    });
</script>


<script>
    $(function () {
        // Login link clicked
        $(".login-link").click(function () { OpenLoginDialog(); });
    });
</script>

        <!--end main list -->
        
<input name="__RequestVerificationToken" type="hidden" value="ofAhrks87yCMb9OodSiqEbmovtW-OG9mUMT3QguGuCZkrWvZg9OuTxgyI2i55EHsWdJi48r62ihN5h7ZRU0knjA9PAI1" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54651832-1', { 'cookieDomain': 'none' });
  ga('set', 'language', 'zh-TW');
  ga('set', 'screenResolution', screen.width + 'x' + screen.height);
  ga('set', 'viewportSize', screen.availWidth + 'x' + screen.availHeight);
  ga('set', 'screenColors', screen.colorDepth + '-bits');
  ga('set', 'hostname', location.hostname);

  ga('send', 'pageview');
  ga('send', 'event', {
      'eventCategory': 'PageView',
      'eventAction': 'Inter',
      'eventLabel': document.location.pathname,
      'eventValue': 1
  });

</script>

<script>
    $(function () {
        var token = $('input[name=__RequestVerificationToken]').filter(function () { return $(this).val() !== '' });
        $('input[name=__RequestVerificationToken]').val(token.val());
    });
</script>

    <script>
        $(function () {
            $('#sectionMain').show();
        });
    </script>

<script>
    $(function () {
    var alertPageNum = '2';
        $.ajax({
            url: '/NewsAlert/GetAlertNews',
            type: 'post',
            dataType: 'json',
            data: {
                '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                'X-Requested-With': 'XMLHttpRequest'
            },
            error: function (response) {
            },
            success: function (response) {
                response.forEach(function (info) {
                    var s = info.AlertPageList.split(';');
                    s.forEach(function (v) {
                        if (v == alertPageNum) {
                            var img = '';
                            if (info.AlertPicLink != null && info.AlertPicLink.length > 0)
                            {
                                //img = '<img src="' + info.AlertPicLink + '"   ><br/>';
                                img = '<img class="swal2-image" src="' + info.AlertPicLink + '" alt="">';
                                //img = info.AlertPicLink;
                            }

                            if (localStorage.getItem("FnAlertId" + info.Id) != "true")
                                Swal.fire({
                                    title: '<font color="#E78838">' + info.AlertContent + '</font>',
                                    html: img,
                                    //imageUrl: img,
                                    async: false,
                                    confirmButtonText: '確定',
                                    input: 'checkbox',
                                    inputPlaceholder: '不再提示'
                                }).then((result) => {
                                    /* Read more about isConfirmed, isDenied below */
                                    if (result.isConfirmed) {
                                        if (result.value) {
                                            localStorage.setItem("FnAlertId" + info.Id, "true");
                                        } else { }
                                    } else if (result.isDenied) {
                                        //Swal.fire('Changes are not saved', '', 'info')
                                    }
                                });//end swal
                        }
                    });

                });//for
            },
            complete: function () {
              
            }
        });
    });

</script>
<section class="info-c route-list" id="sectionMain" style="display:none;">
    <div id="findPanel" class="word-info-c stationlist-c">
        <h2>查詢結果</h2>
        <div class="search-c">
            <div class="stationlist-text-c">
                                <img src="/images/taipei_city.svg" width="100%" class="vipstop-city" alt="臺北市">                
 <span class="stationlist-title">小5區 </span>                 

                        <a href="../EBus/VsSimpleMap?routeid=0151000520" class="stationlist-move-route-icon stationlist-move-table-icon @*pad-none*@" title="動態簡圖" alt="動態簡圖"></a>
                    <a href="../MapOverview?nid=0151000520" target="_blank" class="stationlist-move-route-icon stationlist-route-list-icon" style="width:90px;height:30px;position:relative;" title="路線圖" alt="路線圖"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-info-table-icon " title="公車資訊" alt="公車資訊"></a>
                        <a href="javascript:void(0);" class="stationlist-move-route-icon stationlist-bus-time-icon" title="時刻表" alt="時刻表"></a>

                    <br />


                            <a style="color:#4CAF50;">臺北市公共運輸處公車申訴服務電話02-27291181</a>                </div>
            <ul class="stationlist-move-route-bus-info" style="display: none;">
                <li>
                    <span class="stationlist-move-route-bus-item">起迄站名 :</span>
                    <span class="stationlist-move-route-bus-content">捷運昆陽站 - 茶葉製造示範廠</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">頭末班車 :</span>
                    <span class="stationlist-move-route-bus-content">
                        [平日] 0600 - 2100 <br>
                        [假日] 0600 - 2100
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item-02">發車間隔 :</span>
                    <span class="stationlist-move-route-bus-content">
[平日] <br /> 班表:0600 0640 0730 0900 1000 1120 1715 1945 2100<br>
[假日]<br /> 班表:0600 0640 0730 0940 1110 1330 1430 1720 1830 1945 2100<br>
                    </span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">分段緩衝 :</span>
                    <span class="stationlist-move-route-bus-content"></span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">收費方式 :</span>
                    <span class="stationlist-move-route-bus-content">一段票</span>
                </li>
                <li>
                    <span class="stationlist-move-route-bus-item">業者服務電話 :</span>
                        <span class="stationlist-move-route-bus-content">東南客運內湖站:02-8791-7712</span>
                </li>

                    <li>
                        <span class="stationlist-move-route-bus-item">備註 :</span>
                        <span class="stationlist-move-route-bus-content">「舊莊二站」至「茶葉製造示範廠」山區路段隨招隨停</span>
                    </li>
            </ul>
                <p class="stationlist-come-go-c">
                    <a href="javascript:void(0);" class="stationlist-come-go stationlist-go">去程往 茶葉製造示範廠</a>
                    <a href="javascript:void(0);" class="stationlist-come-go-gray stationlist-come">返程往 捷運昆陽站</a>
                </p>


            <p> 
</p>
        </div>

        <div id="GoDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c" >
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">捷運昆陽站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155800022" />
                                    <input data-val="true" data-val-number="欄位 Latitude 必須是數字。" data-val-required="Latitude 欄位是必要項。" id="item_Latitude" name="item.Latitude" type="hidden" value="25.050052" />
                                    <input data-val="true" data-val-number="欄位 Longitude 必須是數字。" data-val-required="Longitude 欄位是必要項。" id="item_Longitude" name="item.Longitude" type="hidden" value="121.59306" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">南港高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155100400" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.052951" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5952331" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">土地公廟</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155100020" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054317" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5962923" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">東明里/臺北流行音樂中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157800320" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053841" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5981395" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">南港輪胎</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157800420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053324" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6007562" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">台肥新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157800120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053655" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6030217" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">南港行政中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157900120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054375" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6070819" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">南港高工(南港路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800520" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054961" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6106211" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">南港</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155200120" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.055124" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6135979" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">南港展覽館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054699" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.616456" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">誠正國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051803" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6158658" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">南港水廠</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049543" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.615625" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">圓拱橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156400140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047199" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.615363" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">中研新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157400140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04483" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.61555" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">中研院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157400040" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04313" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.61648" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">舊莊一站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157200920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.04086" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6189" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">舊莊國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000920" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039842" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6202488" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">舊莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001030" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038074" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.622697" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">舊莊二站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.037447" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6245142" />
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">茶葉製造示範場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000500" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.027431" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6638069" />
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
        <div id="BackDirectionRoute" class="auto-list-pool-c stationlist-list-pool-c"   style = "display:none">
            <ul class="auto-list-pool stationlist-list-pool">

                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 1</span>
                                    <span class="auto-list-stationlist-place">茶葉製造示範場</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000540" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.02739" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6637" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 2</span>
                                    <span class="auto-list-stationlist-place">涼亭</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000760" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024643" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.662317" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 3</span>
                                    <span class="auto-list-stationlist-place">余氏古厝</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001420" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.024808" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.660484" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 4</span>
                                    <span class="auto-list-stationlist-place">御香居</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000600" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.026323" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.657129" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 5</span>
                                    <span class="auto-list-stationlist-place">大坑</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0271" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6549517" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 6</span>
                                    <span class="auto-list-stationlist-place">舊莊二站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001140" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.03749" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6243761" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 7</span>
                                    <span class="auto-list-stationlist-place">舊莊</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158001060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.038111" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6228397" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 8</span>
                                    <span class="auto-list-stationlist-place">舊莊國小</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1158000960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.039526" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.621016" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 9</span>
                                    <span class="auto-list-stationlist-place">舊莊一站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157200960" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.040912" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6190444" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 10</span>
                                    <span class="auto-list-stationlist-place">中研院</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1152900000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.043422" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.616561" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 11</span>
                                    <span class="auto-list-stationlist-place">中研新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157400100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.045074" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.615639" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 12</span>
                                    <span class="auto-list-stationlist-place">圓拱橋</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156400100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.047462" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.615728" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 13</span>
                                    <span class="auto-list-stationlist-place">南港水廠</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156400000" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.049379" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6159492" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 14</span>
                                    <span class="auto-list-stationlist-place">誠正國中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157100100" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.051546" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6160314" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 15</span>
                                    <span class="auto-list-stationlist-place">南港展覽館</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800260" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.05534" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6156" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 16</span>
                                    <span class="auto-list-stationlist-place">南港</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.055394" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6136587" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 17</span>
                                    <span class="auto-list-stationlist-place">南港高工(南港路)</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1156800560" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054968" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6097763" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 18</span>
                                    <span class="auto-list-stationlist-place">南港行政中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157900160" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.054411" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6066934" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 19</span>
                                    <span class="auto-list-stationlist-place">台肥新村</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157900060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053826" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6035015" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 20</span>
                                    <span class="auto-list-stationlist-place">南港輪胎</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157800460" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.05341" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.6006319" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 21</span>
                                    <span class="auto-list-stationlist-place">東明里/臺北流行音樂中心</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1157800360" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.0538" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5985798" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 22</span>
                                    <span class="auto-list-stationlist-place">土地公廟</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155100060" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.05449" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5955099" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 23</span>
                                    <span class="auto-list-stationlist-place">南港高中</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155100440" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.053019" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.5949802" />
                                   
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0);" class="auto-list-link auto-list-stationlist-link">
                                <span class="auto-list auto-list-stationlist">
                                    <span class="auto-list-stationlist-position auto-list-stationlist-position-time"></span>
                                    <span class="auto-list-stationlist-number"> 24</span>
                                    <span class="auto-list-stationlist-place">捷運昆陽站</span>
                                    <input id="item_UniStopId" name="item.UniStopId" type="hidden" value="1155700261" />
                                    <input id="item_Latitude" name="item.Latitude" type="hidden" value="25.050667" />
                                    <input id="item_Longitude" name="item.Longitude" type="hidden" value="121.594406" />
                                   
                                </span>
                            </a>
                        </li>
            </ul>
        </div>
    </div>
    <!-- being 地圖區塊縮合 -->
    

<link href="/jss/leaflet/leaflet.css" rel="stylesheet" />
<script src="/jss/leaflet/leaflet.js"></script>
<script src="/jss/leaflet/wicket.js"></script>
<script src="/jss/leaflet/wicket-leaflet.js"></script>
<script src="/jss/LMap.js"></script>
<script src="/jss/LMapLayerToggle.js"></script>


<!-- being 地圖區塊縮合 -->
<div class="map-s-c">
    <a href="javascript:void(0);" id="close-open-map" class="open-map-icon pad-none" title="展開地圖" alt="展開地圖"></a>
    <div class="map-date">
        <div class="map-icon-pool-c">
            <div class="map-icon-pool">
                <a href="javascript:void(0);" class="map-icon map-youbike" title="YouBike" alt="YouBike"></a>
                
                <a href="javascript:void(0);" class="map-icon map-my-place" title="&lt;我的位置&gt;" alt="&lt;我的位置&gt;"></a>
               <!-- <a href="javascript:void(0);" id="MapButton" class="map-icon map-map" title="開啟地圖" alt="開啟地圖"></a>-->
            </div>
        </div>
        <div id="map_canvas" class="map">
            <a href="javascript:void(0);"  style="color: #0094ff" id="maplink" title="開啟地圖" alt="開啟地圖">開啟地圖</a>
           
        </div>
    </div>
</div>
<style>
    .word-info-none {
        display: none;
    }
</style>
<script>
    $('#close-open-map').click(function () {
        $('#close-open-map').toggleClass("close-map-icon pad-none");
        $('.map-s-c').toggleClass("map-b-c pad-none");
        $('#findPanel').toggleClass("word-info-none");

        var cls = $('#close-open-map').attr('class');
        if (cls == "open-map-icon close-map-icon") {
            $('#close-open-map').attr("title", i18n._('Shrink the map'));
            $('#close-open-map').attr("alt", i18n._('Shrink the map'));
        }
        else{
            $('#close-open-map').attr("title", i18n._('Enlarge the map'));
            $('#close-open-map').attr("alt", i18n._('Enlarge the map'));
        }

        MoveCenter();
    });

    //地圖縮放用
    function MoveCenter() {
        map.invalidateSize();
    };

    $('.map-youbike').click(function () {
        $('.map-youbike').toggleClass("map-youbike-o");
        var bl = $('.map-youbike').hasClass("map-youbike-o");

        if (bl) YoubikeFetch();
        else StopFetchYoubike();
    });

    $('.map-newbike').click(function () {
        $('.map-newbike').toggleClass("map-newbike-o");
        var bl = $('.map-newbike').hasClass("map-newbike-o");

        if (bl) NewbikeFetch();
        else StopFetchNewbike();
    });

    $('.map-my-place').click(function () {
        $('.map-my-place').toggleClass("map-my-place-o");
        var bl = $('.map-my-place').hasClass("map-my-place-o");

        if (bl) getLocation();
        else clearNowLocMarkers()
    });

    function newloadmap()
    {

    }

    $('.map-map').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });

    $('#maplink').click(function () {
        var options = {
            zoom: 10,
            center: centerPoint,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
            },
            styles: [{ featureType: "landscape", stylers: [{ saturation: -100 }, { lightness: 60 }] }, { featureType: "road.local", stylers: [{ saturation: -100 }, { lightness: 40 }, { visibility: "on" }] }, { featureType: "transit", stylers: [{ saturation: -100 }, { visibility: "simplified" }] }, { featureType: "administrative.province", stylers: [{ visibility: "off" }] }, { featureType: "water", stylers: [{ visibility: "on" }, { lightness: 30 }] }, { featureType: "road.highway", elementType: "geometry.fill", stylers: [{ color: "#ef8c25" }, { lightness: 40 }] }, { featureType: "road.highway", elementType: "geometry.stroke", stylers: [{ visibility: "off" }] }, { featureType: "poi.park", elementType: "geometry.fill", stylers: [{ color: "#b6c54c" }, { lightness: 40 }, { saturation: -40 }] }, {}]
        };
        $("#MapButton").hide();
        map = new google.maps.Map(document.getElementById("map_canvas"), options);

        // 畫路線軌跡
        drawRouteTrack();

        var routePathBounds = new google.maps.LatLngBounds();
        var path = new google.maps.MVCArray();

        if (objArr.RouteTracks.length != 0) {
            for (var i = 0; i < objArr.RouteTracks.length; i++) {
                var latlng = new google.maps.LatLng(objArr.RouteTracks[i]
                    .Latitude,
                    objArr.RouteTracks[i].Longitude);
                path.push(latlng);
                routePathBounds.extend(latlng);
            }
            routePath.setPath(path);
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }

        pointRouteStops(true);
        routePath.setOptions({ strokeColor: '#9863b6' });


        if (objArr.RouteTracks.length != 0) {
            if (map == null)
            { }
            else {
                map.fitBounds(routePathBounds);
            }
        }
        stopStationStatusReport();
        stationStatusReport();
        stopBusStatusReport();
        busStatusReport();

    });


</script>
    <!-- end 地圖區塊縮合 -->

</section>

<section class="info-c route-chart" style="display:none;">
    <!--路線簡圖-->
</section>

<div id="Toolbar" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog tool-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img tool-dialog-img" alt=" "></span>快捷工具列</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <div class="tool-icon-pool">
            <a id="routeList" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_route_icon.svg" width="100%" alt="行經路線">行經路線</a>
            <a id="busAlert" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_remind_icon.svg" width="100%" alt="到站提醒">到站提醒</a>
            <a id="addToMybus" href=javascript:void(0) class="teBus-login-dialog-link-one"><img src="/images/dialog_add_bus_icon.svg" width="100%" alt="加入我的公車">加入我的公車</a>
            <a class="teBus-login-dialog-link-one-recent3" id="recent3">
                <font>
                    .</font><br />
                    <font>
                        .</font><br />
                        <font">.</font><br />
            </a>
</div>
    </div>
</div>

<input type="hidden" id="selected_stop_id" />
<input type="hidden" id="selected_stop_name" />
<div id="SetAlertTime" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>設定到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="set-up-remind-dialog-c">
            <a href="javascript:setAlertConfirm(180);" class="set-up-remind-time-dialog">3分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(300);" class="set-up-remind-time-dialog">5分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(600);" class="set-up-remind-time-dialog">10分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(900);" class="set-up-remind-time-dialog">15分鐘前提醒</a>
            <a href="javascript:setAlertConfirm(1200);" class="set-up-remind-time-dialog">20分鐘前提醒</a>
        </div>
    </div>
</div>
<div id="News_Detail_DL" class="teBus-dialog-c" style="display:none">
    <div class="teBus-dialog news-dialog-c">
        <h1 class="teBus-dialog-h1"><span class="teBus-dialog-title-img remind-dialog-img" alt=" "></span>到站提醒通知</h1>
        <span class="teBus-dialog-close-icon-c"><a href="javascript:void(0);" class="teBus-dialog-close-icon" title="關閉" alt="關閉"></a></span>
        <div class="remind-dialog-c">
        </div>
    </div>
</div>
<script>
    $(function () {
        window.setInterval(StartBusArrivalAlert, 1000 * 60);

        $("#News_Detail_DL").dialog({
            autoOpen: false,
            width: $('#News_Detail_DL').width(),
            modal: true,
            show: {
                effect: "clip",
                duration: 600
            },
            buttons: {},
            hide: {
                effect: "clip",
                duration: 500
            },
            close: function (event, ui) {
                $('#News_Detail_DL').find('.remind-dialog-c').html('');
            }
        });

        $(".ui-dialog-titlebar").hide();
    });
    function StartBusArrivalAlert() {
        if (localStorage.bus_alert !== undefined && !$("#News_Detail_DL").dialog("isOpen")) {
            var busAlert = JSON.parse(localStorage.bus_alert);
            var m = $.map(busAlert, function (value, index) {
                return { "UniStationId": value.StopId, "UniRouteId": value.RouteId, "UniBusId": "", "BusLicence": "", "BusType": 0, "RouteDirect": 0, "ETA": 0 };
            });
            $.ajax({
                url: '/Stop/StatusOfRutStp',
                type: 'post',
                dataType: 'json',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'models': JSON.stringify(m)
                },
                error: function (response) {

                },
                success: function (response) {
                    $.each(busAlert, function (idx, val) {
                        $.each(response, function (index, value) {
                            if (value.ETA !== 0 && val.RouteId === value.UniRouteId &&
                                val.StopId === value.UniStationId && val.SetTime > value.ETA) {
                                $('#News_Detail_DL').find('.remind-dialog-c').append(
                                    $('<p/>', { 'class': 'remind-content-dialog', 'text': val.RouteName + " " + val.StopName }),
                                    $('<p/>', { 'class': 'remind-time-dialog', 'text': i18n._('Estimate') + Math.floor(value.ETA / 60) + i18n._('Arrives minute(s)') })
                                );
                                for (var i = 0; i < busAlert.length; i++) {
                                    if (busAlert[i].RouteId == value.UniRouteId && busAlert[i].StopId == value.UniStationId && val.SetTime > value.ETA) {
                                        busAlert.splice(i, 1);
                                    }
                                    AlertDelete(i);
                                }
                                localStorage.setItem('bus_alert', JSON.stringify(busAlert));
                            }
                        });
                        if ($('#News_Detail_DL').find('.remind-dialog-c').html().trim() !== '') {
                            if (!$("#News_Detail_DL").dialog("isOpen")) {
                                $("#News_Detail_DL").dialog("open");
                            }
                        }
                    });
                }
            });
        }
    }
</script>

<div id="AddToMyBus" class="teBus-dialog-c" style="display:none;">
    <div class="teBus-dialog alternative-route-dialog-c">
        <h1 class="teBus-dialog-h1">選擇公車群組</h1>
        <span class="teBus-dialog-close-icon-c"><a href="#" class="teBus-dialog-close-icon" title="關閉"></a></span>
        <ul class="dialog-chose-bos-group-pool"></ul>
    </div>
</div>





    </div>
    <!-- end content -->
    <!-- loading dialog -->
    <div id="Loading_DL" class="teBus-dialog-c" style="display: none;">
        <div class="teBus-dialog loading-dialog-c">
            <p class="loading-dialog-p"><img src="/images/dialog_loading_bus_img.gif" class="loading-dialog-img" width="100%" alt=" ">資料載入中，請稍候</p>
        </div>
    </div>
    <!-- end loading dialog -->
    
<footer class="teBUS-main-footer">
    <div class="teBUS-main-footer-logo">
                <a href="https://www.gov.taipei/" target="_blank" class="teBUS-main-footer-taipei" title="臺北市政府" alt="臺北市政府"><img src="/images/taipei_city.svg" width="100%" title="臺北市政府" alt="臺北市政府"></a>
                <a href="https://www.ntpc.gov.tw/" target="_blank" class="teBUS-main-footer-new-taipei" title="新北市政府" alt="新北市政府"><img src="/images/new_taipei_city.svg" width="100%" title="新北市政府" alt="新北市政府"></a>

      
        <span class="teBUS-main-footer-ebus-logo" title="大臺北公車"><img src="/images/logo_img02.svg" width="100%" title="大臺北公車" alt="大臺北公車"></span>
    </div>
    <div class="teBUS-main-footer-text">
        <p class="teBUS-main-footer-Copyright">本網站所有版權歸屬於臺北市政府與新北市政府 Copyright&#169;2014<span></span></p>
        <p>
            建議瀏覽器IE9.0以上版本/Firefox/Google Chrome (最佳螢幕解析1024*768) <br />
            如有大臺北公車網站服務任何問題，請撥1999為您服務
            聯絡地址:110210臺北市信義區松德路300號4樓
        </p>
    </div>
    <div class="teBUS-main-footer-link-pool">
        <a href="/Home/WebSite" class="teBUS-main-footer-link" target="_self">網站導覽</a>
        
        <a href="/Home/CopyrightNotice" class="teBUS-main-footer-link" target="_self">著作權聲明</a>
        <a href="/Home/SecurityPrivacyPolicy" class="teBUS-main-footer-link" target="_self">隱私權及網站安全政策</a>
        <p class="teBUS-main-footer-date">網站更新日期:<span>2025-06-02</span><br />網站檢視日期:2025-06-02</p>
    </div>
</footer>
<!-- end footer -->

    <script src="/bundles/modernizr?v=wBEWDufH_8Md-Pbioxomt90vm6tJN2Pyy9u9zHtWsPo1"></script>

    
    <script src="/jss/tebus-script.js"></script>
    <script src="/bundles/sweetAlert?v=cMcnF9PMfZnW6d_oMLsRilV8d-Fh8HT8X6rfi8S_EV41"></script>

    <script src="/sweetAlert/css?v=Q7l7a83fZdl7_6jt13P3HsHoLWvbYv1YpqCreuQlPuQ1"></script>

    <script src="/bundles/sweetAlert2?v=PwfQxO_e6ZEtKGd2oGReTt3SIS48xCdv8zRgwComWDA1"></script>

    <script src="/sweetAlert2/css?v=fJb18S8FvSIfJsXWl8pwQn02lsvJyZVA2V9a_xRxskI1"></script>

    
    <script src="/bundles/customScrollbar?v=FNWrR0EcYik_CfSZ44D3T7EmJWx0Sy8nttPc_daLKEU1"></script>

    <script src="/bundles/busInfoHelper?v=Bz-GVCVvhrGERqTqUhEyiA19qHoesHwpCKpDnLmBTC81"></script>

    <script src="/bundles/busArrivalAlert?v=MDKgeaTn7JrPx59avQagl_lTQuO4AjqKyXZGq_1HMcs1"></script>

    <script src="/bundles/jqueryval?v=kO9SZjRLUEvNZbFlwaT1hsJ0t0ngQHk32HeNdumCbRM1"></script>

    <script src="/bundles/toastr?v=nU7i1d5lsXeim4T9MB2Gdegj9fc8yXl1nK6hEZMOAm81"></script>

    
<style>
.marker-g {
    background-image: url("../images/mapIcon/station_01.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .marker-b {
    background-image: url("../images/mapIcon/station_02.png");
    background-size:24px 24px;
	/*background-color: rgba(218, 94, 94, 0.6);*/
	}
    .custompopup .leaflet-popup-content-wrapper a {
    color: #ffffff;
}
    .custompopup .leaflet-popup-content p{
    margin: 0;
}
    


    </style>

<script src="/jss/VsSimpleMap.js"></script>

    <script>

        viccknCulture = 'zh-TW';
        //var InfoBox = new google.maps.InfoWindow({ content: " " });
        var routePath;
        var Marker_Bus_Status = [];
        var busFetchInterval = null;
        var stopFetchInterval = null;
        var goStopStationNum = []; //去程站位數量
        var backStopStationNum = []; //返程站位數量



        //#region 時刻表
        $('.stationlist-bus-time-icon').click(function () {
            var _date = new Date();
            var _nowDate = _date.getFullYear() + "/" +( _date.getMonth()+1) + "/" + _date.getDate();
            //var _url = "http://web.taiwanbus.tw/eBUS/subsystem/Timetable/TimeTableAPIByWeek.aspx?RouteId=" + "" + "&SearchDate=" + _nowDate;
            var _url = "../Route/RouteSchedule?routeid=0151000520";

            window.open(_url, "_blank");
        });
        //#endregion


        var existGoNum = 20;
        var existBackNum = 24;

        function getStopStationNum(goBack) {
            switch (goBack) {
                case 1:
                    var go = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (go && go.length === existGoNum) {
                        goStopStationNum = go;
                    }

                    goStopStationNum = $("#GoDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });
                    break;
                case 2:
                    var back = $("#BackDirectionRoute div > div > li > a > span > span.auto-list-stationlist-number")
                        .text()
                        .trim()
                        .split(' ')
                        .filter(function(v){return v!==''})
                        .map(function(item, index) { return parseInt(item) });

                    if (back && back.length === existBackNum) {
                        backStopStationNum = back;
                    }

                    break;

            }
        }

        getStopStationNum(1);
        getStopStationNum(2);

        function bindInfoWindow(marker, map, InfoBox, content) {
            google.maps.event.addListener(marker,
                'click',
                function() {
                    InfoBox.setContent(content);
                    InfoBox.open(map, marker);
                });
        }

        function createBusMarker(lat, lng, title, icon) {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat, lng),
                map: map,
                title: title,
                icon: icon
            });
            Marker_Bus_Status.push(marker);
        }

        function clearBusMarkers() {
            while (Marker_Bus_Status[0]) {
                Marker_Bus_Status.pop().setMap(null);
            }
        }

        function drawRouteTrack() {
            routePath = new google.maps.Polyline({
                geodesic: true,
                strokeColor: '#9863b6',
                strokeOpacity: 1.0,
                strokeWeight: 4
            });
            routePath.setMap(map);
        }


        function pointRouteStopsLMap(isGoDirection) {
            clearMarkers();
            var stops;
            var iconUrl;
            if (isGoDirection) {
                if (objArr.GoDirStops ==null)
                {stops = objArr.BackDirStops;
                    iconUrl = 'marker-g';
                }
                else
                {
                    stops = objArr.GoDirStops;
                    iconUrl = 'marker-g';
                }
                //stops = objArr.GoDirStops;
                //iconUrl = 'marker-g';
            } else {
                stops = objArr.BackDirStops;
                //iconUrl = "images/mapIcon/station_02.png";
                iconUrl = 'marker-b';
            }
            var arMarker = [];
            for (var i in stops) {
                infoLink =
                    "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'><p class='inforwindow-1ocation'>" + stops[i].Name + "</p><p class='inforwindow-1ocation-number'>"+ "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";
                // "<div class='inforwindow-bike-c'><div class='inforwindow-1ocation-c'>" + "<p class='inforwindow-1ocation-number'>" + stops[i].PublicId + "</p></div><a class='inforwindow-transplan-start-end-icon02' href='" + SitePath + "Stop/RoutesOfStop?Stopid=" + stops[i].UniStopId + "'>" + i18n._('List of Routes') + "</a></div>";

                var GoStopsicon = new L.DivIcon({ html: '<div align="center"  valign="center"><span>' + (parseInt(i)+1) + '</span></div>', className:  iconUrl, iconSize: new L.Point(24, 24),iconAnchor: [12, 24], });
                //var GoStopsicon = L.icon({
                //    iconUrl: '/images/mapIcon/station_01.png',
                //    iconSize: [16, 16]
                //});
                m = L.marker([stops[i].Latitude, stops[i].Longitude], { icon: GoStopsicon });
                m.bindPopup(infoLink, {
                    maxWidth : 300,
                    maxHeight:170,
                    className:'custompopup'
                });
                setStationMarkers(m);
                //m.bindTooltip(data[i].tooltip);

                arMarker.push(m);
            }
            StoplayerGroup = L.layerGroup(arMarker).addTo(map)
            //layerMap.set('layername', L.layerGroup(arMarker).addTo(map));
        }

        function stopStatusRecent3Report(stopId) {
            (
                function startFatch() {
                    $.ajax({
                        // url: '/Route/StopStatusRecent3OfRoute?routeid=0151000520',
                        url: './StopStatusRecent3OfRoute?routeid=0151000520&stopid='+stopId,
                        type: 'post',
                        dataType: 'html',
                        data: {
                            '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                            'X-Requested-With': 'XMLHttpRequest'
                        },
                        error: function(xhr) {

                        },
                        success: function(response) {
                            // clearBusMarkers();
                            //var jsonObjArr = JSON.parse(response);// vic
                            // var jsonObjArr = response;
                            //  alert(response);
                            $('#recent3').empty();
                            $('#recent3').append(response);


                        }
                    });
                    //if (busFetchInterval == null) {
                    //    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                    //}
                })();
        }

        function busStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/BusStatusOfRoute?routeid=0151000520',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        clearBusMarkers();
                        var jsonObjArr = JSON.parse(response);// vic
                        // var jsonObjArr = response;
                        if (BuslayerGroup != null) {
                            BuslayerGroup.clearLayers();
                        }
                        var arMarker = [];
                        for (var i in jsonObjArr) {
                            if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                                    $('.stationlist-come-go-c').length === 0) &&
                                jsonObjArr[i].RouteDirect === 1) {

                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                                //createBusMarker(value.position.Latitude,
                                //    value.position.Longitude,
                                //    value.BusLicence,
                                //    busIcon(value.BusType));
                            }
                            if ($('.stationlist-come').hasClass('stationlist-come-go') && jsonObjArr[i].RouteDirect === 2) {
                                m = L.marker([jsonObjArr[i].position.Latitude, jsonObjArr[i].position.Longitude], { icon:  L.icon({iconUrl: busIcon(jsonObjArr[i].BusType),iconAnchor: [16, 32]}) });
                                m.bindPopup(jsonObjArr[i].BusLicence);
                                arMarker.push(m);
                            }


                        }
                        BuslayerGroup = L.layerGroup(arMarker).addTo(map)
                        //$.each(jsonObjArr,
                        //    function(idx, value) {
                        //        if (($('.stationlist-go').hasClass('stationlist-come-go') ||
                        //                $('.stationlist-come-go-c').length === 0) &&
                        //            value.RouteDirect === 1) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //        if ($('.stationlist-come').hasClass('stationlist-come-go') && value.RouteDirect === 2) {
                        //            //createBusMarker(value.position.Latitude,
                        //            //    value.position.Longitude,
                        //            //    value.BusLicence,
                        //            //    busIcon(value.BusType));
                        //        }
                        //    });
                    }
                });
                if (busFetchInterval == null) {
                    busFetchInterval = window.setInterval(startFatch, 1000 * 13);
                }
            })();
        }

        function stopBusStatusReport() {
            clearBusMarkers();
            clearInterval(busFetchInterval);
            busFetchInterval = null;
        }

        function busIcon(btype) {
            var url;
            if (btype === 2) {
                url = SitePath + "images/mapIcon/LowFloorBus06.png";
                return url;
            }
            if (btype === 51) {
                url = SitePath + "images/mapIcon/FukangBus06.png";
                return url;
            }
            if (btype === 52) {
                url = SitePath + "images/mapIcon/YuanZaiBus06.png";
                return url;
            }
            if (btype === 6) {
                url = SitePath + "images/mapIcon/AccMiniBus06.png";
                return url;
            }
            url = SitePath + "images/mapIcon/NormalBus06.png";
            return url;
        }

        //依據清單，過濾重複項目
        function unique(list) {
            var result = [];
            $.each(list,
                function(i, e) {
                    if ($.inArray(e, result) === -1) result.push(e);
                });
            return result;
        }

        function stationStatusReport() {
            (function startFatch() {
                $.ajax({
                    url: '/Route/StopStatusOfRoute?routeid=0151000520',
                    type: 'post',
                    dataType: 'json',
                    data: {
                        '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                        'X-Requested-With': 'XMLHttpRequest'
                    },
                    error: function(xhr) {

                    },
                    success: function(response) {
                        // Clearing
                        $('.auto-list-stationlist-bus').remove();
                        $('.auto-list-stationlist-position')
                            .removeClass('auto-list-stationlist-position-none auto-list-stationlist-position-now auto-list-stationlist-position-time')
                            .html('');
                        
                        var jsonObjArr = JSON.parse(response);
                        var goStationList = []; //去程站位及站序
                        var backStationList = []; //返程站位及站序
                        var uniStation = []; //取得車號
                        var tempduplicate = [];//重複站牌編號項目(暫存)
                        var duplicateStation; //重複站排項目
                        var filterDuplicate;//取得有重複的站位及公車編號

                        if (jsonObjArr.length !== 0) {

                            var hasSeq = jsonObjArr[0].StopSequence !== 65535;
                            //hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                            // if ($('.stationlist-go').hasClass('stationlist-come-go') ||$('.stationlist-go').hasClass('stationlist-go')) {
                            if ($('.stationlist-go').hasClass('stationlist-come-go') ||objArr.BackDirStops === null) {
                                //if ($('.stationlist-go').hasClass('stationlist-come-go') ||!($('.stationlist-come-go-c').length == 0)) {

                                //取得去程站位及站序
                                $.each( $('#GoDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    goStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                        
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                if (tempduplicate.length==0)
                                {hasSeq=false;
                                }

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(goStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                //去程
                                $('#GoDirectionRoute li').map(function(index, item) {

                                    //站排編號
                                    var _UniStopId = $(item).find('input#item_UniStopId').val();
                                    //站牌站序
                                    var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());

                                    var tmp = jsonObjArr.filter(function(item) {

                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                        return false;
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }
                                            }
                                        }

                                        if (value.Vehicles.length > 0) {

                                            var _html = "<span class='auto-list-stationlist-bus'>";

                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                //'<img src=\"../images/seats/seat00.png\">'
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                {
                                                    if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                        value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                        dogimg="<img src='" +
                                                            SitePath +
                                                            "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                    }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html = _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                        "'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }
                                        if(value.NextDepTime!='FF')
                                        {
                                           
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else
                                    {
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });

                            } else {

                                //取得返程站位及站序
                                $.each( $('#BackDirectionRoute li  '), function( index, item ){
                                    var uniStopId = $(item).find('input#item_UniStopId').val();
                                    var stopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim());
                                    backStationList.push({ stopSeq: stopSeq, uniStopId: uniStopId });
                                });

                                //取得相同站牌編號
                                $.grep(jsonObjArr,function(item) {

                                    if (($.inArray(item.UniStationId, uniStation) === -1)) {
                                        //未重複
                                        uniStation.push(item.UniStationId);
                                    } else {
                                        //有重複
                                        tempduplicate.push(item.UniStationId);
                                    }
                                });

                                //重複站排項目
                                duplicateStation = unique(tempduplicate);

                                //取得有重複的站位及公車編號
                                filterDuplicate = $.grep(jsonObjArr,function(item) {

                                    //取得有重複站位
                                    if (($.inArray(item.UniStationId, duplicateStation) !== -1)) {

                                        //確定該站位，有在站位列表中
                                        var result = $.grep(backStationList,function(e) { return e.uniStopId === item.UniStationId; });

                                        if (result && result.length > 0) {

                                            //在資料內找出該站位的進站公車，是否有重複
                                            if (item.Vehicles && item.Vehicles.length > 0) {

                                                //依據該公車編號，取得是否有重複的
                                                var busIdDuplicate = $.grep(item.Vehicles,function(value) {

                                                    var getVehicles = $.grep(jsonObjArr,function(data) {

                                                        //找出有重複的公車編號
                                                        var filterVehicles = $.grep(data.Vehicles,function(vehicles) {
                                                            return value.UniBusId === vehicles.UniBusId;
                                                        });

                                                        //若相同公車編號找尋結果，有2筆以上，則回傳該項目
                                                        if (filterVehicles && filterVehicles.length > 0) {
                                                            return data;
                                                        }
                                                    });

                                                    if (getVehicles && getVehicles.length > 0) {
                                                        return value;
                                                    }
                                                });

                                                if (busIdDuplicate && busIdDuplicate.length > 0) {
                                                    return item;
                                                }


                                            }


                                        }

                                    }
                                });

                                hasSeq = jsonObjArr[0].UniRouteId[9] =='0' ?hasSeq:false;
                                //返程
                                $('#BackDirectionRoute li').map(function(index, item) {

                                    var _UniStopId = $(item).find('input#item_UniStopId').val();

                                  if ($('.stationlist-come-go-c').length === 0)
                                    { var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.BackDirStops.length;
                                    }
                                    else
                                    {
                                        var _StopSeq =parseInt($(item).find('.auto-list-stationlist-number').text().trim()) +objArr.GoDirStops.length;
                                    }

                                    var tmp = jsonObjArr.filter(function(item) {
                                        if (hasSeq) {
                                            if (item.UniStationId == _UniStopId &&
                                                item.StopSequence == (_StopSeq - 1))
                                                return true;
                                        } else {
                                            if (item.UniStationId == _UniStopId)
                                                return true;
                                        }
                                    });

                                    if (tmp && tmp.length > 0) {

                                        var value = tmp[0];

                                        //依據有重複的站位及公車編號，取得下一站位的等待時間
                                        var  filterBusId = filterDuplicate.filter(function(item) {
                                            if (item.UniStationId === value.UniStationId) {
                                                return true;
                                            }
                                            return false;
                                        }).map(function(dirItem) {

                                            var nextStation = jsonObjArr.filter(function (station) {
                                                if ( station.StopSequence ===( parseInt(dirItem.StopSequence) +1)) {

                                                    return true;
                                                }
                                                return false;
                                            });

                                            if (nextStation && nextStation.length > 0 ) {
                                                dirItem.NextETA = nextStation[0].ETA;
                                            }

                                            return dirItem;

                                        });

                                        //若公車站編號相同超過1個以上，表示有重複
                                        if (filterBusId && filterBusId.length > 1) {

                                            //車號編號
                                            var busArray= [];
                                            //重複車號編號
                                            var tempbusArray= [];

                                            //取得重複車號
                                            $.each(filterBusId , function(index, item) {
                                                $.each(item.Vehicles , function(iVehicles, vehicles) {

                                                    if (($.inArray(vehicles.UniBusId, busArray) !== -1)) {
                                                        //未重複
                                                        busArray.push(vehicles.UniBusId);
                                                    } else {
                                                        //有重複
                                                        tempbusArray.push(vehicles.UniBusId);
                                                    }
                                                });
                                            });

                                            //過濾收集重複車號項目
                                            var duplicateBus = unique(tempbusArray);

                                            if (duplicateBus.length > 0 ) {

                                                //依進站時間排序
                                                filterBusId.sort(function (a, b) {
                                                    if (a.NextETA> b.NextETA) {
                                                        return 1;
                                                    }
                                                    if (a.ETA< b.ETA) {
                                                        return -1;
                                                    }
                                                    // a must be equal to b
                                                    return 0;
                                                });

                                                for (var i = 0; i < filterBusId.length; i++) {

                                                    if (i !==0) {
                                                        filterBusId[i].Vehicles =  $.grep(filterBusId[i].Vehicles, function(iVehicles, vehicles) {

                                                            if (($.inArray(vehicles.UniBusId, duplicateBus) === -1)) {
                                                                //未重複
                                                                return vehicles;
                                                            }

                                                        });
                                                    }
                                                }

                                            }
                                        }


                                        if (value.Vehicles.length > 0) {
                                            var _html = "<span class='auto-list-stationlist-bus'>";
                                            for (var i = 0; i < value.Vehicles.length; i++) {
                                                var dogimg=""
                                                if($('#doglink').attr('dognum')!=null)
                                                { if (value.Vehicles[i].BusLicence.indexOf($('#doglink').attr('dognum')) > -1) {
                                                    value.Vehicles[i].BusLicence=value.Vehicles[i].BusLicence.replace($('#doglink').attr('dognum'), '');
                                                    dogimg="<img src='" +
                                                        SitePath +
                                                        "images/stationlist_dogwhite_bus.png' class='bus-number-img' alt=''>";
                                                }
                                                }
                                                if (value.Vehicles[i].BusType == 2) {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'><img src='" +
                                                        SitePath +
                                                        "images/stationlist_accessibility_bus.svg' class='bus-number-img' alt='" +
                                                        i18n._('Accessibility Bus') +
                                                       "'>" +
                                                                                                               value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                } else {
                                                    _html =
                                                        _html +
                                                        "<p class='bus-number'>" +
                                                                                                                value.Vehicles[i].BusLicence +setSeatImg(value.Vehicles[i].bSetL)+
                                                        "</p>";
                                                }
                                            }
                                            $(item)
                                                .find('span.auto-list-stationlist')
                                                .append(_html.concat("</span>"));
                                        }

                                        //轉為時間
                                        if(value.NextDepTime!='FF')
                                        {
                                            $(item).find('span.auto-list-stationlist-position').addClass('auto-list-stationlist-position-now').html('預計'+value.NextDepTime+'發車');
                                        }
                                        else{
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), value.ETA);
                                        }
                                    }else{
                                        //if( jsonObjArr[0].UniRouteId[9] !='0')
                                        //    FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        if (jsonObjArr[0].UniRouteId[9] =='0')
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65535);
                                        }else
                                        {
                                            FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                        }
                                    }

                                    return item;
                                });
                            }

                        }
                        else{
                            //去程
                            $('#GoDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });

                            //返程
                            $('#BackDirectionRoute li').map(function(index, item) {
                                FormatETA($(item).find('span.auto-list-stationlist-position'), 65529);
                                return item;
                            });
                        }

                    }

                });
                if (stopFetchInterval === null) {
                    stopFetchInterval = window.setInterval(startFatch, 1000 * 15);
                }
            })();

        }

        function setSeatImg(lv)
        {
            var s = '';
            if (lv>-1)
            {
                //s = '<img src=\"../images/seats/seat'+lv+'.png\" class="bus-number-img" >';
                s = '&ensp;<img width="20px" src=\"../images/seats/people'+lv+'_B.svg\" class="bus-number-img" >';
            }
            return s;
        }

        function stopStationStatusReport() {
            clearInterval(stopFetchInterval);
            stopFetchInterval = null;
        }

        function shownewchart(_id) {

            AptsBusMap.init({
                AptsSpringWebHome: SitePath,
                uniRouteId: _id,
                goBack: 0
            });
            AptsBusMap.load('myMap');

            $('.route-list').hide();
            $('.route-chart').show();

        }

        function hidenewchart() {
            $('.route-list').show();
            $('.route-chart').hide();
            //clearInterval(AptsBusMap.......interval);//沒有停止方法
        }

        function toggleRouteListAndChart() {
            if ($('.route-chart').is(":visible")) {
                $('.route-list').toggle();
                $('.route-chart').toggle();
                google.maps.event.trigger(map, "resize");
                $('.route-chart').html('');
                busStatusReport();
                stationStatusReport();
            } else {
                stopBusStatusReport();
                stopStationStatusReport();
                $('.route-chart')
                    .html('<button onclick="toggleRouteListAndChart()">back</button><div id="myMap" class="left" style="width:900px;margin-top:30px;"></div>');
                shownewchart('0151000520');

            }
        }

        function FormatETA(elem, eta) {
            if (eta < 0) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            if (eta >= 0 && eta <= 180) {
                elem.addClass('auto-list-stationlist-position-now').html(ConvertETA(eta));
                return;
            }
            if ( eta === 65535 ||
                 eta === 65529 ||
                 eta === 65534 ||
                eta === 65532 ||
                eta === 65533 ||
                eta === 65531 ||
                eta === 65530
               ) {
                elem.addClass('auto-list-stationlist-position-none').html(ConvertETA(eta));
                return;
            }
            elem.addClass('auto-list-stationlist-position-time').html(ConvertETA(eta) + i18n._('Mins'));
        }


        function addToMyBus(routeid, stopid, groupid) {
            $.ajax({
                url: '/MyBus/NewContentOfGroup',
                type: 'post',
                dataType: 'html',
                data: {
                    '__RequestVerificationToken': $('input[name=__RequestVerificationToken]').val(),
                    'X-Requested-With': 'XMLHttpRequest',
                    'unirouteid': routeid,
                    'unistationid': stopid,
                    'groupid': groupid
                },
                beforeSend: function() {
                    $('#ProcessIconSpan').show();
                },
                error: function(response) {
                    toastr["warning"](i18n._('Added Failure'), "");
                },
                success: function(response) {
                    toastr["info"](i18n._('Added Success'), "");
                },
                complete: function() {
                    $('#ProcessIconSpan').hide();
                }
            });
        }

        var routeJsonString = JSON.stringify({"UniRouteId":"0151000520","Name":"小5區","BeginStop":"捷運昆陽站","GoDirStops":[{"UniStopId":"1155800022","Name":"捷運昆陽站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.59306,"Latitude":25.050052,"PublicId":"1155800022"},{"UniStopId":"1155100400","Name":"南港高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5952331,"Latitude":25.052951,"PublicId":"1155100400"},{"UniStopId":"1155100020","Name":"土地公廟","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5962923,"Latitude":25.054317,"PublicId":"1155100020"},{"UniStopId":"1157800320","Name":"東明里/臺北流行音樂中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5981395,"Latitude":25.053841,"PublicId":"1157800320"},{"UniStopId":"1157800420","Name":"南港輪胎","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6007562,"Latitude":25.053324,"PublicId":"1157800420"},{"UniStopId":"1157800120","Name":"台肥新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6030217,"Latitude":25.053655,"PublicId":"1157800120"},{"UniStopId":"1157900120","Name":"南港行政中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6070819,"Latitude":25.054375,"PublicId":"1157900120"},{"UniStopId":"1156800520","Name":"南港高工(南港路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6106211,"Latitude":25.054961,"PublicId":"1156800520"},{"UniStopId":"1155200120","Name":"南港","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6135979,"Latitude":25.055124,"PublicId":"1155200120"},{"UniStopId":"1157100540","Name":"南港展覽館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.616456,"Latitude":25.054699,"PublicId":"1157100540"},{"UniStopId":"1157100140","Name":"誠正國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6158658,"Latitude":25.051803,"PublicId":"1157100140"},{"UniStopId":"1157100040","Name":"南港水廠","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615625,"Latitude":25.049543,"PublicId":"1157100040"},{"UniStopId":"1156400140","Name":"圓拱橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615363,"Latitude":25.047199,"PublicId":"1156400140"},{"UniStopId":"1157400140","Name":"中研新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.61555,"Latitude":25.04483,"PublicId":"1157400140"},{"UniStopId":"1157400040","Name":"中研院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.61648,"Latitude":25.04313,"PublicId":"1157400040"},{"UniStopId":"1157200920","Name":"舊莊一站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6189,"Latitude":25.04086,"PublicId":"1157200920"},{"UniStopId":"1158000920","Name":"舊莊國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6202488,"Latitude":25.039842,"PublicId":"1158000920"},{"UniStopId":"1158001030","Name":"舊莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.622697,"Latitude":25.038074,"PublicId":"1158001030"},{"UniStopId":"1158001100","Name":"舊莊二站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6245142,"Latitude":25.037447,"PublicId":"1158001100"},{"UniStopId":"1158000500","Name":"茶葉製造示範場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6638069,"Latitude":25.027431,"PublicId":"1158000500"}],"LastStop":"茶葉製造示範廠","BackDirStops":[{"UniStopId":"1158000540","Name":"茶葉製造示範場","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6637,"Latitude":25.02739,"PublicId":"1158000540"},{"UniStopId":"1158000760","Name":"涼亭","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.662317,"Latitude":25.024643,"PublicId":"1158000760"},{"UniStopId":"1158001420","Name":"余氏古厝","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.660484,"Latitude":25.024808,"PublicId":"1158001420"},{"UniStopId":"1158000600","Name":"御香居","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.657129,"Latitude":25.026323,"PublicId":"1158000600"},{"UniStopId":"1158000060","Name":"大坑","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6549517,"Latitude":25.0271,"PublicId":"1158000060"},{"UniStopId":"1158001140","Name":"舊莊二站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6243761,"Latitude":25.03749,"PublicId":"1158001140"},{"UniStopId":"1158001060","Name":"舊莊","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6228397,"Latitude":25.038111,"PublicId":"1158001060"},{"UniStopId":"1158000960","Name":"舊莊國小","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.621016,"Latitude":25.039526,"PublicId":"1158000960"},{"UniStopId":"1157200960","Name":"舊莊一站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6190444,"Latitude":25.040912,"PublicId":"1157200960"},{"UniStopId":"1152900000","Name":"中研院","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.616561,"Latitude":25.043422,"PublicId":"1152900000"},{"UniStopId":"1157400100","Name":"中研新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615639,"Latitude":25.045074,"PublicId":"1157400100"},{"UniStopId":"1156400100","Name":"圓拱橋","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.615728,"Latitude":25.047462,"PublicId":"1156400100"},{"UniStopId":"1156400000","Name":"南港水廠","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6159492,"Latitude":25.049379,"PublicId":"1156400000"},{"UniStopId":"1157100100","Name":"誠正國中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6160314,"Latitude":25.051546,"PublicId":"1157100100"},{"UniStopId":"1156800260","Name":"南港展覽館","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6156,"Latitude":25.05534,"PublicId":"1156800260"},{"UniStopId":"1156800060","Name":"南港","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6136587,"Latitude":25.055394,"PublicId":"1156800060"},{"UniStopId":"1156800560","Name":"南港高工(南港路)","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6097763,"Latitude":25.054968,"PublicId":"1156800560"},{"UniStopId":"1157900160","Name":"南港行政中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6066934,"Latitude":25.054411,"PublicId":"1157900160"},{"UniStopId":"1157900060","Name":"台肥新村","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6035015,"Latitude":25.053826,"PublicId":"1157900060"},{"UniStopId":"1157800460","Name":"南港輪胎","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.6006319,"Latitude":25.05341,"PublicId":"1157800460"},{"UniStopId":"1157800360","Name":"東明里/臺北流行音樂中心","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5985798,"Latitude":25.0538,"PublicId":"1157800360"},{"UniStopId":"1155100060","Name":"土地公廟","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5955099,"Latitude":25.05449,"PublicId":"1155100060"},{"UniStopId":"1155100440","Name":"南港高中","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.5949802,"Latitude":25.053019,"PublicId":"1155100440"},{"UniStopId":"1155700261","Name":"捷運昆陽站","Name_TW":null,"Name_EN":null,"StopOrder":0,"RoutesNumber":null,"BusETA":0,"BType":0,"BLicense":null,"Longitude":121.594406,"Latitude":25.050667,"PublicId":"1155700261"}],"RouteMapUrl":"../MapOverview?nid=0151000520","RouteTracks":null,"StopDirection":null,"TicketPrice":"一段票","BusTimeDesc":"0600 - 2100","HeadwayDesc":"班表:0600 0640 0730 0900 1000 1120 1715 1945 2100","HolidayBusTimeDesc":"0600 - 2100","HolidayHeadwayDesc":"班表:0600 0640 0730 0940 1110 1330 1430 1720 1830 1945 2100","RouteNote":"「舊莊二站」至「茶葉製造示範廠」山區路段隨招隨停","SegmentBuffer":"","StopLng":0,"StopLat":0,"IsNtpcMainLine":false,"orgphone":"東南客運內湖站:02-8791-7712","aliasName":null,"aliasEname":null,"memo":null,"memoEn":null,"showBusTimeDesc":true,"RouteStatus":1,"wkt":"LINESTRING (121.591261075888 25.0497508519887, 121.593782434281 25.0503374820852, 121.595692652134 25.0507724205534, 121.595327145022 25.0526543903595, 121.594934510046 25.0540591921968, 121.59515367502 25.0544208846365, 121.59533683899 25.054445699027, 121.595654790906 25.0544265233664, 121.596798162359 25.0542505238968, 121.597693275476 25.0540118745586, 121.598344772407 25.0537768437569, 121.598908241983 25.05361434621, 121.599476874902 25.0534610336932, 121.600068922006 25.0533484094652, 121.600558923491 25.0533100266996, 121.600857058513 25.0533189340067, 121.601437751376 25.0533810712854, 121.6031644293 25.0536786523718, 121.603340511501 25.0537283150712, 121.604137506794 25.0538592743781, 121.605605646661 25.0541335400825, 121.606211756037 25.0542630858277, 121.607114739218 25.0544381811661, 121.609142355936 25.0547577908394, 121.612103784698 25.0552648084814, 121.61247459208 25.0553411644061, 121.61296884875 25.0553129322068, 121.613502306013 25.0552537536548, 121.613614600464 25.0551716538842, 121.61401329941 25.0551001698794, 121.614376500342 25.0551416638488, 121.614761152635 25.0552169657094, 121.616566335409 25.0551059033031, 121.616321084197 25.0538519134489, 121.61601522153 25.0519599339804, 121.615628892349 25.0511106054732, 121.61546522153 25.0503744724964, 121.615478754064 25.0501623782227, 121.615678790927 25.0495663891507, 121.61581044306 25.048811, 121.615859390359 25.048359769457, 121.615815 25.0481357349513, 121.615100113879 25.0462726078542, 121.615110178403 25.0460162013726, 121.615136335409 25.0458063542578, 121.615425976225 25.0452076963955, 121.615839939029 25.0444810845888, 121.616058950636 25.0440593815373, 121.616841585751 25.0424963668208, 121.617070577755 25.0423007609275, 121.617273527213 25.042073296938, 121.617970955776 25.041577222923, 121.619249549994 25.0406425098817, 121.620380184926 25.0398274151681, 121.621669700472 25.0390621758693, 121.622062562333 25.0387158703664, 121.622679844958 25.0382002296598, 121.623770111243 25.0371888694217, 121.623938086825 25.0371664051187, 121.624088265401 25.0371863140482, 121.624481917173 25.037457611496, 121.624792333269 25.0375623047513, 121.624891483459 25.0376317687915, 121.625057516055 25.0375672724646, 121.625307353037 25.0375278174035, 121.625424715462 25.0374761839724, 121.62560296987 25.0374641770181, 121.626559904898 25.0375973243804, 121.626672161608 25.0375774463645, 121.626955958005 25.0374328308588, 121.627270187488 25.0372231731666, 121.627634698514 25.0369964919946, 121.627916206352 25.0369082817756, 121.628531651186 25.0368286120885, 121.628661663826 25.036770149072, 121.628825881109 25.0366675634316, 121.629322054074 25.0362301025685, 121.629532529476 25.0360429760132, 121.629649213115 25.0359566264232, 121.629749683436 25.0358488241829, 121.62984104638 25.0357255405263, 121.629908645659 25.0355795366562, 121.629944447769 25.0354117341039, 121.629968224755 25.0352035227093, 121.629985834897 25.0350765874755, 121.630066515173 25.0349845709253, 121.630171299406 25.0349493432167, 121.630429899887 25.0349720335304, 121.630678902149 25.0350066514829, 121.630802450636 25.0349951132621, 121.631248805334 25.0350993687286, 121.631528872822 25.0350803256713, 121.631952509183 25.0351003087644, 121.63231456269 25.0351683775302, 121.632626465744 25.0351208500164, 121.633096278649 25.0351002833452, 121.633361321228 25.0351228343356, 121.633486928605 25.0351239563961, 121.633594515731 25.0350720038753, 121.633670581057 25.0347955512599, 121.633756581057 25.034684198903, 121.63396352755 25.034566154311, 121.634266078899 25.0345065061233, 121.634610751516 25.0345280316176, 121.634763953359 25.0345122790941, 121.635051787886 25.0344485031562, 121.635356149657 25.0343940038307, 121.635980053825 25.0341893408833, 121.636346994728 25.0341467658585, 121.636551 25.0340899785369, 121.636958197891 25.0338778506687, 121.637434394264 25.0337193010954, 121.637720132049 25.0335842019105, 121.637828515409 25.0334717653419, 121.638013852699 25.0332206275525, 121.638178641514 25.03302826022, 121.638301004933 25.0329038280548, 121.638892214983 25.0325407075479, 121.639260383006 25.0322973629984, 121.639618942178 25.0319557180574, 121.639856952403 25.0318554508409, 121.640034675079 25.0318402942416, 121.640188478997 25.0317970367861, 121.640596250442 25.0316407688694, 121.640912616038 25.0314941939519, 121.641441646065 25.0311546813316, 121.64208373503 25.0309394284503, 121.642176736474 25.0307037664269, 121.642277952085 25.0305580585001, 121.642798371666 25.0301238017069, 121.642971802109 25.0299924247133, 121.643263407761 25.0298642705474, 121.643366766789 25.0297866630588, 121.643499906057 25.0296580544265, 121.643697048713 25.0295554717071, 121.643863886121 25.029527318894, 121.64476936193 25.0293589772351, 121.645233781818 25.0292387149425, 121.645572933399 25.0290896373788, 121.64597498259 25.0290349089361, 121.646207189086 25.0289539541436, 121.646313661735 25.0288381763486, 121.646341282558 25.0287264305796, 121.646295838842 25.0286121386536, 121.646196042485 25.0281447859461, 121.64623455468 25.0280229974403, 121.646434916147 25.0277985692305, 121.646729557258 25.0276100255601, 121.646999074116 25.0275351060087, 121.647163734061 25.0275191311703, 121.647446104606 25.027552237033, 121.647691640315 25.0276111456681, 121.648187617858 25.0278093562572, 121.648286766173 25.0278259411999, 121.648383989034 25.0277709574792, 121.648449952243 25.0276734937876, 121.648567329181 25.0274471436811, 121.648653030505 25.0273777651835, 121.648735714459 25.0273956412428, 121.649033700846 25.0275213818469, 121.649296937396 25.0275989064373, 121.649531488786 25.0276246167383, 121.649736849546 25.0275958090875, 121.650136446113 25.0274343783972, 121.650234704524 25.0274159638377, 121.650961869349 25.0275222061453, 121.651421952722 25.0275079633561, 121.651541009687 25.0275264464216, 121.651934559536 25.0276399086126, 121.652067385238 25.0276523293435, 121.652182071598 25.0274951419736, 121.652265369753 25.027268765175, 121.652346627673 25.0272002962729, 121.652502404573 25.0271670544522, 121.652958993453 25.0271419122536, 121.653273383325 25.0271753953521, 121.653425117162 25.027221296115, 121.653814936108 25.0274266297519, 121.653961606912 25.0274540469556, 121.654073749558 25.0274516808152, 121.654501233987 25.0273780785854, 121.655015193906 25.0270908701733, 121.655247726888 25.0270723736713, 121.655702526913 25.0271652454181, 121.656004939946 25.0272449788231, 121.656099041369 25.0272108899893, 121.656305746658 25.0268541727277, 121.65643699669 25.0267396265664, 121.656757164652 25.0265628951102, 121.657029082284 25.0264981161075, 121.657099669983 25.0264464492856, 121.657068844166 25.0263900778052, 121.656972929937 25.026359376026, 121.656843826214 25.0263714547907, 121.656691673086 25.026406220171, 121.656214523736 25.0265705128228, 121.656126749185 25.02657601601, 121.656077431956 25.0264991474987, 121.656105451654 25.0264045185611, 121.656272283019 25.0262568882996, 121.656607888521 25.0260810231379, 121.656806275356 25.0260018664558, 121.657110267136 25.0259674427264, 121.657340684882 25.0259843966009, 121.657634666114 25.0260661579606, 121.657791030983 25.0260939849441, 121.657903473122 25.026097612064, 121.658074349282 25.0260722552496, 121.658394899124 25.0259368345948, 121.658663272606 25.025789943861, 121.658950496734 25.0256472750168, 121.659112704296 25.0255463648062, 121.659264999809 25.0254996268527, 121.659485478041 25.0253986269176, 121.660000449449 25.0250975474299, 121.660032458398 25.0250288040005, 121.659941697192 25.0250058861457, 121.659519736145 25.0251369450506, 121.659454975086 25.0251189784905, 121.659428047278 25.0250617784759, 121.659474843147 25.0249956215158, 121.659737353446 25.0248492294825, 121.660114706564 25.0247178621218, 121.660258827975 25.0246932294704, 121.660116260655 25.0247114296048, 121.660042769888 25.0246852957163, 121.659982325832 25.0246843185681, 121.659823741804 25.0247126585206, 121.659685325319 25.0247691894431, 121.659527378436 25.0247892342473, 121.659439350144 25.0247665635994, 121.65930773476 25.0246520682846, 121.659215832894 25.0245721206921, 121.659065025411 25.0245222665369, 121.658952240471 25.0244849819285, 121.658943443958 25.0244386338312, 121.659090215368 25.0244713633537, 121.659229176121 25.0245291846713, 121.659354841496 25.0246269492423, 121.659439350144 25.0247114296048, 121.659532615009 25.0247540592965, 121.65967399801 25.0247214388603, 121.659802320792 25.024669237476, 121.659959021479 25.0246338231289, 121.660092965982 25.024632990639, 121.660215135224 25.0246562955854, 121.660265790927 25.0246968700466, 121.660389904328 25.0247520278803, 121.660560413193 25.0247382526342, 121.660727861849 25.0246278825703, 121.660923514775 25.0245312972758, 121.661055950008 25.0244887997202, 121.661153620353 25.0244876486404, 121.661312721416 25.0245302780815, 121.661518275356 25.024638494844, 121.661629898418 25.0248798015786, 121.661674865562 25.024929417965, 121.661736455358 25.0249263004473, 121.661758729949 25.0248656328356, 121.661757586648 25.0247464072452, 121.661880490657 25.0244896392118, 121.661902852727 25.024406993634, 121.661872815203 25.024345246284, 121.661668537731 25.0242027516585, 121.661616126975 25.0241384930502, 121.661627661805 25.024062131436, 121.6616872097 25.0240287078297, 121.661762246126 25.0240432271318, 121.662301190866 25.0243604555504, 121.662366664591 25.0244500514835, 121.662382441779 25.0246163375129, 121.662353874938 25.0250407426445, 121.662380689418 25.0252029754109, 121.66247591551 25.0253115029325, 121.663261275356 25.0257516701442, 121.663328962608 25.0258472530952, 121.663359767128 25.0259906290122, 121.663346142358 25.0260806060607, 121.663407616515 25.0264211643052, 121.663487184256 25.0267319267042, 121.663557748284 25.0269035052762, 121.663750610765 25.0272406807851, 121.663767137518 25.0273482396724, 121.663741094237 25.0277020830005, 121.663702364321 25.0276981451796, 121.663723983117 25.02735967467, 121.663712803384 25.0272481277527, 121.66352286296 25.0269062343135, 121.663450390918 25.0267437877418, 121.663374898418 25.0264334763964, 121.663312770108 25.026084616647, 121.663319659797 25.0259975707755, 121.663302620522 25.0258598418528, 121.663238515731 25.0257784954811, 121.662474943862 25.025351464847, 121.662366820317 25.0252559436571, 121.662334774524 25.0251841465274, 121.662313246604 25.0250439298807, 121.662346965738 25.024614256044, 121.662330246444 25.0244689719012, 121.662269706597 25.0243831162423, 121.661755611243 25.0240764855426, 121.661670288318 25.0240699037416, 121.661654634404 25.024125726371, 121.661697963566 25.0241781610828, 121.661912389235 25.0243258350467, 121.661948898965 25.0244052389095, 121.661932621629 25.0244901229029, 121.661805771923 25.0247334478504, 121.661798376717 25.0248739774804, 121.661746946175 25.0249539793104, 121.661668662249 25.0249668694423, 121.661605994728 25.0249078725161, 121.661500216258 25.0246634375471, 121.661303423545 25.024562666841, 121.661152404592 25.024522259352, 121.661057332349 25.0245236977504, 121.660931293245 25.0245622734846, 121.660751294997 25.0246547575323, 121.660573908441 25.0247750616933, 121.660377358731 25.0247871466628, 121.660258471195 25.0247291518826, 121.660142880731 25.0247527801027, 121.659743258104 25.0248726995419, 121.659500609968 25.0250227410236, 121.659471100306 25.0250783521746, 121.659518825429 25.0251091912425, 121.65994436226 25.0249703562808, 121.660035245311 25.0249879147375, 121.660071211476 25.0250417020285, 121.660020598308 25.0251257832486, 121.65949928015 25.0254265550904, 121.659267795399 25.0255368900857, 121.659127080854 25.0255779697152, 121.658963138141 25.0256789540445, 121.658679500893 25.0258204626109, 121.658411004138 25.0259646639574, 121.658073177942 25.0261084307898, 121.6579109627 25.0261318470107, 121.657778857528 25.0261273487903, 121.657621703286 25.0261019035801, 121.657344744423 25.0260193298386, 121.657121435875 25.0260043350739, 121.656815431241 25.0260384541667, 121.656618335012 25.0261168402561, 121.656295311007 25.0262850345803, 121.656146842713 25.026418367226, 121.656115582238 25.0264940470953, 121.656141027305 25.0265381048204, 121.656225890796 25.0265263990286, 121.656675817148 25.0263670110874, 121.656841324888 25.026337705208, 121.656974055327 25.02632355294, 121.657098510729 25.026365488721, 121.657137892204 25.0264589731894, 121.657058381099 25.0265270314174, 121.656774457897 25.0265895075949, 121.656460701824 25.0267675664859, 121.656344501741 25.0268779124839, 121.656133246801 25.0272337016102, 121.656052440056 25.0272728665749, 121.655962046641 25.027278661115, 121.655693934992 25.0271995029576, 121.65523390114 25.0271033491756, 121.655020280309 25.027124288765, 121.654513359685 25.0274127242024, 121.654086863438 25.0274915867757, 121.65394682629 25.0274900962234, 121.653828427402 25.0274735361959, 121.653416969202 25.0272538088924, 121.653261604855 25.0272056528842, 121.652965838046 25.0271718655397, 121.6524944564 25.0272050802113, 121.652371938511 25.0272216422999, 121.652303920622 25.0272765858118, 121.652222556633 25.0275143195348, 121.65208782223 25.0276870115332, 121.651921721457 25.0276725147712, 121.651530586139 25.0275577721904, 121.651415407602 25.0275400448125, 121.650946670537 25.02755657009, 121.650237513658 25.0274446682729, 121.650150474968 25.0274614994987, 121.649755873663 25.0276287733581, 121.649536441595 25.0276606699531, 121.649271033226 25.0276293065372, 121.64901554431 25.027555390016, 121.648723637788 25.0274248210846, 121.648655497683 25.0274117406009, 121.648601190866 25.0274597777166, 121.648487670341 25.0276884575934, 121.648395196354 25.0278028204856, 121.648294334453 25.0278563412881, 121.648182715088 25.0278515643909, 121.647683226962 25.0276506851419, 121.647459746728 25.027593130313, 121.647174111476 25.0275535057752, 121.646994848159 25.027576956798, 121.646741509981 25.0276436238505, 121.646464496726 25.0278316033243, 121.646272854747 25.0280338567361, 121.64623822728 25.0281424450946, 121.646337167705 25.0286071863461, 121.646383765621 25.0287288525638, 121.646348763227 25.0288582740455, 121.6462344104 25.0289827544937, 121.645969449289 25.0290707667034, 121.645566675931 25.0291303889873, 121.645247284454 25.0292695616086, 121.644765128102 25.0293957177167, 121.643873143587 25.0295669310788, 121.643711485703 25.0295894465257, 121.643516930384 25.0296917028726, 121.643397667309 25.0298121861886, 121.643282844752 25.0299003514524, 121.642994694458 25.0300090805814, 121.642823497364 25.0301517763593, 121.642306412236 25.0305861539019, 121.642215037928 25.0307173362839, 121.642111261783 25.0309674614826, 121.64146769382 25.0311889853701, 121.640930921261 25.0315204503305, 121.64061463313 25.0316740141743, 121.640194 25.031828, 121.640049449533 25.0318725210687, 121.639865574987 25.0318923297407, 121.639631401852 25.0319929668421, 121.639282508227 25.0323265275012, 121.638917239099 25.0325715752563, 121.638328123561 25.0329598019716, 121.638214786581 25.0330721229371, 121.638035640322 25.0333120510588, 121.637868678282 25.0335163837084, 121.637730652771 25.033633676056, 121.637470137519 25.0337542820493, 121.636976802109 25.0339066595006, 121.636564005272 25.0341170000009, 121.63632839051 25.0341785746235, 121.635995303789 25.0342257503133, 121.635338490657 25.0344372845871, 121.635059290522 25.0344845131988, 121.634761660912 25.0345543475331, 121.634613398056 25.0345604445579, 121.634266491295 25.0345447027519, 121.63396581952 25.0346095413598, 121.633782130971 25.0347101761485, 121.633703609968 25.0348150341784, 121.633624222008 25.0350965892509, 121.633510509661 25.0351592226139, 121.633359866089 25.0351686970527, 121.633091397088 25.0351388594019, 121.632615741099 25.0351633650532, 121.632309274559 25.0352069514575, 121.631944007025 25.0351369192982, 121.631524078597 25.0351226459962, 121.631225874982 25.035135149363, 121.630816786045 25.0350470676137, 121.630683481249 25.0350531656786, 121.63043524524 25.0350075183493, 121.630169549933 25.0349912576965, 121.630099985605 25.0350115642355, 121.630038566131 25.0350782044555, 121.630014469339 25.0352019273863, 121.629989653104 25.0354197828371, 121.629945739915 25.0355867944185, 121.629875143662 25.0357500983393, 121.629791665228 25.0358756249201, 121.62967361058 25.0359880394106, 121.629552669669 25.0360780644716, 121.629338755237 25.0362755744546, 121.628843846209 25.0367008664956, 121.628671253093 25.0368091729847, 121.628536388385 25.0368750576437, 121.627928916916 25.036946665367, 121.627657350758 25.0370305680974, 121.627302029964 25.0372462512041, 121.626974922186 25.0374761381414, 121.626685004592 25.0376221743877, 121.626555342791 25.0376377037148, 121.625603312646 25.0375072925457, 121.625433839784 25.0375148739341, 121.625297886726 25.0375705261036, 121.625074396341 25.0376086842878, 121.62488660137 25.0376753595042, 121.624786060694 25.0376023616393, 121.624467053378 25.0374990726742, 121.6240696184 25.0372312986475, 121.623931055456 25.0372145779215, 121.623802952082 25.0372304894577, 121.622706696052 25.038233940478, 121.62209463155 25.0387389618318, 121.62169742614 25.0391011935611, 121.620404527453 25.0398613007149, 121.619278556992 25.0406811293156, 121.617987632589 25.041624888264, 121.617308524126 25.0421030244474, 121.617117709268 25.0423186180553, 121.616930774441 25.0425575719457, 121.616225855442 25.0439974685439, 121.615937366977 25.044506008911, 121.615502124905 25.0452593289798, 121.615225227759 25.0458133542637, 121.61519313509 25.0460295289443, 121.615187563168 25.0462626078832, 121.615895853673 25.048106328602, 121.615950455517 25.0483441334224, 121.615830892349 25.049473380796, 121.615731233987 25.0498538008799, 121.615605006228 25.0502642346699, 121.615656077138 25.0507533569931, 121.615743563168 25.0510802634077, 121.615914214392 25.051503979948, 121.616131113879 25.0519456050537, 121.616683167705 25.0551867389378, 121.613948836565 25.055380727515, 121.612954285582 25.0553592881173, 121.612458310496 25.0553810271394, 121.612099952403 25.0553064932194, 121.609132900448 25.0548005691088, 121.607107613094 25.0544789864376, 121.606207753773 25.0543090877982, 121.605592890535 25.0541716426393, 121.604130382863 25.0538932377924, 121.603333824422 25.0537623055416, 121.603155597004 25.05371067899, 121.601432783477 25.0534195466021, 121.600864085641 25.0533631825184, 121.600562977317 25.053349697829, 121.600068585014 25.0533866842208, 121.599481867435 25.0535026577542, 121.598923315533 25.0536527192754, 121.598364350463 25.053816067383, 121.597701307778 25.054040966446, 121.596805641447 25.0542911776154, 121.595660174507 25.0544669739042, 121.59533666454 25.0544780280219, 121.594646995772 25.0544164911915, 121.594780748686 25.0540828095625, 121.595118790927 25.0527535861287, 121.595588772241 25.0508524075241, 121.592668273955 25.0501751771216, 121.592603944336 25.0504287482262, 121.59112500163 25.0500723492791, 121.591254439709 25.0497607743457)","wkt0":"LINESTRING (121.59303029514 25.0501370245158, 121.594249410314 25.0504342994394, 121.595247634849 25.0506639431697, 121.595727853145 25.0507276437252, 121.595590419622 25.0514066316808, 121.595135770354 25.0532814296411, 121.594867295566 25.0542542864711, 121.595019111667 25.0543787884247, 121.595370685793 25.0544453824411, 121.596639548778 25.0542499433774, 121.597344295095 25.0540791149035, 121.59929233537 25.053523196866, 121.599776548826 25.0534073802908, 121.600521246749 25.0533190700787, 121.600963910536 25.0533538150878, 121.602319068988 25.0535362262238, 121.604035389952 25.0538576166126, 121.605794858649 25.0541659768692, 121.607420089953 25.0544555163099, 121.609874716583 25.0548681088312, 121.611952200059 25.0552184494607, 121.612439609643 25.0552850430208, 121.613358496565 25.0552691184771, 121.61359181394 25.0551619896749, 121.614010506764 25.0550809191677, 121.614443582165 25.0551098729264, 121.615007698832 25.0552097633415, 121.616561017246 25.0551098729264, 121.616472324683 25.0546777373668, 121.616230217954 25.0531055328275, 121.615992905419 25.0519126127971, 121.615668498384 25.0512263889761, 121.615551839696 25.0507573223818, 121.615495907449 25.0501261064777, 121.615682880962 25.0496570356733, 121.615812324163 25.0487029632836, 121.615847481576 25.0483844549146, 121.615767578365 25.04797184057, 121.615510290027 25.0473435058831, 121.6151587159 25.0464198190916, 121.615104381717 25.0461867246168, 121.615091597203 25.0458074022259, 121.615308933936 25.0453947792087, 121.615579006788 25.0448808082453, 121.616117554428 25.0439136683098, 121.616422784692 25.0432939997909, 121.616761574305 25.0426337887648, 121.617038039414 25.0423369822111, 121.617223414862 25.0421241497523, 121.617608548337 25.0418287898098, 121.618343657875 25.0412858468833, 121.619088355798 25.0407443494106, 121.61969242407 25.0402984085202, 121.620330051691 25.0398379873282, 121.620831843853 25.0395194559323, 121.621530197914 25.0391270820301, 121.621776299803 25.0389591282419, 121.62240114291 25.0383973501067, 121.623537366565 25.0373794826527, 121.623762693618 25.0371912558823, 121.623845792957 25.0371492667941, 121.624000805186 25.0371651936913, 121.624178190314 25.037212250421, 121.624551338307 25.0374670803973, 121.624749498269 25.0375785683455, 121.624988408869 25.0375713288714, 121.625181774639 25.0375336835993, 121.625290443005 25.0374808354094, 121.625405503629 25.0374402943168, 121.625693155187 25.0374381224721, 121.626568894375 25.0375640893969, 121.626701533705 25.0375380272852, 121.626937248176 25.0374221956104, 121.627518144517 25.0370862831349, 121.627726691897 25.0369690031316, 121.62791766057 25.0369081912339, 121.628167757619 25.0368683739035, 121.628531317227 25.0368263847048, 121.628610421406 25.0368104577636, 121.628884489418 25.0366526361436, 121.629038702615 25.0365288401436, 121.629249647091 25.0363377162491, 121.629675531203 25.0359684987916, 121.629807371501 25.0358048844256, 121.629964780826 25.035496477992, 121.629982359532 25.0353639933, 121.629986354693 25.0352097896259, 121.629993545982 25.0351301538498, 121.630086233706 25.0349802936581, 121.630134175632 25.0349194807745, 121.630305168503 25.0349259964421, 121.63062637941 25.0349824655463, 121.630834127757 25.0349860853598, 121.631184902852 25.0350729608514, 121.631555653749 25.035087440094, 121.632025484627 25.0350845442456, 121.63233391102 25.0351706957059, 121.632474540671 25.0351366695061, 121.632634347092 25.0351156746122, 121.633132144094 25.0350961276388, 121.633238415364 25.0351192944218, 121.633459747258 25.0351120548025, 121.633582798202 25.0350773046243, 121.633630740128 25.0350121480137, 121.633644323674 25.0348673554217, 121.633677083991 25.0347783078928, 121.63374500172 25.0347022916584, 121.633814517513 25.0346545100013, 121.634016672636 25.0345683581785, 121.634182871314 25.0345126128491, 121.634344275799 25.0345003054353, 121.634525656087 25.0345184045728, 121.63468226638 25.0345191285383, 121.634880426342 25.0344937897452, 121.63507299308 25.0344460080068, 121.63545253333 25.0343641998358, 121.635841661966 25.0342288180525, 121.636058199667 25.034155697348, 121.63630989478 25.0341231188022, 121.636506456678 25.0340934361197, 121.636639096008 25.0340398624794, 121.63690916886 25.0338994125545, 121.637208006867 25.0337886452323, 121.637422147472 25.0337408632193, 121.637662656136 25.0336250279591, 121.637879992869 25.0334411392588, 121.638103721858 25.0331211433042, 121.638472874691 25.0328083862707, 121.638861204295 25.0325911934172, 121.639142463596 25.0324044072557, 121.63939815387 25.0322089330612, 121.639588323511 25.0320105626343, 121.639684207364 25.0319410605111, 121.639805660244 25.0318686624242, 121.640178009206 25.0317817846635, 121.640395345938 25.0317021466621, 121.640754910386 25.031553006266, 121.641034571623 25.0314458567434, 121.64153796185 25.0311012400765, 121.64179205406 25.0310317374381, 121.64213723593 25.0309035918455, 121.642225129461 25.0308123694777, 121.642330601699 25.0306002410108, 121.642369754273 25.0305394259561, 121.642619851322 25.0303359848993, 121.64275968194 25.03020783858, 121.642965033192 25.0299689213562, 121.643133628966 25.0299052100179, 121.643354161827 25.0298335347228, 121.643508375024 25.0296807720855, 121.643752878848 25.0295099093844, 121.643918278494 25.0294715376433, 121.644281838102 25.0294288219175, 121.644498375803 25.0293904501511, 121.644677358995 25.0293984141036, 121.644859538315 25.0293412184333, 121.645402880147 25.0291848351986, 121.645525931092 25.0291073675038, 121.645611427527 25.0290624796583, 121.645970991975 25.0290110758151, 121.646082856469 25.0289777719052, 121.646248256115 25.0288974080853, 121.646289805785 25.0288206642082, 121.646308183523 25.0286961363054, 121.646283413528 25.0285115162171, 121.646191524836 25.028166891309, 121.646184333547 25.0280742188996, 121.646214696767 25.0280054385506, 121.646292202881 25.0279214540721, 121.646407263505 25.027832401502, 121.646603026371 25.0276919444714, 121.646755641503 25.0275934796531, 121.646922639213 25.0275341111216, 121.647083244666 25.0275174589673, 121.647215883996 25.0275181829741, 121.647447603307 25.0275326631082, 121.647753632603 25.0276130278219, 121.648238645092 25.0278012692875, 121.648304964756 25.027791857221, 121.648382470871 25.0277491409105, 121.648510316008 25.0276166478528, 121.648567846319 25.0274276820967, 121.648652943239 25.0273610734084, 121.648755219348 25.027359625393, 121.648920219478 25.0274609864273, 121.649183900073 25.0275290430749, 121.649497120659 25.0275855155835, 121.649614578378 25.027600719716, 121.649929397028 25.0274877746867, 121.650245813742 25.027361797416, 121.650619760768 25.0274269580894, 121.651127945187 25.0275239750279, 121.651361262562 25.0274863266729, 121.651827897312 25.0276021677285, 121.652070803072 25.0276514001441, 121.652205040466 25.0275471432407, 121.652302522383 25.027349489285, 121.652331287539 25.0272503001835, 121.652423975263 25.0271764513114, 121.6527036365 25.0271373548317, 121.653248576397 25.0271344587957, 121.653477898611 25.0272220638553, 121.653839061123 25.0274204420237, 121.654025235604 25.0274501263205, 121.654145889452 25.0274508503277, 121.654449521652 25.0274052378688, 121.654575768725 25.0273473172617, 121.65488499415 25.0271800713552, 121.655019231544 25.027099706358, 121.655147076681 25.0270685739576, 121.655372403735 25.0270671259388, 121.655504244032 25.0270794340982, 121.655853421063 25.027180795364, 121.656022815869 25.0271952755379, 121.656081944245 25.027177899329, 121.656317658716 25.0269259440221, 121.65643271934 25.0267471133611, 121.656511024486 25.0266834003501, 121.656843421842 25.0265139815008, 121.657032792451 25.026486469016, 121.657103906309 25.0264806769131, 121.657144656946 25.0264155157373, 121.657109499533 25.0263525265678, 121.657014414713 25.0263431143902, 121.656641266719 25.0264133436975, 121.656410346441 25.0264712647454, 121.656281702271 25.0265118094627, 121.656193009708 25.0265552502164, 121.656070757795 25.0266971565711, 121.655992452649 25.0267217729629, 121.655954099108 25.0266978805827, 121.65593572137 25.0266653000568, 121.655931726209 25.0265965189181, 121.655980467167 25.0265320818163, 121.656032404254 25.0264705407325, 121.656153857135 25.0263887272439, 121.656246544859 25.0263358742532, 121.656471871913 25.0262504406037, 121.65659971705 25.0261910714224, 121.65670598832 25.0261063616871, 121.656758724439 25.0260643688053, 121.656835431521 25.0260274440179, 121.656988845685 25.0259926912668, 121.657226158221 25.0259593865377, 121.657407538509 25.0259745908717, 121.657638458788 25.0260477164516, 121.657858991649 25.0260882613088, 121.658019597102 25.0260882613088, 121.658163422881 25.0260477164516, 121.658514197976 25.0258616443458, 121.658627660535 25.0257957588244, 121.658844997268 25.0257248051463, 121.659051147551 25.0256082383005, 121.659207757844 25.0255097718104, 121.659341995238 25.0254800870442, 121.65953616004 25.0253722081992, 121.65978306096 25.0251919272332, 121.659918896418 25.0251202491852, 121.660066717358 25.0250507431593, 121.660056329941 25.0250015097004, 121.660003593822 25.0249928214409, 121.659918896418 25.0250073018731, 121.659535361007 25.0251470379555, 121.659468242311 25.0251513820799, 121.659433084898 25.0251202491852, 121.659409113935 25.0250514671806, 121.659428290705 25.0249942694842, 121.659560930035 25.024926211431, 121.65979424741 25.0248147119857, 121.660022770592 25.0247336214165, 121.660225724747 25.0246916280649, 121.660332795049 25.0247039364625, 121.660496596631 25.0247401376249, 121.660592480484 25.0247155208356, 121.660697952722 25.0246525307936, 121.660840180437 25.0245504434154, 121.661001584922 25.0244787649928, 121.661207735205 25.0244570442504, 121.661394708718 25.024535238905, 121.661584079327 25.0246329821533, 121.661662384474 25.0248921823903, 121.661720713818 25.0249023187013, 121.66175187607 25.0248668416091, 121.661763861551 25.0247524460177, 121.661810205413 25.0246358782483, 121.661908486362 25.0244946935348, 121.661937251518 25.0243976742015, 121.661865338629 25.0243223755617, 121.661671972859 25.0241761223023, 121.661610447387 25.0241153040639, 121.661576888038 25.0240443494144, 121.66161524158 25.0240095961017, 121.661686355437 25.0239864272211, 121.661864539597 25.0240595539856, 121.662398293043 25.0244411157035, 121.6624046853 25.0244983136577, 121.662358341438 25.024806023713, 121.662320786929 25.0250174381745, 121.662348753053 25.0251868590898, 121.662456622387 25.0253179067313, 121.662663571703 25.025437369929, 121.663310787709 25.0257610060076, 121.663417058979 25.0258457159812, 121.66336831802 25.0260122396905, 121.66336432286 25.0262236520742, 121.663450618327 25.02656538639, 121.663543306051 25.0268730912627, 121.663615218941 25.0269816927983, 121.663771030202 25.0271996195898, 121.663784214231 25.0274309401294)","wkt1":"LINESTRING (121.663784214231 25.0274309401294, 121.663727249771 25.0274315990274, 121.663740666982 25.0273096688524, 121.663697519248 25.0271778993289, 121.663608826684 25.0270294774435, 121.663527325409 25.0269085677749, 121.66347059413 25.0267355291797, 121.663313184805 25.0261302541825, 121.663323572222 25.0259716948082, 121.663305194484 25.0258247194975, 121.663149383223 25.0257182889902, 121.662630012354 25.0254518503087, 121.662425460135 25.0253200787905, 121.662291222741 25.0251636904315, 121.662280835324 25.0249566203532, 121.66231359564 25.0248074717586, 121.662347154989 25.0246257419155, 121.662339164668 25.0244787649929, 121.662285629517 25.0243882618742, 121.661945241839 25.024158745666, 121.661750278005 25.0240508656596, 121.661699139951 25.0240624500943, 121.661691948662 25.0241153040641, 121.661868534757 25.0242557651881, 121.661988389573 25.024387537849, 121.661950835064 25.0245048298787, 121.661803813157 25.0247567901561, 121.661805411221 25.0249160751221, 121.661785435418 25.0249892013327, 121.661701537047 25.0249783410071, 121.661613643515 25.0249348996953, 121.661581682231 25.0248422248454, 121.661544926754 25.0246909040416, 121.66149778386 25.0246264659393, 121.661297226801 25.0245316187833, 121.661170180697 25.0245091740258, 121.661059914266 25.0245041058542, 121.660923279776 25.0245468232942, 121.660752286905 25.0246684593131, 121.660661197245 25.024731449347, 121.660546136622 25.0247806829142, 121.660467032443 25.0247864750973, 121.660264078288 25.0247466538331, 121.660147419601 25.0247473778562, 121.65991170513 25.0248161600312, 121.659699961621 25.0249124550115, 121.659493012306 25.0250167141531, 121.659463448118 25.0250710157543, 121.659523375526 25.0251021486615, 121.65964243131 25.0250637755422, 121.659811027084 25.0250051298084, 121.659902116744 25.0249718248113, 121.660014780271 25.0249530002438, 121.660117855413 25.024986305246, 121.660145821537 25.0250384347965, 121.660122649605 25.0250869442194, 121.65997642673 25.0251593463075, 121.659691172268 25.0252867738789, 121.659385942004 25.0255039796615, 121.65922333897 25.0255466967535, 121.659145033824 25.0255720373943, 121.658941680153 25.0257222710857, 121.658790663085 25.0257801924598, 121.65869198262 25.0258149452711, 121.658467454598 25.0259242717592, 121.658127865953 25.0261067236947, 121.658068737577 25.0261237380479, 121.657911328252 25.0261309781974, 121.657777490374 25.0261143258528, 121.657626473306 25.0260730569889, 121.657482647527 25.0260270820102, 121.657267707891 25.0259963113455, 121.657128276788 25.026004999534, 121.656800274109 25.0260824691872, 121.65675153315 25.026101655589, 121.656686412033 25.0261751431006, 121.656589729149 25.026242838454, 121.656279704692 25.0263597667039, 121.656058372798 25.0265038453229, 121.65598526136 25.0265965189181, 121.655975273459 25.0266526298499, 121.655996847326 25.0266696441274, 121.65602481345 25.0266653000568, 121.656044789252 25.0266529918559, 121.656093130695 25.0265965189181, 121.656185019387 25.0265168775514, 121.656240552118 25.0264835729646, 121.656327247102 25.0264556984665, 121.656504632229 25.0264064655713, 121.656707186868 25.0263536125882, 121.656910141023 25.0263025696172, 121.657124281628 25.0263025696172, 121.657208979031 25.026460404551, 121.657158240492 25.0265016732847, 121.657058760995 25.0265451140419, 121.656938506663 25.0265570602474, 121.65682943878 25.0265845727164, 121.6566432643 25.0266566119151, 121.65654098819 25.0267272030487, 121.65648225933 25.02679308807, 121.656344825808 25.0269469403174, 121.656233360829 25.0270837781541, 121.65611790069 25.0271956375422, 121.656038396996 25.0272607983038, 121.655980467168 25.0272651423534, 121.655904958634 25.0272441461125, 121.655761132855 25.0271978095682, 121.655492258551 25.0271159965644, 121.655435527271 25.0271080324638, 121.655220188119 25.0271054984316, 121.655093142014 25.0271210646282, 121.654989667356 25.0271554550553, 121.65490017576 25.0272137377573, 121.654767935947 25.0272839665663, 121.654483081001 25.0274215280346, 121.654213008149 25.0274700365156, 121.654103540751 25.0274743805577, 121.65386063499 25.0274613484308, 121.653667269221 25.0273447832345, 121.653421167332 25.0272224258595, 121.65317746254 25.027165229175, 121.652948140325 25.0271695732279, 121.652492692025 25.0271978095682, 121.65241119075 25.0272332859865, 121.652283345613 25.0274852406624, 121.652120343063 25.0276778263589, 121.652046033078 25.0276937544857, 121.651902207299 25.0276488661231, 121.651612957676 25.0275771895101, 121.651390027719 25.0275185449774, 121.651146322926 25.0275648814006, 121.65073402236 25.0274816206276, 121.650499905952 25.0274352841729, 121.650284167284 25.0274092199095, 121.650110777317 25.0274418002379, 121.649690486429 25.027628593954, 121.64957702387 25.0276437980811, 121.64896256818 25.0275091328893, 121.648766006282 25.0274171839906, 121.648672519526 25.0274237000565, 121.648610195022 25.0274483163026, 121.648541478261 25.027617733862, 121.648430412798 25.02775312294, 121.648334528945 25.0278182834056, 121.648241042189 25.0278342115142, 121.647732058737 25.027638730039, 121.647568257155 25.027590945631, 121.647402857509 25.0275619853747, 121.647278208501 25.0275446092176, 121.64704249403 25.0275605373617, 121.646978571461 25.0275619853747, 121.646855520517 25.0276090457877, 121.646543897996 25.0277770151148, 121.646344939001 25.0279362961608, 121.646258643534 25.0280340367003, 121.646233873538 25.0281614612868, 121.646288207722 25.0283822819899, 121.646348934162 25.0286878103073, 121.646347336097 25.0287906182431, 121.646311379653 25.0289035620732, 121.646245059988 25.0289549659615, 121.645990967778 25.0290432937192, 121.645725689119 25.029078769604, 121.645577069147 25.029122209449, 121.645401282084 25.0292156050636, 121.644661378354 25.0294313559015, 121.644518351607 25.0294306319061, 121.644315397452 25.0294653836836, 121.643852757862 25.0295399551731, 121.643688956281 25.0296051146899, 121.643521159538 25.0297361576133, 121.643463629227 25.029810004945, 121.64333578409 25.0298947121236, 121.643156800898 25.0299374276872, 121.643080892848 25.029971455329, 121.642960239 25.0300518184454, 121.642829197735 25.0301756209813, 121.642745299363 25.030289287527, 121.642397720397 25.0305694714927, 121.642363362017 25.0306353544511, 121.642317817187 25.0307316448652, 121.642222732366 25.0308525507669, 121.64214442722 25.0309792484402, 121.641689777951 25.0311088419249, 121.641521182177 25.0311573489483, 121.641022586143 25.031497621558, 121.640572731067 25.0316815131713, 121.640201181138 25.0318183457283, 121.639880769263 25.0318871239401, 121.639725757035 25.0319776215284, 121.639585127384 25.0320724629294, 121.63939016355 25.0322614215326, 121.639220768744 25.032393909575, 121.63893871041 25.0325806957525, 121.638537596293 25.0328362593254, 121.638224375708 25.033069379174, 121.638142874433 25.0331526361555, 121.638027813809 25.0333205978939, 121.637917547379 25.0334994189748, 121.637779314824 25.0336109105289, 121.637450113597 25.0337861113378, 121.637271130405 25.0338353412721, 121.636994665296 25.0339091861366, 121.636709410834 25.0340481881138, 121.636551202477 25.0341307204633, 121.636223599314 25.034187913901, 121.635955923559 25.0342378676412, 121.635517254932 25.0343739733808, 121.635286334654 25.0344492658528, 121.634703840248 25.0345578606829, 121.634318706773 25.0345441053431, 121.634149311967 25.0345585846481, 121.633806527193 25.0347033776045, 121.633739408496 25.0347620187032, 121.633682677217 25.0348749570366, 121.63366110335 25.0350530518895, 121.633593984653 25.0351182084785, 121.633526066924 25.0351449950661, 121.633305534063 25.0351536826068, 121.63314892377 25.035142099219, 121.632994710574 25.0351247241354, 121.632607979034 25.0351435471426, 121.632487325186 25.0351840889943, 121.632303547802 25.0352000161466, 121.631966356253 25.0351283439447, 121.631700278562 25.0351138647069, 121.631396646361 25.0351087969733, 121.631181706725 25.0351066250874, 121.63080056841 25.0350197496196, 121.630145362083 25.0349813796018, 121.630088630804 25.0350421924547, 121.630048679199 25.0351529586451, 121.630012722754 25.0355562046501, 121.629849720204 25.0358074182776, 121.629761826673 25.0359283191772, 121.629504538334 25.0361455061226, 121.62903231036 25.0365755351402, 121.628919646833 25.0366739927503, 121.628634392371 25.0368470173296, 121.628085457314 25.0369157927222, 121.6278561351 25.0369635734985, 121.627452623886 25.0371633838162, 121.627057102994 25.0374088025654, 121.626868531417 25.0374992960805, 121.626707126931 25.0375811021608, 121.626569693409 25.0376020966327, 121.626382719896 25.0375716908446, 121.62591368805 25.0374985721326, 121.625703542606 25.037474681851, 121.625434268786 25.0374710621109, 121.625208941732 25.0375803782134, 121.624978820486 25.0376209192597, 121.624776665363 25.0376730434424, 121.624629643455 25.0375868937396, 121.624286858682 25.0373747769864, 121.624165405802 25.037273424142, 121.624051144211 25.0372328829809, 121.623947270037 25.0372111644961, 121.623868165858 25.0372184039915, 121.623749909107 25.0372727001929, 121.623206567275 25.0377439902112, 121.622660029314 25.0382623347455, 121.622190198436 25.0386894605787, 121.621729955943 25.0390601177234, 121.621389568266 25.0392845384971, 121.620459494894 25.0398318338879, 121.620178235593 25.0400244002038, 121.619315280918 25.040649876678, 121.61869363394 25.0411030555565, 121.618174263071 25.0414708097094, 121.617650098009 25.0418848937744, 121.617225012929 25.0422019711866, 121.616999685875 25.0425436609961, 121.616684867225 25.0430735678855, 121.616381235025 25.0436121594266, 121.615978522843 25.0444461029521, 121.615524672607 25.0452395022917, 121.61525619782 25.0458055924779, 121.615190677187 25.0461689891484, 121.61528656104 25.0464759209555, 121.615526270671 25.0471071556531, 121.615879442862 25.0479338365462, 121.615964140266 25.0483609286943, 121.615949757688 25.0487272133175, 121.615818716422 25.0497406433312, 121.615671694515 25.050030193225, 121.615615762267 25.0504022638344, 121.615809128037 25.0513056523656, 121.615975326715 25.0515459757576, 121.616157506035 25.0519918757428, 121.61622782086 25.0524681762081, 121.616338087291 25.0531370205458, 121.616440363401 25.0536031826229, 121.616563414345 25.0545166814278, 121.616702445931 25.0551826192135, 121.615505495837 25.055292643369, 121.613606995553 25.0553737137361, 121.612537890595 25.0553693706821, 121.611484766279 25.0552130206348, 121.609778033701 25.054932169123, 121.607898710187 25.0546078861645, 121.605656626098 25.0542054266567, 121.603644663255 25.0538507400239, 121.602238366748 25.0535988395062, 121.601733378457 25.0535061863119, 121.601252361129 25.0534381440778, 121.600851247012 25.0534062945085, 121.600538026426 25.0533976082609, 121.600025047814 25.0534468303226, 121.5994049989 25.0535698853905, 121.598802528692 25.0537088650833, 121.597821317266 25.054021568816, 121.596645142006 25.0543386148416, 121.595467368682 25.0545007567843, 121.594799377841 25.0545022044792, 121.594716278502 25.0544906229192, 121.594863300409 25.0537045219703, 121.595117392619 25.0527678536679, 121.595417828691 25.0515343939182, 121.595564850598 25.0508264519065, 121.594428626944 25.0505788883977)","CustomRouteInfo":null,"CustomRouteInfoEN":null});
        var objArr = jQuery.parseJSON(routeJsonString);
        var TrackObj=null;
        var layerWkt=null;
        var layerWkt0=null;
        var layerWkt1=null;

        $(function() {
            // Configure toastr options
            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": true,
                "progressBar": true,
                "positionClass": "toast-top-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            // Init Map
            initialize();
            //// 畫去程的站點
            pointRouteStopsLMap(true);
            //// 畫路線軌跡
            //drawRouteTrack();

            //var routePathBounds = new google.maps.LatLngBounds();
            //var path = new google.maps.MVCArray();

            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)) {
                var latlngs = [];
                //for (var i = 0; i < objArr.RouteTracks.length; i++) {
                //    var pointA = [objArr.RouteTracks[i]
                //        .Latitude,
                //        objArr.RouteTracks[i].Longitude];
                //    latlngs.push(pointA);
                //}
                if (TrackObj != null)
                {
                    map.removeLayer(TrackObj);
                }
                var wkt = new Wkt.Wkt();
                if (objArr.wkt0==null)
                {
                    wkt.read(objArr.wkt);}
                else{
                    wkt.read(objArr.wkt0);
                }

                if( map==null)
                {}
                else{
                    //map.defaults.color = '#9863b6';
                    TrackObj= wkt.toObject({
                        color: '#9863b6',
                        strokeColor: '#9863b6',
                        strokeOpacity: 0.8,
                        strokeWeight: 2,
                        fillColor: '#9863b6',
                        fillOpacity: 0.35,
                        editable: false
                    }); // Make an object
                    TrackObj.addTo(map);

                    //var firstpolyline = L.polyline(latlngs ,{ color: '#9863b6',
                    //    weight: 4,
                    //    opacity: 1.0,
                    //    smoothFactor: 1}).addTo(map);
                    //map.fitBounds(firstpolyline.getBounds());
                    //routePath=firstpolyline;

                }
            }

            $('.stationlist-go, .stationlist-come')
                .click(function() {
                    if ($(this).hasClass('stationlist-go')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("left");
                            $('#BackDirectionRoute').toggle("left");

                            pointRouteStopsLMap(true);

                            TrackObj.setStyle({
                                color: '#9863b6'
                            });
                            TrackObj.options.color="#9863b6";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt0 != null && objArr.wkt0.length != 0)){ if( map==null)
                            {}
                            else{
                                if( map==null)
                                {}
                                else{
                                    if (TrackObj != null)
                                    {
                                        map.removeLayer(TrackObj);
                                    }
                                    var wkt = new Wkt.Wkt();
                                    if (objArr.wkt0==null)
                                    {
                                        wkt.read(objArr.wkt);}
                                    else{
                                        wkt.read(objArr.wkt0);
                                    }
                                    TrackObj= wkt.toObject({
                                        color: '#9863b6',
                                        strokeColor: '#9863b6',
                                        strokeOpacity: 0.8,
                                        strokeWeight: 2,
                                        fillColor: '#9863b6',
                                        fillOpacity: 0.35,
                                        editable: false
                                    }); // Make an object
                                    TrackObj.setStyle({
                                        color: '#9863b6'
                                    });
                                    TrackObj.options.color="#9863b6";
                                    TrackObj.addTo(map);
                                }



                            }
                            }
                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();


                        }

                    }
                    if ($(this).hasClass('stationlist-come')) {
                        if ($(this).hasClass('stationlist-come-go')) {
                            event.preventDefault();
                        } else {
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go-gray');
                            $('.stationlist-go, .stationlist-come').toggleClass('stationlist-come-go');

                            $('#GoDirectionRoute').toggle("right");
                            $('#BackDirectionRoute').toggle("right");
                            pointRouteStopsLMap(false);

                            TrackObj.setStyle({
                                color: '#916955'
                            });
                            TrackObj.options.color="#916955";
                            if ((objArr.wkt != null && objArr.wkt.length != 0)||(objArr.wkt1 != null && objArr.wkt1.length != 0)) {if( map==null)
                            {}
                            else{
                                if (TrackObj != null)
                                {
                                    map.removeLayer(TrackObj);
                                }
                                var wkt = new Wkt.Wkt();
                                if (objArr.wkt1==null)
                                {
                                    wkt.read(objArr.wkt);}
                                else{
                                    wkt.read(objArr.wkt1);
                                }
                                TrackObj= wkt.toObject({
                                    color: '#9863b6',
                                    strokeColor: '#9863b6',
                                    strokeOpacity: 0.8,
                                    strokeWeight: 2,
                                    fillColor: '#9863b6',
                                    fillOpacity: 0.35,
                                    editable: false
                                }); // Make an object
                                TrackObj.setStyle({
                                    color: '#916955'
                                });
                                TrackObj.options.color="#916955";
                                TrackObj.addTo(map);
                            }}

                            stopStationStatusReport();
                            stationStatusReport();
                            stopBusStatusReport();
                            busStatusReport();
                        }

                    }
                });

            $('.stationlist-list-pool li a')
                .click(function() {
                    var idx = $(this).find('.auto-list-stationlist-number').text();
                    var activedMarker = overlays[(parseInt(idx) - 1)];
                    map.flyTo(activedMarker._latlng);
                    activedMarker.openPopup();
                    //google.maps.event.trigger(activedMarker, 'click');
                    //centerMapTo(activedMarker.getPosition().lat(), activedMarker.getPosition().lng());

                    var stopId = $(this).find('input[name="item.UniStopId"]').val();
                    document.getElementById("routeList").href = SitePath + "Stop/RoutesOfStop?stopid=" + stopId;
                    if('0151000520'=='0100020200' || '0151000520'=='0100027700')
                    {
                        stopStatusRecent3Report(stopId);//vic
                    }
                    //Set value to bus arrival alert dialog
                    $('#selected_stop_id').val(stopId);
                    $('#selected_stop_name').val($(this).find('.auto-list-stationlist-place').text());

                    $("#Toolbar")
                        .dialog({
                            autoOpen: true,
                            width: $('#Login_DL').width(),
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });

            $('#busAlert')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();

                    $("#SetAlertTime")
                        .dialog({
                            autoOpen: true,
                            width: 500,
                            modal: true,
                            show: {
                                effect: "clip",
                                duration: 600
                            },
                            buttons: {},
                            hide: {
                                effect: "clip",
                                duration: 500
                            }
                        });
                    $(".ui-dialog-titlebar").hide();
                });


            $('#addToMybus')
                .click(function() {
                    $("#Toolbar").dialog("close");
                    $("#Toolbar").dialog("destroy");
                    $("#Toolbar").hide();
                    var isSuccess = true;
                    $('#AddToMyBus').find('ul').html('');
                    $.ajax({
                        url: '/MyBus/MyBusGroup',
                        type: 'post',
                        dataType: 'json',
                        beforeSend: function() {
                        },
                        error: function(response) {
                            isSuccess = false;
                            toastr["error"](i18n._('Not log in'), "");
                        },
                        success: function(response) {
                            $.each(response,
                                function(idx, value) {
                                    $('#AddToMyBus')
                                        .find('ul')
                                        .append(
                                            $('<li></li>')
                                            .append($('<a>')
                                                .attr({ href: "javascript:AddMyBus('" + value.GroupId + "');" })
                                                .addClass('dialog-chose-bos-group')
                                                .append(value.GroupName))
                                        );
                                });
                        },
                        complete: function() {
                            if (isSuccess) {
                                $("#AddToMyBus")
                                    .dialog({
                                        autoOpen: true,
                                        modal: true,
                                        width: $('#Login_DL').width(),
                                        show: {
                                            effect: "clip",
                                            duration: 600
                                        },
                                        buttons: {},
                                        hide: {
                                            effect: "clip",
                                            duration: 500
                                        }
                                    });
                                $(".ui-dialog-titlebar").hide();
                            }
                        }
                    });
                });

            //$('.stationlist-move-table-icon')
            //    .click(function() {
            //        toggleRouteListAndChart();
            //    });

            $('.stationlist-bus-info-table-icon')
                .click(function() {
                    $('.stationlist-move-route-bus-info').slideToggle();
                });

            stationStatusReport();
            busStatusReport();


        });

        function AddMyBus(gid) {
            var RouteId = objArr.UniRouteId;
            var StopId = $('#selected_stop_id').val();
            $('#AddToMyBus').dialog("close");
            $('#AddToMyBus').dialog("destroy");
            $('#AddToMyBus').hide();
            addToMyBus(RouteId, StopId, gid);

        }

        function setAlertConfirm(stime) {
            var RouteId = objArr.UniRouteId;
            var RouteName = objArr.Name;
            var StopId = $('#selected_stop_id').val();
            var StopName = $('#selected_stop_name').val();
            var direction = $('.stationlist-back').hasClass('stationlist-come-go') ? 0 : 1;
            $('#SetAlertTime').dialog("close");
            $('#SetAlertTime').dialog("destroy");
            $('#SetAlertTime').hide();
            AlertAdd(RouteId, RouteName, StopId, StopName, direction, stime);
        }
    </script>


    <script>
       
        $(function () {
            window.alert = sweetAlert;

            // Selected language radio button
            $('input[name=culture]').click(function () {
                $('.teBUS-pad-main-nav-icon').slideToggle({
                    complete: function () {
                        $('#SetCultureForm').submit();
                    }
                })
            });
            $('#Loading_DL').show();
            $('#Loading_DL').dialog({
                autoOpen: false,
                modal: true,
                width: $('#Loading_DL').width(),
                minHeight: 60,
                show: false,
                buttons: {},
                hide: false
            });
            $(".ui-dialog-titlebar").hide();

            // Scroll to Top Action
            $('a.tebus-up').click(function () {
                $('body, html').animate({
                    scrollTop: 0
                }, 700);
                return false;
            });
        });

        function OpenLoadingDialog() {
            if ($('#Loading_DL').dialog("instance") !== undefined) {
                $('#Loading_DL').dialog("open");
            }
        }

        function CloseLoadingDialog() {
            $('#Loading_DL').dialog("close");
        }

        function toggleMenu() {
            $('.teBUS-pad-main-nav-icon').slideToggle();
        }

        function goTop() {
            window.document.body.scrollTop = 0;
        }

        //$(".nav-language-link").click(function () {
        //    href = $(this).attr('href');
        //    lang = href.match('(^|/?)?culture=([^&]*)(&|$)');

        //    localStorage["culture"] = lang[2];
        //});
    </script>
</body>


</html>
