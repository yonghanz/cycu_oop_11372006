function AlertDelete(n){BusAlt.Delete(n)}function AlertAdd(n,t,i,r,u,f){BusAlt.Add(n,t,i,r,u,f)}function toggleBusAlert(){$("#bus_alert").animate({width:"toggle",opacity:"toggle",height:"toggle"})}function BArrialAlert(n){return this._construct(n)}var BusAlt;$(function(){var i=$(".map-date"),t=document.createElement("a"),n;t.href="javascript:toggleBusAlert();";t.className="arrival-bus-remind-icon";t.title=i18n._("Arrival Reminder");i.append(t);n=document.createElement("div");n.id="bus_alert";n.className="arrival-bus-c";n.style.display="none";i.append(n);BusAlt=new BArrialAlert("bus_alert")});BArrialAlert.prototype={_construct:function(n){var t=this.Cntr!=undefined,i=t?this.Cntr:document.getElementById(n);t||(this.Cntr=i);this._drawTable()},_drawTable:function(){for(var u,i,n,t,f,e,o,s,r;this.Cntr.firstChild;)this.Cntr.removeChild(this.Cntr.firstChild);if(u=document.createElement("p"),u.className="arrival-bus-h1",u.innerText=i18n._("Arrival Reminder"),this.Cntr.appendChild(u),localStorage.bus_alert!==undefined)for(i=JSON.parse(localStorage.bus_alert),n=0;n<i.length;n++)t=document.createElement("div"),t.className="arrival-bus-content",f=document.createElement("span"),f.className="arrival-bus-number",f.appendChild(document.createTextNode(i[n].RouteName)),t.appendChild(f),e=document.createElement("span"),e.className="arrival-bus-come-go",e.appendChild(document.createTextNode(i[n].IsGoDir===1?i18n._("Go"):i18n._("Return"))),t.appendChild(e),o=document.createElement("span"),o.className="arrival-bus-place",o.appendChild(document.createTextNode(i[n].StopName)),t.appendChild(o),s=document.createElement("span"),s.className="arrival-bus-time",s.appendChild(document.createTextNode(parseInt(i[n].SetTime)/60+i18n._("Mins"))),t.appendChild(s),r=document.createElement("a"),r.className="arrival-bus-delete",r.href="javascript:AlertDelete("+n+");",r.innerHTML='<img src="'+SitePath+'images/mybus_group_cancel.svg">',t.appendChild(r),this.Cntr.appendChild(t)},Add:function(n,t,i,r,u,f){var s={RouteId:n,RouteName:t,StopId:i,StopName:r,IsGoDir:u,SetTime:f},o,e;localStorage.bus_alert===undefined&&(o=[],localStorage.bus_alert=JSON.stringify(o));e=JSON.parse(localStorage.bus_alert);e.push(s);localStorage.bus_alert=JSON.stringify(e);this._drawTable()},Delete:function(n){var t=JSON.parse(localStorage.bus_alert);t.splice(n,1);localStorage.bus_alert=JSON.stringify(t);this._drawTable()}}